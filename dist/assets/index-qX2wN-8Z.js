import{j as n,C as jl,A as Ye,m as K,U as Tn,S as hi,L as qr,a as Gt,b as Mr,c as Ln,B as Nl,d as Pn,e as kl,f as Nx,g as In,h as gt,M as Cl,D as pi,i as vn,k as El,l as $r,H as Wh,n as Qs,o as Un,u as kx,p as lu,q as at,T as Zh,r as Rn,s as mi,Z as Wt,I as Cx,t as Ex,v as Kh,X as Ht,w as fi,x as nr,y as xi,z as Ee,E as Ls,F as Sl,G as _i,P as Sx,J as Js,K as Ax,N as Tx,O as Gr,Q as Wo,R as Nt,V as ha,W as ji,Y as pa,_ as Yn,$ as Al,a0 as Zo,a1 as yn,a2 as gi,a3 as Ar,a4 as ma,a5 as Px,a6 as Ix,a7 as Tl,a8 as Yh,a9 as Rx,aa as Mx,ab as Lx,ac as Ox,ad as cu,ae as uu,af as Ko,ag as Yo,ah as Xo,ai as li,aj as Xh,ak as Dx,al as Lr,am as ea,an as Or,ao as Wi,ap as cn,aq as du,ar as Qh,as as zx,at as Fx,au as Bx,av as Pl,aw as Ux,ax as Il,ay as Rl,az as Jh,aA as ep,aB as tp,aC as Vx,aD as Hx,aE as qx,aF as Wr,aG as $x,aH as hu,aI as Gx,aJ as Wx,aK as Zx,aL as Kx,aM as Yx,aN as Xx,aO as ui,aP as np,aQ as ip,aR as Qx,aS as Jx,aT as eg,aU as pu,aV as tg,aW as ng,aX as ig,aY as rg,aZ as sg,a_ as ag,a$ as og,b0 as mu,b1 as lg,b2 as cg}from"./vendor-ui-I6gPZN1b.js";import{b as ug,g as pn,a as T,R as te,c as dg,u as _t,d as Ml,O as rp,L as it,e as sp,f as ap,h as hg,r as op,N as Dr,i as pg,j as io,B as mg,k as fg,l as Be}from"./vendor-react-BWPgFAjo.js";import{_ as xg,C as gg,r as fu,a as bg,g as vg,b as yg,c as Ll,d as wg,i as lp,p as _g,u as jg,F as Ng,e as kg,f as Cg,h as Eg,q as tt,l as Ol,o as Ni,w as Oe,j as $e,k as Ot,G as Sg,m as Ag,n as ze,s as hn,t as Lt,v as di,x as Tg,y as Pg,z as Ig,A as Rg,B as xu,D as Mg,E as Zt,H as fa,T as wn,I as Et,J as gu,K as cp}from"./vendor-firebase-Czky8gFj.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();var ys={},bu;function Lg(){if(bu)return ys;bu=1;var e=ug();return ys.createRoot=e.createRoot,ys.hydrateRoot=e.hydrateRoot,ys}var Og=Lg();const Dg=pn(Og);var ro,vu;function zg(){if(vu)return ro;vu=1;var e=typeof Element<"u",t=typeof Map=="function",i=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(o,c){if(o===c)return!0;if(o&&c&&typeof o=="object"&&typeof c=="object"){if(o.constructor!==c.constructor)return!1;var u,h,d;if(Array.isArray(o)){if(u=o.length,u!=c.length)return!1;for(h=u;h--!==0;)if(!a(o[h],c[h]))return!1;return!0}var f;if(t&&o instanceof Map&&c instanceof Map){if(o.size!==c.size)return!1;for(f=o.entries();!(h=f.next()).done;)if(!c.has(h.value[0]))return!1;for(f=o.entries();!(h=f.next()).done;)if(!a(h.value[1],c.get(h.value[0])))return!1;return!0}if(i&&o instanceof Set&&c instanceof Set){if(o.size!==c.size)return!1;for(f=o.entries();!(h=f.next()).done;)if(!c.has(h.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(c)){if(u=o.length,u!=c.length)return!1;for(h=u;h--!==0;)if(o[h]!==c[h])return!1;return!0}if(o.constructor===RegExp)return o.source===c.source&&o.flags===c.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof c.valueOf=="function")return o.valueOf()===c.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof c.toString=="function")return o.toString()===c.toString();if(d=Object.keys(o),u=d.length,u!==Object.keys(c).length)return!1;for(h=u;h--!==0;)if(!Object.prototype.hasOwnProperty.call(c,d[h]))return!1;if(e&&o instanceof Element)return!1;for(h=u;h--!==0;)if(!((d[h]==="_owner"||d[h]==="__v"||d[h]==="__o")&&o.$$typeof)&&!a(o[d[h]],c[d[h]]))return!1;return!0}return o!==o&&c!==c}return ro=function(c,u){try{return a(c,u)}catch(h){if((h.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw h}},ro}var Fg=zg();const Bg=pn(Fg);var so,yu;function Ug(){if(yu)return so;yu=1;var e=function(t,i,s,a,o,c,u,h){if(!t){var d;if(i===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[s,a,o,c,u,h],p=0;d=new Error(i.replace(/%s/g,function(){return f[p++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};return so=e,so}var Vg=Ug();const wu=pn(Vg);var ao,_u;function Hg(){return _u||(_u=1,ao=function(t,i,s,a){var o=s?s.call(a,t,i):void 0;if(o!==void 0)return!!o;if(t===i)return!0;if(typeof t!="object"||!t||typeof i!="object"||!i)return!1;var c=Object.keys(t),u=Object.keys(i);if(c.length!==u.length)return!1;for(var h=Object.prototype.hasOwnProperty.bind(i),d=0;d<c.length;d++){var f=c[d];if(!h(f))return!1;var p=t[f],x=i[f];if(o=s?s.call(a,p,x,f):void 0,o===!1||o===void 0&&p!==x)return!1}return!0}),ao}var qg=Hg();const $g=pn(qg);var up=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(up||{}),oo={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},ju=Object.values(up),Dl={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Gg=Object.entries(Dl).reduce((e,[t,i])=>(e[i]=t,e),{}),bn="data-rh",Yi={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Xi=(e,t)=>{for(let i=e.length-1;i>=0;i-=1){const s=e[i];if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}return null},Wg=e=>{let t=Xi(e,"title");const i=Xi(e,Yi.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),i&&t)return i.replace(/%s/g,()=>t);const s=Xi(e,Yi.DEFAULT_TITLE);return t||s||void 0},Zg=e=>Xi(e,Yi.ON_CHANGE_CLIENT_STATE)||(()=>{}),lo=(e,t)=>t.filter(i=>typeof i[e]<"u").map(i=>i[e]).reduce((i,s)=>({...i,...s}),{}),Kg=(e,t)=>t.filter(i=>typeof i.base<"u").map(i=>i.base).reverse().reduce((i,s)=>{if(!i.length){const a=Object.keys(s);for(let o=0;o<a.length;o+=1){const u=a[o].toLowerCase();if(e.indexOf(u)!==-1&&s[u])return i.concat(s)}}return i},[]),Yg=e=>console&&typeof console.warn=="function"&&console.warn(e),vr=(e,t,i)=>{const s={};return i.filter(a=>Array.isArray(a[e])?!0:(typeof a[e]<"u"&&Yg(`Helmet: ${e} should be of type "Array". Instead found type "${typeof a[e]}"`),!1)).map(a=>a[e]).reverse().reduce((a,o)=>{const c={};o.filter(h=>{let d;const f=Object.keys(h);for(let x=0;x<f.length;x+=1){const b=f[x],y=b.toLowerCase();t.indexOf(y)!==-1&&!(d==="rel"&&h[d].toLowerCase()==="canonical")&&!(y==="rel"&&h[y].toLowerCase()==="stylesheet")&&(d=y),t.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(d=b)}if(!d||!h[d])return!1;const p=h[d].toLowerCase();return s[d]||(s[d]={}),c[d]||(c[d]={}),s[d][p]?!1:(c[d][p]=!0,!0)}).reverse().forEach(h=>a.push(h));const u=Object.keys(c);for(let h=0;h<u.length;h+=1){const d=u[h],f={...s[d],...c[d]};s[d]=f}return a},[]).reverse()},Xg=(e,t)=>{if(Array.isArray(e)&&e.length){for(let i=0;i<e.length;i+=1)if(e[i][t])return!0}return!1},Qg=e=>({baseTag:Kg(["href"],e),bodyAttributes:lo("bodyAttributes",e),defer:Xi(e,Yi.DEFER),encode:Xi(e,Yi.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:lo("htmlAttributes",e),linkTags:vr("link",["rel","href"],e),metaTags:vr("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:vr("noscript",["innerHTML"],e),onChangeClientState:Zg(e),scriptTags:vr("script",["src","innerHTML"],e),styleTags:vr("style",["cssText"],e),title:Wg(e),titleAttributes:lo("titleAttributes",e),prioritizeSeoTags:Xg(e,Yi.PRIORITIZE_SEO_TAGS)}),dp=e=>Array.isArray(e)?e.join(""):e,Jg=(e,t)=>{const i=Object.keys(e);for(let s=0;s<i.length;s+=1)if(t[i[s]]&&t[i[s]].includes(e[i[s]]))return!0;return!1},co=(e,t)=>Array.isArray(e)?e.reduce((i,s)=>(Jg(s,t)?i.priority.push(s):i.default.push(s),i),{priority:[],default:[]}):{default:e,priority:[]},Nu=(e,t)=>({...e,[t]:void 0}),e0=["noscript","script","style"],Qo=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),hp=e=>Object.keys(e).reduce((t,i)=>{const s=typeof e[i]<"u"?`${i}="${e[i]}"`:`${i}`;return t?`${t} ${s}`:s},""),t0=(e,t,i,s)=>{const a=hp(i),o=dp(t);return a?`<${e} ${bn}="true" ${a}>${Qo(o,s)}</${e}>`:`<${e} ${bn}="true">${Qo(o,s)}</${e}>`},n0=(e,t,i=!0)=>t.reduce((s,a)=>{const o=a,c=Object.keys(o).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,f)=>{const p=typeof o[f]>"u"?f:`${f}="${Qo(o[f],i)}"`;return d?`${d} ${p}`:p},""),u=o.innerHTML||o.cssText||"",h=e0.indexOf(e)===-1;return`${s}<${e} ${bn}="true" ${c}${h?"/>":`>${u}</${e}>`}`},""),pp=(e,t={})=>Object.keys(e).reduce((i,s)=>{const a=Dl[s];return i[a||s]=e[s],i},t),i0=(e,t,i)=>{const s={key:t,[bn]:!0},a=pp(i,s);return[te.createElement("title",a,t)]},Os=(e,t)=>t.map((i,s)=>{const a={key:s,[bn]:!0};return Object.keys(i).forEach(o=>{const u=Dl[o]||o;if(u==="innerHTML"||u==="cssText"){const h=i.innerHTML||i.cssText;a.dangerouslySetInnerHTML={__html:h}}else a[u]=i[o]}),te.createElement(e,a)}),ln=(e,t,i=!0)=>{switch(e){case"title":return{toComponent:()=>i0(e,t.title,t.titleAttributes),toString:()=>t0(e,t.title,t.titleAttributes,i)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>pp(t),toString:()=>hp(t)};default:return{toComponent:()=>Os(e,t),toString:()=>n0(e,t,i)}}},r0=({metaTags:e,linkTags:t,scriptTags:i,encode:s})=>{const a=co(e,oo.meta),o=co(t,oo.link),c=co(i,oo.script);return{priorityMethods:{toComponent:()=>[...Os("meta",a.priority),...Os("link",o.priority),...Os("script",c.priority)],toString:()=>`${ln("meta",a.priority,s)} ${ln("link",o.priority,s)} ${ln("script",c.priority,s)}`},metaTags:a.default,linkTags:o.default,scriptTags:c.default}},s0=e=>{const{baseTag:t,bodyAttributes:i,encode:s=!0,htmlAttributes:a,noscriptTags:o,styleTags:c,title:u="",titleAttributes:h,prioritizeSeoTags:d}=e;let{linkTags:f,metaTags:p,scriptTags:x}=e,b={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:b,linkTags:f,metaTags:p,scriptTags:x}=r0(e)),{priority:b,base:ln("base",t,s),bodyAttributes:ln("bodyAttributes",i,s),htmlAttributes:ln("htmlAttributes",a,s),link:ln("link",f,s),meta:ln("meta",p,s),noscript:ln("noscript",o,s),script:ln("script",x,s),style:ln("style",c,s),title:ln("title",{title:u,titleAttributes:h},s)}},Jo=s0,ws=[],mp=!!(typeof window<"u"&&window.document&&window.document.createElement),el=class{instances=[];canUseDOM=mp;context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?ws:this.instances,add:e=>{(this.canUseDOM?ws:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?ws:this.instances).indexOf(e);(this.canUseDOM?ws:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Jo({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},a0={},fp=te.createContext(a0),xp=class gp extends T.Component{static canUseDOM=mp;helmetData;constructor(t){super(t),this.helmetData=new el(this.props.context||{},gp.canUseDOM)}render(){return te.createElement(fp.Provider,{value:this.helmetData.value},this.props.children)}},zi=(e,t)=>{const i=document.head||document.querySelector("head"),s=i.querySelectorAll(`${e}[${bn}]`),a=[].slice.call(s),o=[];let c;return t&&t.length&&t.forEach(u=>{const h=document.createElement(e);for(const d in u)if(Object.prototype.hasOwnProperty.call(u,d))if(d==="innerHTML")h.innerHTML=u.innerHTML;else if(d==="cssText")h.styleSheet?h.styleSheet.cssText=u.cssText:h.appendChild(document.createTextNode(u.cssText));else{const f=d,p=typeof u[f]>"u"?"":u[f];h.setAttribute(d,p)}h.setAttribute(bn,"true"),a.some((d,f)=>(c=f,h.isEqualNode(d)))?a.splice(c,1):o.push(h)}),a.forEach(u=>u.parentNode?.removeChild(u)),o.forEach(u=>i.appendChild(u)),{oldTags:a,newTags:o}},tl=(e,t)=>{const i=document.getElementsByTagName(e)[0];if(!i)return;const s=i.getAttribute(bn),a=s?s.split(","):[],o=[...a],c=Object.keys(t);for(const u of c){const h=t[u]||"";i.getAttribute(u)!==h&&i.setAttribute(u,h),a.indexOf(u)===-1&&a.push(u);const d=o.indexOf(u);d!==-1&&o.splice(d,1)}for(let u=o.length-1;u>=0;u-=1)i.removeAttribute(o[u]);a.length===o.length?i.removeAttribute(bn):i.getAttribute(bn)!==c.join(",")&&i.setAttribute(bn,c.join(","))},o0=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=dp(e)),tl("title",t)},ku=(e,t)=>{const{baseTag:i,bodyAttributes:s,htmlAttributes:a,linkTags:o,metaTags:c,noscriptTags:u,onChangeClientState:h,scriptTags:d,styleTags:f,title:p,titleAttributes:x}=e;tl("body",s),tl("html",a),o0(p,x);const b={baseTag:zi("base",i),linkTags:zi("link",o),metaTags:zi("meta",c),noscriptTags:zi("noscript",u),scriptTags:zi("script",d),styleTags:zi("style",f)},y={},w={};Object.keys(b).forEach(j=>{const{newTags:S,oldTags:C}=b[j];S.length&&(y[j]=S),C.length&&(w[j]=b[j].oldTags)}),t&&t(),h(e,y,w)},yr=null,l0=e=>{yr&&cancelAnimationFrame(yr),e.defer?yr=requestAnimationFrame(()=>{ku(e,()=>{yr=null})}):(ku(e),yr=null)},c0=l0,Cu=class extends T.Component{rendered=!1;shouldComponentUpdate(e){return!$g(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let i=null;const s=Qg(e.get().map(a=>{const o={...a.props};return delete o.context,o}));xp.canUseDOM?c0(s):Jo&&(i=Jo(s)),t(i)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},u0=class extends T.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(e){return!Bg(Nu(this.props,"helmetData"),Nu(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,i,s){return{...t,[e.type]:[...t[e.type]||[],{...i,...this.mapNestedChildrenToProps(e,s)}]}}mapObjectTypeChildren(e,t,i,s){switch(e.type){case"title":return{...t,[e.type]:s,titleAttributes:{...i}};case"body":return{...t,bodyAttributes:{...i}};case"html":return{...t,htmlAttributes:{...i}};default:return{...t,[e.type]:{...i}}}}mapArrayTypeChildrenToProps(e,t){let i={...t};return Object.keys(e).forEach(s=>{i={...i,[s]:e[s]}}),i}warnOnInvalidChildren(e,t){return wu(ju.some(i=>e.type===i),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${ju.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),wu(!t||typeof t=="string"||Array.isArray(t)&&!t.some(i=>typeof i!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let i={};return te.Children.forEach(e,s=>{if(!s||!s.props)return;const{children:a,...o}=s.props,c=Object.keys(o).reduce((h,d)=>(h[Gg[d]||d]=o[d],h),{});let{type:u}=s;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(s,a),u){case"Symbol(react.fragment)":t=this.mapChildrenToProps(a,t);break;case"link":case"meta":case"noscript":case"script":case"style":i=this.flattenArrayTypeChildren(s,i,c,a);break;default:t=this.mapObjectTypeChildren(s,t,c,a);break}}),this.mapArrayTypeChildrenToProps(i,t)}render(){const{children:e,...t}=this.props;let i={...t},{helmetData:s}=t;if(e&&(i=this.mapChildrenToProps(e,i)),s&&!(s instanceof el)){const a=s;s=new el(a.context,!0),delete i.helmetData}return s?te.createElement(Cu,{...i,context:s.value}):te.createElement(fp.Consumer,null,a=>te.createElement(Cu,{...i,context:a}))}};const d0="type.googleapis.com/google.protobuf.Int64Value",h0="type.googleapis.com/google.protobuf.UInt64Value";function bp(e,t){const i={};for(const s in e)e.hasOwnProperty(s)&&(i[s]=t(e[s]));return i}function ta(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>ta(t));if(typeof e=="function"||typeof e=="object")return bp(e,t=>ta(t));throw new Error("Data cannot be encoded in JSON: "+e)}function er(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case d0:case h0:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>er(t)):typeof e=="function"||typeof e=="object"?bp(e,t=>er(t)):e}const zl="functions";const Eu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends Ng{constructor(t,i,s){super(`${zl}/${t}`,i||""),this.details=s,Object.setPrototypeOf(this,Vt.prototype)}}function p0(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function na(e,t){let i=p0(e),s=i,a;try{const o=t&&t.error;if(o){const c=o.status;if(typeof c=="string"){if(!Eu[c])return new Vt("internal","internal");i=Eu[c],s=c}const u=o.message;typeof u=="string"&&(s=u),a=o.details,a!==void 0&&(a=er(a))}}catch{}return i==="ok"?null:new Vt(i,s,a)}class m0{constructor(t,i,s,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,bg(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=i.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||i.get().then(o=>this.auth=o,()=>{}),this.messaging||s.get().then(o=>this.messaging=o,()=>{}),this.appCheck||a?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const i=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return i.error?null:i.token}return null}async getContext(t){const i=await this.getAuthToken(),s=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:i,messagingToken:s,appCheckToken:a}}}const nl="us-central1",f0=/^data: (.*?)(?:\n|$)/;function x0(e){let t=null;return{promise:new Promise((i,s)=>{t=setTimeout(()=>{s(new Vt("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class g0{constructor(t,i,s,a,o=nl,c=(...u)=>fetch(...u)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new m0(t,i,s,a),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=nl}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){const i=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${i}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${i}.cloudfunctions.net/${t}`}}function b0(e,t,i){const s=lp(t);e.emulatorOrigin=`http${s?"s":""}://${t}:${i}`,s&&(_g(e.emulatorOrigin+"/backends"),jg("Functions",!0))}function v0(e,t,i){const s=a=>w0(e,t,a,{});return s.stream=(a,o)=>j0(e,t,a,o),s}function vp(e){return e.emulatorOrigin&&lp(e.emulatorOrigin)?"include":void 0}async function y0(e,t,i,s,a){i["Content-Type"]="application/json";let o;try{o=await s(e,{method:"POST",body:JSON.stringify(t),headers:i,credentials:vp(a)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function yp(e,t){const i={},s=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return s.authToken&&(i.Authorization="Bearer "+s.authToken),s.messagingToken&&(i["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=s.appCheckToken),i}function w0(e,t,i,s){const a=e._url(t);return _0(e,a,i,s)}async function _0(e,t,i,s){i=ta(i);const a={data:i},o=await yp(e,s),c=s.timeout||7e4,u=x0(c),h=await Promise.race([y0(t,a,o,e.fetchImpl,e),u.promise,e.cancelAllRequests]);if(u.cancel(),!h)throw new Vt("cancelled","Firebase Functions instance was deleted.");const d=na(h.status,h.json);if(d)throw d;if(!h.json)throw new Vt("internal","Response is not valid JSON object.");let f=h.json.data;if(typeof f>"u"&&(f=h.json.result),typeof f>"u")throw new Vt("internal","Response is missing data field.");return{data:er(f)}}function j0(e,t,i,s){const a=e._url(t);return N0(e,a,i,s||{})}async function N0(e,t,i,s){i=ta(i);const a={data:i},o=await yp(e,s);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:o,signal:s?.signal,credentials:vp(e)})}catch(x){if(x instanceof Error&&x.name==="AbortError"){const y=new Vt("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const b=na(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let u,h;const d=new Promise((x,b)=>{u=x,h=b});s?.signal?.addEventListener("abort",()=>{const x=new Vt("cancelled","Request was cancelled.");h(x)});const f=c.body.getReader(),p=k0(f,u,h,s?.signal);return{stream:{[Symbol.asyncIterator](){const x=p.getReader();return{async next(){const{value:b,done:y}=await x.read();return{value:b,done:y}},async return(){return await x.cancel(),{done:!0,value:void 0}}}}},data:d}}function k0(e,t,i,s){const a=(c,u)=>{const h=c.match(f0);if(!h)return;const d=h[1];try{const f=JSON.parse(d);if("result"in f){t(er(f.result));return}if("message"in f){u.enqueue(er(f.message));return}if("error"in f){const p=na(0,f);u.error(p),i(p);return}}catch(f){if(f instanceof Vt){u.error(f),i(f);return}}},o=new TextDecoder;return new ReadableStream({start(c){let u="";return h();async function h(){if(s?.aborted){const d=new Vt("cancelled","Request was cancelled");return c.error(d),i(d),Promise.resolve()}try{const{value:d,done:f}=await e.read();if(f){u.trim()&&a(u.trim(),c),c.close();return}if(s?.aborted){const x=new Vt("cancelled","Request was cancelled");c.error(x),i(x),await e.cancel();return}u+=o.decode(d,{stream:!0});const p=u.split(`
`);u=p.pop()||"";for(const x of p)x.trim()&&a(x.trim(),c);return h()}catch(d){const f=d instanceof Vt?d:na(0,null);c.error(f),i(f)}}},cancel(){return e.cancel()}})}const Su="@firebase/functions",Au="0.13.1";const C0="auth-internal",E0="app-check-internal",S0="messaging-internal";function A0(e){const t=(i,{instanceIdentifier:s})=>{const a=i.getProvider("app").getImmediate(),o=i.getProvider(C0),c=i.getProvider(S0),u=i.getProvider(E0);return new g0(a,o,c,u,s)};xg(new gg(zl,t,"PUBLIC").setMultipleInstances(!0)),fu(Su,Au,e),fu(Su,Au,"esm2020")}function T0(e=vg(),t=nl){const s=yg(Ll(e),zl).getImmediate({identifier:t}),a=wg("functions");return a&&P0(s,...a),s}function P0(e,t,i){b0(Ll(e),t,i)}function wp(e,t,i){return v0(Ll(e),t)}A0();const I0={apiKey:"AIzaSyBS3uUgFUWmuT17ygx-ff2fUQhVpOXUUrU",authDomain:"emprataai.firebaseapp.com",projectId:"emprataai",storageBucket:"emprataai.firebasestorage.app",messagingSenderId:"648305596142",appId:"1:648305596142:web:aff6c1539823e12e8bc5ff"},Fl=kg(I0),rt=Cg(Fl),he=Eg(Fl),_p=T0(Fl,"southamerica-east1");function R0(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}const M0=e=>{switch(e){case"success":return D0;case"info":return F0;case"warning":return z0;case"error":return B0;default:return null}},L0=Array(12).fill(0),O0=({visible:e,className:t})=>te.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},te.createElement("div",{className:"sonner-spinner"},L0.map((i,s)=>te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),D0=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),z0=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),F0=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),B0=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),U0=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),V0=()=>{const[e,t]=te.useState(document.hidden);return te.useEffect(()=>{const i=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e};let il=1;class H0{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const i=this.subscribers.indexOf(t);this.subscribers.splice(i,1)}),this.publish=t=>{this.subscribers.forEach(i=>i(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var i;const{message:s,...a}=t,o=typeof t?.id=="number"||((i=t.id)==null?void 0:i.length)>0?t.id:il++,c=this.toasts.find(h=>h.id===o),u=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),c?this.toasts=this.toasts.map(h=>h.id===o?(this.publish({...h,...t,id:o,title:s}),{...h,...t,id:o,dismissible:u,title:s}):h):this.addToast({title:s,...a,dismissible:u,id:o}),o},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:t,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(s=>s({id:i.id,dismiss:!0}))}),t),this.message=(t,i)=>this.create({...i,message:t}),this.error=(t,i)=>this.create({...i,message:t,type:"error"}),this.success=(t,i)=>this.create({...i,type:"success",message:t}),this.info=(t,i)=>this.create({...i,type:"info",message:t}),this.warning=(t,i)=>this.create({...i,type:"warning",message:t}),this.loading=(t,i)=>this.create({...i,type:"loading",message:t}),this.promise=(t,i)=>{if(!i)return;let s;i.loading!==void 0&&(s=this.create({...i,promise:t,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let o=s!==void 0,c;const u=a.then(async d=>{if(c=["resolve",d],te.isValidElement(d))o=!1,this.create({id:s,type:"default",message:d});else if($0(d)&&!d.ok){o=!1;const p=typeof i.error=="function"?await i.error(`HTTP error! status: ${d.status}`):i.error,x=typeof i.description=="function"?await i.description(`HTTP error! status: ${d.status}`):i.description,y=typeof p=="object"&&!te.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:x,...y})}else if(d instanceof Error){o=!1;const p=typeof i.error=="function"?await i.error(d):i.error,x=typeof i.description=="function"?await i.description(d):i.description,y=typeof p=="object"&&!te.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:x,...y})}else if(i.success!==void 0){o=!1;const p=typeof i.success=="function"?await i.success(d):i.success,x=typeof i.description=="function"?await i.description(d):i.description,y=typeof p=="object"&&!te.isValidElement(p)?p:{message:p};this.create({id:s,type:"success",description:x,...y})}}).catch(async d=>{if(c=["reject",d],i.error!==void 0){o=!1;const f=typeof i.error=="function"?await i.error(d):i.error,p=typeof i.description=="function"?await i.description(d):i.description,b=typeof f=="object"&&!te.isValidElement(f)?f:{message:f};this.create({id:s,type:"error",description:p,...b})}}).finally(()=>{o&&(this.dismiss(s),s=void 0),i.finally==null||i.finally.call(i)}),h=()=>new Promise((d,f)=>u.then(()=>c[0]==="reject"?f(c[1]):d(c[1])).catch(f));return typeof s!="string"&&typeof s!="number"?{unwrap:h}:Object.assign(s,{unwrap:h})},this.custom=(t,i)=>{const s=i?.id||il++;return this.create({jsx:t(s),id:s,...i}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ut=new H0,q0=(e,t)=>{const i=t?.id||il++;return Ut.addToast({title:e,...t,id:i}),i},$0=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",G0=q0,W0=()=>Ut.toasts,Z0=()=>Ut.getActiveToasts(),ie=Object.assign(G0,{success:Ut.success,info:Ut.info,warning:Ut.warning,error:Ut.error,custom:Ut.custom,message:Ut.message,promise:Ut.promise,dismiss:Ut.dismiss,loading:Ut.loading},{getHistory:W0,getToasts:Z0});R0("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _s(e){return e.label!==void 0}const K0=3,Y0="24px",X0="16px",Tu=4e3,Q0=356,J0=14,eb=45,tb=200;function Cn(...e){return e.filter(Boolean).join(" ")}function nb(e){const[t,i]=e.split("-"),s=[];return t&&s.push(t),i&&s.push(i),s}const ib=e=>{var t,i,s,a,o,c,u,h,d;const{invert:f,toast:p,unstyled:x,interacting:b,setHeights:y,visibleToasts:w,heights:j,index:S,toasts:C,expanded:N,removeToast:R,defaultRichColors:P,closeButton:I,style:F,cancelButtonStyle:$,actionButtonStyle:ne,className:O="",descriptionClassName:D="",duration:M,position:q,gap:Z,expandByDefault:W,classNames:ee,icons:ce,closeButtonAriaLabel:se="Close toast"}=e,[ve,_]=te.useState(null),[A,H]=te.useState(null),[k,B]=te.useState(!1),[U,V]=te.useState(!1),[Q,J]=te.useState(!1),[de,me]=te.useState(!1),[ye,Ne]=te.useState(!1),[He,ke]=te.useState(0),[We,ot]=te.useState(0),Xe=te.useRef(p.duration||M||Tu),nt=te.useRef(null),st=te.useRef(null),ae=S===0,be=S+1<=w,we=p.type,Pe=p.dismissible!==!1,Ue=p.className||"",Pt=p.descriptionClassName||"",X=te.useMemo(()=>j.findIndex(Ae=>Ae.toastId===p.id)||0,[j,p.id]),oe=te.useMemo(()=>{var Ae;return(Ae=p.closeButton)!=null?Ae:I},[p.closeButton,I]),ge=te.useMemo(()=>p.duration||M||Tu,[p.duration,M]),Se=te.useRef(0),Re=te.useRef(0),ut=te.useRef(0),bt=te.useRef(null),[kt,mn]=q.split("-"),fn=te.useMemo(()=>j.reduce((Ae,pt,yt)=>yt>=X?Ae:Ae+pt.height,0),[j,X]),vt=V0(),Dt=p.invert||f,It=we==="loading";Re.current=te.useMemo(()=>X*Z+fn,[X,fn]),te.useEffect(()=>{Xe.current=ge},[ge]),te.useEffect(()=>{B(!0)},[]),te.useEffect(()=>{const Ae=st.current;if(Ae){const pt=Ae.getBoundingClientRect().height;return ot(pt),y(yt=>[{toastId:p.id,height:pt,position:p.position},...yt]),()=>y(yt=>yt.filter(Rt=>Rt.toastId!==p.id))}},[y,p.id]),te.useLayoutEffect(()=>{if(!k)return;const Ae=st.current,pt=Ae.style.height;Ae.style.height="auto";const yt=Ae.getBoundingClientRect().height;Ae.style.height=pt,ot(yt),y(Rt=>Rt.find(dt=>dt.toastId===p.id)?Rt.map(dt=>dt.toastId===p.id?{...dt,height:yt}:dt):[{toastId:p.id,height:yt,position:p.position},...Rt])},[k,p.title,p.description,y,p.id,p.jsx,p.action,p.cancel]);const _n=te.useCallback(()=>{V(!0),ke(Re.current),y(Ae=>Ae.filter(pt=>pt.toastId!==p.id)),setTimeout(()=>{R(p)},tb)},[p,R,y,Re]);te.useEffect(()=>{if(p.promise&&we==="loading"||p.duration===1/0||p.type==="loading")return;let Ae;return N||b||vt?(()=>{if(ut.current<Se.current){const Rt=new Date().getTime()-Se.current;Xe.current=Xe.current-Rt}ut.current=new Date().getTime()})():Xe.current!==1/0&&(Se.current=new Date().getTime(),Ae=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),_n()},Xe.current)),()=>clearTimeout(Ae)},[N,b,p,we,vt,_n]),te.useEffect(()=>{p.delete&&(_n(),p.onDismiss==null||p.onDismiss.call(p,p))},[_n,p.delete]);function Jr(){var Ae;if(ce?.loading){var pt;return te.createElement("div",{className:Cn(ee?.loader,p==null||(pt=p.classNames)==null?void 0:pt.loader,"sonner-loader"),"data-visible":we==="loading"},ce.loading)}return te.createElement(O0,{className:Cn(ee?.loader,p==null||(Ae=p.classNames)==null?void 0:Ae.loader),visible:we==="loading"})}const es=p.icon||ce?.[we]||M0(we);var ar,ts;return te.createElement("li",{tabIndex:0,ref:st,className:Cn(O,Ue,ee?.toast,p==null||(t=p.classNames)==null?void 0:t.toast,ee?.default,ee?.[we],p==null||(i=p.classNames)==null?void 0:i[we]),"data-sonner-toast":"","data-rich-colors":(ar=p.richColors)!=null?ar:P,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":k,"data-promise":!!p.promise,"data-swiped":ye,"data-removed":U,"data-visible":be,"data-y-position":kt,"data-x-position":mn,"data-index":S,"data-front":ae,"data-swiping":Q,"data-dismissible":Pe,"data-type":we,"data-invert":Dt,"data-swipe-out":de,"data-swipe-direction":A,"data-expanded":!!(N||W&&k),"data-testid":p.testId,style:{"--index":S,"--toasts-before":S,"--z-index":C.length-S,"--offset":`${U?He:Re.current}px`,"--initial-height":W?"auto":`${We}px`,...F,...p.style},onDragEnd:()=>{J(!1),_(null),bt.current=null},onPointerDown:Ae=>{Ae.button!==2&&(It||!Pe||(nt.current=new Date,ke(Re.current),Ae.target.setPointerCapture(Ae.pointerId),Ae.target.tagName!=="BUTTON"&&(J(!0),bt.current={x:Ae.clientX,y:Ae.clientY})))},onPointerUp:()=>{var Ae,pt,yt;if(de||!Pe)return;bt.current=null;const Rt=Number(((Ae=st.current)==null?void 0:Ae.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ei=Number(((pt=st.current)==null?void 0:pt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),dt=new Date().getTime()-((yt=nt.current)==null?void 0:yt.getTime()),zt=ve==="x"?Rt:Ei,Si=Math.abs(zt)/dt;if(Math.abs(zt)>=eb||Si>.11){ke(Re.current),p.onDismiss==null||p.onDismiss.call(p,p),H(ve==="x"?Rt>0?"right":"left":Ei>0?"down":"up"),_n(),me(!0);return}else{var Yt,Xt;(Yt=st.current)==null||Yt.style.setProperty("--swipe-amount-x","0px"),(Xt=st.current)==null||Xt.style.setProperty("--swipe-amount-y","0px")}Ne(!1),J(!1),_(null)},onPointerMove:Ae=>{var pt,yt,Rt;if(!bt.current||!Pe||((pt=window.getSelection())==null?void 0:pt.toString().length)>0)return;const dt=Ae.clientY-bt.current.y,zt=Ae.clientX-bt.current.x;var Si;const Yt=(Si=e.swipeDirections)!=null?Si:nb(q);!ve&&(Math.abs(zt)>1||Math.abs(dt)>1)&&_(Math.abs(zt)>Math.abs(dt)?"x":"y");let Xt={x:0,y:0};const Qt=pe=>1/(1.5+Math.abs(pe)/20);if(ve==="y"){if(Yt.includes("top")||Yt.includes("bottom"))if(Yt.includes("top")&&dt<0||Yt.includes("bottom")&&dt>0)Xt.y=dt;else{const pe=dt*Qt(dt);Xt.y=Math.abs(pe)<Math.abs(dt)?pe:dt}}else if(ve==="x"&&(Yt.includes("left")||Yt.includes("right")))if(Yt.includes("left")&&zt<0||Yt.includes("right")&&zt>0)Xt.x=zt;else{const pe=zt*Qt(zt);Xt.x=Math.abs(pe)<Math.abs(zt)?pe:zt}(Math.abs(Xt.x)>0||Math.abs(Xt.y)>0)&&Ne(!0),(yt=st.current)==null||yt.style.setProperty("--swipe-amount-x",`${Xt.x}px`),(Rt=st.current)==null||Rt.style.setProperty("--swipe-amount-y",`${Xt.y}px`)}},oe&&!p.jsx&&we!=="loading"?te.createElement("button",{"aria-label":se,"data-disabled":It,"data-close-button":!0,onClick:It||!Pe?()=>{}:()=>{_n(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Cn(ee?.closeButton,p==null||(s=p.classNames)==null?void 0:s.closeButton)},(ts=ce?.close)!=null?ts:U0):null,(we||p.icon||p.promise)&&p.icon!==null&&(ce?.[we]!==null||p.icon)?te.createElement("div",{"data-icon":"",className:Cn(ee?.icon,p==null||(a=p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Jr():null,p.type!=="loading"?es:null):null,te.createElement("div",{"data-content":"",className:Cn(ee?.content,p==null||(o=p.classNames)==null?void 0:o.content)},te.createElement("div",{"data-title":"",className:Cn(ee?.title,p==null||(c=p.classNames)==null?void 0:c.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?te.createElement("div",{"data-description":"",className:Cn(D,Pt,ee?.description,p==null||(u=p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),te.isValidElement(p.cancel)?p.cancel:p.cancel&&_s(p.cancel)?te.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||$,onClick:Ae=>{_s(p.cancel)&&Pe&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,Ae),_n())},className:Cn(ee?.cancelButton,p==null||(h=p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,te.isValidElement(p.action)?p.action:p.action&&_s(p.action)?te.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||ne,onClick:Ae=>{_s(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,Ae),!Ae.defaultPrevented&&_n())},className:Cn(ee?.actionButton,p==null||(d=p.classNames)==null?void 0:d.actionButton)},p.action.label):null)};function Pu(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function rb(e,t){const i={};return[e,t].forEach((s,a)=>{const o=a===1,c=o?"--mobile-offset":"--offset",u=o?X0:Y0;function h(d){["top","right","bottom","left"].forEach(f=>{i[`${c}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?h(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?i[`${c}-${d}`]=u:i[`${c}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):h(u)}),i}const sb=te.forwardRef(function(t,i){const{id:s,invert:a,position:o="bottom-right",hotkey:c=["altKey","KeyT"],expand:u,closeButton:h,className:d,offset:f,mobileOffset:p,theme:x="light",richColors:b,duration:y,style:w,visibleToasts:j=K0,toastOptions:S,dir:C=Pu(),gap:N=J0,icons:R,containerAriaLabel:P="Notifications"}=t,[I,F]=te.useState([]),$=te.useMemo(()=>s?I.filter(k=>k.toasterId===s):I.filter(k=>!k.toasterId),[I,s]),ne=te.useMemo(()=>Array.from(new Set([o].concat($.filter(k=>k.position).map(k=>k.position)))),[$,o]),[O,D]=te.useState([]),[M,q]=te.useState(!1),[Z,W]=te.useState(!1),[ee,ce]=te.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),se=te.useRef(null),ve=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=te.useRef(null),A=te.useRef(!1),H=te.useCallback(k=>{F(B=>{var U;return(U=B.find(V=>V.id===k.id))!=null&&U.delete||Ut.dismiss(k.id),B.filter(({id:V})=>V!==k.id)})},[]);return te.useEffect(()=>Ut.subscribe(k=>{if(k.dismiss){requestAnimationFrame(()=>{F(B=>B.map(U=>U.id===k.id?{...U,delete:!0}:U))});return}setTimeout(()=>{dg.flushSync(()=>{F(B=>{const U=B.findIndex(V=>V.id===k.id);return U!==-1?[...B.slice(0,U),{...B[U],...k},...B.slice(U+1)]:[k,...B]})})})}),[I]),te.useEffect(()=>{if(x!=="system"){ce(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ce("dark"):ce("light")),typeof window>"u")return;const k=window.matchMedia("(prefers-color-scheme: dark)");try{k.addEventListener("change",({matches:B})=>{ce(B?"dark":"light")})}catch{k.addListener(({matches:U})=>{try{ce(U?"dark":"light")}catch(V){console.error(V)}})}},[x]),te.useEffect(()=>{I.length<=1&&q(!1)},[I]),te.useEffect(()=>{const k=B=>{var U;if(c.every(J=>B[J]||B.code===J)){var Q;q(!0),(Q=se.current)==null||Q.focus()}B.code==="Escape"&&(document.activeElement===se.current||(U=se.current)!=null&&U.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[c]),te.useEffect(()=>{if(se.current)return()=>{_.current&&(_.current.focus({preventScroll:!0}),_.current=null,A.current=!1)}},[se.current]),te.createElement("section",{ref:i,"aria-label":`${P} ${ve}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ne.map((k,B)=>{var U;const[V,Q]=k.split("-");return $.length?te.createElement("ol",{key:k,dir:C==="auto"?Pu():C,tabIndex:-1,ref:se,className:d,"data-sonner-toaster":!0,"data-sonner-theme":ee,"data-y-position":V,"data-x-position":Q,style:{"--front-toast-height":`${((U=O[0])==null?void 0:U.height)||0}px`,"--width":`${Q0}px`,"--gap":`${N}px`,...w,...rb(f,p)},onBlur:J=>{A.current&&!J.currentTarget.contains(J.relatedTarget)&&(A.current=!1,_.current&&(_.current.focus({preventScroll:!0}),_.current=null))},onFocus:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||A.current||(A.current=!0,_.current=J.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{Z||q(!1)},onDragEnd:()=>q(!1),onPointerDown:J=>{J.target instanceof HTMLElement&&J.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},$.filter(J=>!J.position&&B===0||J.position===k).map((J,de)=>{var me,ye;return te.createElement(ib,{key:J.id,icons:R,index:de,toast:J,defaultRichColors:b,duration:(me=S?.duration)!=null?me:y,className:S?.className,descriptionClassName:S?.descriptionClassName,invert:a,visibleToasts:j,closeButton:(ye=S?.closeButton)!=null?ye:h,interacting:Z,position:k,style:S?.style,unstyled:S?.unstyled,classNames:S?.classNames,cancelButtonStyle:S?.cancelButtonStyle,actionButtonStyle:S?.actionButtonStyle,closeButtonAriaLabel:S?.closeButtonAriaLabel,removeToast:H,toasts:$.filter(Ne=>Ne.position==J.position),heights:O.filter(Ne=>Ne.position==J.position),setHeights:D,expandByDefault:u,gap:N,expanded:M,swipeDirections:t.swipeDirections})})):null}))}),ab=T.createContext(null),Iu=()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),i=e.createGain();t.connect(i),i.connect(e.destination),t.frequency.value=880,t.type="sine",i.gain.setValueAtTime(.3,e.currentTime),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3),t.start(e.currentTime),t.stop(e.currentTime+.3);const s=e.createOscillator(),a=e.createGain();s.connect(a),a.connect(e.destination),s.frequency.value=1320,s.type="sine",a.gain.setValueAtTime(0,e.currentTime),a.gain.setValueAtTime(.3,e.currentTime+.15),a.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),s.start(e.currentTime+.15),s.stop(e.currentTime+.5)}catch{console.log("Audio not available")}},ob=()=>{try{const e=new(window.AudioContext||window.webkitAudioContext);[523.25,659.25,783.99].forEach((t,i)=>{const s=e.createOscillator(),a=e.createGain();s.connect(a),a.connect(e.destination),s.frequency.value=t,s.type="sine";const o=e.currentTime+i*.1;a.gain.setValueAtTime(.2,o),a.gain.exponentialRampToValueAtTime(.01,o+.2),s.start(o),s.stop(o+.2)})}catch{console.log("Audio not available")}};function lb({children:e}){const[t,i]=T.useState("owner"),[s,a]=T.useState([]),[o,c]=T.useState(0),[u,h]=T.useState(0),[d,f]=T.useState(0),[p,x]=T.useState(!0),b=T.useRef(new Map),y=T.useRef(!1);T.useEffect(()=>{const C=()=>{y.current=!0};return window.addEventListener("click",C,{once:!0}),window.addEventListener("keydown",C,{once:!0}),window.addEventListener("touchstart",C,{once:!0}),()=>{window.removeEventListener("click",C),window.removeEventListener("keydown",C),window.removeEventListener("touchstart",C)}},[]),T.useEffect(()=>{const C=rt.currentUser;if(!C)return;const N=tt($e(he,"orders"),Oe("restaurantId","==",C.uid),Ni("createdAt","desc"),Ol(50)),R=Ot(N,P=>{let I=0,F=0,$=0;const ne=[];P.docs.forEach(O=>{const D={id:O.id,...O.data()},M=b.current.get(D.id);D.status==="pending"?I++:D.status==="preparing"?F++:D.status==="ready"&&$++,M&&M!==D.status&&D.status==="ready"&&(ne.push({type:"order_ready",order:D,timestamp:new Date}),t==="waiter"&&y.current&&(S(200),ie.success(` Pedido Pronto! Mesa ${D.customer.table||"N/A"}`,{duration:5e3}),p&&ob())),!M&&D.status==="pending"&&(ne.push({type:"new_order",order:D,timestamp:new Date}),t==="owner"&&y.current&&(p&&Iu(),ie.success(` Novo Pedido! R$ ${D.total?.toFixed(2)}`,{duration:4e3}))),b.current.set(D.id,D.status)}),c(I),h(F),f($),ne.length>0&&a(O=>[...ne,...O].slice(0,20))});return()=>R()},[t,p]);const w=T.useCallback(()=>{x(C=>!C)},[]),j=T.useCallback(()=>{y.current&&p&&Iu()},[p]),S=T.useCallback((C=200)=>{navigator.vibrate&&navigator.vibrate(C)},[]);return n.jsx(ab.Provider,{value:{userRole:t,setUserRole:i,recentEvents:s,pendingCount:o,preparingCount:u,readyCount:d,soundEnabled:p,toggleSound:w,playNotificationSound:j,vibrateDevice:S},children:e})}const Ru=e=>{let t;const i=new Set,s=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const x=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),i.forEach(b=>b(t,x))}},a=()=>t,u={setState:s,getState:a,getInitialState:()=>h,subscribe:d=>(i.add(d),()=>i.delete(d))},h=t=e(s,a,u);return u},cb=(e=>e?Ru(e):Ru),ub=e=>e;function db(e,t=ub){const i=te.useSyncExternalStore(e.subscribe,te.useCallback(()=>t(e.getState()),[e,t]),te.useCallback(()=>t(e.getInitialState()),[e,t]));return te.useDebugValue(i),i}const Mu=e=>{const t=cb(e),i=s=>db(t,s);return Object.assign(i,t),i},hb=(e=>e?Mu(e):Mu),pb=()=>{const e=localStorage.getItem("emprata_user_id");if(e)return e;const t=crypto.randomUUID();return localStorage.setItem("emprata_user_id",t),t},ki=hb((e,t)=>({userId:pb(),plan:"FREE",credits:3,originalImage:null,originalFile:null,generatedImage:null,selectedVibe:"rustico",selectedPerspective:"diagonal",lightIntensity:50,isGenerating:!1,setUserId:i=>{localStorage.setItem("emprata_user_id",i),e({userId:i})},setPlan:i=>e({plan:i}),setCredits:i=>e({credits:i}),setOriginalImage:(i,s=null)=>e({originalImage:i,originalFile:s,generatedImage:null}),setGeneratedImage:i=>e({generatedImage:i}),setVibe:i=>e({selectedVibe:i}),setPerspective:i=>e({selectedPerspective:i}),setLightIntensity:i=>e({lightIntensity:i}),setIsGenerating:i=>e({isGenerating:i}),resetEditor:()=>e({originalImage:null,originalFile:null,generatedImage:null,selectedVibe:"rustico",selectedPerspective:"diagonal",lightIntensity:50,isGenerating:!1}),useCredit:()=>{const{credits:i,plan:s}=t();return s==="PRO"?!0:i>0?(e({credits:i-1}),!0):!1},decrementCredit:()=>{const{credits:i,plan:s}=t();s!=="PRO"&&i>0&&e({credits:i-1})},refundCredit:()=>e(i=>({credits:i.credits+1}))}));function Ke(){const[e,t]=T.useState(null),[i,s]=T.useState(null),[a,o]=T.useState(!0),[c,u]=T.useState(null),{setPlan:h,setCredits:d,setUserId:f}=ki(),p=new Sg;return p.setCustomParameters({prompt:"select_account"}),T.useEffect(()=>{console.log(" [useAuth] Setting up auth listener...");const C=Ag(rt,async N=>{console.log(" [useAuth] Auth State Changed:",N?.email||"No user");try{if(t(N),N){console.log(" [useAuth] Fetching Firestore data for:",N.uid);const R=ze(he,"users",N.uid),P=await hn(R);if(P.exists()){const I=P.data();console.log(" [useAuth] User data loaded:",I.plan,I.credits),s(I),h(I.plan||"FREE"),d(I.credits??3),f(N.uid)}else{console.warn(" [useAuth] User has no Firestore profile, creating one...");const I={uid:N.uid,email:N.email||"",name:N.displayName||"",plan:"FREE",credits:3,createdAt:Lt()};await di(R,I),s(I),h("FREE"),d(3),f(N.uid),console.log(" [useAuth] Created missing Firestore profile")}}else console.log(" [useAuth] No user, resetting to guest state"),s(null),h("FREE"),d(3),f("")}catch(R){console.error(" [useAuth] Critical error in auth listener:",R),u(R?.message||"Authentication error"),s(null),h("FREE"),d(3),f("")}finally{console.log(" [useAuth] Loading complete"),o(!1)}});return()=>{console.log(" [useAuth] Cleaning up auth listener"),C()}},[h,d,f]),{user:e,userData:i,loading:a,error:c,loginWithGoogle:async()=>{try{u(null),o(!0);const N=(await Rg(rt,p)).user,R=ze(he,"users",N.uid),P=await hn(R);if(P.exists()){const I=P.data();s(I),h(I.plan||"FREE"),d(I.credits??3),f(N.uid),console.log(" [useAuth] Existing Google user logged in:",N.uid)}else{const I={uid:N.uid,email:N.email||"",name:N.displayName||"",plan:"FREE",credits:3,createdAt:Lt()};await di(R,I),console.log(" [useAuth] New Google user created:",N.uid),s(I),h("FREE"),d(3),f(N.uid)}return N}catch(C){throw console.error(" [useAuth] Google Sign-In error:",C),u(C.message),C}finally{o(!1)}},signIn:async(C,N)=>{try{return u(null),o(!0),(await Ig(rt,C,N)).user}catch(R){throw u(R.message),R}finally{o(!1)}},signUp:async(C,N,R)=>{try{u(null),o(!0);const P=await Pg(rt,C,N),I={uid:P.user.uid,email:P.user.email||"",name:R||"",plan:"FREE",credits:3,createdAt:Lt()};return await di(ze(he,"users",P.user.uid),I),console.log(" [useAuth] New email user created:",P.user.uid),P.user}catch(P){throw u(P.message),P}finally{o(!1)}},signOut:async()=>{try{u(null),await Tg(rt),s(null),console.log(" [useAuth] User signed out")}catch(C){throw u(C.message),C}},refreshUser:async()=>{if(e)try{const C=ze(he,"users",e.uid),N=await hn(C);if(N.exists()){const R=N.data();s(R),h(R.plan||"FREE"),d(R.credits??3),console.log(" [useAuth] User data refreshed:",R.plan,R.credits)}}catch(C){console.error(" [useAuth] Error refreshing user data:",C)}},switchRole:async C=>{e&&(localStorage.setItem("activeRole",C),C==="OWNER"?window.location.href="/dashboard":window.location.href="/delivery")},isAuthenticated:!!e,isPro:i?.plan?.toLowerCase()==="pro"||i?.plan?.toLowerCase()==="starter"}}function jp({}){const[e,t]=T.useState(!1),i=T.useRef(null),{user:s,userData:a,signOut:o}=Ke(),c=_t();T.useEffect(()=>{const f=p=>{i.current&&!i.current.contains(p.target)&&t(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const u=()=>{c("/profile"),t(!1)},h=async()=>{await o(),c("/"),t(!1)},d=()=>a?.name?a.name.charAt(0).toUpperCase():s?.email?s.email.charAt(0).toUpperCase():"U";return n.jsxs("div",{className:"relative",ref:i,children:[n.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all group",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary to-orange-600 flex items-center justify-center text-sm font-black",children:s?.photoURL?n.jsx("img",{src:s.photoURL,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):n.jsx("span",{children:d()})}),n.jsx("span",{className:"hidden md:block text-sm font-bold text-white/80 max-w-[120px] truncate",children:a?.name||"Usurio"}),n.jsx(jl,{className:`w-4 h-4 text-white/40 transition-transform ${e?"rotate-180":""}`})]}),n.jsx(Ye,{children:e&&n.jsxs(K.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 mt-2 w-56 bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50",children:[n.jsxs("div",{className:"p-4 border-b border-white/10 bg-white/5",children:[n.jsx("p",{className:"text-sm font-bold text-white truncate",children:a?.name||"Usurio"}),n.jsx("p",{className:"text-xs text-white/40 font-medium truncate",children:s?.email})]}),n.jsxs("div",{className:"py-2",children:[n.jsxs("button",{onClick:u,className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-white/5 transition-colors text-left",children:[n.jsx(Tn,{className:"w-4 h-4 text-white/60"}),n.jsx("span",{className:"text-sm font-bold text-white",children:"Meu Perfil"})]}),n.jsxs("button",{onClick:()=>{localStorage.setItem("activeRole","CUSTOMER"),window.location.href="/delivery"},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-white/5 transition-colors text-left",children:[n.jsx(hi,{className:"w-4 h-4 text-primary"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-bold text-white block",children:"Modo Cliente"}),n.jsx("span",{className:"text-[10px] text-white/40 block",children:"Fazer pedidos"})]})]}),n.jsxs("button",{onClick:h,className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-red-500/10 transition-colors text-left border-t border-white/5",children:[n.jsx(qr,{className:"w-4 h-4 text-red-400"}),n.jsx("span",{className:"text-sm font-bold text-red-400",children:"Sair"})]})]})]})})]})}const Lu={STARTER:1,GROWTH:2,BLACK:3},Bl={manage_menu:"STARTER",receive_orders:"STARTER",kitchen_screen:"STARTER",basic_payments:"STARTER",staff_management:"STARTER",link_bio:"STARTER",order_kanban:"STARTER",view_wallet:"STARTER",driver_app_access:"GROWTH",gps_tracking:"GROWTH",dispatch_console:"GROWTH",rain_mode:"GROWTH",table_qr_code:"GROWTH",pos_terminal:"GROWTH",financial_overview:"GROWTH",basic_reports:"GROWTH",ai_insights:"BLACK",emprata_brain:"BLACK",advanced_analytics:"BLACK",crm_automation:"BLACK",sales_forecasting:"BLACK",profit_guardian:"BLACK",demand_prediction:"BLACK",dre_reports:"BLACK",vip_support:"BLACK",financial_analytics:"BLACK"},uo={STARTER:.12,GROWTH:.09,BLACK:.06},bi={STARTER:{label:"Starter",price:0,color:"text-gray-400",bgColor:"bg-gray-500",description:"Comece grtis",features:["Cardpio Digital","Gestor de Pedidos","Cozinha (KDS)","Pagamento Online","Gesto de Equipe"]},GROWTH:{label:"Growth",price:149.9,color:"text-green-400",bgColor:"bg-green-500",description:"Para crescer",badge:"Popular",features:["Tudo do Starter","App do Motorista (GPS)","Modo Chuva","QR Code de Mesa","Terminal PDV","Relatrios Financeiros"]},BLACK:{label:"Emprata Black",price:299.9,color:"text-purple-400",bgColor:"bg-purple-600",description:"Potncia mxima",badge:"AI Power",features:["Tudo do Growth","EmprataBrain (IA)","Previso de Demanda","Guardio de Lucro","CRM Automtico","Suporte VIP"]}};function mb(e,t){const i=Lu[e||"STARTER"],s=Lu[Bl[t]];return i>=s}function tr(e){return Bl[e]}const fb=Bl;function xb(e){if(!e)return"STARTER";const t=e.toUpperCase();return t==="BLACK"||t==="PRO"?"BLACK":t==="GROWTH"||t==="STARTER_PAID"?"GROWTH":"STARTER"}function ir(){const{userData:e,loading:t}=Ke(),i=xb(e?.plan),s=e?.subscription?.status||"inactive",a=i==="STARTER"||s==="active",o=T.useCallback(u=>a?mb(i,u):!1,[i,a]),c=T.useCallback(u=>{const h=o(u);if(!h){const d=tr(u);ie.error(`Recurso exclusivo do plano ${bi[d].label}`,{description:"Faa upgrade para desbloquear",action:{label:"Ver Planos",onClick:()=>window.location.href="/subscription"}})}return h},[o]);return{currentPlan:i,isPlanActive:a,planDetails:bi[i],checkAccess:o,checkAccessWithFeedback:c,getRequiredPlanFor:tr,isGrowthOrHigher:i==="GROWTH"||i==="BLACK",isBlack:i==="BLACK",isLoading:t}}const gb=[{title:"Operao em Tempo Real",items:[{path:"/dashboard",label:"Viso Geral",icon:n.jsx(Nx,{size:20})},{path:"/dispatch",label:"Logstica & Entregas",icon:n.jsx(In,{size:20}),badge:"Ao Vivo",feature:"driver_app_access"},{path:"/kitchen-display",label:"KDS Cozinha",icon:n.jsx(gt,{size:20})}]},{title:"Gesto & Vendas",items:[{path:"/menu-builder",label:"Cardpio Digital",icon:n.jsx(Cl,{size:20})},{path:"/store-settings",label:"Vitrine do App",icon:n.jsx(hi,{size:20}),highlight:!0},{path:"/finance",label:"Financeiro",icon:n.jsx(pi,{size:20}),feature:"financial_overview"},{path:"/staff",label:"Equipe & Acessos",icon:n.jsx(vn,{size:20})}]},{title:"Crescimento & IA",items:[{path:"/intelligence",label:"Business Intelligence",icon:n.jsx(El,{size:20}),highlight:!0,feature:"ai_insights"},{path:"/studio",label:"Estdio Mgico IA",icon:n.jsx($r,{size:20})}]}];function bb(){const[e,t]=T.useState(!0),i=Ml(),s=_t(),{user:a}=Ke(),{checkAccess:o}=ir(),c=u=>{if(!u.feature){s(u.path);return}if(o(u.feature))s(u.path);else{const h=tr(u.feature);ie.error(`Recurso do plano ${bi[h].label}`,{description:"Faa upgrade para acessar este mdulo",action:{label:"Ver Planos",onClick:()=>s("/subscription")}}),s("/subscription")}};return n.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex",children:[n.jsxs(K.aside,{initial:{width:280},animate:{width:e?280:80},className:"fixed md:relative z-50 h-screen bg-[#121212] border-r border-white/5 flex flex-col transition-all duration-300",children:[n.jsxs("div",{className:"h-20 flex items-center px-6 border-b border-white/5",children:[n.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center font-black text-black text-xl mr-3 shrink-0",children:"E."}),e&&n.jsxs(K.span,{initial:{opacity:0},animate:{opacity:1},className:"font-black italic text-lg tracking-tighter",children:["Emprata",n.jsx("span",{className:"text-primary",children:"AI"})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto py-6 px-3 space-y-8 custom-scrollbar",children:gb.map((u,h)=>n.jsxs("div",{children:[e&&n.jsx("h3",{className:"px-4 text-[10px] font-black uppercase tracking-widest text-white/30 mb-2",children:u.title}),n.jsx("div",{className:"space-y-1",children:u.items.map(d=>{const f=i.pathname===d.path,p=d.feature?o(d.feature):!0;return n.jsxs("button",{onClick:()=>c(d),className:`
                        w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl transition-all relative group text-left
                        ${f?"bg-primary text-black font-bold shadow-[0_0_20px_rgba(255,107,0,0.3)]":p?"text-white/60 hover:bg-white/5 hover:text-white":"text-white/30 hover:bg-white/5 cursor-not-allowed"}
                      `,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`${f?"text-black":d.highlight&&p?"text-primary":""}`,children:d.icon}),e&&n.jsx("span",{className:"text-sm whitespace-nowrap",children:d.label})]}),e&&n.jsxs(n.Fragment,{children:[!p&&n.jsx(Gt,{size:14,className:"text-white/30"}),d.badge&&p&&n.jsx("span",{className:"bg-red-500 text-white text-[9px] font-black px-1.5 py-0.5 rounded uppercase animate-pulse",children:d.badge})]}),!e&&n.jsxs("div",{className:"absolute left-full ml-4 bg-white text-black px-3 py-1 rounded-lg text-xs font-bold opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 flex items-center gap-2",children:[d.label,!p&&n.jsx(Gt,{size:10})]})]},d.path)})})]},h))}),n.jsx("div",{className:"p-4 border-t border-white/5",children:n.jsx("button",{onClick:()=>t(!e),className:"w-full flex items-center justify-center p-2 text-white/20 hover:text-white transition-colors mb-4",children:e?n.jsx(Mr,{className:"rotate-180"}):n.jsx(Mr,{})})})]}),n.jsxs("main",{className:"flex-1 flex flex-col h-screen overflow-hidden bg-[#0a0a0a]",children:[n.jsxs("header",{className:"h-20 border-b border-white/5 bg-[#0a0a0a]/80 backdrop-blur-xl flex items-center justify-between px-8 sticky top-0 z-40",children:[n.jsxs("div",{className:"flex-1 max-w-xl relative",children:[n.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/20 w-4 h-4"}),n.jsx("input",{placeholder:"Buscar pedido, cliente ou ferramenta...",className:"w-full bg-[#121212] border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white focus:border-primary outline-none transition-all focus:bg-[#1a1a1a]"}),n.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-1",children:[n.jsx("kbd",{className:"bg-white/10 px-1.5 rounded text-[10px] text-white/40 font-mono",children:""}),n.jsx("kbd",{className:"bg-white/10 px-1.5 rounded text-[10px] text-white/40 font-mono",children:"K"})]})]}),n.jsxs("div",{className:"flex items-center gap-6 ml-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{className:"relative p-2 text-white/40 hover:text-white transition-colors",children:[n.jsx(Nl,{size:20}),n.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-primary rounded-full"})]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex flex-col items-end",children:[n.jsx("span",{className:"text-sm font-bold text-white leading-none",children:a?.displayName}),n.jsxs("span",{className:"text-[10px] text-primary font-bold uppercase tracking-wider flex items-center gap-1",children:[n.jsx(Pn,{size:10})," Dono"]})]})]}),n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-gray-700 to-black border border-white/20 overflow-hidden",children:a?.photoURL?n.jsx("img",{src:a.photoURL,className:"w-full h-full object-cover"}):n.jsx(kl,{className:"p-2 text-white/50"})}),n.jsx(jp,{})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-6 md:p-8 scroll-smooth",children:n.jsx(rp,{})})]})]})}function vb(){const{user:e,signOut:t}=Ke(),i=Ml(),[s,a]=T.useState(0);T.useEffect(()=>{if(!e)return;const c=tt($e(he,"orders"),Oe("customer.uid","==",e.uid),Oe("status","in",["PENDING","PREPARING","READY","DISPATCHED"])),u=Ot(c,h=>a(h.size));return()=>u()},[e]);const o=c=>i.pathname===c;return n.jsxs("div",{className:"min-h-screen bg-[#050505] text-white font-sans flex flex-col",children:[n.jsxs("header",{className:"hidden md:flex items-center justify-between px-8 py-4 bg-[#121212]/90 border-b border-white/5 sticky top-0 z-50",children:[n.jsx(it,{to:"/delivery",className:"text-2xl font-black italic",children:"Emprata.ai"}),n.jsxs("div",{className:"flex gap-6 items-center",children:[n.jsx(it,{to:"/delivery",className:"hover:text-primary font-bold",children:"Incio"}),n.jsx(it,{to:"/search",className:"hover:text-primary font-bold",children:"Buscar"}),n.jsxs(it,{to:"/me",className:"flex items-center gap-2 bg-white/10 px-3 py-1.5 rounded-full hover:bg-white/20",children:[n.jsx(Tn,{size:16})," ",n.jsx("span",{className:"text-sm font-bold",children:"Perfil"})]}),n.jsx("button",{onClick:t,title:"Sair",children:n.jsx(qr,{size:18,className:"text-red-400"})})]})]}),n.jsx("main",{className:"flex-1 pb-24 md:pb-0 relative z-0",children:n.jsx(rp,{})}),n.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-[9999] bg-[#121212] border-t border-white/10 px-6 py-2 pb-safe shadow-[0_-10px_30px_rgba(0,0,0,0.8)]",children:n.jsxs("div",{className:"flex justify-between items-center max-w-md mx-auto",children:[n.jsxs(it,{to:"/delivery",className:`flex flex-col items-center gap-1 ${o("/delivery")?"text-primary":"text-white/40"}`,children:[n.jsx(Wh,{size:24}),n.jsx("span",{className:"text-[10px] font-bold",children:"Incio"})]}),n.jsxs(it,{to:"/search",className:`flex flex-col items-center gap-1 ${o("/search")?"text-primary":"text-white/40"}`,children:[n.jsx(Ln,{size:24}),n.jsx("span",{className:"text-[10px] font-bold",children:"Buscar"})]}),n.jsx(it,{to:"/me/orders",className:"relative -top-5",children:n.jsx("div",{className:"w-14 h-14 bg-primary rounded-full flex items-center justify-center border-4 border-[#121212] shadow-lg",children:n.jsx(Qs,{size:24,className:"text-black"})})}),n.jsxs(it,{to:"/restaurants",className:`flex flex-col items-center gap-1 ${o("/restaurants")?"text-primary":"text-white/40"}`,children:[n.jsx(Un,{size:24}),n.jsx("span",{className:"text-[10px] font-bold",children:"Perto"})]}),n.jsxs(it,{to:"/me",className:`flex flex-col items-center gap-1 ${o("/me")?"text-primary":"text-white/40"}`,children:[n.jsx(Tn,{size:24}),n.jsx("span",{className:"text-[10px] font-bold",children:"Perfil"})]})]})})]})}function yb(){const[e,t]=T.useState({restaurants:0,orders:0,isLoading:!0});return T.useEffect(()=>{(async()=>{try{const s=await xu(tt($e(he,"users"),Oe("role","==","OWNER"))),a=await xu($e(he,"orders"));t({restaurants:s.data().count,orders:a.data().count,isLoading:!1})}catch(s){console.warn("Could not load platform stats:",s),t(a=>({...a,isLoading:!1}))}})()},[]),e}function Np({title:e,description:t,image:i,path:s,type:a="website",priceRange:o,rating:c,reviewCount:u,cuisineType:h,address:d,phone:f,price:p,availability:x="InStock"}){const b=typeof window<"u"?window.location.origin:"https://emprata.ai",y=`${b}${s}`,w=`${b}/og-image.jpg`,j=i||w,C=a==="restaurant"?{"@context":"https://schema.org","@type":"Restaurant",name:e,image:j,url:y,priceRange:o||"$$",servesCuisine:h||"Delivery",address:d?{"@type":"PostalAddress",streetAddress:d}:void 0,telephone:f,aggregateRating:c?{"@type":"AggregateRating",ratingValue:c.toFixed(1),bestRating:"5",worstRating:"1",reviewCount:u||1}:void 0,potentialAction:{"@type":"OrderAction",target:{"@type":"EntryPoint",urlTemplate:y,actionPlatform:["http://schema.org/DesktopWebPlatform","http://schema.org/MobileWebPlatform"]},deliveryMethod:["http://purl.org/goodrelations/v1#DeliveryModeOwnFleet"]}}:a==="product"?{"@context":"https://schema.org","@type":"Product",name:e,description:t,image:j,offers:{"@type":"Offer",priceCurrency:"BRL",price:p?.toFixed(2)||"0.00",availability:`https://schema.org/${x}`,url:y},aggregateRating:c?{"@type":"AggregateRating",ratingValue:c.toFixed(1),reviewCount:u||1}:void 0}:{"@context":"https://schema.org","@type":"WebSite",name:"EmprataAI - Delivery Inteligente",url:b,potentialAction:{"@type":"SearchAction",target:`${b}/search?q={search_term_string}`,"query-input":"required name=search_term_string"}};return n.jsxs(u0,{children:[n.jsxs("title",{children:[e," | EmprataAI"]}),n.jsx("meta",{name:"description",content:t}),n.jsx("link",{rel:"canonical",href:y}),n.jsx("meta",{property:"og:type",content:a==="restaurant"?"restaurant.restaurant":"website"}),n.jsx("meta",{property:"og:url",content:y}),n.jsx("meta",{property:"og:title",content:e}),n.jsx("meta",{property:"og:description",content:t}),n.jsx("meta",{property:"og:image",content:j}),n.jsx("meta",{property:"og:image:width",content:"1200"}),n.jsx("meta",{property:"og:image:height",content:"630"}),n.jsx("meta",{property:"og:site_name",content:"EmprataAI"}),n.jsx("meta",{property:"og:locale",content:"pt_BR"}),n.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),n.jsx("meta",{name:"twitter:title",content:e}),n.jsx("meta",{name:"twitter:description",content:t}),n.jsx("meta",{name:"twitter:image",content:j}),n.jsx("meta",{name:"theme-color",content:"#FF6B00"}),n.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),n.jsx("script",{type:"application/ld+json",children:JSON.stringify(C)})]})}function wb(){const[e,t]=T.useState("CONSUMER"),[i,s]=T.useState(!1),a=_t(),o=yb(),c=T.useRef(null),{scrollYProgress:u}=kx({target:c}),h=lu(u,[.2,.5],[100,0]),d=lu(u,[.2,.4],[0,1]),f=e==="CONSUMER"?{id:"consumer",primary:"text-green-400",accentColor:"#4ade80",bgGradient:"from-green-900/30 via-[#050505] to-[#050505]",button:"bg-green-500 hover:bg-green-400 text-black",glow:"shadow-[0_0_50px_rgba(34,197,94,0.3)]",headline:n.jsxs(n.Fragment,{children:["Sua Fome, ",n.jsx("br",{}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-500",children:"Decodificada pela IA."})]}),subhead:"Esquea o scroll infinito. O EmprataBrain aprende seu paladar e te serve o prato perfeito antes mesmo de voc saber o que quer.  cashback,  vdeo,  comida de verdade."}:{id:"business",primary:"text-purple-400",accentColor:"#a855f7",bgGradient:"from-purple-900/30 via-[#050505] to-[#050505]",button:"bg-purple-600 hover:bg-purple-500 text-white",glow:"shadow-[0_0_50px_rgba(147,51,234,0.3)]",headline:n.jsxs(n.Fragment,{children:["Seu Delivery, ",n.jsx("br",{}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-indigo-500",children:"No Piloto Automtico."})]}),subhead:"Abandone a guerra de taxas. Assuma o controle com um Sistema Operacional que une KDS, Logstica Prpria e uma IA que prev seu faturamento antes do ms comear."};return n.jsxs("div",{ref:c,className:"min-h-screen bg-[#050505] text-white font-sans selection:bg-white selection:text-black overflow-x-hidden",children:[n.jsx(Np,{title:e==="CONSUMER"?"Emprata | A Revoluo do Delivery":"Emprata | OS para Restaurantes",description:"Onde a inteligncia artificial encontra a gastronomia. O ecossistema definitivo.",path:"/"}),n.jsx("nav",{className:"fixed top-6 w-full flex justify-center z-50 pointer-events-none px-4",children:n.jsxs(K.div,{layoutId:"navbar-container",className:"bg-black/70 backdrop-blur-xl border border-white/10 p-1.5 rounded-full flex items-center gap-1 shadow-2xl pointer-events-auto",children:[n.jsx(Ou,{mode:"CONSUMER",current:e,onClick:t,label:"Para Comer",icon:at,color:"bg-green-500 text-black"}),n.jsx(Ou,{mode:"BUSINESS",current:e,onClick:t,label:"Para Vender",icon:Zh,color:"bg-purple-600 text-white"})]})}),n.jsxs("main",{className:"relative h-[90vh] flex flex-col items-center justify-center px-6 overflow-hidden",children:[n.jsx(Ye,{mode:"popLayout",children:n.jsx(K.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:1.2,ease:"easeInOut"},className:`absolute inset-0 bg-gradient-radial ${f.bgGradient} pointer-events-none`},f.id+"-bg")}),n.jsx("div",{className:"absolute inset-0 bg-[url('/noise.png')] opacity-10 mix-blend-overlay pointer-events-none"}),n.jsx("div",{className:"max-w-5xl mx-auto text-center relative z-10 mt-20",children:n.jsx(Ye,{mode:"wait",children:n.jsxs(K.div,{initial:{y:30,opacity:0,filter:"blur(8px)"},animate:{y:0,opacity:1,filter:"blur(0px)"},exit:{y:-30,opacity:0,filter:"blur(8px)"},transition:{duration:.6},children:[n.jsxs(K.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"inline-flex items-center gap-3 bg-white/5 border border-white/10 rounded-full px-4 py-2 mb-8 backdrop-blur-md",children:[n.jsx("div",{className:"flex -space-x-3",children:[1,2,3].map(p=>n.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-tr from-gray-700 to-gray-900 border-2 border-[#050505]"},p))}),n.jsxs("p",{className:"text-sm font-medium",children:[n.jsxs("span",{className:"font-bold text-white",children:["+",o.orders>50?o.orders:"2.4k"]})," pedidos processados hoje."]})]}),n.jsx("h1",{className:"text-6xl md:text-9xl font-black tracking-tighter mb-6 leading-[0.9]",children:f.headline}),n.jsx("p",{className:"text-xl text-white/60 max-w-3xl mx-auto mb-12 leading-relaxed font-medium",children:f.subhead}),n.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-6",children:[n.jsxs(K.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(e==="CONSUMER"?"/delivery":"/auth"),className:`${f.button} px-12 py-6 rounded-2xl font-black text-xl flex items-center gap-3 transition-all ${f.glow}`,children:[e==="CONSUMER"?"EXPLORAR RESTAURANTES":"COMEAR OPERAO",n.jsx(Rn,{size:24})]}),n.jsxs("button",{onClick:()=>a("/apps"),className:"px-8 py-6 rounded-2xl font-bold text-white/60 hover:text-white hover:bg-white/5 transition-all flex items-center gap-3 border border-transparent hover:border-white/10",children:[n.jsx(mi,{size:22})," Baixar Super App"]})]})]},f.id+"-content")})}),n.jsx(K.div,{animate:{y:[0,15,0]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"absolute bottom-8 pointer-events-none opacity-50",children:n.jsx(Rn,{size:24,className:"rotate-90"})})]}),n.jsx(K.section,{style:{y:h,opacity:d},className:"py-24 relative z-20 overflow-hidden",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("span",{className:`text-sm font-black uppercase tracking-widest ${f.primary}`,children:"O Ecossistema Emprata"}),n.jsx("h2",{className:"text-4xl font-black mt-4 mb-6",children:"Onde o desejo vira lucro."}),n.jsx("p",{className:"text-white/50 max-w-2xl mx-auto",children:"Uma plataforma nica que conecta a inteno de compra do cliente  eficincia operacional do restaurante em milissegundos."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-center text-center relative",children:[n.jsxs("div",{className:"bg-[#121212] p-8 rounded-[3rem] border border-green-500/20 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute inset-0 bg-green-500/5 blur-3xl group-hover:opacity-100 opacity-50 transition-opacity"}),n.jsx("div",{className:"w-20 h-20 mx-auto bg-green-500/20 rounded-2xl flex items-center justify-center text-green-400 mb-6 relative z-10",children:n.jsx(mi,{size:40})}),n.jsx("h3",{className:"text-xl font-black mb-2",children:"1. O Desejo"}),n.jsx("p",{className:"text-white/50 text-sm",children:"Cliente sente fome. A IA sugere o prato exato com vdeo."})]}),n.jsxs("div",{className:"relative h-32 md:h-auto flex flex-col md:flex-row items-center justify-center z-0",children:[n.jsxs("svg",{className:"absolute inset-0 w-full h-full overflow-visible",preserveAspectRatio:"none",children:[n.jsx(K.path,{d:"M 0 50 H 100",stroke:"url(#gradientLine)",strokeWidth:"4",strokeDasharray:"10 10",animate:{strokeDashoffset:[0,-20]},transition:{repeat:1/0,duration:.5,ease:"linear"},className:"hidden md:block"}),n.jsx(K.path,{d:"M 50 0 V 100",stroke:"url(#gradientLine)",strokeWidth:"4",strokeDasharray:"10 10",animate:{strokeDashoffset:[0,-20]},transition:{repeat:1/0,duration:.5,ease:"linear"},className:"md:hidden"}),n.jsx("defs",{children:n.jsxs("linearGradient",{id:"gradientLine",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",stopColor:"#22c55e"}),n.jsx("stop",{offset:"100%",stopColor:"#9333ea"})]})})]}),n.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center z-10 shadow-[0_0_40px_rgba(255,255,255,0.3)]",children:n.jsx(Wt,{size:32,className:"text-black"})})]}),n.jsxs("div",{className:"bg-[#121212] p-8 rounded-[3rem] border border-purple-500/20 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute inset-0 bg-purple-500/5 blur-3xl group-hover:opacity-100 opacity-50 transition-opacity"}),n.jsx("div",{className:"w-20 h-20 mx-auto bg-purple-500/20 rounded-2xl flex items-center justify-center text-purple-400 mb-6 relative z-10",children:n.jsx(gt,{size:40})}),n.jsx("h3",{className:"text-xl font-black mb-2",children:"2. A Execuo"}),n.jsx("p",{className:"text-white/50 text-sm",children:"Pedido cai direto na KDS da cozinha. Sem erros, sem papel."})]})]})]})}),n.jsx("section",{className:"py-32 px-6 relative z-10",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("h2",{className:"text-3xl font-black mb-12 uppercase tracking-tight text-white/30",children:e==="CONSUMER"?"Arsenal do Consumidor":"Painel de Controle do Dono"}),n.jsx(Ye,{mode:"wait",children:e==="CONSUMER"?n.jsx(_b,{},"c"):n.jsx(jb,{},"b")})]})}),n.jsxs("section",{className:"py-40 relative overflow-hidden",children:[n.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${f.bgGradient} opacity-80 pointer-events-none`}),n.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10 px-6",children:[n.jsxs("h2",{className:"text-5xl md:text-8xl font-black italic tracking-tighter mb-8 leading-none",children:["NO  DELIVERY. ",n.jsx("br",{}),"  ",n.jsx("span",{className:f.primary,children:"EVOLUO."})]}),n.jsx("p",{className:"text-xl text-white/60 mb-12 max-w-2xl mx-auto",children:e==="CONSUMER"?"A era da comida fria e do suporte robtico acabou. Bem-vindo ao delivery que te entende.":"Enquanto seus concorrentes brigam por migalhas nos apps grandes, voc constri seu imprio com dados proprietrios."}),n.jsx(K.button,{whileHover:{scale:1.05,boxShadow:`0 0 50px ${f.accentColor}80`},onClick:()=>a(e==="CONSUMER"?"/delivery":"/auth"),className:"bg-white text-black px-16 py-8 rounded-full font-black text-2xl shadow-2xl transition-all",children:e==="CONSUMER"?"ACESSAR O FUTURO AGORA":"BLINDAR MINHA OPERAO"})]})]}),n.jsx("section",{className:"py-24 px-6 border-t border-white/5 bg-[#050505]",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-3xl font-black text-center mb-12 text-white",children:"Perguntas Frequentes"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(wr,{question:"Preciso pagar mensalidade no plano Starter?",answer:"No. O plano Starter  isento de custos fixos. Cobramos apenas uma pequena taxa sobre os pedidos realizados."}),n.jsx(wr,{question:"Como recebo o dinheiro das vendas?",answer:"O dinheiro cai na sua Carteira Digital dentro do sistema. Voc pode solicitar o saque via Pix para sua conta bancria a qualquer momento."}),n.jsx(wr,{question:"O App do Motorista funciona em iPhone e Android?",answer:"Sim. Nosso app de logstica  compatvel com qualquer smartphone e usa GPS de alta preciso."}),n.jsx(wr,{question:"Posso cancelar o plano Black quando quiser?",answer:"Sim. Sem fidelidade, sem letras midas. Voc cancela com um clique no seu painel."}),n.jsx(wr,{question:" seguro colocar meus dados bancrios?",answer:"Totalmente. Utilizamos criptografia de ponta a ponta e nosso parceiro de pagamentos (Asaas)  regulamentado pelo Banco Central."})]})]})}),n.jsxs("footer",{className:"bg-black py-20 px-6 border-t border-white/10",children:[n.jsxs("div",{className:"max-w-7xl mx-auto grid md:grid-cols-4 gap-12",children:[n.jsxs("div",{className:"col-span-1 md:col-span-2",children:[n.jsxs("h2",{className:"text-3xl font-black italic tracking-tighter mb-4",children:["EMPRATA",n.jsx("span",{className:"text-purple-500",children:".AI"})]}),n.jsx("p",{className:"text-white/40 max-w-sm",children:"O sistema operacional definitivo para o futuro da gastronomia. Inteligncia, logstica e vendas em um s lugar."}),n.jsxs("div",{className:"flex gap-4 mt-6",children:[n.jsx("a",{href:"#",className:"w-10 h-10 bg-white/5 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center",children:n.jsx(Cx,{size:18,className:"text-white/60"})}),n.jsx("a",{href:"#",className:"w-10 h-10 bg-white/5 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center",children:n.jsx(Ex,{size:18,className:"text-white/60"})}),n.jsx("a",{href:"#",className:"w-10 h-10 bg-white/5 rounded-full hover:bg-[#25D366]/20 transition-colors flex items-center justify-center",children:n.jsx(Kh,{size:18,className:"text-white/60"})})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white mb-6 uppercase text-xs tracking-widest",children:"Produto"}),n.jsxs("ul",{className:"space-y-4 text-sm text-white/50",children:[n.jsx("li",{children:n.jsx("button",{onClick:()=>{t("CONSUMER"),window.scrollTo(0,0)},className:"hover:text-white transition-colors",children:"Para Consumidores"})}),n.jsx("li",{children:n.jsx("button",{onClick:()=>{t("BUSINESS"),window.scrollTo(0,0)},className:"hover:text-white transition-colors",children:"Para Restaurantes"})}),n.jsx("li",{children:n.jsx("button",{onClick:()=>a("/subscription"),className:"hover:text-white transition-colors",children:"Preos e Planos"})}),n.jsx("li",{children:n.jsx("button",{onClick:()=>a("/apps"),className:"hover:text-white transition-colors",children:"Baixar Apps"})})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-white mb-6 uppercase text-xs tracking-widest",children:"Legal"}),n.jsxs("ul",{className:"space-y-4 text-sm text-white/50",children:[n.jsx("li",{children:n.jsx("button",{onClick:()=>a("/terms"),className:"hover:text-white transition-colors",children:"Termos de Uso"})}),n.jsx("li",{children:n.jsx("button",{onClick:()=>a("/privacy"),className:"hover:text-white transition-colors",children:"Privacidade"})}),n.jsx("li",{children:n.jsx("a",{href:"https://wa.me/5511999999999",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"Suporte (WhatsApp)"})})]})]})]}),n.jsxs("div",{className:"max-w-7xl mx-auto mt-20 pt-8 border-t border-white/5 text-center text-xs text-white/20",children:[" ",new Date().getFullYear()," Emprata.ai Inc. Todos os direitos reservados."]})]}),n.jsx("div",{className:"md:hidden fixed top-6 right-4 z-[60]",children:n.jsx("button",{onClick:()=>s(!i),className:"bg-black/80 p-3 rounded-full border border-white/10 text-white backdrop-blur-md",children:i?n.jsx(Ht,{size:24}):n.jsx(Cl,{size:24})})}),n.jsx(Ye,{children:i&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black z-[55] flex flex-col items-center justify-center gap-8",children:[n.jsx("button",{onClick:()=>{t("CONSUMER"),s(!1)},className:"text-3xl font-black text-green-400 hover:scale-110 transition-transform",children:"PARA COMER"}),n.jsx("button",{onClick:()=>{t("BUSINESS"),s(!1)},className:"text-3xl font-black text-purple-400 hover:scale-110 transition-transform",children:"PARA VENDER"}),n.jsx("button",{onClick:()=>{a("/auth"),s(!1)},className:"bg-white text-black px-8 py-4 rounded-xl font-bold mt-8 hover:scale-105 transition-transform",children:"ENTRAR"})]})})]})}function Ou({mode:e,current:t,onClick:i,label:s,icon:a,color:o}){const c=t===e;return n.jsxs("button",{onClick:()=>i(e),className:`relative px-6 py-3 rounded-full text-sm font-black uppercase tracking-wider flex items-center gap-2 transition-all duration-300 ${c?o:"text-white/40 hover:text-white"}`,children:[c&&n.jsx(K.div,{layoutId:"tab-bg",className:`absolute inset-0 ${o} rounded-full -z-10`,transition:{type:"spring",bounce:.2,duration:.6}}),n.jsx(a,{size:16}),n.jsx("span",{className:"relative z-10",children:s})]})}function _b(){return n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-4 grid-rows-2 gap-6 h-auto md:h-[800px]",children:[n.jsx(Kn,{colSpan:"md:col-span-2 md:row-span-2",icon:fi,color:"text-green-400",bgGlow:"bg-green-500/10",title:"O 'Crebro' que conhece sua fome.",subtitle:"IA Preditiva & Personalizao Extrema",detailContent:n.jsxs("div",{className:"mt-6 space-y-4",children:[n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-green-500/20 flex items-center gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center",children:n.jsx(at,{size:20,className:"text-green-400"})}),n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"text-green-400 font-bold",children:"Previso:"}),' "Sexta  noite? Voc costuma pedir Pizza de Pepperoni com borda recheada."']})]}),n.jsx("p",{className:"text-white/60 text-sm leading-relaxed",children:"Analisamos seus horrios, clima e histrico para sugerir o que voc quer antes de voc pensar. Filtra ingredientes que odeia (adeus, uva passa!) automaticamente."})]})}),n.jsx(Kn,{colSpan:"md:col-span-2",icon:mi,color:"text-yellow-400",bgGlow:"bg-yellow-500/10",title:"Cardpio Vivo em 4K",subtitle:"Vdeos reais. Chega de fotos fakes.",detailContent:n.jsxs("div",{className:"mt-4 flex gap-4 items-center",children:[n.jsx("div",{className:"w-24 h-32 bg-zinc-800 rounded-lg animate-pulse"})," ",n.jsx("p",{className:"text-sm text-white/60 flex-1",children:"Veja a fumaa saindo, o queijo derretendo. Coma com os olhos primeiro. A deciso de compra  emocional, e ns a estimulamos ao mximo."})]})}),n.jsx(Kn,{icon:Un,color:"text-blue-400",bgGlow:"bg-blue-500/10",title:"Rastreio Militar",subtitle:"GPS em Tempo Real (Sem Delay)",detailContent:n.jsx("p",{className:"mt-4 text-sm text-white/60",children:"Acompanhe o cone do motoboy na rua exata. Atualizao por segundo. Saiba exatamente quando descer para a portaria."})}),n.jsx(Kn,{icon:pi,color:"text-purple-400",bgGlow:"bg-purple-500/10",title:"Cashback Infinito",subtitle:"Ganhe dinheiro de verdade.",detailContent:n.jsx("p",{className:"mt-4 text-sm text-white/60",children:"Convide um amigo: R$ 10 pra voc, R$ 10 pra ele na carteira digital. Use em qualquer restaurante do ecossistema. Sem pontos que expiram."})})]})}function jb(){return n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 md:grid-cols-4 grid-rows-2 gap-6 h-auto md:h-[800px]",children:[n.jsx(Kn,{colSpan:"md:col-span-3",icon:nr,color:"text-purple-400",bgGlow:"bg-purple-500/10",title:"O Piloto Automtico de Lucro",subtitle:"Precificao Dinmica & Modo Chuva com IA",detailContent:n.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-purple-500/20",children:[n.jsxs("p",{className:"text-purple-400 font-bold text-sm mb-2 flex items-center gap-2",children:[n.jsx(xi,{size:14})," Cenrio: Alta Demanda (Sbado 20h)"]}),n.jsx("p",{className:"text-white/60 text-xs",children:"A IA aumenta automaticamente a taxa de entrega em R$ 2,00 e o tempo mdio em 15min para controlar o fluxo e maximizar a margem."})]}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-blue-500/20",children:[n.jsxs("p",{className:"text-blue-400 font-bold text-sm mb-2 flex items-center gap-2",children:[n.jsx(Nb,{size:14,className:"text-blue-400"})," Cenrio: Chuva Detectada"]}),n.jsx("p",{className:"text-white/60 text-xs",children:'Ativao automtica do "Modo Chuva", notificando clientes sobre possveis atrasos e ajustando valores de frete para incentivar motoboys.'})]})]})}),n.jsx(Kn,{icon:Pn,color:"text-green-400",bgGlow:"bg-green-500/10",title:"Checkout Blindado",subtitle:"Anti-Fraude & KYC",detailContent:n.jsx("p",{className:"mt-4 text-sm text-white/60",children:"Validao de CPF na Receita Federal e anlise de risco antes do pedido entrar. Reduza chargebacks a zero. S clientes reais."})}),n.jsx(Kn,{icon:gt,color:"text-orange-400",bgGlow:"bg-orange-500/10",title:"KDS: Cozinha Digital",subtitle:"Fim das impressoras.",detailContent:n.jsx("p",{className:"mt-4 text-sm text-white/60",children:'Tela touch na cozinha. Pedidos organizados por tempo de preparo e cor. O cozinheiro d "baixa" e o cliente  notificado na hora. Eficincia brutal.'})}),n.jsx(Kn,{colSpan:"md:col-span-3",icon:Wt,color:"text-blue-400",bgGlow:"bg-blue-500/10",title:"Central de Comando Omnichannel",subtitle:"Todos os canais. Uma nica tela.",detailContent:n.jsxs("div",{className:"mt-4 flex gap-4 text-sm text-white/60 items-center",children:[n.jsxs("div",{className:"flex -space-x-2 shrink-0",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-[#25D366] flex items-center justify-center text-black font-bold text-[10px]",children:"WPP"}),n.jsx("div",{className:"w-8 h-8 rounded-full bg-[#ea1d2c] flex items-center justify-center text-white font-bold text-[10px]",children:"IFD"}),n.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center text-black font-bold text-[10px]",children:"APP"})]}),n.jsx("p",{children:"Integrao nativa de pedidos do WhatsApp (com bot), iFood (via hub), Balco e seu App Prprio. Gerencie tudo no mesmo painel financeiro e KDS."})]})})]})}function Kn({icon:e,title:t,subtitle:i,detailContent:s,color:a,bgGlow:o,colSpan:c=""}){return n.jsxs(K.div,{whileHover:{scale:1.02,backgroundColor:"rgba(255,255,255,0.02)"},className:`${c} bg-[#121212] rounded-[2.5rem] p-8 border border-white/5 relative overflow-hidden group transition-all duration-500 flex flex-col justify-between`,children:[n.jsx("div",{className:`absolute inset-0 ${o} opacity-0 group-hover:opacity-20 blur-[100px] transition-opacity duration-700 pointer-events-none`}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:`w-14 h-14 rounded-2xl bg-black/50 border border-white/10 flex items-center justify-center mb-6 ${a} shadow-lg group-hover:scale-110 transition-transform`,children:n.jsx(e,{size:28})}),n.jsx("h3",{className:"text-2xl font-black mb-2 text-white",children:t}),n.jsx("p",{className:"text-lg font-medium text-white/50",children:i}),n.jsx("div",{className:"relative overflow-hidden max-h-0 group-hover:max-h-[500px] transition-all duration-700 ease-in-out opacity-0 group-hover:opacity-100",children:s})]}),n.jsx("div",{className:"absolute bottom-6 right-6 opacity-20 group-hover:opacity-100 transition-opacity delay-100",children:n.jsx(Rn,{className:`${a} group-hover:translate-x-2 transition-transform`})})]})}const Nb=({size:e,className:t})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[n.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),n.jsx("path",{d:"M8 19v2"}),n.jsx("path",{d:"M8 13v2"}),n.jsx("path",{d:"M16 19v2"}),n.jsx("path",{d:"M16 13v2"}),n.jsx("path",{d:"M12 21v2"}),n.jsx("path",{d:"M12 15v2"})]});function wr({question:e,answer:t}){const[i,s]=T.useState(!1);return n.jsxs("div",{className:"border border-white/5 rounded-2xl bg-[#121212] overflow-hidden",children:[n.jsxs("button",{onClick:()=>s(!i),className:"w-full flex justify-between items-center p-6 text-left hover:bg-white/5 transition-colors",children:[n.jsx("span",{className:"font-bold text-lg pr-4",children:e}),n.jsx("span",{className:`transform transition-transform shrink-0 text-white/40 ${i?"rotate-180":""}`,children:""})]}),n.jsx(Ye,{children:i&&n.jsx(K.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:n.jsx("div",{className:"p-6 pt-0 text-white/60 leading-relaxed",children:t})})})]})}function kp({isOpen:e,onClose:t,onSuccess:i}){const{loginWithGoogle:s,signIn:a,signUp:o,error:c}=Ke(),[u,h]=T.useState("google"),[d,f]=T.useState(""),[p,x]=T.useState(""),[b,y]=T.useState(""),[w,j]=T.useState(null),[S,C]=T.useState(!1),N=async()=>{try{C(!0),j(null),await s(),i?.(),t()}catch(I){j(I.message||"Erro ao fazer login com Google")}finally{C(!1)}},R=async I=>{I.preventDefault();try{C(!0),j(null),await a(d,p),i?.(),t()}catch{j("Email ou senha incorretos")}finally{C(!1)}},P=async I=>{I.preventDefault();try{C(!0),j(null),await o(d,p,b),i?.(),t()}catch(F){j(F.message||"Erro ao criar conta")}finally{C(!1)}};return n.jsx(Ye,{children:e&&n.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/90 backdrop-blur-md"}),n.jsxs(K.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-zinc-900 border-2 border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:[n.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors z-10",children:n.jsx(Ht,{className:"w-5 h-5 text-white/60"})}),n.jsxs("div",{className:"p-8 pt-12",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-primary/30",children:n.jsx("span",{className:"text-3xl",children:""})}),n.jsx("h2",{className:"text-3xl font-black text-white mb-2 italic uppercase",children:"Salve sua obra de arte"}),n.jsxs("p",{className:"text-white/60 font-medium",children:["Crie uma conta grtis para baixar sua imagem e ganhar ",n.jsx("span",{className:"text-primary font-bold",children:"+3 crditos"})]})]}),u==="google"&&n.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[n.jsx("button",{onClick:N,disabled:S,className:"w-full bg-white hover:bg-gray-100 text-gray-900 font-bold py-4 px-6 rounded-2xl flex items-center justify-center gap-3 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:S?n.jsx(Ee,{className:"w-5 h-5 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]})}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-white/10"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-4 bg-zinc-900 text-white/40 font-bold uppercase tracking-wider",children:"ou"})})]}),n.jsxs("button",{onClick:()=>h("email"),className:"w-full bg-white/5 hover:bg-white/10 text-white font-bold py-4 px-6 rounded-2xl flex items-center justify-center gap-3 transition-all border border-white/10",children:[n.jsx(Ls,{className:"w-5 h-5"}),"Entrar com Email"]})]}),u==="email"&&n.jsxs(K.form,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onSubmit:R,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ls,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),n.jsx("input",{type:"email",value:d,onChange:I=>f(I.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"seu@email.com",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),n.jsx("input",{type:"password",value:p,onChange:I=>x(I.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"",required:!0})]})]}),n.jsx("button",{type:"submit",disabled:S,className:"w-full bg-primary hover:bg-orange-600 text-white font-black py-4 rounded-2xl transition-all shadow-lg shadow-primary/30 disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wider",children:S?n.jsx(Ee,{className:"w-5 h-5 animate-spin mx-auto"}):"Entrar"}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{type:"button",onClick:()=>h("signup"),className:"text-sm text-white/60 hover:text-white font-bold transition-colors",children:["No tem conta? ",n.jsx("span",{className:"text-primary",children:"Criar agora"})]})}),n.jsx("button",{type:"button",onClick:()=>h("google"),className:"w-full text-sm text-white/40 hover:text-white font-bold transition-colors",children:" Voltar"})]}),u==="signup"&&n.jsxs(K.form,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onSubmit:P,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Nome"}),n.jsxs("div",{className:"relative",children:[n.jsx(Tn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),n.jsx("input",{type:"text",value:b,onChange:I=>y(I.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"Seu nome",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ls,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),n.jsx("input",{type:"email",value:d,onChange:I=>f(I.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"seu@email.com",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(Gt,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),n.jsx("input",{type:"password",value:p,onChange:I=>x(I.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"Mnimo 6 caracteres",required:!0,minLength:6})]})]}),n.jsx("button",{type:"submit",disabled:S,className:"w-full bg-primary hover:bg-orange-600 text-white font-black py-4 rounded-2xl transition-all shadow-lg shadow-primary/30 disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wider",children:S?n.jsx(Ee,{className:"w-5 h-5 animate-spin mx-auto"}):"Criar Conta"}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{type:"button",onClick:()=>h("email"),className:"text-sm text-white/60 hover:text-white font-bold transition-colors",children:["J tem conta? ",n.jsx("span",{className:"text-primary",children:"Entrar"})]})}),n.jsx("button",{type:"button",onClick:()=>h("google"),className:"w-full text-sm text-white/40 hover:text-white font-bold transition-colors",children:" Voltar"})]}),(w||c)&&n.jsxs(K.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 bg-red-500/20 border border-red-500/50 rounded-xl p-3 flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4 text-red-400 shrink-0"}),n.jsx("p",{className:"text-sm text-red-300 font-bold",children:w||c})]}),n.jsx("p",{className:"text-center text-xs text-white/30 font-bold mt-6",children:"Ao continuar, voc concorda com nossos Termos de Uso"})]})]})]})})}const kb={starter:"STARTER",pro:"GROWTH"};function Cb(){const[e]=sp(),t=_t(),{user:i,userData:s,loading:a}=Ke(),o=e.get("role")==="consumer"?"consumer":"owner",[c,u]=T.useState(o),[h,d]=T.useState(!1),[f,p]=T.useState(!1),x=typeof window<"u"?sessionStorage.getItem("pending_plan"):null;T.useEffect(()=>{!a&&i&&b()},[i,a]);const b=async()=>{const w=sessionStorage.getItem("pending_plan");if(w){console.log(` [LoginPage] Resuming purchase for plan: ${w}`),p(!0);try{ie.loading("Gerando seu pagamento seguro...");const C=(await wp(_p,"createSubscription")({plan:kb[w],billingType:"PIX"})).data;if(sessionStorage.removeItem("pending_plan"),sessionStorage.removeItem("purchase_intent_value"),C.success&&C.invoiceUrl)window.location.href=C.invoiceUrl;else throw new Error("Falha ao gerar assinatura")}catch(j){console.error("Error resuming purchase:",j),ie.dismiss(),ie.error("Erro ao gerar assinatura. Tente novamente."),p(!1),t("/dashboard",{replace:!0})}}else{const j=s?.role||c;j==="consumer"?t("/marketplace",{replace:!0}):j==="waiter"||j==="staff"?t("/waiter-mode",{replace:!0}):t("/dashboard",{replace:!0})}};if(a||f)return n.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-center",children:[n.jsx(Ee,{className:"w-12 h-12 text-primary animate-spin mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-white",children:f?"Preparando seu ambiente...":"Conectando..."}),f&&n.jsx("p",{className:"text-white/40 text-sm mt-2",children:"Estamos gerando sua assinatura Asaas."})]});const y=()=>{};return n.jsxs("div",{className:"min-h-screen bg-[#050505] text-white flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 pointer-events-none"}),n.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-primary/10 via-transparent to-transparent pointer-events-none"}),n.jsx("header",{className:"absolute top-6 left-6 z-10",children:n.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-white/40 hover:text-white transition-colors group",children:[n.jsx(_i,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),n.jsx("span",{className:"font-bold text-sm",children:"Voltar"})]})}),n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md z-10",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsxs("h1",{className:"text-4xl font-black italic tracking-tighter mb-2",children:["Emprata",n.jsx("span",{className:"text-primary",children:".ai"})]}),n.jsx("p",{className:"text-white/40 font-medium",children:x?"Complete seu login para ativar o plano":c==="consumer"?"O melhor da gastronomia na sua porta.":"O Sistema Operacional do seu Delivery."})]}),x&&n.jsxs(K.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"mb-8 p-4 bg-primary/10 border border-primary/30 rounded-2xl text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx(Wt,{className:"w-5 h-5 text-primary"}),n.jsx("span",{className:"text-primary text-xs font-black uppercase tracking-wider",children:"Quase l!"})]}),n.jsxs("p",{className:"text-white/80 text-sm font-medium",children:["Faa login para concluir a assinatura do plano"," ",n.jsx("span",{className:"text-white font-black",children:x.toUpperCase()})]})]}),!x&&n.jsxs("div",{className:"bg-white/5 p-1 rounded-2xl flex mb-8 border border-white/10",children:[n.jsxs("button",{onClick:()=>u("owner"),className:`flex-1 py-3 rounded-xl text-xs font-bold uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c==="owner"?"bg-primary text-white shadow-lg":"text-white/40 hover:text-white"}`,children:[n.jsx(gt,{className:"w-4 h-4"})," Restaurante"]}),n.jsxs("button",{onClick:()=>u("consumer"),className:`flex-1 py-3 rounded-xl text-xs font-bold uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c==="consumer"?"bg-white text-black shadow-lg":"text-white/40 hover:text-white"}`,children:[n.jsx(Qs,{className:"w-4 h-4"})," Cliente"]})]}),n.jsxs("div",{className:"bg-[#121212] border border-white/10 rounded-3xl p-8 shadow-2xl relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-32 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-primary/10 transition-all duration-1000"}),n.jsx("h2",{className:"text-2xl font-bold mb-2 relative z-10",children:x?"Login Rpido":c==="consumer"?"Fome de qu?":"Gerencie seu Negcio"}),n.jsx("p",{className:"text-white/40 text-sm mb-8 relative z-10 leading-relaxed",children:x?"Aps o login, voc ser redirecionado automaticamente para o pagamento.":c==="consumer"?"Entre para acompanhar seus pedidos, salvar endereos e descobrir novos sabores.":"Acesse sua dashboard, KDS e ferramentas de gesto com inteligncia artificial."}),n.jsxs("button",{onClick:()=>d(!0),className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-3 transition-all transform active:scale-95 ${x||c==="owner"?"bg-primary text-white hover:bg-orange-600":"bg-white text-black hover:bg-gray-200"}`,children:[x?"Entrar e Assinar":c==="consumer"?"Entrar / Cadastrar":"Acessar Painel",n.jsx(Rn,{className:"w-4 h-4"})]}),c==="owner"&&!x&&n.jsx(it,{to:"/waiter-login",className:"block text-center mt-4 text-xs font-bold text-white/30 hover:text-white transition-colors",children:"Sou Garom / Staff"}),c==="consumer"&&!x&&n.jsx("button",{onClick:async()=>{try{await Mg(rt),t("/marketplace"),ie.success("Modo Visitante Ativado! ")}catch{ie.error("Erro ao entrar como visitante")}},className:"block w-full text-center mt-4 text-sm text-white/40 hover:text-white transition-colors underline underline-offset-4",children:"S estou dando uma olhadinha (Entrar sem cadastro)"})]}),n.jsx("div",{className:"text-center mt-8 text-[10px] font-bold text-white/20 uppercase tracking-widest",children:"Emprata Inc.  2025"})]}),n.jsx(kp,{isOpen:h,onClose:()=>d(!1),onSuccess:y})]})}const Eb="modulepreload",Sb=function(e){return"/"+e},Du={},Cp=function(t,i,s){let a=Promise.resolve();if(i&&i.length>0){let h=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");a=h(i.map(d=>{if(d=Sb(d),d in Du)return;Du[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":Eb,f||(x.as="script"),x.crossOrigin="",x.href=d,u&&x.setAttribute("nonce",u),document.head.appendChild(x),f)return new Promise((b,y)=>{x.addEventListener("load",b),x.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},zu=["Acendendo o fogo...","Contratando o fotgrafo...","Arrumando a mesa...","Passando um pano...","Temperando a lente...","Finalizando o empratamento..."],Fu=[Sx,Js,Ax,gt],Ab=()=>{const[e,t]=T.useState(0),[i,s]=T.useState(0);T.useEffect(()=>{const o=setInterval(()=>{t(u=>(u+1)%zu.length)},800),c=setInterval(()=>{s(u=>(u+1)%Fu.length)},1500);return()=>{clearInterval(o),clearInterval(c)}},[]);const a=Fu[i];return n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-primary z-50 flex flex-col items-center justify-center text-white p-8",children:[n.jsxs("div",{className:"relative",children:[n.jsx(K.div,{animate:{scale:[1,1.2,1],opacity:[.5,.8,.5]},transition:{repeat:1/0,duration:2},className:"absolute inset-0 bg-white/20 rounded-full blur-3xl"}),n.jsx(K.div,{animate:{rotate:360},transition:{repeat:1/0,duration:8,ease:"linear"},className:"w-32 h-32 border-4 border-dashed border-white/50 rounded-full flex items-center justify-center",children:n.jsx(K.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},className:"w-16 h-16 bg-white text-primary rounded-full flex items-center justify-center shadow-xl",children:n.jsx(a,{className:"w-8 h-8"})},i)})]}),n.jsxs("div",{className:"mt-12 h-20 flex flex-col items-center",children:[n.jsx("h2",{className:"text-3xl font-extrabold mb-4 uppercase tracking-tighter italic",children:"Chef Mode"}),n.jsx(Ye,{mode:"wait",children:n.jsx(K.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-xl font-bold text-white/90 text-center",children:zu[e]},e)})]}),n.jsx("div",{className:"mt-8 w-48 h-2 bg-white/20 rounded-full overflow-hidden",children:n.jsx(K.div,{animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"w-full h-full bg-white"})}),n.jsx("div",{className:"absolute bottom-12 text-center opacity-60",children:n.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"A inteligncia est cozinhando..."})})]})};function Xn(e){return typeof e=="string"||e instanceof String}function Bu(e){var t;return typeof e=="object"&&e!=null&&(e==null||(t=e.constructor)==null?void 0:t.name)==="Object"}function Ep(e,t){return Array.isArray(t)?Ep(e,(i,s)=>t.includes(s)):Object.entries(e).reduce((i,s)=>{let[a,o]=s;return t(o,a)&&(i[a]=o),i},{})}const xe={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function Tb(e){switch(e){case xe.LEFT:return xe.FORCE_LEFT;case xe.RIGHT:return xe.FORCE_RIGHT;default:return e}}function ho(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function ia(e,t){if(t===e)return!0;const i=Array.isArray(t),s=Array.isArray(e);let a;if(i&&s){if(t.length!=e.length)return!1;for(a=0;a<t.length;a++)if(!ia(t[a],e[a]))return!1;return!0}if(i!=s)return!1;if(t&&e&&typeof t=="object"&&typeof e=="object"){const o=t instanceof Date,c=e instanceof Date;if(o&&c)return t.getTime()==e.getTime();if(o!=c)return!1;const u=t instanceof RegExp,h=e instanceof RegExp;if(u&&h)return t.toString()==e.toString();if(u!=h)return!1;const d=Object.keys(t);for(a=0;a<d.length;a++)if(!Object.prototype.hasOwnProperty.call(e,d[a]))return!1;for(a=0;a<d.length;a++)if(!ia(e[d[a]],t[d[a]]))return!1;return!0}else if(t&&e&&typeof t=="function"&&typeof e=="function")return t.toString()===e.toString();return!1}class Pb{constructor(t){for(Object.assign(this,t);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?xe.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?xe.RIGHT:xe.LEFT}}function Ce(e,t){return new Ce.InputMask(e,t)}function Sp(e){if(e==null)throw new Error("mask property should be defined");return e instanceof RegExp?Ce.MaskedRegExp:Xn(e)?Ce.MaskedPattern:e===Date?Ce.MaskedDate:e===Number?Ce.MaskedNumber:Array.isArray(e)||e===Array?Ce.MaskedDynamic:Ce.Masked&&e.prototype instanceof Ce.Masked?e:Ce.Masked&&e instanceof Ce.Masked?e.constructor:e instanceof Function?Ce.MaskedFunction:(console.warn("Mask not found for mask",e),Ce.Masked)}function zr(e){if(!e)throw new Error("Options in not defined");if(Ce.Masked){if(e.prototype instanceof Ce.Masked)return{mask:e};const{mask:t=void 0,...i}=e instanceof Ce.Masked?{mask:e}:Bu(e)&&e.mask instanceof Ce.Masked?e:{};if(t){const s=t.mask;return{...Ep(t,(a,o)=>!o.startsWith("_")),mask:t.constructor,_mask:s,...i}}}return Bu(e)?{...e}:{mask:e}}function Vn(e){if(Ce.Masked&&e instanceof Ce.Masked)return e;const t=zr(e),i=Sp(t.mask);if(!i)throw new Error("Masked class is not found for provided mask "+t.mask+", appropriate module needs to be imported manually before creating mask.");return t.mask===i&&delete t.mask,t._mask&&(t.mask=t._mask,delete t._mask),new i(t)}Ce.createMask=Vn;class Ul{get selectionStart(){let t;try{t=this._unsafeSelectionStart}catch{}return t??this.value.length}get selectionEnd(){let t;try{t=this._unsafeSelectionEnd}catch{}return t??this.value.length}select(t,i){if(!(t==null||i==null||t===this.selectionStart&&i===this.selectionEnd))try{this._unsafeSelect(t,i)}catch{}}get isActive(){return!1}}Ce.MaskElement=Ul;const Uu=90,Ib=89;class xa extends Ul{constructor(t){super(),this.input=t,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var t,i,s;return(t=(i=(s=this.input).getRootNode)==null?void 0:i.call(s))!=null?t:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(t){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",t.drop),this.input.addEventListener("click",t.click),this.input.addEventListener("focus",t.focus),this.input.addEventListener("blur",t.commit),this._handlers=t}_onKeydown(t){if(this._handlers.redo&&(t.keyCode===Uu&&t.shiftKey&&(t.metaKey||t.ctrlKey)||t.keyCode===Ib&&t.ctrlKey))return t.preventDefault(),this._handlers.redo(t);if(this._handlers.undo&&t.keyCode===Uu&&(t.metaKey||t.ctrlKey))return t.preventDefault(),this._handlers.undo(t);t.isComposing||this._handlers.selectionChange(t)}_onBeforeinput(t){if(t.inputType==="historyUndo"&&this._handlers.undo)return t.preventDefault(),this._handlers.undo(t);if(t.inputType==="historyRedo"&&this._handlers.redo)return t.preventDefault(),this._handlers.redo(t)}_onCompositionEnd(t){this._handlers.input(t)}_onInput(t){t.isComposing||this._handlers.input(t)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}Ce.HTMLMaskElement=xa;class Rb extends xa{constructor(t){super(t),this.input=t}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(t,i){this.input.setSelectionRange(t,i)}get value(){return this.input.value}set value(t){this.input.value=t}}Ce.HTMLMaskElement=xa;class Ap extends xa{get _unsafeSelectionStart(){const t=this.rootElement,i=t.getSelection&&t.getSelection(),s=i&&i.anchorOffset,a=i&&i.focusOffset;return a==null||s==null||s<a?s:a}get _unsafeSelectionEnd(){const t=this.rootElement,i=t.getSelection&&t.getSelection(),s=i&&i.anchorOffset,a=i&&i.focusOffset;return a==null||s==null||s>a?s:a}_unsafeSelect(t,i){if(!this.rootElement.createRange)return;const s=this.rootElement.createRange();s.setStart(this.input.firstChild||this.input,t),s.setEnd(this.input.lastChild||this.input,i);const a=this.rootElement,o=a.getSelection&&a.getSelection();o&&(o.removeAllRanges(),o.addRange(s))}get value(){return this.input.textContent||""}set value(t){this.input.textContent=t}}Ce.HTMLContenteditableMaskElement=Ap;class ga{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(t){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(t),this.states.length>ga.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(t){return this.currentIndex=Math.min(Math.max(this.currentIndex+t,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}ga.MAX_LENGTH=100;class Mb{constructor(t,i){this.el=t instanceof Ul?t:t.isContentEditable&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"?new Ap(t):new Rb(t),this.masked=Vn(i),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new ga,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(t){var i;return t==null||((i=this.masked)==null?void 0:i.maskEquals(t))}get mask(){return this.masked.mask}set mask(t){if(this.maskEquals(t))return;if(!(t instanceof Ce.Masked)&&this.masked.constructor===Sp(t)){this.masked.updateOptions({mask:t});return}const i=t instanceof Ce.Masked?t:Vn({mask:t});i.unmaskedValue=this.masked.unmaskedValue,this.masked=i}get value(){return this._value}set value(t){this.value!==t&&(this.masked.value=t,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(t){this.unmaskedValue!==t&&(this.masked.unmaskedValue=t,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(t){this.rawInputValue!==t&&(this.masked.rawInputValue=t,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(t){this.masked.typedValueEquals(t)||(this.masked.typedValue=t,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(t,i){const s=this._listeners[t];s&&s.forEach(a=>a(i))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(t){!this.el||!this.el.isActive||(this.el.select(t,t),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(t){const i=this.masked.unmaskedValue,s=this.masked.value,a=this.masked.rawInputValue,o=this.displayValue,c=this.unmaskedValue!==i||this.value!==s||this._rawInputValue!==a;this._unmaskedValue=i,this._value=s,this._rawInputValue=a,this.el.value!==o&&(this.el.value=o),t==="auto"?this.alignCursor():t!=null&&(this.cursorPos=t),c&&this._fireChangeEvents(),!this._historyChanging&&(c||this.history.isEmpty)&&this.history.push({unmaskedValue:i,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(t){const{mask:i,...s}=t,a=!this.maskEquals(i),o=this.masked.optionsIsChanged(s);a&&(this.mask=i),o&&this.masked.updateOptions(s),(a||o)&&this.updateControl()}updateCursor(t){t!=null&&(this.cursorPos=t,this._delayUpdateCursor(t))}_delayUpdateCursor(t){this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,xe.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(t,i){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(i),this}off(t,i){if(!this._listeners[t])return this;if(!i)return delete this._listeners[t],this;const s=this._listeners[t].indexOf(i);return s>=0&&this._listeners[t].splice(s,1),this}_onInput(t){this._inputEvent=t,this._abortUpdateCursor();const i=new Pb({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),s=this.masked.rawInputValue,a=this.masked.splice(i.startChangePos,i.removed.length,i.inserted,i.removeDirection,{input:!0,raw:!0}).offset,o=s===this.masked.rawInputValue?i.removeDirection:xe.NONE;let c=this.masked.nearestInputPos(i.startChangePos+a,o);o!==xe.NONE&&(c=this.masked.nearestInputPos(c,xe.NONE)),this.updateControl(c),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(t){t.preventDefault(),t.stopPropagation()}_onFocus(t){this.alignCursorFriendly()}_onClick(t){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(t){t&&(this._historyChanging=!0,this.unmaskedValue=t.unmaskedValue,this.el.select(t.selection.start,t.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}}Ce.InputMask=Mb;class Le{static normalize(t){return Array.isArray(t)?t:[t,new Le]}constructor(t){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},t)}aggregate(t){return this.inserted+=t.inserted,this.rawInserted+=t.rawInserted,this.tailShift+=t.tailShift,this.skip=this.skip||t.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return!!this.rawInserted||this.skip}equals(t){return this.inserted===t.inserted&&this.tailShift===t.tailShift&&this.rawInserted===t.rawInserted&&this.skip===t.skip}}Ce.ChangeDetails=Le;class An{constructor(t,i,s){t===void 0&&(t=""),i===void 0&&(i=0),this.value=t,this.from=i,this.stop=s}toString(){return this.value}extend(t){this.value+=String(t)}appendTo(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(t){Object.assign(this,t)}unshift(t){if(!this.value.length||t!=null&&this.from>=t)return"";const i=this.value[0];return this.value=this.value.slice(1),i}shift(){if(!this.value.length)return"";const t=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),t}}class St{constructor(t){this._value="",this._update({...St.DEFAULTS,...t}),this._initialized=!0}updateOptions(t){this.optionsIsChanged(t)&&this.withValueRefresh(this._update.bind(this,t))}_update(t){Object.assign(this,t)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(t){this._value=t._value}reset(){this._value=""}get value(){return this._value}set value(t){this.resolve(t,{input:!0})}resolve(t,i){i===void 0&&(i={input:!0}),this.reset(),this.append(t,i,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(t){this.resolve(t,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(t){this.format?this.value=this.format(t,this):this.unmaskedValue=String(t)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(t){this.resolve(t,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(t,i){return t}totalInputPositions(t,i){return t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),Math.min(this.displayValue.length,i-t)}extractInput(t,i,s){return t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),this.displayValue.slice(t,i)}extractTail(t,i){return t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),new An(this.extractInput(t,i),t)}appendTail(t){return Xn(t)&&(t=new An(String(t))),t.appendTo(this)}_appendCharRaw(t,i){return t?(this._value+=t,new Le({inserted:t,rawInserted:t})):new Le}_appendChar(t,i,s){i===void 0&&(i={});const a=this.state;let o;if([t,o]=this.doPrepareChar(t,i),t&&(o=o.aggregate(this._appendCharRaw(t,i)),!o.rawInserted&&this.autofix==="pad")){const c=this.state;this.state=a;let u=this.pad(i);const h=this._appendCharRaw(t,i);u=u.aggregate(h),h.rawInserted||u.equals(o)?o=u:this.state=c}if(o.inserted){let c,u=this.doValidate(i)!==!1;if(u&&s!=null){const h=this.state;if(this.overwrite===!0){c=s.state;for(let f=0;f<o.rawInserted.length;++f)s.unshift(this.displayValue.length-o.tailShift)}let d=this.appendTail(s);if(u=d.rawInserted.length===s.toString().length,!(u&&d.inserted)&&this.overwrite==="shift"){this.state=h,c=s.state;for(let f=0;f<o.rawInserted.length;++f)s.shift();d=this.appendTail(s),u=d.rawInserted.length===s.toString().length}u&&d.inserted&&(this.state=h)}u||(o=new Le,this.state=a,s&&c&&(s.state=c))}return o}_appendPlaceholder(){return new Le}_appendEager(){return new Le}append(t,i,s){if(!Xn(t))throw new Error("value should be string");const a=Xn(s)?new An(String(s)):s;i!=null&&i.tail&&(i._beforeTailState=this.state);let o;[t,o]=this.doPrepare(t,i);for(let c=0;c<t.length;++c){const u=this._appendChar(t[c],i,a);if(!u.rawInserted&&!this.doSkipInvalid(t[c],i,a))break;o.aggregate(u)}return(this.eager===!0||this.eager==="append")&&i!=null&&i.input&&t&&o.aggregate(this._appendEager()),a!=null&&(o.tailShift+=this.appendTail(a).tailShift),o}remove(t,i){return t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),this._value=this.displayValue.slice(0,t)+this.displayValue.slice(i),new Le}withValueRefresh(t){if(this._refreshing||!this._initialized)return t();this._refreshing=!0;const i=this.rawInputValue,s=this.value,a=t();return this.rawInputValue=i,this.value&&this.value!==s&&s.indexOf(this.value)===0&&(this.append(s.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,a}runIsolated(t){if(this._isolated||!this._initialized)return t(this);this._isolated=!0;const i=this.state,s=t(this);return this.state=i,delete this._isolated,s}doSkipInvalid(t,i,s){return!!this.skipInvalid}doPrepare(t,i){return i===void 0&&(i={}),Le.normalize(this.prepare?this.prepare(t,this,i):t)}doPrepareChar(t,i){return i===void 0&&(i={}),Le.normalize(this.prepareChar?this.prepareChar(t,this,i):t)}doValidate(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}doCommit(){this.commit&&this.commit(this.value,this)}splice(t,i,s,a,o){s===void 0&&(s=""),a===void 0&&(a=xe.NONE),o===void 0&&(o={input:!0});const c=t+i,u=this.extractTail(c),h=this.eager===!0||this.eager==="remove";let d;h&&(a=Tb(a),d=this.extractInput(0,c,{raw:!0}));let f=t;const p=new Le;if(a!==xe.NONE&&(f=this.nearestInputPos(t,i>1&&t!==0&&!h?xe.NONE:a),p.tailShift=f-t),p.aggregate(this.remove(f)),h&&a!==xe.NONE&&d===this.rawInputValue)if(a===xe.FORCE_LEFT){let x;for(;d===this.rawInputValue&&(x=this.displayValue.length);)p.aggregate(new Le({tailShift:-1})).aggregate(this.remove(x-1))}else a===xe.FORCE_RIGHT&&u.unshift();return p.aggregate(this.append(s,o,u))}maskEquals(t){return this.mask===t}optionsIsChanged(t){return!ia(this,t)}typedValueEquals(t){const i=this.typedValue;return t===i||St.EMPTY_VALUES.includes(t)&&St.EMPTY_VALUES.includes(i)||(this.format?this.format(t,this)===this.format(this.typedValue,this):!1)}pad(t){return new Le}}St.DEFAULTS={skipInvalid:!0};St.EMPTY_VALUES=[void 0,null,""];Ce.Masked=St;class ci{constructor(t,i){t===void 0&&(t=[]),i===void 0&&(i=0),this.chunks=t,this.from=i}toString(){return this.chunks.map(String).join("")}extend(t){if(!String(t))return;t=Xn(t)?new An(String(t)):t;const i=this.chunks[this.chunks.length-1],s=i&&(i.stop===t.stop||t.stop==null)&&t.from===i.from+i.toString().length;if(t instanceof An)s?i.extend(t.toString()):this.chunks.push(t);else if(t instanceof ci){if(t.stop==null){let a;for(;t.chunks.length&&t.chunks[0].stop==null;)a=t.chunks.shift(),a.from+=t.from,this.extend(a)}t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}appendTo(t){if(!(t instanceof Ce.MaskedPattern))return new An(this.toString()).appendTo(t);const i=new Le;for(let s=0;s<this.chunks.length;++s){const a=this.chunks[s],o=t._mapPosToBlock(t.displayValue.length),c=a.stop;let u;if(c!=null&&(!o||o.index<=c)&&((a instanceof ci||t._stops.indexOf(c)>=0)&&i.aggregate(t._appendPlaceholder(c)),u=a instanceof ci&&t._blocks[c]),u){const h=u.appendTail(a);i.aggregate(h);const d=a.toString().slice(h.rawInserted.length);d&&i.aggregate(t.append(d,{tail:!0}))}else i.aggregate(t.append(a.toString(),{tail:!0}))}return i}get state(){return{chunks:this.chunks.map(t=>t.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(t){const{chunks:i,...s}=t;Object.assign(this,s),this.chunks=i.map(a=>{const o="chunks"in a?new ci:new An;return o.state=a,o})}unshift(t){if(!this.chunks.length||t!=null&&this.from>=t)return"";const i=t!=null?t-this.from:t;let s=0;for(;s<this.chunks.length;){const a=this.chunks[s],o=a.unshift(i);if(a.toString()){if(!o)break;++s}else this.chunks.splice(s,1);if(o)return o}return""}shift(){if(!this.chunks.length)return"";let t=this.chunks.length-1;for(;0<=t;){const i=this.chunks[t],s=i.shift();if(i.toString()){if(!s)break;--t}else this.chunks.splice(t,1);if(s)return s}return""}}class Lb{constructor(t,i){this.masked=t,this._log=[];const{offset:s,index:a}=t._mapPosToBlock(i)||(i<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=s,this.index=a,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(t){Object.assign(this,t)}pushState(){this._log.push(this.state)}popState(){const t=this._log.pop();return t&&(this.state=t),t}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(t){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((i=this.block)==null?void 0:i.displayValue.length)||0){var i;if(t())return this.ok=!0}return this.ok=!1}_pushRight(t){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(t())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,xe.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,xe.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,xe.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,xe.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,xe.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,xe.NONE),!0})}}class Tp{constructor(t){Object.assign(this,t),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(t,i){return t===void 0&&(t=0),i===void 0&&(i=this._value.length),this._value=this._value.slice(0,t)+this._value.slice(i),this._value||(this._isRawInput=!1),new Le}nearestInputPos(t,i){i===void 0&&(i=xe.NONE);const s=0,a=this._value.length;switch(i){case xe.LEFT:case xe.FORCE_LEFT:return s;case xe.NONE:case xe.RIGHT:case xe.FORCE_RIGHT:default:return a}}totalInputPositions(t,i){return t===void 0&&(t=0),i===void 0&&(i=this._value.length),this._isRawInput?i-t:0}extractInput(t,i,s){return t===void 0&&(t=0),i===void 0&&(i=this._value.length),s===void 0&&(s={}),s.raw&&this._isRawInput&&this._value.slice(t,i)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(t,i){if(i===void 0&&(i={}),this.isFilled)return new Le;const s=this.eager===!0||this.eager==="append",o=this.char===t&&(this.isUnmasking||i.input||i.raw)&&(!i.raw||!s)&&!i.tail,c=new Le({inserted:this.char,rawInserted:o?this.char:""});return this._value=this.char,this._isRawInput=o&&(i.raw||i.input),c}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const t=new Le;return this.isFilled||(this._value=t.inserted=this.char),t}extractTail(){return new An("")}appendTail(t){return Xn(t)&&(t=new An(String(t))),t.appendTo(this)}append(t,i,s){const a=this._appendChar(t[0],i);return s!=null&&(a.tailShift+=this.appendTail(s).tailShift),a}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(t){this._value=t._value,this._isRawInput=!!t._rawInputValue}pad(t){return this._appendPlaceholder()}}class ra{constructor(t){const{parent:i,isOptional:s,placeholderChar:a,displayChar:o,lazy:c,eager:u,...h}=t;this.masked=Vn(h),Object.assign(this,{parent:i,isOptional:s,placeholderChar:a,displayChar:o,lazy:c,eager:u})}reset(){this.isFilled=!1,this.masked.reset()}remove(t,i){return t===void 0&&(t=0),i===void 0&&(i=this.value.length),t===0&&i>=1?(this.isFilled=!1,this.masked.remove(t,i)):new Le}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(t,i){if(i===void 0&&(i={}),this.isFilled)return new Le;const s=this.masked.state;let a=this.masked._appendChar(t,this.currentMaskFlags(i));return a.inserted&&this.doValidate(i)===!1&&(a=new Le,this.masked.state=s),!a.inserted&&!this.isOptional&&!this.lazy&&!i.input&&(a.inserted=this.placeholderChar),a.skip=!a.inserted&&!this.isOptional,this.isFilled=!!a.inserted,a}append(t,i,s){return this.masked.append(t,this.currentMaskFlags(i),s)}_appendPlaceholder(){return this.isFilled||this.isOptional?new Le:(this.isFilled=!0,new Le({inserted:this.placeholderChar}))}_appendEager(){return new Le}extractTail(t,i){return this.masked.extractTail(t,i)}appendTail(t){return this.masked.appendTail(t)}extractInput(t,i,s){return t===void 0&&(t=0),i===void 0&&(i=this.value.length),this.masked.extractInput(t,i,s)}nearestInputPos(t,i){i===void 0&&(i=xe.NONE);const s=0,a=this.value.length,o=Math.min(Math.max(t,s),a);switch(i){case xe.LEFT:case xe.FORCE_LEFT:return this.isComplete?o:s;case xe.RIGHT:case xe.FORCE_RIGHT:return this.isComplete?o:a;case xe.NONE:default:return o}}totalInputPositions(t,i){return t===void 0&&(t=0),i===void 0&&(i=this.value.length),this.value.slice(t,i).length}doValidate(t){return this.masked.doValidate(this.currentMaskFlags(t))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(t)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(t){this.masked.state=t.masked,this.isFilled=t.isFilled}currentMaskFlags(t){var i;return{...t,_beforeTailState:(t==null||(i=t._beforeTailState)==null?void 0:i.masked)||t?._beforeTailState}}pad(t){return new Le}}ra.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class Ob extends St{updateOptions(t){super.updateOptions(t)}_update(t){const i=t.mask;i&&(t.validate=s=>s.search(i)>=0),super._update(t)}}Ce.MaskedRegExp=Ob;class At extends St{constructor(t){super({...At.DEFAULTS,...t,definitions:Object.assign({},ra.DEFAULT_DEFINITIONS,t?.definitions)})}updateOptions(t){super.updateOptions(t)}_update(t){t.definitions=Object.assign({},this.definitions,t.definitions),super._update(t),this._rebuildMask()}_rebuildMask(){const t=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const i=this.mask;if(!i||!t)return;let s=!1,a=!1;for(let o=0;o<i.length;++o){if(this.blocks){const d=i.slice(o),f=Object.keys(this.blocks).filter(x=>d.indexOf(x)===0);f.sort((x,b)=>b.length-x.length);const p=f[0];if(p){const{expose:x,repeat:b,...y}=zr(this.blocks[p]),w={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...y,repeat:b,parent:this},j=b!=null?new Ce.RepeatBlock(w):Vn(w);j&&(this._blocks.push(j),x&&(this.exposeBlock=j),this._maskedBlocks[p]||(this._maskedBlocks[p]=[]),this._maskedBlocks[p].push(this._blocks.length-1)),o+=p.length-1;continue}}let c=i[o],u=c in t;if(c===At.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(c==="{"||c==="}"){s=!s;continue}if(c==="["||c==="]"){a=!a;continue}if(c===At.ESCAPE_CHAR){if(++o,c=i[o],!c)break;u=!1}const h=u?new ra({isOptional:a,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...zr(t[c]),parent:this}):new Tp({char:c,eager:this.eager,isUnmasking:s});this._blocks.push(h)}}get state(){return{...super.state,_blocks:this._blocks.map(t=>t.state)}}set state(t){if(!t){this.reset();return}const{_blocks:i,...s}=t;this._blocks.forEach((a,o)=>a.state=i[o]),super.state=s}reset(){super.reset(),this._blocks.forEach(t=>t.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(t=>t.isComplete)}get isFilled(){return this._blocks.every(t=>t.isFilled)}get isFixed(){return this._blocks.every(t=>t.isFixed)}get isOptional(){return this._blocks.every(t=>t.isOptional)}doCommit(){this._blocks.forEach(t=>t.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((t,i)=>t+=i.unmaskedValue,"")}set unmaskedValue(t){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=t,this.appendTail(i),this.doCommit()}else super.unmaskedValue=t}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((t,i)=>t+=i.value,"")}set value(t){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=t,this.appendTail(i),this.doCommit()}else super.value=t}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(t){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=t,this.appendTail(i),this.doCommit()}else super.typedValue=t}get displayValue(){return this._blocks.reduce((t,i)=>t+=i.displayValue,"")}appendTail(t){return super.appendTail(t).aggregate(this._appendPlaceholder())}_appendEager(){var t;const i=new Le;let s=(t=this._mapPosToBlock(this.displayValue.length))==null?void 0:t.index;if(s==null)return i;this._blocks[s].isFilled&&++s;for(let a=s;a<this._blocks.length;++a){const o=this._blocks[a]._appendEager();if(!o.inserted)break;i.aggregate(o)}return i}_appendCharRaw(t,i){i===void 0&&(i={});const s=this._mapPosToBlock(this.displayValue.length),a=new Le;if(!s)return a;for(let c=s.index,u;u=this._blocks[c];++c){var o;const h=u._appendChar(t,{...i,_beforeTailState:(o=i._beforeTailState)==null||(o=o._blocks)==null?void 0:o[c]});if(a.aggregate(h),h.consumed)break}return a}extractTail(t,i){t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length);const s=new ci;return t===i||this._forEachBlocksInRange(t,i,(a,o,c,u)=>{const h=a.extractTail(c,u);h.stop=this._findStopBefore(o),h.from=this._blockStartPos(o),h instanceof ci&&(h.blockIndex=o),s.extend(h)}),s}extractInput(t,i,s){if(t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),s===void 0&&(s={}),t===i)return"";let a="";return this._forEachBlocksInRange(t,i,(o,c,u,h)=>{a+=o.extractInput(u,h,s)}),a}_findStopBefore(t){let i;for(let s=0;s<this._stops.length;++s){const a=this._stops[s];if(a<=t)i=a;else break}return i}_appendPlaceholder(t){const i=new Le;if(this.lazy&&t==null)return i;const s=this._mapPosToBlock(this.displayValue.length);if(!s)return i;const a=s.index,o=t??this._blocks.length;return this._blocks.slice(a,o).forEach(c=>{if(!c.lazy||t!=null){var u;i.aggregate(c._appendPlaceholder((u=c._blocks)==null?void 0:u.length))}}),i}_mapPosToBlock(t){let i="";for(let s=0;s<this._blocks.length;++s){const a=this._blocks[s],o=i.length;if(i+=a.displayValue,t<=i.length)return{index:s,offset:t-o}}}_blockStartPos(t){return this._blocks.slice(0,t).reduce((i,s)=>i+=s.displayValue.length,0)}_forEachBlocksInRange(t,i,s){i===void 0&&(i=this.displayValue.length);const a=this._mapPosToBlock(t);if(a){const o=this._mapPosToBlock(i),c=o&&a.index===o.index,u=a.offset,h=o&&c?o.offset:this._blocks[a.index].displayValue.length;if(s(this._blocks[a.index],a.index,u,h),o&&!c){for(let d=a.index+1;d<o.index;++d)s(this._blocks[d],d,0,this._blocks[d].displayValue.length);s(this._blocks[o.index],o.index,0,o.offset)}}}remove(t,i){t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length);const s=super.remove(t,i);return this._forEachBlocksInRange(t,i,(a,o,c,u)=>{s.aggregate(a.remove(c,u))}),s}nearestInputPos(t,i){if(i===void 0&&(i=xe.NONE),!this._blocks.length)return 0;const s=new Lb(this,t);if(i===xe.NONE)return s.pushRightBeforeInput()||(s.popState(),s.pushLeftBeforeInput())?s.pos:this.displayValue.length;if(i===xe.LEFT||i===xe.FORCE_LEFT){if(i===xe.LEFT){if(s.pushRightBeforeFilled(),s.ok&&s.pos===t)return t;s.popState()}if(s.pushLeftBeforeInput(),s.pushLeftBeforeRequired(),s.pushLeftBeforeFilled(),i===xe.LEFT){if(s.pushRightBeforeInput(),s.pushRightBeforeRequired(),s.ok&&s.pos<=t||(s.popState(),s.ok&&s.pos<=t))return s.pos;s.popState()}return s.ok?s.pos:i===xe.FORCE_LEFT?0:(s.popState(),s.ok||(s.popState(),s.ok)?s.pos:0)}return i===xe.RIGHT||i===xe.FORCE_RIGHT?(s.pushRightBeforeInput(),s.pushRightBeforeRequired(),s.pushRightBeforeFilled()?s.pos:i===xe.FORCE_RIGHT?this.displayValue.length:(s.popState(),s.ok||(s.popState(),s.ok)?s.pos:this.nearestInputPos(t,xe.LEFT))):t}totalInputPositions(t,i){t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length);let s=0;return this._forEachBlocksInRange(t,i,(a,o,c,u)=>{s+=a.totalInputPositions(c,u)}),s}maskedBlock(t){return this.maskedBlocks(t)[0]}maskedBlocks(t){const i=this._maskedBlocks[t];return i?i.map(s=>this._blocks[s]):[]}pad(t){const i=new Le;return this._forEachBlocksInRange(0,this.displayValue.length,s=>i.aggregate(s.pad(t))),i}}At.DEFAULTS={...St.DEFAULTS,lazy:!0,placeholderChar:"_"};At.STOP_CHAR="`";At.ESCAPE_CHAR="\\";At.InputDefinition=ra;At.FixedDefinition=Tp;Ce.MaskedPattern=At;class Ds extends At{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(t){super(t)}updateOptions(t){super.updateOptions(t)}_update(t){const{to:i=this.to||0,from:s=this.from||0,maxLength:a=this.maxLength||0,autofix:o=this.autofix,...c}=t;this.to=i,this.from=s,this.maxLength=Math.max(String(i).length,a),this.autofix=o;const u=String(this.from).padStart(this.maxLength,"0"),h=String(this.to).padStart(this.maxLength,"0");let d=0;for(;d<h.length&&h[d]===u[d];)++d;c.mask=h.slice(0,d).replace(/0/g,"\\0")+"0".repeat(this.maxLength-d),super._update(c)}get isComplete(){return super.isComplete&&!!this.value}boundaries(t){let i="",s="";const[,a,o]=t.match(/^(\D*)(\d*)(\D*)/)||[];return o&&(i="0".repeat(a.length)+o,s="9".repeat(a.length)+o),i=i.padEnd(this.maxLength,"0"),s=s.padEnd(this.maxLength,"9"),[i,s]}doPrepareChar(t,i){i===void 0&&(i={});let s;return[t,s]=super.doPrepareChar(t.replace(/\D/g,""),i),t||(s.skip=!this.isComplete),[t,s]}_appendCharRaw(t,i){if(i===void 0&&(i={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(t,i);const s=String(this.from).padStart(this.maxLength,"0"),a=String(this.to).padStart(this.maxLength,"0"),[o,c]=this.boundaries(this.value+t);return Number(c)<this.from?super._appendCharRaw(s[this.value.length],i):Number(o)>this.to?!i.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength?super._appendCharRaw(s[this.value.length],i).aggregate(this._appendCharRaw(t,i)):super._appendCharRaw(a[this.value.length],i):super._appendCharRaw(t,i)}doValidate(t){const i=this.value;if(i.search(/[^0]/)===-1&&i.length<=this._matchFrom)return!0;const[a,o]=this.boundaries(i);return this.from<=Number(o)&&Number(a)<=this.to&&super.doValidate(t)}pad(t){const i=new Le;if(this.value.length===this.maxLength)return i;const s=this.value,a=this.maxLength-this.value.length;if(a){this.reset();for(let o=0;o<a;++o)i.aggregate(super._appendCharRaw("0",t));s.split("").forEach(o=>this._appendCharRaw(o))}return i}}Ce.MaskedRange=Ds;const Db="d{.}`m{.}`Y";class Bn extends At{static extractPatternOptions(t){const{mask:i,pattern:s,...a}=t;return{...a,mask:Xn(i)?i:s}}constructor(t){super(Bn.extractPatternOptions({...Bn.DEFAULTS,...t}))}updateOptions(t){super.updateOptions(t)}_update(t){const{mask:i,pattern:s,blocks:a,...o}={...Bn.DEFAULTS,...t},c=Object.assign({},Bn.GET_DEFAULT_BLOCKS());t.min&&(c.Y.from=t.min.getFullYear()),t.max&&(c.Y.to=t.max.getFullYear()),t.min&&t.max&&c.Y.from===c.Y.to&&(c.m.from=t.min.getMonth()+1,c.m.to=t.max.getMonth()+1,c.m.from===c.m.to&&(c.d.from=t.min.getDate(),c.d.to=t.max.getDate())),Object.assign(c,this.blocks,a),super._update({...o,mask:Xn(i)?i:s,blocks:c})}doValidate(t){const i=this.date;return super.doValidate(t)&&(!this.isComplete||this.isDateExist(this.value)&&i!=null&&(this.min==null||this.min<=i)&&(this.max==null||i<=this.max))}isDateExist(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}get date(){return this.typedValue}set date(t){this.typedValue=t}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(t){super.typedValue=t}maskEquals(t){return t===Date||super.maskEquals(t)}optionsIsChanged(t){return super.optionsIsChanged(Bn.extractPatternOptions(t))}}Bn.GET_DEFAULT_BLOCKS=()=>({d:{mask:Ds,from:1,to:31,maxLength:2},m:{mask:Ds,from:1,to:12,maxLength:2},Y:{mask:Ds,from:1900,to:9999}});Bn.DEFAULTS={...At.DEFAULTS,mask:Date,pattern:Db,format:(e,t)=>{if(!e)return"";const i=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return[i,s,a].join(".")},parse:(e,t)=>{const[i,s,a]=e.split(".").map(Number);return new Date(a,s-1,i)}};Ce.MaskedDate=Bn;class ba extends St{constructor(t){super({...ba.DEFAULTS,...t}),this.currentMask=void 0}updateOptions(t){super.updateOptions(t)}_update(t){super._update(t),"mask"in t&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(t.mask)?t.mask.map(i=>{const{expose:s,...a}=zr(i),o=Vn({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...a});return s&&(this.exposeMask=o),o}):[])}_appendCharRaw(t,i){i===void 0&&(i={});const s=this._applyDispatch(t,i);return this.currentMask&&s.aggregate(this.currentMask._appendChar(t,this.currentMaskFlags(i))),s}_applyDispatch(t,i,s){t===void 0&&(t=""),i===void 0&&(i={}),s===void 0&&(s="");const a=i.tail&&i._beforeTailState!=null?i._beforeTailState._value:this.value,o=this.rawInputValue,c=i.tail&&i._beforeTailState!=null?i._beforeTailState._rawInputValue:o,u=o.slice(c.length),h=this.currentMask,d=new Le,f=h?.state;return this.currentMask=this.doDispatch(t,{...i},s),this.currentMask&&(this.currentMask!==h?(this.currentMask.reset(),c&&(this.currentMask.append(c,{raw:!0}),d.tailShift=this.currentMask.value.length-a.length),u&&(d.tailShift+=this.currentMask.append(u,{raw:!0,tail:!0}).tailShift)):f&&(this.currentMask.state=f)),d}_appendPlaceholder(){const t=this._applyDispatch();return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}_appendEager(){const t=this._applyDispatch();return this.currentMask&&t.aggregate(this.currentMask._appendEager()),t}appendTail(t){const i=new Le;return t&&i.aggregate(this._applyDispatch("",{},t)),i.aggregate(this.currentMask?this.currentMask.appendTail(t):super.appendTail(t))}currentMaskFlags(t){var i,s;return{...t,_beforeTailState:((i=t._beforeTailState)==null?void 0:i.currentMaskRef)===this.currentMask&&((s=t._beforeTailState)==null?void 0:s.currentMask)||t._beforeTailState}}doDispatch(t,i,s){return i===void 0&&(i={}),s===void 0&&(s=""),this.dispatch(t,this,i,s)}doValidate(t){return super.doValidate(t)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(t)))}doPrepare(t,i){i===void 0&&(i={});let[s,a]=super.doPrepare(t,i);if(this.currentMask){let o;[s,o]=super.doPrepare(s,this.currentMaskFlags(i)),a=a.aggregate(o)}return[s,a]}doPrepareChar(t,i){i===void 0&&(i={});let[s,a]=super.doPrepareChar(t,i);if(this.currentMask){let o;[s,o]=super.doPrepareChar(s,this.currentMaskFlags(i)),a=a.aggregate(o)}return[s,a]}reset(){var t;(t=this.currentMask)==null||t.reset(),this.compiledMasks.forEach(i=>i.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(t){this.exposeMask?(this.exposeMask.value=t,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=t}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(t){this.exposeMask?(this.exposeMask.unmaskedValue=t,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=t}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(t){if(this.exposeMask){this.exposeMask.typedValue=t,this.currentMask=this.exposeMask,this._applyDispatch();return}let i=String(t);this.currentMask&&(this.currentMask.typedValue=t,i=this.currentMask.unmaskedValue),this.unmaskedValue=i}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var t;return!!((t=this.currentMask)!=null&&t.isComplete)}get isFilled(){var t;return!!((t=this.currentMask)!=null&&t.isFilled)}remove(t,i){const s=new Le;return this.currentMask&&s.aggregate(this.currentMask.remove(t,i)).aggregate(this._applyDispatch()),s}get state(){var t;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(i=>i.state),currentMaskRef:this.currentMask,currentMask:(t=this.currentMask)==null?void 0:t.state}}set state(t){const{compiledMasks:i,currentMaskRef:s,currentMask:a,...o}=t;i&&this.compiledMasks.forEach((c,u)=>c.state=i[u]),s!=null&&(this.currentMask=s,this.currentMask.state=a),super.state=o}extractInput(t,i,s){return this.currentMask?this.currentMask.extractInput(t,i,s):""}extractTail(t,i){return this.currentMask?this.currentMask.extractTail(t,i):super.extractTail(t,i)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(t,i){return this.currentMask?this.currentMask.nearestInputPos(t,i):super.nearestInputPos(t,i)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(t){this._overwrite=t}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(t){this._eager=t}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(t){this._skipInvalid=t}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(t){this._autofix=t}maskEquals(t){return Array.isArray(t)?this.compiledMasks.every((i,s)=>{if(!t[s])return;const{mask:a,...o}=t[s];return ia(i,o)&&i.maskEquals(a)}):super.maskEquals(t)}typedValueEquals(t){var i;return!!((i=this.currentMask)!=null&&i.typedValueEquals(t))}}ba.DEFAULTS={...St.DEFAULTS,dispatch:(e,t,i,s)=>{if(!t.compiledMasks.length)return;const a=t.rawInputValue,o=t.compiledMasks.map((c,u)=>{const h=t.currentMask===c,d=h?c.displayValue.length:c.nearestInputPos(c.displayValue.length,xe.FORCE_LEFT);return c.rawInputValue!==a?(c.reset(),c.append(a,{raw:!0})):h||c.remove(d),c.append(e,t.currentMaskFlags(i)),c.appendTail(s),{index:u,weight:c.rawInputValue.length,totalInputPositions:c.totalInputPositions(0,Math.max(d,c.nearestInputPos(c.displayValue.length,xe.FORCE_LEFT)))}});return o.sort((c,u)=>u.weight-c.weight||u.totalInputPositions-c.totalInputPositions),t.compiledMasks[o[0].index]}};Ce.MaskedDynamic=ba;class va extends At{constructor(t){super({...va.DEFAULTS,...t})}updateOptions(t){super.updateOptions(t)}_update(t){const{enum:i,...s}=t;if(i){const a=i.map(u=>u.length),o=Math.min(...a),c=Math.max(...a)-o;s.mask="*".repeat(o),c&&(s.mask+="["+"*".repeat(c)+"]"),this.enum=i}super._update(s)}_appendCharRaw(t,i){i===void 0&&(i={});const s=Math.min(this.nearestInputPos(0,xe.FORCE_RIGHT),this.value.length),a=this.enum.filter(o=>this.matchValue(o,this.unmaskedValue+t,s));if(a.length){a.length===1&&this._forEachBlocksInRange(0,this.value.length,(c,u)=>{const h=a[0][u];u>=this.value.length||h===c.value||(c.reset(),c._appendChar(h,i))});const o=super._appendCharRaw(a[0][this.value.length],i);return a.length===1&&a[0].slice(this.unmaskedValue.length).split("").forEach(c=>o.aggregate(super._appendCharRaw(c))),o}return new Le({skip:!this.isComplete})}extractTail(t,i){return t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),new An("",t)}remove(t,i){if(t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),t===i)return new Le;const s=Math.min(super.nearestInputPos(0,xe.FORCE_RIGHT),this.value.length);let a;for(a=t;a>=0&&!(this.enum.filter(u=>this.matchValue(u,this.value.slice(s,a),s)).length>1);--a);const o=super.remove(a,i);return o.tailShift+=a-t,o}get isComplete(){return this.enum.indexOf(this.value)>=0}}va.DEFAULTS={...At.DEFAULTS,matchValue:(e,t,i)=>e.indexOf(t,i)===i};Ce.MaskedEnum=va;class zb extends St{updateOptions(t){super.updateOptions(t)}_update(t){super._update({...t,validate:t.mask})}}Ce.MaskedFunction=zb;var Pp;class tn extends St{constructor(t){super({...tn.DEFAULTS,...t})}updateOptions(t){super.updateOptions(t)}_update(t){super._update(t),this._updateRegExps()}_updateRegExps(){const t="^"+(this.allowNegative?"[+|\\-]?":""),i="\\d*",s=(this.scale?"("+ho(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(t+i+s),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(ho).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(ho(this.thousandsSeparator),"g")}_removeThousandsSeparators(t){return t.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(t){const i=t.split(this.radix);return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),i.join(this.radix)}doPrepareChar(t,i){i===void 0&&(i={});const[s,a]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(i.input&&i.raw||!i.input&&!i.raw)?t.replace(this._mapToRadixRegExp,this.radix):t),i);return t&&!s&&(a.skip=!0),s&&!this.allowPositive&&!this.value&&s!=="-"&&a.aggregate(this._appendChar("-")),[s,a]}_separatorsCount(t,i){i===void 0&&(i=!1);let s=0;for(let a=0;a<t;++a)this._value.indexOf(this.thousandsSeparator,a)===a&&(++s,i&&(t+=this.thousandsSeparator.length));return s}_separatorsCountFromSlice(t){return t===void 0&&(t=this._value),this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}extractInput(t,i,s){return t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),[t,i]=this._adjustRangeWithSeparators(t,i),this._removeThousandsSeparators(super.extractInput(t,i,s))}_appendCharRaw(t,i){i===void 0&&(i={});const s=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,a=this._separatorsCountFromSlice(s);this._value=this._removeThousandsSeparators(this.value);const o=this._value;this._value+=t;const c=this.number;let u=!isNaN(c),h=!1;if(u){let x;this.min!=null&&this.min<0&&this.number<this.min&&(x=this.min),this.max!=null&&this.max>0&&this.number>this.max&&(x=this.max),x!=null&&(this.autofix?(this._value=this.format(x,this).replace(tn.UNMASKED_RADIX,this.radix),h||(h=o===this._value&&!i.tail)):u=!1),u&&(u=!!this._value.match(this._numberRegExp))}let d;u?d=new Le({inserted:this._value.slice(o.length),rawInserted:h?"":t,skip:h}):(this._value=o,d=new Le),this._value=this._insertThousandsSeparators(this._value);const f=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,p=this._separatorsCountFromSlice(f);return d.tailShift+=(p-a)*this.thousandsSeparator.length,d}_findSeparatorAround(t){if(this.thousandsSeparator){const i=t-this.thousandsSeparator.length+1,s=this.value.indexOf(this.thousandsSeparator,i);if(s<=t)return s}return-1}_adjustRangeWithSeparators(t,i){const s=this._findSeparatorAround(t);s>=0&&(t=s);const a=this._findSeparatorAround(i);return a>=0&&(i=a+this.thousandsSeparator.length),[t,i]}remove(t,i){t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length),[t,i]=this._adjustRangeWithSeparators(t,i);const s=this.value.slice(0,t),a=this.value.slice(i),o=this._separatorsCount(s.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(s+a));const c=this._separatorsCountFromSlice(s);return new Le({tailShift:(c-o)*this.thousandsSeparator.length})}nearestInputPos(t,i){if(!this.thousandsSeparator)return t;switch(i){case xe.NONE:case xe.LEFT:case xe.FORCE_LEFT:{const s=this._findSeparatorAround(t-1);if(s>=0){const a=s+this.thousandsSeparator.length;if(t<a||this.value.length<=a||i===xe.FORCE_LEFT)return s}break}case xe.RIGHT:case xe.FORCE_RIGHT:{const s=this._findSeparatorAround(t);if(s>=0)return s+this.thousandsSeparator.length}}return t}doCommit(){if(this.value){const t=this.number;let i=t;this.min!=null&&(i=Math.max(i,this.min)),this.max!=null&&(i=Math.min(i,this.max)),i!==t&&(this.unmaskedValue=this.format(i,this));let s=this.value;this.normalizeZeros&&(s=this._normalizeZeros(s)),this.padFractionalZeros&&this.scale>0&&(s=this._padFractionalZeros(s)),this._value=s}super.doCommit()}_normalizeZeros(t){const i=this._removeThousandsSeparators(t).split(this.radix);return i[0]=i[0].replace(/^(\D*)(0*)(\d*)/,(s,a,o,c)=>a+c),t.length&&!/\d$/.test(i[0])&&(i[0]=i[0]+"0"),i.length>1&&(i[1]=i[1].replace(/0*$/,""),i[1].length||(i.length=1)),this._insertThousandsSeparators(i.join(this.radix))}_padFractionalZeros(t){if(!t)return t;const i=t.split(this.radix);return i.length<2&&i.push(""),i[1]=i[1].padEnd(this.scale,"0"),i.join(this.radix)}doSkipInvalid(t,i,s){i===void 0&&(i={});const a=this.scale===0&&t!==this.thousandsSeparator&&(t===this.radix||t===tn.UNMASKED_RADIX||this.mapToRadix.includes(t));return super.doSkipInvalid(t,i,s)&&!a}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,tn.UNMASKED_RADIX)}set unmaskedValue(t){super.unmaskedValue=t}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(t){this.rawInputValue=this.format(t,this).replace(tn.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(t){this.typedValue=t}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(t){return(super.typedValueEquals(t)||tn.EMPTY_VALUES.includes(t)&&tn.EMPTY_VALUES.includes(this.typedValue))&&!(t===0&&this.value==="")}}Pp=tn;tn.UNMASKED_RADIX=".";tn.EMPTY_VALUES=[...St.EMPTY_VALUES,0];tn.DEFAULTS={...St.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[Pp.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:e=>e.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})};Ce.MaskedNumber=tn;const rl={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function Ip(e,t,i){t===void 0&&(t=rl.MASKED),i===void 0&&(i=rl.MASKED);const s=Vn(e);return a=>s.runIsolated(o=>(o[t]=a,o[i]))}function Fb(e,t,i,s){return Ip(t,i,s)(e)}Ce.PIPE_TYPE=rl;Ce.createPipe=Ip;Ce.pipe=Fb;class Bb extends At{get repeatFrom(){var t;return(t=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)!=null?t:0}get repeatTo(){var t;return(t=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?t:1/0}constructor(t){super(t)}updateOptions(t){super.updateOptions(t)}_update(t){var i,s,a;const{repeat:o,...c}=zr(t);this._blockOpts=Object.assign({},this._blockOpts,c);const u=Vn(this._blockOpts);this.repeat=(i=(s=o??u.repeat)!=null?s:this.repeat)!=null?i:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&((a=this._blocks)==null?void 0:a.length)||0,this.repeatFrom)),blocks:{m:u},eager:u.eager,overwrite:u.overwrite,skipInvalid:u.skipInvalid,lazy:u.lazy,placeholderChar:u.placeholderChar,displayChar:u.displayChar})}_allocateBlock(t){if(t<this._blocks.length)return this._blocks[t];if(this.repeatTo===1/0||this._blocks.length<this.repeatTo)return this._blocks.push(Vn(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]}_appendCharRaw(t,i){i===void 0&&(i={});const s=new Le;for(let h=(a=(o=this._mapPosToBlock(this.displayValue.length))==null?void 0:o.index)!=null?a:Math.max(this._blocks.length-1,0),d,f;d=(c=this._blocks[h])!=null?c:f=!f&&this._allocateBlock(h);++h){var a,o,c,u;const p=d._appendChar(t,{...i,_beforeTailState:(u=i._beforeTailState)==null||(u=u._blocks)==null?void 0:u[h]});if(p.skip&&f){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(s.aggregate(p),p.consumed)break}return s}_trimEmptyTail(t,i){var s,a;t===void 0&&(t=0);const o=Math.max(((s=this._mapPosToBlock(t))==null?void 0:s.index)||0,this.repeatFrom,0);let c;i!=null&&(c=(a=this._mapPosToBlock(i))==null?void 0:a.index),c==null&&(c=this._blocks.length-1);let u=0;for(let h=c;o<=h&&!this._blocks[h].unmaskedValue;--h,++u);u&&(this._blocks.splice(c-u+1,u),this.mask=this.mask.slice(u))}reset(){super.reset(),this._trimEmptyTail()}remove(t,i){t===void 0&&(t=0),i===void 0&&(i=this.displayValue.length);const s=super.remove(t,i);return this._trimEmptyTail(t,i),s}totalInputPositions(t,i){return t===void 0&&(t=0),i==null&&this.repeatTo===1/0?1/0:super.totalInputPositions(t,i)}get state(){return super.state}set state(t){this._blocks.length=t._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=t}}Ce.RepeatBlock=Bb;try{globalThis.IMask=Ce}catch{}var po={exports:{}},mo,Vu;function Ub(){if(Vu)return mo;Vu=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mo=e,mo}var fo,Hu;function Vb(){if(Hu)return fo;Hu=1;var e=Ub();function t(){}function i(){}return i.resetWarningCache=t,fo=function(){function s(c,u,h,d,f,p){if(p!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function a(){return s}var o={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:i,resetWarningCache:t};return o.PropTypes=o,o},fo}var qu;function Vl(){return qu||(qu=1,po.exports=Vb()()),po.exports}var Hb=Vl();const fe=pn(Hb),Rp={mask:fe.oneOfType([fe.array,fe.func,fe.string,fe.instanceOf(RegExp),fe.oneOf([Date,Number,Ce.Masked]),fe.instanceOf(Ce.Masked)]),value:fe.any,unmask:fe.oneOfType([fe.bool,fe.oneOf(["typed"])]),prepare:fe.func,prepareChar:fe.func,validate:fe.func,commit:fe.func,overwrite:fe.oneOfType([fe.bool,fe.oneOf(["shift"])]),eager:fe.oneOfType([fe.bool,fe.oneOf(["append","remove"])]),skipInvalid:fe.bool,onAccept:fe.func,onComplete:fe.func,placeholderChar:fe.string,displayChar:fe.string,lazy:fe.bool,definitions:fe.object,blocks:fe.object,enum:fe.arrayOf(fe.string),maxLength:fe.number,from:fe.number,to:fe.number,pattern:fe.string,format:fe.func,parse:fe.func,autofix:fe.oneOfType([fe.bool,fe.oneOf(["pad"])]),radix:fe.string,thousandsSeparator:fe.string,mapToRadix:fe.arrayOf(fe.string),scale:fe.number,normalizeZeros:fe.bool,padFractionalZeros:fe.bool,min:fe.oneOfType([fe.number,fe.instanceOf(Date)]),max:fe.oneOfType([fe.number,fe.instanceOf(Date)]),dispatch:fe.func,inputRef:fe.oneOfType([fe.func,fe.shape({current:fe.object})])},Mp=Object.keys(Rp).filter(e=>e!=="value"),qb=["value","unmask","onAccept","onComplete","inputRef"],$b=Mp.filter(e=>qb.indexOf(e)<0);function Gb(e){var t;const i=(t=class extends te.Component{constructor(o){super(o),this._inputRef=this._inputRef.bind(this)}componentDidMount(){this.props.mask&&this.initMask()}componentDidUpdate(){const o=this.props,c=this._extractMaskOptionsFromProps(o);if(c.mask)this.maskRef?(this.maskRef.updateOptions(c),"value"in o&&o.value!==void 0&&(this.maskValue=o.value)):this.initMask(c);else if(this.destroyMask(),"value"in o&&o.value!==void 0){var u;(u=this.element)!=null&&u.isContentEditable&&this.element.tagName!=="INPUT"&&this.element.tagName!=="TEXTAREA"?this.element.textContent=o.value:this.element.value=o.value}}componentWillUnmount(){this.destroyMask()}_inputRef(o){this.element=o,this.props.inputRef&&(Object.prototype.hasOwnProperty.call(this.props.inputRef,"current")?this.props.inputRef.current=o:this.props.inputRef(o))}initMask(o){o===void 0&&(o=this._extractMaskOptionsFromProps(this.props)),this.maskRef=Ce(this.element,o).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this)),"value"in this.props&&this.props.value!==void 0&&(this.maskValue=this.props.value)}destroyMask(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}_extractMaskOptionsFromProps(o){const{...c}=o;return Object.keys(c).filter(u=>$b.indexOf(u)<0).forEach(u=>{delete c[u]}),c}_extractNonMaskProps(o){const{...c}=o;return Mp.forEach(u=>{u!=="maxLength"&&delete c[u]}),"defaultValue"in c||(c.defaultValue=o.mask?"":c.value),delete c.value,c}get maskValue(){return this.maskRef?this.props.unmask==="typed"?this.maskRef.typedValue:this.props.unmask?this.maskRef.unmaskedValue:this.maskRef.value:""}set maskValue(o){this.maskRef&&(o=o==null&&this.props.unmask!=="typed"?"":o,this.props.unmask==="typed"?this.maskRef.typedValue=o:this.props.unmask?this.maskRef.unmaskedValue=o:this.maskRef.value=o)}_onAccept(o){this.props.onAccept&&this.maskRef&&this.props.onAccept(this.maskValue,this.maskRef,o)}_onComplete(o){this.props.onComplete&&this.maskRef&&this.props.onComplete(this.maskValue,this.maskRef,o)}render(){return te.createElement(e,{...this._extractNonMaskProps(this.props),inputRef:this._inputRef})}},t.displayName=void 0,t.propTypes=void 0,t),s=e.displayName||e.name||"Component";return i.displayName="IMask("+s+")",i.propTypes=Rp,te.forwardRef((a,o)=>te.createElement(i,{...a,ref:o}))}const Wb=Gb(e=>{let{inputRef:t,...i}=e;return te.createElement("input",{...i,ref:t})}),Zb=(e,t)=>te.createElement(Wb,{...e,ref:t}),Zi=te.forwardRef(Zb);function Kb({metrics:e}){return e.isNew?n.jsx("div",{className:"bg-blue-500/10 border-b border-blue-500/20 py-2 overflow-hidden",children:n.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-400 text-xs font-bold uppercase tracking-widest",children:[n.jsx(Tx,{className:"w-4 h-4"}),n.jsx("span",{children:"Restaurante Novo no EmprataAI  Seja um dos primeiros a experimentar!"})]})}):e.reviewCount===0?null:n.jsx("div",{className:"bg-[#121212] border-b border-white/5 py-3 overflow-hidden whitespace-nowrap",children:n.jsxs("div",{className:"inline-flex items-center gap-8 animate-marquee",children:[n.jsxs("span",{className:"flex items-center gap-2 text-xs font-bold text-white/60",children:[n.jsx(Gr,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.rating," (",e.reviewCount," avaliaes reais)"]}),e.latestReviews.map((t,i)=>n.jsxs("span",{className:"flex items-center gap-2 text-xs text-white/40 italic",children:['"',t.comment,'"  ',t.customerName||"Cliente"]},i))]})})}var $u;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})($u||($u={}));var Gu;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Gu||(Gu={}));var Wu;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Wu||(Wu={}));const Zu=["user","model","function","system"];var Ku;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Ku||(Ku={}));var Yu;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Yu||(Yu={}));var Xu;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Xu||(Xu={}));var Qu;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Qu||(Qu={}));var Tr;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Tr||(Tr={}));var Ju;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Ju||(Ju={}));var ed;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(ed||(ed={}));var td;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(td||(td={}));class Ct extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Fi extends Ct{constructor(t,i){super(t),this.response=i}}class Lp extends Ct{constructor(t,i,s,a){super(t),this.status=i,this.statusText=s,this.errorDetails=a}}class Qn extends Ct{}class Op extends Ct{}const Yb="https://generativelanguage.googleapis.com",Xb="v1beta",Qb="0.24.1",Jb="genai-js";var vi;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(vi||(vi={}));class ev{constructor(t,i,s,a,o){this.model=t,this.task=i,this.apiKey=s,this.stream=a,this.requestOptions=o}toString(){var t,i;const s=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Xb;let o=`${((i=this.requestOptions)===null||i===void 0?void 0:i.baseUrl)||Yb}/${s}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function tv(e){const t=[];return e?.apiClient&&t.push(e.apiClient),t.push(`${Jb}/${Qb}`),t.join(" ")}async function nv(e){var t;const i=new Headers;i.append("Content-Type","application/json"),i.append("x-goog-api-client",tv(e.requestOptions)),i.append("x-goog-api-key",e.apiKey);let s=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(a){throw new Qn(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${a.message}`)}for(const[a,o]of s.entries()){if(a==="x-goog-api-key")throw new Qn(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Qn(`Header name ${a} can only be set using the apiClient field`);i.append(a,o)}}return i}async function iv(e,t,i,s,a,o){const c=new ev(e,t,i,s,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},ov(o)),{method:"POST",headers:await nv(c),body:a})}}async function Zr(e,t,i,s,a,o={},c=fetch){const{url:u,fetchOptions:h}=await iv(e,t,i,s,a,o);return rv(u,h,c)}async function rv(e,t,i=fetch){let s;try{s=await i(e,t)}catch(a){sv(a,e)}return s.ok||await av(s,e),s}function sv(e,t){let i=e;throw i.name==="AbortError"?(i=new Op(`Request aborted when fetching ${t.toString()}: ${e.message}`),i.stack=e.stack):e instanceof Lp||e instanceof Qn||(i=new Ct(`Error fetching from ${t.toString()}: ${e.message}`),i.stack=e.stack),i}async function av(e,t){let i="",s;try{const a=await e.json();i=a.error.message,a.error.details&&(i+=` ${JSON.stringify(a.error.details)}`,s=a.error.details)}catch{}throw new Lp(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${i}`,e.status,e.statusText,s)}function ov(e){const t={};if(e?.signal!==void 0||e?.timeout>=0){const i=new AbortController;e?.timeout>=0&&setTimeout(()=>i.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{i.abort()}),t.signal=i.signal}return t}function Hl(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),zs(e.candidates[0]))throw new Fi(`${Zn(e)}`,e);return lv(e)}else if(e.promptFeedback)throw new Fi(`Text not available. ${Zn(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),zs(e.candidates[0]))throw new Fi(`${Zn(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),nd(e)[0]}else if(e.promptFeedback)throw new Fi(`Function call not available. ${Zn(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),zs(e.candidates[0]))throw new Fi(`${Zn(e)}`,e);return nd(e)}else if(e.promptFeedback)throw new Fi(`Function call not available. ${Zn(e)}`,e)},e}function lv(e){var t,i,s,a;const o=[];if(!((i=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||i===void 0)&&i.parts)for(const c of(a=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||a===void 0?void 0:a.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function nd(e){var t,i,s,a;const o=[];if(!((i=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||i===void 0)&&i.parts)for(const c of(a=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||a===void 0?void 0:a.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const cv=[Tr.RECITATION,Tr.SAFETY,Tr.LANGUAGE];function zs(e){return!!e.finishReason&&cv.includes(e.finishReason)}function Zn(e){var t,i,s;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((i=e.promptFeedback)===null||i===void 0)&&i.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((s=e.candidates)===null||s===void 0)&&s[0]){const o=e.candidates[0];zs(o)&&(a+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(a+=`: ${o.finishMessage}`))}return a}function Fr(e){return this instanceof Fr?(this.v=e,this):new Fr(e)}function uv(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(e,t||[]),a,o=[];return a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a;function c(x){s[x]&&(a[x]=function(b){return new Promise(function(y,w){o.push([x,b,y,w])>1||u(x,b)})})}function u(x,b){try{h(s[x](b))}catch(y){p(o[0][3],y)}}function h(x){x.value instanceof Fr?Promise.resolve(x.value.v).then(d,f):p(o[0][2],x)}function d(x){u("next",x)}function f(x){u("throw",x)}function p(x,b){x(b),o.shift(),o.length&&u(o[0][0],o[0][1])}}const id=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function dv(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),i=mv(t),[s,a]=i.tee();return{stream:pv(s),response:hv(a)}}async function hv(e){const t=[],i=e.getReader();for(;;){const{done:s,value:a}=await i.read();if(s)return Hl(fv(t));t.push(a)}}function pv(e){return uv(this,arguments,function*(){const i=e.getReader();for(;;){const{value:s,done:a}=yield Fr(i.read());if(a)break;yield yield Fr(Hl(s))}})}function mv(e){const t=e.getReader();return new ReadableStream({start(s){let a="";return o();function o(){return t.read().then(({value:c,done:u})=>{if(u){if(a.trim()){s.error(new Ct("Failed to parse stream"));return}s.close();return}a+=c;let h=a.match(id),d;for(;h;){try{d=JSON.parse(h[1])}catch{s.error(new Ct(`Error parsing JSON response: "${h[1]}"`));return}s.enqueue(d),a=a.substring(h[0].length),h=a.match(id)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new Op("Request aborted when reading from the stream"):u=new Ct("Error reading from the stream"),u})}}})}function fv(e){const t=e[e.length-1],i={promptFeedback:t?.promptFeedback};for(const s of e){if(s.candidates){let a=0;for(const o of s.candidates)if(i.candidates||(i.candidates=[]),i.candidates[a]||(i.candidates[a]={index:a}),i.candidates[a].citationMetadata=o.citationMetadata,i.candidates[a].groundingMetadata=o.groundingMetadata,i.candidates[a].finishReason=o.finishReason,i.candidates[a].finishMessage=o.finishMessage,i.candidates[a].safetyRatings=o.safetyRatings,o.content&&o.content.parts){i.candidates[a].content||(i.candidates[a].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),i.candidates[a].content.parts.push(c)}a++}s.usageMetadata&&(i.usageMetadata=s.usageMetadata)}return i}async function Dp(e,t,i,s){const a=await Zr(t,vi.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(i),s);return dv(a)}async function zp(e,t,i,s){const o=await(await Zr(t,vi.GENERATE_CONTENT,e,!1,JSON.stringify(i),s)).json();return{response:Hl(o)}}function Fp(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Br(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const i of e)typeof i=="string"?t.push({text:i}):t.push(i);return xv(t)}function xv(e){const t={role:"user",parts:[]},i={role:"function",parts:[]};let s=!1,a=!1;for(const o of e)"functionResponse"in o?(i.parts.push(o),a=!0):(t.parts.push(o),s=!0);if(s&&a)throw new Ct("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!a)throw new Ct("No content is provided for sending chat message.");return s?t:i}function gv(e,t){var i;let s={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(i=t?.cachedContent)===null||i===void 0?void 0:i.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new Qn("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=e.contents}else if(a)s=Object.assign(Object.assign({},s),e.generateContentRequest);else{const o=Br(e);s.contents=[o]}return{generateContentRequest:s}}function rd(e){let t;return e.contents?t=e:t={contents:[Br(e)]},e.systemInstruction&&(t.systemInstruction=Fp(e.systemInstruction)),t}function bv(e){return typeof e=="string"||Array.isArray(e)?{content:Br(e)}:e}const sd=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],vv={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function yv(e){let t=!1;for(const i of e){const{role:s,parts:a}=i;if(!t&&s!=="user")throw new Ct(`First content should be with role 'user', got ${s}`);if(!Zu.includes(s))throw new Ct(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(Zu)}`);if(!Array.isArray(a))throw new Ct("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Ct("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of a)for(const h of sd)h in u&&(o[h]+=1);const c=vv[s];for(const u of sd)if(!c.includes(u)&&o[u]>0)throw new Ct(`Content with role '${s}' can't contain '${u}' part`);t=!0}}function ad(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const i=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(i===void 0||i.parts===void 0||i.parts.length===0)return!1;for(const s of i.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const od="SILENT_ERROR";class wv{constructor(t,i,s,a={}){this.model=i,this.params=s,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,s?.history&&(yv(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,i={}){var s,a,o,c,u,h;await this._sendPromise;const d=Br(t),f={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,d]},p=Object.assign(Object.assign({},this._requestOptions),i);let x;return this._sendPromise=this._sendPromise.then(()=>zp(this._apiKey,this.model,f,p)).then(b=>{var y;if(ad(b.response)){this._history.push(d);const w=Object.assign({parts:[],role:"model"},(y=b.response.candidates)===null||y===void 0?void 0:y[0].content);this._history.push(w)}else{const w=Zn(b.response);w&&console.warn(`sendMessage() was unsuccessful. ${w}. Inspect response object for details.`)}x=b}).catch(b=>{throw this._sendPromise=Promise.resolve(),b}),await this._sendPromise,x}async sendMessageStream(t,i={}){var s,a,o,c,u,h;await this._sendPromise;const d=Br(t),f={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,d]},p=Object.assign(Object.assign({},this._requestOptions),i),x=Dp(this._apiKey,this.model,f,p);return this._sendPromise=this._sendPromise.then(()=>x).catch(b=>{throw new Error(od)}).then(b=>b.response).then(b=>{if(ad(b)){this._history.push(d);const y=Object.assign({},b.candidates[0].content);y.role||(y.role="model"),this._history.push(y)}else{const y=Zn(b);y&&console.warn(`sendMessageStream() was unsuccessful. ${y}. Inspect response object for details.`)}}).catch(b=>{b.message!==od&&console.error(b)}),x}}async function _v(e,t,i,s){return(await Zr(t,vi.COUNT_TOKENS,e,!1,JSON.stringify(i),s)).json()}async function jv(e,t,i,s){return(await Zr(t,vi.EMBED_CONTENT,e,!1,JSON.stringify(i),s)).json()}async function Nv(e,t,i,s){const a=i.requests.map(c=>Object.assign(Object.assign({},c),{model:t}));return(await Zr(t,vi.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),s)).json()}class ld{constructor(t,i,s={}){this.apiKey=t,this._requestOptions=s,i.model.includes("/")?this.model=i.model:this.model=`models/${i.model}`,this.generationConfig=i.generationConfig||{},this.safetySettings=i.safetySettings||[],this.tools=i.tools,this.toolConfig=i.toolConfig,this.systemInstruction=Fp(i.systemInstruction),this.cachedContent=i.cachedContent}async generateContent(t,i={}){var s;const a=rd(t),o=Object.assign(Object.assign({},this._requestOptions),i);return zp(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},a),o)}async generateContentStream(t,i={}){var s;const a=rd(t),o=Object.assign(Object.assign({},this._requestOptions),i);return Dp(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},a),o)}startChat(t){var i;return new wv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},t),this._requestOptions)}async countTokens(t,i={}){const s=gv(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),i);return _v(this.apiKey,this.model,s,a)}async embedContent(t,i={}){const s=bv(t),a=Object.assign(Object.assign({},this._requestOptions),i);return jv(this.apiKey,this.model,s,a)}async batchEmbedContents(t,i={}){const s=Object.assign(Object.assign({},this._requestOptions),i);return Nv(this.apiKey,this.model,t,s)}}class Kr{constructor(t){this.apiKey=t}getGenerativeModel(t,i){if(!t.model)throw new Ct("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ld(this.apiKey,t,i)}getGenerativeModelFromCachedContent(t,i,s){if(!t.name)throw new Qn("Cached content must contain a `name` field.");if(!t.model)throw new Qn("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const c of a)if(i?.[c]&&t[c]&&i?.[c]!==t[c]){if(c==="model"){const u=i.model.startsWith("models/")?i.model.replace("models/",""):i.model,h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(u===h)continue}throw new Qn(`Different value for "${c}" specified in modelParams (${i[c]}) and cachedContent (${t[c]})`)}const o=Object.assign(Object.assign({},i),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new ld(this.apiKey,o,s)}}const kv="",Cv=new Kr(kv);Cv.getGenerativeModel({model:"gemini-1.5-flash"});async function Ev(e,t,i){return t}async function Sv(e,t="standard"){return"Delicioso prato da casa."}const cd=[{id:"pix_online",label:"Pix Automtico",description:"Aprovao imediata  Envio mais rpido",icon:n.jsx(pa,{className:"w-6 h-6 text-green-400"}),category:"online"},{id:"credit_online",label:"Carto de Crdito",description:"Visa, Master, Elo  Parcele em at 12x",icon:n.jsx(Yn,{className:"w-6 h-6 text-blue-400"}),category:"online"},{id:"credit_machine",label:"Maquininha (Crdito)",description:"Pague ao receber",icon:n.jsx(Yn,{className:"w-6 h-6"}),category:"delivery"},{id:"debit_machine",label:"Maquininha (Dbito)",description:"Pague ao receber",icon:n.jsx(Yn,{className:"w-6 h-6"}),category:"delivery"},{id:"cash",label:"Dinheiro",description:"Pague ao receber",icon:n.jsx(Al,{className:"w-6 h-6 text-green-500"}),category:"delivery"}];function Av({order:e,onSuccess:t,onCancel:i}){const[s,a]=T.useState("method"),[o,c]=T.useState(""),[u,h]=T.useState(""),[d,f]=T.useState({holder:"",number:"",expiry:"",cvv:""}),[p,x]=T.useState(null),[b,y]=T.useState(!1),[w,j]=T.useState(null),S=async()=>{if(o){a("processing"),j(null);try{if(["cash","credit_machine","debit_machine"].includes(o)){t({paymentMethod:o,paymentStatus:"pending",changeFor:o==="cash"?parseFloat(u.replace(/\D/g,""))/100:void 0});return}const P=(await wp(_p,"financeCharge")({orderId:e.id||`temp_${Date.now()}`,amount:e.total,restaurantId:e.restaurantId,customerData:{name:e.customer.name,cpfCnpj:e.customer.cpf.replace(/\D/g,"")},billingType:o==="pix_online"?"PIX":"CREDIT_CARD",card:o==="credit_online"?d:void 0})).data;o==="pix_online"?(x(P),a("pix_waiting"),ie.success("Pix gerado! Escaneie o QR Code para pagar.")):o==="credit_online"&&t({paymentMethod:o,paymentStatus:"authorized",paymentId:P.paymentId})}catch(N){console.error("Checkout error:",N),j(N.message||"Erro ao processar pagamento"),a("error")}}},C=()=>{p?.pixCode&&(navigator.clipboard.writeText(p.pixCode),y(!0),ie.success("Cdigo Pix copiado!"),setTimeout(()=>y(!1),3e3))};return n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#121212] w-full max-w-md rounded-3xl overflow-hidden border border-white/10 shadow-2xl",children:[n.jsxs("div",{className:"bg-gradient-to-r from-primary/20 to-orange-600/10 p-6 border-b border-white/5",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Wo,{className:"w-5 h-5 text-primary"}),n.jsx("h2",{className:"text-xl font-black italic",children:"Pagamento Seguro"})]}),n.jsxs("p",{className:"text-sm text-white/50",children:["Total: ",n.jsxs("span",{className:"text-primary font-black text-lg",children:["R$ ",e.total.toFixed(2)]})]})]}),n.jsx("div",{className:"p-6",children:n.jsxs(Ye,{mode:"wait",children:[s==="method"&&n.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-white/40 mb-2",children:"Pague Agora"}),cd.filter(N=>N.category==="online").map(N=>n.jsxs("button",{onClick:()=>c(N.id),className:`w-full p-4 rounded-2xl border flex items-center gap-4 transition-all ${o===N.id?"bg-primary/10 border-primary text-white":"bg-black/40 border-white/10 text-white/60 hover:bg-white/5"}`,children:[N.icon,n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-bold text-sm",children:N.label}),n.jsx("p",{className:"text-xs opacity-60",children:N.description})]})]},N.id)),o==="credit_online"&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-3 mt-4 p-4 bg-white/5 rounded-2xl border border-white/10",children:[n.jsx("input",{placeholder:"Nome no Carto",onChange:N=>f({...d,holder:N.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-primary text-white"}),n.jsx(Zi,{mask:"0000 0000 0000 0000",placeholder:"0000 0000 0000 0000",onAccept:N=>f({...d,number:N}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-primary text-white"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(Zi,{mask:"00/00",placeholder:"MM/AA",onAccept:N=>f({...d,expiry:N}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-primary text-white"}),n.jsx(Zi,{mask:"000",placeholder:"CVV",onAccept:N=>f({...d,cvv:N}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-primary text-white"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-white/40 justify-center",children:[n.jsx(Wo,{size:12})," Seus dados so criptografados e processados pelo Asaas"]})]}),n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-white/40 mt-6 mb-2",children:"Pague na Entrega"}),cd.filter(N=>N.category==="delivery").map(N=>n.jsxs("button",{onClick:()=>c(N.id),className:`w-full p-4 rounded-2xl border flex items-center gap-4 transition-all ${o===N.id?"bg-white/10 border-white text-white":"bg-black/40 border-white/10 text-white/60 hover:bg-white/5"}`,children:[N.icon,n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-bold text-sm",children:N.label}),n.jsx("p",{className:"text-xs opacity-60",children:N.description})]})]},N.id)),n.jsx(Ye,{children:o==="cash"&&n.jsx(K.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:n.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl mt-2 border border-white/10",children:[n.jsx("label",{className:"text-xs font-bold text-white/50 mb-2 block uppercase tracking-wider",children:"Precisa de troco para?"}),n.jsx(Zi,{mask:"R$ num",blocks:{num:{mask:Number,scale:2,thousandsSeparator:".",padFractionalZeros:!0,radix:","}},value:u,onAccept:N=>h(N),placeholder:"R$ 0,00",className:"w-full bg-transparent border-b border-white/20 pb-2 outline-none font-black text-xl text-white"})]})})}),n.jsxs("button",{disabled:!o,onClick:S,className:"w-full mt-6 py-4 bg-primary hover:bg-orange-600 disabled:opacity-40 disabled:cursor-not-allowed rounded-2xl font-black uppercase tracking-wider transition-all flex items-center justify-center gap-2",children:["Confirmar Pedido",n.jsx(Rn,{className:"w-5 h-5"})]}),n.jsx("button",{onClick:i,className:"w-full py-3 text-white/40 hover:text-white text-sm font-bold transition-colors",children:"Cancelar"})]},"method"),s==="pix_waiting"&&p&&n.jsxs(K.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"text-center py-4",children:[p.pixImage&&n.jsx("div",{className:"bg-white p-4 rounded-2xl inline-block mb-6 shadow-xl",children:n.jsx("img",{src:`data:image/png;base64,${p.pixImage}`,alt:"Pix QR Code",className:"w-48 h-48"})}),p.pixCode&&n.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10 flex items-center gap-3 mb-6",children:[n.jsx("input",{readOnly:!0,value:p.pixCode,className:"bg-transparent text-xs w-full text-white/50 truncate font-mono"}),n.jsxs("button",{onClick:C,className:"flex items-center gap-1 text-primary font-bold text-xs uppercase shrink-0",children:[b?n.jsx(Nt,{className:"w-4 h-4"}):n.jsx(ha,{className:"w-4 h-4"}),b?"Copiado":"Copiar"]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-400",children:[n.jsx(Ee,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{className:"text-sm font-bold",children:"Aguardando pagamento..."})]}),n.jsx("p",{className:"text-xs text-white/30 mt-4",children:"O pedido ser enviado automaticamente aps a confirmao"})]},"pix"),s==="processing"&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-16",children:[n.jsx(Ee,{className:"w-12 h-12 text-primary animate-spin mb-4"}),n.jsx("p",{className:"text-white/60 font-medium",children:"Processando pagamento..."}),n.jsx("p",{className:"text-xs text-white/30 mt-2",children:"Ambiente seguro EmprataAI"})]},"processing"),s==="error"&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(ji,{className:"w-8 h-8 text-red-400"})}),n.jsx("h3",{className:"text-lg font-black mb-2",children:"Erro no Pagamento"}),n.jsx("p",{className:"text-sm text-white/50 mb-6",children:w||"Tente outro mtodo"}),n.jsx("button",{onClick:()=>a("method"),className:"px-8 py-3 bg-white/10 rounded-full font-bold hover:bg-white/20 transition-colors",children:"Tentar Novamente"})]},"error")]})})]})}function Tv(){const e=new Date,t=e.getHours(),i=e.getDay();let s="afternoon";return t>=5&&t<11?s="morning":t>=11&&t<15?s="lunch":t>=15&&t<18?s="afternoon":t>=18&&t<23?s="dinner":s="late_night",{timeOfDay:s,dayOfWeek:i,weather:"sunny"}}function Pv(e,t){let i=0;const s=e.title.toLowerCase();return e.description?.toLowerCase(),e.isHighlight&&(i+=50),t.timeOfDay==="morning"&&((s.includes("caf")||s.includes("po")||s.includes("queijo"))&&(i+=30),s.includes("combo")&&(i+=20)),t.timeOfDay==="lunch"&&((s.includes("executivo")||s.includes("prato")||s.includes("salada"))&&(i+=40),s.includes("sobremesa")&&(i+=15)),t.timeOfDay==="dinner"&&((s.includes("pizza")||s.includes("burger")||s.includes("vinho"))&&(i+=40),(s.includes("compartilhar")||s.includes("famlia"))&&(i+=25)),t.timeOfDay==="late_night"&&((s.includes("burger")||s.includes("pizza")||s.includes("fritas"))&&(i+=50),s.includes("doce")&&(i+=30)),i}function Iv(e){if(!e)return null;const t=Tv(),i=e.categories.map(s=>({...s,score:0,items:s.items.map(a=>({...a,_score:Pv(a,t)})).sort((a,o)=>o._score-a._score)}));return i.forEach(s=>{const a=s.items.slice(0,3).reduce((o,c)=>o+c._score,0);s.score=a}),i.sort((s,a)=>a.score-s.score),{...e,categories:i}}function Rv({items:e,onItemClick:t}){return e.length===0?null:n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4 px-4",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 w-8 h-8 rounded-full flex items-center justify-center animate-pulse",children:n.jsx(Zo,{className:"w-4 h-4 text-white fill-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white",children:"Em Alta"}),n.jsx("p",{className:"text-[10px] text-white/50 font-medium",children:"Os queridinhos do momento"})]})]}),n.jsx("div",{className:"flex gap-3 overflow-x-auto px-4 pb-4 no-scrollbar snap-x snap-mandatory",children:e.map((i,s)=>n.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:s*.1},onClick:()=>t(i),className:"snap-center flex-shrink-0 w-32 h-48 md:w-40 md:h-56 rounded-2xl relative overflow-hidden bg-white/5 border border-white/10 cursor-pointer group",children:[i.imageUrl?n.jsx("img",{src:i.imageUrl,alt:i.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}):n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800 to-black"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-80"}),n.jsxs("div",{className:"absolute inset-0 p-3 flex flex-col justify-end",children:[n.jsxs("div",{className:"bg-primary/20 backdrop-blur-md border border-primary/30 text-primary text-[9px] font-bold px-2 py-0.5 rounded-full w-fit mb-1 flex items-center gap-1",children:[n.jsx(at,{className:"w-2 h-2"}),"TOP 10"]}),n.jsx("h3",{className:"text-xs font-bold text-white line-clamp-2 leading-tight mb-1",children:i.title}),n.jsxs("div",{className:"flex items-center justify-between mt-1",children:[n.jsxs("span",{className:"text-xs font-black text-white",children:["R$ ",i.price.toFixed(2).replace(".",",")]}),n.jsx("button",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center text-black shadow-lg transform active:scale-90 transition-transform",children:n.jsx(yn,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"absolute inset-0 border-2 border-primary/0 group-hover:border-primary/50 rounded-2xl transition-colors duration-300 pointer-events-none"})]},i.id))})]})}const Mv=e=>{const[t,i]=T.useState({rating:null,reviewCount:0,totalOrders:0,isNew:!0,latestReviews:[]}),[s,a]=T.useState(!0);return T.useEffect(()=>{if(!e)return;(async()=>{try{const c=$e(he,"reviews"),u=tt(c,Oe("restaurantId","==",e),Ni("createdAt","desc"),Ol(5)),d=(await Zt(u)).docs.map(w=>w.data());let f=null;if(d.length>0){const w=d.reduce((j,S)=>j+(S.rating||0),0);f=parseFloat((w/d.length).toFixed(1))}const p=$e(he,"orders"),x=tt(p,Oe("restaurantId","==",e)),y=(await Zt(x)).size;i({rating:f,reviewCount:d.length,totalOrders:y,isNew:y<10,latestReviews:d})}catch(c){console.error("Erro ao buscar mtricas reais:",c)}finally{a(!1)}})()},[e]),{metrics:t,loading:s}},ud=(e,t,i,s)=>{if(!e||!t||!i||!s)return 0;const a=6371,o=js(i-e),c=js(s-t),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(js(e))*Math.cos(js(i))*Math.sin(c/2)*Math.sin(c/2),h=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),d=a*h;return parseFloat(d.toFixed(1))},js=e=>e*(Math.PI/180),Lv=e=>e<1?`${(e*1e3).toFixed(0)}m`:`${e}km`,Ov="SUA_API_KEY_AQUI",Dv=new Kr(Ov),ya=Dv.getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{temperature:.7,topP:.8,topK:40}});function Ns(e){return e*(Math.PI/180)}function dd(e,t,i,s){const o=Ns(i-e),c=Ns(s-t),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(Ns(e))*Math.cos(Ns(i))*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}async function zv(e){const{restaurantId:t,storeLocation:i,userLocation:s}=e;try{const a=tt($e(he,"orders"),Oe("restaurantId","==",t),Oe("status","in",["pending","preparing","PENDING","PREPARING"])),c=(await Zt(a)).size,u=dd(i.lat,i.lng,s.lat,s.lng);let h="CLEAR";try{const j=await hn(ze(he,"users",t));j.exists()&&(h=j.data()?.marketplace?.weatherCondition||"CLEAR")}catch{console.log("Could not fetch weather condition")}let d={avgDelay:0,rushHourImpact:1};try{const j=await hn(ze(he,"users",t));j.exists()&&j.data()?.emprataBrain&&(d=j.data().emprataBrain)}catch{console.log("Could not fetch brain memory")}const f=new Date,p=f.getDay()===0||f.getDay()===6,x=f.getHours(),b=x>=11&&x<=13||x>=18&&x<=21,y=`${p?"Fim de semana":"Dia de semana"}, ${b?"Horrio de Pico":"Horrio calmo"}, ${f.toLocaleTimeString("pt-BR")}`,w=`
      Aja como um Algoritmo Logstico Avanado (estilo Waze + iFood).
      Calcule o tempo de entrega com base nestes dados REAIS:
      
      DADOS:
      - Distncia Linear: ${u.toFixed(2)} km
      - Fila na Cozinha: ${c} pedidos na frente
      - Contexto Temporal: ${y}
      - Condio Climtica: ${h==="RAIN"?"CHOVENDO (adicione 30% ao tempo)":"Tempo bom"}
      - Histrico: Mdia de atraso de ${d.avgDelay||0} minutos
      - Fator de Rush Hour: ${d.rushHourImpact||1}x
      
      REGRAS:
      1. Base: 15min preparo + 2min por pedido na fila + 4min por km
      2. Se horrio de pico: multiplique por 1.3
      3. Se chovendo: multiplique por 1.3
      4. Some o vis de atraso histrico
      
      Retorne APENAS um JSON vlido (sem markdown):
      {
        "minTime": nmero,
        "maxTime": nmero,
        "reason": "Motivo curto e amigvel em portugus (ex: Alta demanda na cozinha)"
      }
    `;try{const C=(await ya.generateContent(w)).response.text().replace(/```json/g,"").replace(/```/g,"").trim(),N=JSON.parse(C);return{minTime:N.minTime,maxTime:N.maxTime,reason:N.reason,distanceKm:u,kitchenQueue:c,weatherImpact:h==="RAIN"}}catch(j){return console.error("AI prediction failed, using fallback:",j),hd(u,c,b,h==="RAIN")}}catch(a){console.error("Prediction error:",a);const o=dd(i.lat,i.lng,s.lat,s.lng);return hd(o,0,!1,!1)}}function hd(e,t,i,s){let a=15+t*2+e*4;i&&(a*=1.3),s&&(a*=1.3);const o=Math.floor(a),c=Math.floor(a+10);let u="Previso padro";return t>5?u="Alta demanda na cozinha":s?u="Condies climticas":i&&(u="Horrio de pico"),{minTime:o,maxTime:c,reason:u,distanceKm:e,kitchenQueue:t,weatherImpact:s}}function Fv({orderId:e,deliveryPin:t,total:i,restaurantName:s,onDismiss:a}){const{user:o}=Ke(),c=o?.uid?o.uid.slice(0,8):Math.random().toString(36).slice(2,10),u=`${window.location.origin}/invite/${c}`,h=` Acabei de pedir no ${s||"Emprata"} e a comida  surreal!

 Use meu cdigo e ganhe R$ 10 de desconto no primeiro pedido:
${u}`,d=async()=>{if(typeof window.gtag=="function"&&window.gtag("event","share",{method:"native",content_type:"referral",item_id:e}),navigator.share)try{await navigator.share({title:"Ganhe R$ 10 no Emprata",text:h,url:u}),ie.success("Compartilhado! ")}catch{f()}else f()},f=()=>{navigator.clipboard.writeText(u),ie.success("Link copiado! Mande para seus amigos ")};return n.jsxs("div",{className:"fixed inset-0 z-[70] bg-black flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/20 via-black to-purple-900/20"}),n.jsxs(K.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"relative mb-6",children:[n.jsx(K.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"absolute inset-0 bg-green-500/30 rounded-full blur-2xl"}),n.jsx("div",{className:"relative w-24 h-24 bg-green-500 rounded-full flex items-center justify-center shadow-[0_0_50px_rgba(34,197,94,0.4)]",children:n.jsx(gi,{size:48,className:"text-white",strokeWidth:2.5})})]}),n.jsx(K.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-4xl font-black italic mb-2 relative z-10",children:"Pedido Confirmado!"}),n.jsx(K.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-white/50 mb-6 relative z-10",children:"A cozinha j est preparando seu pedido."}),n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/5 p-6 rounded-3xl border border-white/10 mb-8 relative z-10",children:[n.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-white/40 mb-2",children:"PIN DE ENTREGA"}),n.jsx("p",{className:"text-5xl font-black text-primary tracking-[0.2em]",children:t}),n.jsx("p",{className:"text-[10px] text-white/30 mt-2",children:"Mostre este cdigo ao entregador"})]}),n.jsxs(K.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-gradient-to-br from-purple-900/30 to-blue-900/30 border border-purple-500/20 p-6 rounded-2xl w-full max-w-sm relative overflow-hidden z-10",children:[n.jsx(at,{className:"absolute top-3 right-3 text-yellow-400/50",size:20}),n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ar,{className:"text-yellow-400",size:20}),n.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-yellow-400",children:"No coma sozinho"})]}),n.jsxs("p",{className:"text-white font-bold mb-4 text-sm leading-relaxed",children:["Mande seu link para um amigo. Se ele pedir,"," ",n.jsx("span",{className:"text-green-400 block text-lg mt-1",children:"VOCS DOIS GANHAM R$ 10,00"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:d,className:"flex-1 bg-white text-black font-black py-4 rounded-xl flex items-center justify-center gap-2 hover:scale-[1.02] transition-transform active:scale-95",children:[n.jsx(ma,{size:18})," COMPARTILHAR"]}),n.jsx("button",{onClick:f,className:"bg-white/10 text-white p-4 rounded-xl hover:bg-white/20 transition-colors border border-white/10",children:n.jsx(ha,{size:18})})]}),n.jsx("div",{className:"mt-4 bg-black/30 rounded-lg p-2 border border-white/5",children:n.jsx("p",{className:"text-[10px] text-white/40 font-mono truncate",children:u})})]}),n.jsxs(K.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},onClick:a,className:"mt-6 text-white/40 hover:text-white font-bold text-sm uppercase tracking-widest flex items-center gap-2 relative z-10",children:["Fazer novo pedido ",n.jsx(Rn,{size:16})]})]})}function pd(){const{slug:e,tableNum:t}=ap(),[i]=sp();_t();const s=t||i.get("table"),[a,o]=T.useState(!0),[c,u]=T.useState(null),[h,d]=T.useState([]),[f,p]=T.useState([]),[x,b]=T.useState("Todos"),[y,w]=T.useState(null),[j,S]=T.useState([]),[C,N]=T.useState([]),[R,P]=T.useState(!1),[I,F]=T.useState(!1),[$,ne]=T.useState({name:"",cpf:"",table:s||"",phone:"",address:""}),[O,D]=T.useState(!1),[M,q]=T.useState(null),[Z,W]=T.useState(""),[ee,ce]=T.useState(!1),[se,ve]=T.useState([]),[_,A]=T.useState(null),[H,k]=T.useState(null),{metrics:B}=Mv(c?.ownerId),[U,V]=T.useState(null),[Q,J]=T.useState(!1);T.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(ae=>{A({lat:ae.coords.latitude,lng:ae.coords.longitude})})},[]),T.useEffect(()=>{if(_&&c?.location?.lat){const ae=ud(_.lat,_.lng,c.location.lat,c.location.lng);k(Lv(ae))}},[_,c]),T.useEffect(()=>{(async()=>{if(!c?.ownerId||!_)return;const be=c.location||c.marketplace?.location;if(be?.lat){J(!0);try{const we=await zv({restaurantId:c.ownerId,storeLocation:{lat:be.lat,lng:be.lng},userLocation:_});V(we)}catch(we){console.error("Prediction error:",we)}finally{J(!1)}}})()},[c,_]);const[de,me]=T.useState("standard"),[ye,Ne]=T.useState({}),He=T.useRef(!1),ke={standard:"from-orange-500/10 to-transparent",comfort:"from-blue-500/10 to-transparent",fitness:"from-green-500/10 to-transparent",energy:"from-yellow-500/10 to-transparent",late_night:"from-purple-500/10 to-transparent"};T.useEffect(()=>{if(de==="standard"){Ne({});return}(async()=>{const be=h.slice(0,10);for(const we of be){Ne(Ue=>({...Ue,[we.id]:" Personalizando..."}));const Pe=await Ev(we.title,we.description);Ne(Ue=>({...Ue,[we.id]:Pe}))}})()},[de,h]),T.useEffect(()=>{e&&(async()=>{try{const be=tt($e(he,"menus"),Oe("slug","==",e)),we=await Zt(be);if(we.empty){ie.error("Restaurante no encontrado"),o(!1);return}const Pe=we.docs[0].data();u(Pe);const Ue=Iv(Pe);if(Ue){w(Ue);const Pt=Ue.categories.flatMap(X=>X.items.map(oe=>({...oe,category:X.title})));S(Pt.filter(X=>X.isHighlight).slice(0,10)),d(Pt),ve(Pt),p(["Todos",...Ue.categories.map(X=>X.title)])}else{const Pt=[],X=new Set;Pe.categories.forEach(oe=>{X.add(oe.title),oe.items.forEach(ge=>{Pt.push({...ge,category:oe.title})})}),d(Pt),ve(Pt),p(["Todos",...Array.from(X)])}}catch(be){console.error(be)}finally{o(!1)}})()},[e]),T.useEffect(()=>{},[de,c]);const We=async ae=>{if(W(ae),!ae){ve(h);return}if(ae.length<4){const be=h.filter(we=>we.title.toLowerCase().includes(ae.toLowerCase()));ve(be);return}ce(!0);try{const{semanticSearch:be}=await Cp(async()=>{const{semanticSearch:Pe}=await Promise.resolve().then(()=>Ww);return{semanticSearch:Pe}},void 0),we=await be(ae,h);if(we.length>0){const Pe=h.filter(Ue=>we.includes(Ue.id));ve(Pe),ie.success("IA: Encontrei pratos perfeitos para voc!",{icon:""})}else{const Pe=h.filter(Ue=>Ue.title.toLowerCase().includes(ae.toLowerCase()));ve(Pe)}}catch(be){console.error(be)}finally{ce(!1)}};T.useEffect(()=>{const ae=i.get("add_item");if(ae&&h.length>0&&!He.current){const be=h.find(we=>we.id===ae);be&&(He.current=!0,N(we=>we.find(Ue=>Ue.id===be.id)?we.map(Ue=>Ue.id===be.id?{...Ue,quantity:Ue.quantity+1}:Ue):[...we,{...be,cartId:crypto.randomUUID(),quantity:1,notes:""}]),P(!0),ie.success(" Oferta ativada!",{icon:""}))}},[h,i]);const ot=ae=>{N(be=>be.find(Pe=>Pe.id===ae.id)?be.map(Pe=>Pe.id===ae.id?{...Pe,quantity:Pe.quantity+1}:Pe):[...be,{...ae,cartId:crypto.randomUUID(),quantity:1,notes:""}]),ie.success(`${ae.title} adicionado!`)},Xe=(ae,be)=>{N(we=>we.map(Pe=>{if(Pe.cartId===ae){const Ue=Pe.quantity+be;return Ue>0?{...Pe,quantity:Ue}:Pe}return Pe}))},nt=C.reduce((ae,be)=>ae+be.price*be.quantity,0),st=async ae=>{try{o(!0);const be=15;if(_&&c?.location?.lat){const Ue=ud(_.lat,_.lng,c.location.lat,c.location.lng);if(Ue>be){ie.error(`Desculpe, no entregamos neste local (${Ue}km). Limite: ${be}km.`),o(!1);return}}if(nt>300&&ae.paymentMethod==="CASH"){ie.error("Para pedidos acima de R$ 300, apenas pagamento via Pix ou Carto Online."),o(!1);return}const we=Math.floor(1e3+Math.random()*9e3).toString(),Pe=await fa($e(he,"orders"),{restaurantId:c.ownerId,customer:{...$,uid:rt.currentUser?.uid||null},items:C,total:nt,paymentMethod:ae.paymentMethod,paymentStatus:ae.paymentStatus||"pending",changeFor:ae.changeFor??null,paymentId:ae.paymentId??null,source:s?"QR_TABLE":"WEB_DELIVERY",tableId:s||null,status:"pending",createdAt:Lt(),deliveryPin:we,isOrderBumpAccepted:!1});q({orderId:Pe.id,deliveryPin:we,total:nt}),N([]),D(!1),F(!1),P(!1)}catch(be){ie.error("Erro ao finalizar pedido"),console.error(be)}finally{o(!1)}};return a?n.jsx(Ab,{}):n.jsxs("div",{className:"min-h-screen bg-[#050505] text-white pb-32 transition-colors duration-700",children:[n.jsx(Np,{title:c?.name||"Cardpio",description:c?.description||`Pea delivery de ${c?.name||"restaurante"} pelo EmprataAI`,image:c?.coverUrl,path:`/menu/${e}`,type:"restaurant",rating:B?.rating,reviewCount:B?.reviewCount,priceRange:c?.priceRange||"$$"}),n.jsx("div",{className:`fixed inset-0 bg-gradient-to-b ${ke[de]} opacity-30 pointer-events-none transition-all duration-1000`}),n.jsxs("div",{className:"relative h-[40vh] w-full overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/60 to-transparent z-10"}),n.jsx("img",{src:c?.coverUrl||"https://images.unsplash.com/photo-1559339352-11d035aa65de?w=1200&q=80",className:"w-full h-full object-cover scale-105 animate-slow-zoom"}),n.jsxs("div",{className:"absolute top-0 left-0 w-full p-6 z-20 flex justify-between items-start",children:[n.jsxs("div",{className:"bg-black/30 backdrop-blur-md px-4 py-2 rounded-full border border-white/10 text-xs font-bold uppercase tracking-widest flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),s?`Mesa ${s}`:"Delivery Online"]}),n.jsxs("div",{className:"relative w-full max-w-xs mx-auto md:mr-0 z-50",children:[n.jsx("input",{value:Z,onChange:ae=>We(ae.target.value),placeholder:"Ex: 'Jantar romntico'...",className:"w-full bg-black/40 backdrop-blur-md border border-white/10 rounded-full py-2 pl-10 pr-4 text-xs text-white placeholder-white/50 focus:border-primary focus:outline-none transition-all"}),n.jsx(Ln,{className:"absolute left-3 top-2.5 w-4 h-4 text-white/40"}),ee&&n.jsx(at,{className:"absolute right-3 top-2.5 w-4 h-4 text-purple-400 animate-pulse"})]})]}),n.jsxs("div",{className:"absolute bottom-0 left-0 p-8 z-20 w-full max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[B.isNew?n.jsx("span",{className:"bg-blue-500 text-white px-2 py-0.5 rounded text-[10px] font-bold uppercase",children:"Novo"}):n.jsxs("span",{className:"bg-yellow-500 text-black px-2 py-0.5 rounded text-[10px] font-bold uppercase flex items-center gap-1",children:[n.jsx(Gr,{size:10,className:"fill-black"})," ",B.rating]}),H&&n.jsxs("span",{className:"bg-black/50 backdrop-blur text-white border border-white/10 px-2 py-0.5 rounded text-[10px] font-bold uppercase flex items-center gap-1",children:[n.jsx(Un,{size:10})," ",H]})]}),n.jsx(K.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-5xl md:text-7xl font-black italic tracking-tighter mb-4 text-transparent bg-clip-text bg-gradient-to-r from-white to-white/50",children:c?.name}),n.jsx("div",{className:"flex items-center gap-4 text-sm font-bold text-white/50",children:n.jsx("div",{className:"flex items-center gap-2",children:Q?n.jsxs(n.Fragment,{children:[n.jsx(Ee,{size:14,className:"animate-spin"})," Calculando..."]}):U?n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("span",{className:"flex items-center gap-1 text-white",children:[n.jsx(xi,{size:14})," ",U.minTime,"-",U.maxTime," min"]}),U.reason&&n.jsxs("span",{className:"text-[10px] text-primary",children:[U.weatherImpact&&" ",U.reason]})]}):n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(xi,{size:16})," 30-45 min"]})})})]})]}),n.jsx(Kb,{metrics:B}),n.jsx("div",{className:"sticky top-4 z-30 px-4 mb-8",children:n.jsx("div",{className:"bg-black/60 backdrop-blur-xl border border-white/10 p-2 rounded-full flex gap-2 overflow-x-auto no-scrollbar shadow-2xl",children:f.map(ae=>n.jsx("button",{onClick:()=>b(ae),className:`px-6 py-3 rounded-full text-xs font-black uppercase tracking-wider whitespace-nowrap transition-all ${x===ae?"bg-white text-black shadow-lg shadow-white/20 scale-105":"text-white/60 hover:text-white hover:bg-white/5"}`,children:ae},ae))})}),n.jsxs("div",{className:"max-w-md mx-auto mb-10 px-6",children:[n.jsx("p",{className:"text-white/30 text-[10px] font-black uppercase tracking-[0.2em] text-center mb-4",children:"Personalize sua experincia"}),n.jsx("div",{className:"flex justify-center gap-4",children:[{id:"standard",icon:n.jsx(gt,{}),label:"Normal"},{id:"late_night",icon:n.jsx(Px,{}),label:"Larica"},{id:"fitness",icon:n.jsx(Ix,{}),label:"Fit"},{id:"energy",icon:n.jsx(Wt,{}),label:"Fome"}].map(ae=>n.jsx("button",{onClick:()=>me(ae.id),className:`p-3 rounded-2xl border transition-all ${de===ae.id?"bg-white/10 border-white text-white scale-110 shadow-xl shadow-white/10":"bg-transparent border-white/5 text-white/30 hover:bg-white/5"}`,children:ae.icon},ae.id))})]}),n.jsx(Rv,{items:j,onItemClick:ae=>ot({...ae,category:"Stories"})}),n.jsx("div",{className:"max-w-5xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:se.filter(ae=>x==="Todos"||ae.category===x).map((ae,be)=>n.jsxs(K.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:be*.05},className:`group relative overflow-hidden rounded-[2rem] border border-white/5 hover:border-white/20 transition-all bg-[#121212] ${be%5===0?"md:col-span-2 md:row-span-2":""}`,onClick:()=>ot(ae),children:[n.jsxs("div",{className:`w-full ${be%5===0?"h-96":"h-64"} relative`,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10 opacity-90"}),n.jsx("img",{src:ae.imageUrl||"",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700 grayscale-[0.3] group-hover:grayscale-0"}),n.jsx("div",{className:"absolute top-4 right-4 z-20 bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-white/10",children:n.jsxs("span",{className:"text-white font-black",children:["R$ ",ae.price.toFixed(2)]})})]}),n.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 z-20",children:[n.jsx("h3",{className:`font-black italic leading-none mb-2 ${be%5===0?"text-4xl":"text-xl"}`,children:ae.title}),n.jsx("p",{className:`text-white/60 mb-4 line-clamp-2 text-sm ${be%5===0?"max-w-md":""}`,children:ye[ae.id]||ae.description}),n.jsxs("button",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-primary opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300",children:[n.jsx(yn,{className:"w-4 h-4"})," Adicionar  sacola"]})]})]},ae.id))}),n.jsx(Ye,{children:C.length>0&&n.jsx(K.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-8 left-0 right-0 z-40 px-6 flex justify-center",children:n.jsxs("button",{onClick:()=>P(!0),className:"bg-primary text-white pl-6 pr-2 py-2 rounded-full shadow-[0_0_40px_rgba(255,100,0,0.4)] flex items-center gap-4 hover:scale-105 transition-transform active:scale-95",children:[n.jsx("span",{className:"font-black uppercase tracking-widest text-sm",children:"Ver Sacola"}),n.jsx("div",{className:"bg-white text-black font-black w-10 h-10 rounded-full flex items-center justify-center",children:C.reduce((ae,be)=>ae+be.quantity,0)})]})})}),R&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>P(!1)}),n.jsxs(K.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"fixed top-0 right-0 z-50 h-full w-full max-w-sm bg-[#121212] flex flex-col items-center border-l border-white/10",children:[n.jsxs("div",{className:"w-full p-6 flex items-center justify-between border-b border-white/5",children:[n.jsx("h2",{className:"text-xl font-black italic",children:"Seu Pedido"}),n.jsx("button",{onClick:()=>P(!1),className:"bg-white/5 p-2 rounded-full hover:bg-white/20",children:n.jsx(Ht,{size:20})})]}),n.jsx("div",{className:"flex-1 w-full overflow-y-auto p-6 space-y-4",children:C.map(ae=>n.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 flex gap-4 border border-white/5",children:[n.jsx("img",{src:ae.imageUrl||"",className:"w-16 h-16 rounded-xl object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-sm leading-tight mb-1",children:ae.title}),n.jsxs("span",{className:"text-primary text-xs font-black",children:["R$ ",ae.price.toFixed(2)]})]}),n.jsxs("div",{className:"flex flex-col items-center bg-black/40 rounded-lg p-1 gap-2",children:[n.jsx("button",{onClick:()=>Xe(ae.cartId,1),className:"hover:text-primary",children:n.jsx(yn,{size:14})}),n.jsx("span",{className:"text-xs font-bold",children:ae.quantity}),n.jsx("button",{onClick:()=>Xe(ae.cartId,-1),className:"hover:text-primary",children:n.jsx(Tl,{size:14})})]})]},ae.cartId))}),n.jsxs("div",{className:"w-full p-6 bg-gradient-to-t from-black to-transparent",children:[n.jsxs("div",{className:"flex justify-between items-end mb-6",children:[n.jsx("span",{className:"text-white/60 text-sm",children:"Total a pagar"}),n.jsxs("span",{className:"text-3xl font-black text-white",children:["R$ ",nt.toFixed(2)]})]}),n.jsx("button",{onClick:()=>{P(!1),F(!0)},className:"w-full py-4 bg-white text-black rounded-xl font-black uppercase tracking-widest hover:scale-[1.02] transition-transform",children:"Continuar"})]})]})]}),I&&n.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl",children:O?n.jsx("div",{className:"w-full max-w-md",children:n.jsx(Av,{order:{id:`order_${Date.now()}`,total:nt,restaurantId:c?.ownerId,customer:{name:$.name,cpf:$.cpf,phone:$.phone||""},items:C},onSuccess:st,onCancel:()=>D(!1)})}):n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md bg-[#121212] rounded-3xl p-8 border border-white/10 relative",children:[n.jsx("button",{onClick:()=>F(!1),className:"absolute top-4 right-4 text-white/40",children:n.jsx(Ht,{})}),n.jsx("h2",{className:"text-2xl font-black italic mb-2",children:"Identifique-se"}),n.jsx("p",{className:"text-white/40 text-sm mb-6",children:"Para emitir sua nota e acompanhar o pedido."}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{placeholder:"Seu Nome",value:$.name,onChange:ae=>ne({...$,name:ae.target.value}),className:"w-full bg-black border border-white/10 rounded-xl p-4 outline-none focus:border-primary text-white"}),n.jsx(Zi,{mask:"000.000.000-00",placeholder:"CPF",value:$.cpf,unmask:!1,onAccept:ae=>ne({...$,cpf:ae}),className:"w-full bg-black border border-white/10 rounded-xl p-4 outline-none focus:border-primary text-white"}),n.jsx(Zi,{mask:"(00) 00000-0000",placeholder:"WhatsApp",value:$.phone,onAccept:ae=>ne({...$,phone:ae}),className:"w-full bg-black border border-white/10 rounded-xl p-4 outline-none focus:border-primary text-white"}),s?n.jsxs("div",{className:"bg-primary/10 border border-primary/50 text-primary p-4 rounded-xl flex items-center gap-3",children:[n.jsx(Un,{className:"w-5 h-5"}),n.jsxs("span",{className:"font-bold text-sm",children:["Voc est na Mesa ",s]})]}):n.jsx("input",{placeholder:"Endereo Completo",value:$.address,onChange:ae=>ne({...$,address:ae.target.value}),className:"w-full bg-black border border-white/10 rounded-xl p-4 outline-none focus:border-primary text-white"}),n.jsx("button",{onClick:()=>{$.name&&$.cpf?D(!0):ie.error("Dados incompletos")},className:"w-full bg-white text-black py-4 rounded-xl font-black uppercase tracking-widest mt-4",children:"Ir para Pagamento"})]})]})}),M&&n.jsx(Fv,{orderId:M.orderId,deliveryPin:M.deliveryPin,total:M.total,restaurantName:c?.name,onDismiss:()=>q(null)})]})}function Bv(){return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-zinc-950 to-black",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[n.jsxs(it,{to:"/",className:"inline-flex items-center gap-2 text-white/60 hover:text-white transition-colors mb-8",children:[n.jsx(_i,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Voltar"})]}),n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"bg-primary/20 rounded-2xl p-3",children:n.jsx(Wo,{className:"w-8 h-8 text-primary"})}),n.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white",children:"Poltica de Privacidade"})]}),n.jsx("p",{className:"text-white/60 text-lg",children:"ltima atualizao: 25 de dezembro de 2024"})]}),n.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"prose prose-invert max-w-none",children:n.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 space-y-8",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"1. Introduo"}),n.jsxs("p",{className:"text-white/70 leading-relaxed",children:["A ",n.jsx("strong",{className:"text-white",children:"Emprata AI"}),' ("ns", "nosso" ou "nossa") respeita sua privacidade e est comprometida em proteger seus dados pessoais. Esta Poltica de Privacidade explica como coletamos, usamos e protegemos suas informaes em conformidade com a ',n.jsx("strong",{className:"text-white",children:"Lei Geral de Proteo de Dados (LGPD - Lei n 13.709/2018)"}),"."]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"2. Dados Coletados"}),n.jsx("p",{className:"text-white/70 leading-relaxed mb-3",children:"Coletamos apenas os dados essenciais para o funcionamento do servio:"}),n.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{className:"text-white",children:"E-mail:"})," Utilizado para autenticao via Firebase Authentication e comunicao sobre sua conta."]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-white",children:"Nome (opcional):"})," Fornecido durante o cadastro para personalizao da experincia."]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-white",children:"Dados de Uso:"})," Informaes sobre como voc utiliza a plataforma (prompts, imagens geradas, crditos consumidos)."]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"3. Uso dos Dados"}),n.jsx("p",{className:"text-white/70 leading-relaxed mb-3",children:"Seus dados so utilizados exclusivamente para:"}),n.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[n.jsx("li",{children:"Autenticar e gerenciar sua conta"}),n.jsx("li",{children:"Processar solicitaes de gerao de imagens via IA"}),n.jsx("li",{children:"Gerenciar crditos e planos de assinatura"}),n.jsx("li",{children:"Melhorar nossos servios e experincia do usurio"}),n.jsx("li",{children:"Enviar notificaes importantes sobre sua conta"})]}),n.jsxs("p",{className:"text-white/70 leading-relaxed mt-3",children:[n.jsx("strong",{className:"text-white",children:"Importante:"})," No vendemos, alugamos ou compartilhamos seus dados pessoais com terceiros para fins de marketing."]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"4. Armazenamento e Segurana"}),n.jsxs("p",{className:"text-white/70 leading-relaxed",children:["Seus dados so armazenados de forma segura no ",n.jsx("strong",{className:"text-white",children:"Firebase (Google Cloud Platform)"}),", que utiliza criptografia em trnsito e em repouso. Implementamos medidas tcnicas e organizacionais para proteger suas informaes contra acesso no autorizado, perda ou destruio."]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"5. Seus Direitos (LGPD)"}),n.jsx("p",{className:"text-white/70 leading-relaxed mb-3",children:"Voc tem os seguintes direitos sobre seus dados pessoais:"}),n.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{className:"text-white",children:"Acesso:"})," Solicitar uma cpia dos seus dados"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-white",children:"Correo:"})," Atualizar dados incorretos ou incompletos"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-white",children:"Excluso:"})," Solicitar a remoo dos seus dados"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-white",children:"Portabilidade:"})," Receber seus dados em formato estruturado"]}),n.jsxs("li",{children:[n.jsx("strong",{className:"text-white",children:"Revogao de Consentimento:"})," Retirar seu consentimento a qualquer momento"]})]}),n.jsxs("p",{className:"text-white/70 leading-relaxed mt-3",children:["Para exercer seus direitos, entre em contato conosco atravs do e-mail: ",n.jsx("a",{href:"mailto:contato@emprata.ai",className:"text-primary hover:underline",children:"contato@emprata.ai"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"6. Cookies e Tecnologias Similares"}),n.jsx("p",{className:"text-white/70 leading-relaxed",children:"Utilizamos cookies essenciais para autenticao e funcionamento da plataforma. No utilizamos cookies de rastreamento ou publicidade de terceiros."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"7. Alteraes nesta Poltica"}),n.jsx("p",{className:"text-white/70 leading-relaxed",children:"Podemos atualizar esta Poltica de Privacidade periodicamente. Notificaremos voc sobre mudanas significativas atravs do e-mail cadastrado ou por aviso na plataforma."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"8. Contato"}),n.jsx("p",{className:"text-white/70 leading-relaxed",children:"Para dvidas sobre esta Poltica de Privacidade ou sobre o tratamento dos seus dados, entre em contato:"}),n.jsxs("div",{className:"mt-3 text-white/70",children:[n.jsxs("p",{children:[n.jsx("strong",{className:"text-white",children:"E-mail:"})," contato@emprata.ai"]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-white",children:"Encarregado de Dados (DPO):"})," dpo@emprata.ai"]})]})]})]})})]})})}function Uv(){return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-zinc-950 to-black",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[n.jsxs(it,{to:"/",className:"inline-flex items-center gap-2 text-white/60 hover:text-white transition-colors mb-8",children:[n.jsx(_i,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Voltar"})]}),n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"bg-primary/20 rounded-2xl p-3",children:n.jsx(Yh,{className:"w-8 h-8 text-primary"})}),n.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white",children:"Termos de Uso"})]}),n.jsx("p",{className:"text-white/60 text-lg",children:"ltima atualizao: 25 de dezembro de 2024"})]}),n.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"prose prose-invert max-w-none",children:n.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 space-y-8",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"1. Aceitao dos Termos"}),n.jsxs("p",{className:"text-white/70 leading-relaxed",children:["Ao acessar e utilizar a plataforma ",n.jsx("strong",{className:"text-white",children:"Emprata AI"}),", voc concorda em cumprir e estar vinculado a estes Termos de Uso. Se voc no concordar com qualquer parte destes termos, no utilize nossos servios."]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"2. Descrio do Servio"}),n.jsxs("p",{className:"text-white/70 leading-relaxed",children:["A Emprata AI  uma plataforma de inteligncia artificial que permite aos usurios gerar imagens profissionais atravs de prompts de texto. O servio  fornecido ",n.jsx("strong",{className:"text-white",children:'"como est"'})," e ",n.jsx("strong",{className:"text-white",children:'"conforme disponvel"'}),", sem garantias de qualquer tipo, expressas ou implcitas."]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"3. Uso Aceitvel"}),n.jsxs("p",{className:"text-white/70 leading-relaxed mb-3",children:["Voc concorda em utilizar a plataforma apenas para fins legais e de acordo com estes Termos.  ",n.jsx("strong",{className:"text-white",children:"PROIBIDO"}),":"]}),n.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[n.jsx("li",{children:"Gerar contedo ilegal, difamatrio, obsceno ou que viole direitos de terceiros"}),n.jsx("li",{children:"Utilizar o servio para criar deepfakes ou contedo enganoso"}),n.jsx("li",{children:"Tentar burlar o sistema de crditos ou acessar funcionalidades no autorizadas"}),n.jsx("li",{children:"Revender ou redistribuir o acesso  plataforma sem autorizao"}),n.jsx("li",{children:"Utilizar bots, scripts ou automaes para abusar do servio"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"4. Propriedade Intelectual"}),n.jsxs("p",{className:"text-white/70 leading-relaxed",children:["As imagens geradas pela IA so de ",n.jsx("strong",{className:"text-white",children:"propriedade do usurio"})," que as criou. No entanto, a Emprata AI no se responsabiliza por:"]}),n.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4 mt-3",children:[n.jsx("li",{children:"Violaes de direitos autorais ou marcas registradas nas imagens geradas"}),n.jsx("li",{children:"Uso indevido das imagens por parte do usurio"}),n.jsx("li",{children:"Similaridades no intencionais com obras protegidas por direitos autorais"})]}),n.jsxs("p",{className:"text-white/70 leading-relaxed mt-3",children:[n.jsx("strong",{className:"text-white",children:"Importante:"})," Voc  o nico responsvel pelo uso comercial ou pblico das imagens geradas."]})]}),n.jsxs("section",{className:"bg-primary/10 border-2 border-primary/30 rounded-2xl p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx("span",{className:"text-primary",children:""})," 5. Poltica de Reembolso (CDC Art. 49)"]}),n.jsxs("p",{className:"text-white/70 leading-relaxed mb-3",children:["Em conformidade com o ",n.jsx("strong",{className:"text-white",children:"Artigo 49 do Cdigo de Defesa do Consumidor (CDC)"}),", voc tem o direito de desistir da compra em at ",n.jsx("strong",{className:"text-white",children:"7 (sete) dias corridos"})," a partir da data da contratao ou do recebimento do produto/servio."]}),n.jsxs("div",{className:"bg-white/5 rounded-xl p-4 mt-4",children:[n.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Condies para Reembolso:"}),n.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[n.jsx("li",{children:"Solicitao deve ser feita em at 7 dias corridos aps a compra"}),n.jsx("li",{children:"Reembolso integral do valor pago"}),n.jsx("li",{children:"Crditos no utilizados sero removidos da conta"}),n.jsx("li",{children:"Prazo de processamento: at 10 dias teis"})]})]}),n.jsxs("p",{className:"text-white/70 leading-relaxed mt-4",children:["Para solicitar reembolso, envie um e-mail para: ",n.jsx("a",{href:"mailto:reembolso@emprata.ai",className:"text-primary hover:underline font-bold",children:"reembolso@emprata.ai"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"6. Planos e Crditos"}),n.jsxs("p",{className:"text-white/70 leading-relaxed",children:["Os crditos adquiridos so ",n.jsx("strong",{className:"text-white",children:"acumulativos"})," e no expiram enquanto sua assinatura estiver ativa. Em caso de cancelamento, os crditos restantes sero perdidos. No h reembolso parcial de crditos no utilizados aps o perodo de 7 dias."]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"7. Limitao de Responsabilidade"}),n.jsx("p",{className:"text-white/70 leading-relaxed",children:"A Emprata AI no se responsabiliza por:"}),n.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4 mt-3",children:[n.jsx("li",{children:"Danos diretos ou indiretos decorrentes do uso das imagens geradas"}),n.jsx("li",{children:"Interrupes temporrias do servio por manuteno ou falhas tcnicas"}),n.jsx("li",{children:"Perda de dados ou contedo gerado"}),n.jsx("li",{children:"Resultados especficos ou qualidade das imagens geradas"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"8. Suspenso e Encerramento"}),n.jsx("p",{className:"text-white/70 leading-relaxed",children:"Reservamo-nos o direito de suspender ou encerrar sua conta imediatamente, sem aviso prvio, em caso de violao destes Termos, uso fraudulento ou atividades ilegais."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"9. Modificaes nos Termos"}),n.jsx("p",{className:"text-white/70 leading-relaxed",children:"Podemos atualizar estes Termos de Uso periodicamente. Mudanas significativas sero comunicadas atravs do e-mail cadastrado. O uso continuado da plataforma aps as alteraes constitui aceitao dos novos termos."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"10. Lei Aplicvel"}),n.jsx("p",{className:"text-white/70 leading-relaxed",children:"Estes Termos so regidos pelas leis da Repblica Federativa do Brasil. Qualquer disputa ser resolvida no foro da comarca de So Paulo/SP."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"11. Contato"}),n.jsx("p",{className:"text-white/70 leading-relaxed",children:"Para dvidas sobre estes Termos de Uso, entre em contato:"}),n.jsxs("div",{className:"mt-3 text-white/70",children:[n.jsxs("p",{children:[n.jsx("strong",{className:"text-white",children:"E-mail:"})," contato@emprata.ai"]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-white",children:"Suporte:"})," suporte@emprata.ai"]})]})]})]})})]})})}function Vv(){const e=_t(),{isAuthenticated:t}=Ke(),i=()=>{e(t?"/app":"/")};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-zinc-950 to-black flex items-center justify-center p-4",children:n.jsxs(K.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.5},className:"text-center max-w-md",children:[n.jsx(K.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200,damping:15},className:"flex justify-center mb-8",children:n.jsxs("div",{className:"relative",children:[n.jsx(K.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-red-500/30 rounded-full blur-2xl"}),n.jsx("div",{className:"relative bg-red-500/20 border-2 border-red-500/30 rounded-full p-6",children:n.jsx(Sl,{className:"w-16 h-16 text-red-500",strokeWidth:2})})]})}),n.jsx(K.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-8xl md:text-9xl font-black text-white mb-4 tracking-tighter",children:"404"}),n.jsx(K.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-2xl md:text-3xl font-bold text-white mb-3",children:"Pgina no encontrada"}),n.jsx(K.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/60 text-lg mb-8",children:"A pgina que voc est procurando no existe ou foi movida."}),n.jsx(K.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"px-8 py-4 rounded-2xl bg-primary hover:bg-orange-600 font-black text-white shadow-xl shadow-primary/40 uppercase tracking-wider text-sm transition-all",children:"Voltar para o Incio"})]})})}function Bp(){const{currentPlan:e,planDetails:t,checkAccess:i,isLoading:s,isGrowthOrHigher:a,isBlack:o}=ir();return{currentPlan:e,planDetails:t,canAccess:u=>fb[u]?i(u):!0,isLoading:s,isPro:a,isBlack:o}}const Hv=[{id:"dashboard",label:"Viso Geral",icon:El,path:"/dashboard",section:"Operao"},{id:"dispatch",label:"Logstica & Entregadores",icon:In,path:"/dispatch",section:"Operao",feature:"driver_app_access"},{id:"kds",label:"Tela da Cozinha (KDS)",icon:gt,path:"/kitchen-display",section:"Operao"},{id:"menu",label:"Editor de Cardpio",icon:hi,path:"/menu-builder",section:"Gesto"},{id:"staff",label:"Equipe & Acessos",icon:vn,path:"/staff",section:"RH"},{id:"finance",label:"Financeiro",icon:pi,path:"/finance",section:"Gesto",feature:"financial_overview"},{id:"ai",label:"EmprataBrain Intelligence",icon:fi,path:"/intelligence",section:"IA",feature:"ai_insights"},{id:"qr",label:"QR Codes das Mesas",icon:pa,path:"/qr-print",section:"Ferramentas",feature:"table_qr_code"},{id:"store",label:"Vitrine da Loja",icon:hi,path:"/store-settings",section:"Gesto"},{id:"owner",label:"App do Dono (Mobile)",icon:mi,path:"/owner",section:"Apps"},{id:"profile",label:"Meu Perfil",icon:kl,path:"/profile",section:"Conta"},{id:"subscription",label:"Meu Plano",icon:pi,path:"/subscription",section:"Conta"}];function qv({isOpen:e,onClose:t}){const[i,s]=T.useState(""),[a,o]=T.useState(0),c=_t(),{checkAccess:u}=ir(),h=Hv.filter(p=>!(!(p.label.toLowerCase().includes(i.toLowerCase())||p.section.toLowerCase().includes(i.toLowerCase()))||p.feature&&!u(p.feature)));T.useEffect(()=>{e&&(s(""),o(0))},[e]);const d=T.useCallback(p=>{if(p.feature&&!u(p.feature)){const x=tr(p.feature);ie.error(`Recurso do plano ${bi[x].label}`,{description:"Faa upgrade para acessar",action:{label:"Ver Planos",onClick:()=>c("/subscription")}}),t(),c("/subscription");return}c(p.path),t()},[u,c,t]),f=T.useCallback(p=>{if(e)switch(p.key){case"Escape":t();break;case"ArrowDown":p.preventDefault(),o(x=>(x+1)%Math.max(h.length,1));break;case"ArrowUp":p.preventDefault(),o(x=>(x-1+h.length)%Math.max(h.length,1));break;case"Enter":h[a]&&d(h[a]);break}},[e,t,h,a,d]);return T.useEffect(()=>(window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)),[f]),n.jsx(Ye,{children:e&&n.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-start justify-center pt-[15vh] p-4",onClick:t,children:n.jsxs(K.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},onClick:p=>p.stopPropagation(),className:"w-full max-w-2xl bg-[#121212] border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"flex items-center px-4 border-b border-white/10",children:[n.jsx(Ln,{className:"text-white/40",size:20}),n.jsx("input",{autoFocus:!0,value:i,onChange:p=>{s(p.target.value),o(0)},placeholder:"O que voc procura? (Ex: Cardpio, Cozinha...)",className:"w-full bg-transparent p-4 text-white placeholder:text-white/20 outline-none text-lg"}),n.jsx("div",{className:"text-[10px] font-bold text-white/20 border border-white/10 px-2 py-1 rounded",children:"ESC"})]}),n.jsx("div",{className:"max-h-[60vh] overflow-y-auto p-2",children:h.length===0?n.jsx("div",{className:"p-8 text-center text-white/30",children:"Nenhuma ferramenta encontrada."}):h.map((p,x)=>{const b=p.icon,y=p.feature?u(p.feature):!0;return n.jsxs("button",{onClick:()=>d(p),className:`w-full flex items-center justify-between p-3 rounded-xl group transition-colors text-left ${x===a?"bg-white/10":"hover:bg-white/5"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg transition-colors ${x===a?"bg-primary/20 text-primary":"bg-white/5 text-white/60 group-hover:text-primary group-hover:bg-primary/10"}`,children:n.jsx(b,{size:18})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-bold text-white text-sm flex items-center gap-2",children:[p.label,!y&&n.jsx(Gt,{size:12,className:"text-white/30"})]}),n.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider",children:p.section})]})]}),n.jsx(Rn,{size:16,className:`transition-all ${x===a?"text-white opacity-100":"text-white/20 -translate-x-2 opacity-0 group-hover:translate-x-0 group-hover:opacity-100"}`})]},p.id)})}),n.jsxs("div",{className:"p-2 bg-white/5 border-t border-white/5 flex justify-between px-4 text-[10px] text-white/30",children:[n.jsxs("span",{children:[n.jsx("strong",{children:"EmprataOS"})," v2.0"]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("span",{children:" Navegar"}),n.jsx("span",{children:" Selecionar"}),n.jsx("span",{children:"ESC Fechar"})]})]})]})})})}const Up=6048e5,$v=864e5,md=Symbol.for("constructDateFrom");function Hn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&md in e?e[md](t):e instanceof Date?new e.constructor(t):new Date(t)}function rn(e,t){return Hn(t||e,e)}function Gv(e,t,i){const s=rn(e,i?.in);return isNaN(t)?Hn(e,NaN):(t&&s.setDate(s.getDate()+t),s)}let Wv={};function wa(){return Wv}function Ur(e,t){const i=wa(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=rn(e,t?.in),o=a.getDay(),c=(o<s?7:0)+o-s;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function sa(e,t){return Ur(e,{...t,weekStartsOn:1})}function Vp(e,t){const i=rn(e,t?.in),s=i.getFullYear(),a=Hn(i,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const o=sa(a),c=Hn(i,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const u=sa(c);return i.getTime()>=o.getTime()?s+1:i.getTime()>=u.getTime()?s:s-1}function fd(e){const t=rn(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function Hp(e,...t){const i=Hn.bind(null,t.find(s=>typeof s=="object"));return t.map(i)}function yi(e,t){const i=rn(e,t?.in);return i.setHours(0,0,0,0),i}function Zv(e,t,i){const[s,a]=Hp(i?.in,e,t),o=yi(s),c=yi(a),u=+o-fd(o),h=+c-fd(c);return Math.round((u-h)/$v)}function Kv(e,t){const i=Vp(e,t),s=Hn(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),sa(s)}function xd(e,t,i){const[s,a]=Hp(i?.in,e,t);return+yi(s)==+yi(a)}function Yv(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Xv(e){return!(!Yv(e)&&typeof e!="number"||isNaN(+rn(e)))}function Qv(e,t){const i=rn(e,t?.in);return i.setDate(1),i.setHours(0,0,0,0),i}function Jv(e,t){const i=rn(e,t?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const ey={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ty=(e,t,i)=>{let s;const a=ey[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+s:s+" ago":s};function xo(e){return(t={})=>{const i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}const ny={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iy={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ry={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sy={date:xo({formats:ny,defaultWidth:"full"}),time:xo({formats:iy,defaultWidth:"full"}),dateTime:xo({formats:ry,defaultWidth:"full"})},ay={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oy=(e,t,i,s)=>ay[e];function _r(e){return(t,i)=>{const s=i?.context?String(i.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,u=i?.width?String(i.width):c;a=e.formattingValues[u]||e.formattingValues[c]}else{const c=e.defaultWidth,u=i?.width?String(i.width):e.defaultWidth;a=e.values[u]||e.values[c]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const ly={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uy={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dy={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hy={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},py={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},my=(e,t)=>{const i=Number(e),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},fy={ordinalNumber:my,era:_r({values:ly,defaultWidth:"wide"}),quarter:_r({values:cy,defaultWidth:"wide",argumentCallback:e=>e-1}),month:_r({values:uy,defaultWidth:"wide"}),day:_r({values:dy,defaultWidth:"wide"}),dayPeriod:_r({values:hy,defaultWidth:"wide",formattingValues:py,defaultFormattingWidth:"wide"})};function jr(e){return(t,i={})=>{const s=i.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const c=o[0],u=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(u)?gy(u,p=>p.test(c)):xy(u,p=>p.test(c));let d;d=e.valueCallback?e.valueCallback(h):h,d=i.valueCallback?i.valueCallback(d):d;const f=t.slice(c.length);return{value:d,rest:f}}}function xy(e,t){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i}function gy(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i}function by(e){return(t,i={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],o=t.match(e.parsePattern);if(!o)return null;let c=e.valueCallback?e.valueCallback(o[0]):o[0];c=i.valueCallback?i.valueCallback(c):c;const u=t.slice(a.length);return{value:c,rest:u}}}const vy=/^(\d+)(th|st|nd|rd)?/i,yy=/\d+/i,wy={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_y={any:[/^b/i,/^(a|c)/i]},jy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ny={any:[/1/i,/2/i,/3/i,/4/i]},ky={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cy={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ey={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Sy={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ay={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ty={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Py={ordinalNumber:by({matchPattern:vy,parsePattern:yy,valueCallback:e=>parseInt(e,10)}),era:jr({matchPatterns:wy,defaultMatchWidth:"wide",parsePatterns:_y,defaultParseWidth:"any"}),quarter:jr({matchPatterns:jy,defaultMatchWidth:"wide",parsePatterns:Ny,defaultParseWidth:"any",valueCallback:e=>e+1}),month:jr({matchPatterns:ky,defaultMatchWidth:"wide",parsePatterns:Cy,defaultParseWidth:"any"}),day:jr({matchPatterns:Ey,defaultMatchWidth:"wide",parsePatterns:Sy,defaultParseWidth:"any"}),dayPeriod:jr({matchPatterns:Ay,defaultMatchWidth:"any",parsePatterns:Ty,defaultParseWidth:"any"})},Iy={code:"en-US",formatDistance:ty,formatLong:sy,formatRelative:oy,localize:fy,match:Py,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ry(e,t){const i=rn(e,t?.in);return Zv(i,Jv(i))+1}function My(e,t){const i=rn(e,t?.in),s=+sa(i)-+Kv(i);return Math.round(s/Up)+1}function qp(e,t){const i=rn(e,t?.in),s=i.getFullYear(),a=wa(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,c=Hn(t?.in||e,0);c.setFullYear(s+1,0,o),c.setHours(0,0,0,0);const u=Ur(c,t),h=Hn(t?.in||e,0);h.setFullYear(s,0,o),h.setHours(0,0,0,0);const d=Ur(h,t);return+i>=+u?s+1:+i>=+d?s:s-1}function Ly(e,t){const i=wa(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=qp(e,t),o=Hn(t?.in||e,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),Ur(o,t)}function Oy(e,t){const i=rn(e,t?.in),s=+Ur(i,t)-+Ly(i,t);return Math.round(s/Up)+1}function Ze(e,t){const i=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return i+s}const Gn={y(e,t){const i=e.getFullYear(),s=i>0?i:1-i;return Ze(t==="yy"?s%100:s,t.length)},M(e,t){const i=e.getMonth();return t==="M"?String(i+1):Ze(i+1,2)},d(e,t){return Ze(e.getDate(),t.length)},a(e,t){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return i==="am"?"a.m.":"p.m."}},h(e,t){return Ze(e.getHours()%12||12,t.length)},H(e,t){return Ze(e.getHours(),t.length)},m(e,t){return Ze(e.getMinutes(),t.length)},s(e,t){return Ze(e.getSeconds(),t.length)},S(e,t){const i=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,i-3));return Ze(a,t.length)}},Bi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gd={G:function(e,t,i){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});default:return i.era(s,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return i.ordinalNumber(a,{unit:"year"})}return Gn.y(e,t)},Y:function(e,t,i,s){const a=qp(e,s),o=a>0?a:1-a;if(t==="YY"){const c=o%100;return Ze(c,2)}return t==="Yo"?i.ordinalNumber(o,{unit:"year"}):Ze(o,t.length)},R:function(e,t){const i=Vp(e);return Ze(i,t.length)},u:function(e,t){const i=e.getFullYear();return Ze(i,t.length)},Q:function(e,t,i){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Ze(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,i){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Ze(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,i){const s=e.getMonth();switch(t){case"M":case"MM":return Gn.M(e,t);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,i){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Ze(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,i,s){const a=Oy(e,s);return t==="wo"?i.ordinalNumber(a,{unit:"week"}):Ze(a,t.length)},I:function(e,t,i){const s=My(e);return t==="Io"?i.ordinalNumber(s,{unit:"week"}):Ze(s,t.length)},d:function(e,t,i){return t==="do"?i.ordinalNumber(e.getDate(),{unit:"date"}):Gn.d(e,t)},D:function(e,t,i){const s=Ry(e);return t==="Do"?i.ordinalNumber(s,{unit:"dayOfYear"}):Ze(s,t.length)},E:function(e,t,i){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,i,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Ze(o,2);case"eo":return i.ordinalNumber(o,{unit:"day"});case"eee":return i.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(a,{width:"short",context:"formatting"});default:return i.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,i,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Ze(o,t.length);case"co":return i.ordinalNumber(o,{unit:"day"});case"ccc":return i.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(a,{width:"narrow",context:"standalone"});case"cccccc":return i.day(a,{width:"short",context:"standalone"});default:return i.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,i){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Ze(a,t.length);case"io":return i.ordinalNumber(a,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,i){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(a,{width:"narrow",context:"formatting"});default:return i.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,i){const s=e.getHours();let a;switch(s===12?a=Bi.noon:s===0?a=Bi.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(a,{width:"narrow",context:"formatting"});default:return i.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,i){const s=e.getHours();let a;switch(s>=17?a=Bi.evening:s>=12?a=Bi.afternoon:s>=4?a=Bi.morning:a=Bi.night,t){case"B":case"BB":case"BBB":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(a,{width:"narrow",context:"formatting"});default:return i.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),i.ordinalNumber(s,{unit:"hour"})}return Gn.h(e,t)},H:function(e,t,i){return t==="Ho"?i.ordinalNumber(e.getHours(),{unit:"hour"}):Gn.H(e,t)},K:function(e,t,i){const s=e.getHours()%12;return t==="Ko"?i.ordinalNumber(s,{unit:"hour"}):Ze(s,t.length)},k:function(e,t,i){let s=e.getHours();return s===0&&(s=24),t==="ko"?i.ordinalNumber(s,{unit:"hour"}):Ze(s,t.length)},m:function(e,t,i){return t==="mo"?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):Gn.m(e,t)},s:function(e,t,i){return t==="so"?i.ordinalNumber(e.getSeconds(),{unit:"second"}):Gn.s(e,t)},S:function(e,t){return Gn.S(e,t)},X:function(e,t,i){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return vd(s);case"XXXX":case"XX":return oi(s);default:return oi(s,":")}},x:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"x":return vd(s);case"xxxx":case"xx":return oi(s);default:return oi(s,":")}},O:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+bd(s,":");default:return"GMT"+oi(s,":")}},z:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+bd(s,":");default:return"GMT"+oi(s,":")}},t:function(e,t,i){const s=Math.trunc(+e/1e3);return Ze(s,t.length)},T:function(e,t,i){return Ze(+e,t.length)}};function bd(e,t=""){const i=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),o=s%60;return o===0?i+String(a):i+String(a)+t+Ze(o,2)}function vd(e,t){return e%60===0?(e>0?"-":"+")+Ze(Math.abs(e)/60,2):oi(e,t)}function oi(e,t=""){const i=e>0?"-":"+",s=Math.abs(e),a=Ze(Math.trunc(s/60),2),o=Ze(s%60,2);return i+a+t+o}const yd=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},$p=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Dy=(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],s=i[1],a=i[2];if(!a)return yd(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",yd(s,t)).replace("{{time}}",$p(a,t))},zy={p:$p,P:Dy},Fy=/^D+$/,By=/^Y+$/,Uy=["D","DD","YY","YYYY"];function Vy(e){return Fy.test(e)}function Hy(e){return By.test(e)}function qy(e,t,i){const s=$y(e,t,i);if(console.warn(s),Uy.includes(e))throw new RangeError(s)}function $y(e,t,i){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Gy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zy=/^'([^]*?)'?$/,Ky=/''/g,Yy=/[a-zA-Z]/;function Xy(e,t,i){const s=wa(),a=s.locale??Iy,o=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,u=rn(e,i?.in);if(!Xv(u))throw new RangeError("Invalid time value");let h=t.match(Wy).map(f=>{const p=f[0];if(p==="p"||p==="P"){const x=zy[p];return x(f,a.formatLong)}return f}).join("").match(Gy).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const p=f[0];if(p==="'")return{isToken:!1,value:Qy(f)};if(gd[p])return{isToken:!0,value:f};if(p.match(Yy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:f}});a.localize.preprocessor&&(h=a.localize.preprocessor(u,h));const d={firstWeekContainsDate:o,weekStartsOn:c,locale:a};return h.map(f=>{if(!f.isToken)return f.value;const p=f.value;(Hy(p)||Vy(p))&&qy(p,t,String(e));const x=gd[p[0]];return x(u,p,a.localize,d)}).join("")}function Qy(e){const t=e.match(Zy);return t?t[1].replace(Ky,"'"):e}function sl(e,t,i){return Gv(e,-t,i)}const Jy="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3";function ew(){const[e,t]=T.useState({totalSales:0,totalOrders:0,activeCustomers:0,chartData:[]}),i=T.useRef(new Audio(Jy)),s=T.useRef(!0);return T.useEffect(()=>{const a=rt.currentUser;if(!a)return;const o=yi(new Date),c=tt($e(he,"orders"),Oe("restaurantId","==",a.uid),Oe("createdAt",">=",wn.fromDate(o)),Ni("createdAt","asc")),u=Ot(c,h=>{let d=0;const f=new Set,p={};h.docs.forEach(b=>{const y=b.data();if(y.status!=="cancelled"&&y.status!=="CANCELLED"){d+=y.total||y.financials?.total||0,f.add(y.customer?.phone||y.customer?.id);const w=y.createdAt?.toDate?y.createdAt.toDate():new Date,j=Xy(w,"HH:00");p[j]=(p[j]||0)+(y.total||y.financials?.total||0)}}),!s.current&&h.docChanges().some(b=>b.type==="added")&&i.current.play().catch(b=>console.log("Audio blocked",b));const x=Object.keys(p).map(b=>({date:b,value:p[b]}));t({totalSales:d,totalOrders:h.size,activeCustomers:f.size,chartData:x}),s.current=!1});return()=>u()},[]),e}function dn(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}const Vr=[{id:"STARTER",label:"Incio da Jornada",threshold:0,benefits:["Acesso  Plataforma","Suporte via Ticket"],icon:"",color:"text-gray-500",bgGradient:"from-gray-600 to-gray-800",feeDiscount:0,reward:null,rewardType:null},{id:"VALIDATED",label:"Negcio Validado",threshold:1e4,benefits:["Selo de Verificado","Certificado Digital de Validao"],icon:"",color:"text-blue-400",bgGradient:"from-blue-600 to-blue-800",feeDiscount:0,reward:"Certificado Digital (Para Instagram)",rewardType:"DIGITAL_CERTIFICATE",rewardDescription:"Poste no Stories e ganhe reconhecimento!"},{id:"BUILDER",label:"Emprata Builder",threshold:5e4,benefits:["Saque Prioritrio (D+1)","Acesso ao Grupo VIP no WhatsApp"],icon:"",color:"text-orange-400",bgGradient:"from-orange-600 to-orange-800",feeDiscount:0,reward:"Convite Comunidade VIP",rewardType:"VIP_COMMUNITY",rewardDescription:"Networking com outros donos de sucesso"},{id:"SCALER",label:"Emprata Scaler",threshold:15e4,benefits:["Taxa Reduzida (-0.5%)","Desbloqueio do Mdulo CRM Avanado"],icon:"",color:"text-gray-200",bgGradient:"from-gray-400 to-gray-600",feeDiscount:.005,reward:"Upgrade de Funcionalidade",rewardType:"FEATURE_UNLOCK",rewardDescription:"CRM Avanado desbloqueado automaticamente"},{id:"PRO",label:"Emprata Pro",threshold:5e5,benefits:["Taxa Reduzida (-1.0%)","Gerente de Contas Dedicado"],icon:"",color:"text-yellow-400",bgGradient:"from-yellow-500 to-yellow-700",feeDiscount:.01,reward:"PLACA FSICA 500K",rewardType:"PHYSICAL_PLAQUE",rewardDescription:"Placa exclusiva enviada para seu restaurante"},{id:"LEGEND",label:"Lenda do Delivery",threshold:1e6,benefits:["Taxa Personalizada","Mentoria com Fundadores"],icon:"",color:"text-purple-500",bgGradient:"from-purple-600 to-purple-900",feeDiscount:.015,reward:"TROFU 1 MILHO + Jantar",rewardType:"TROPHY",rewardDescription:"Trofu exclusivo + jantar com os fundadores"}];function aa(e){return[...Vr].reverse().find(t=>e>=t.threshold)||Vr[0]}function ql(e){return Vr.find(t=>e<t.threshold)||null}function tw(e){const t=aa(e),i=ql(e);if(!i)return{percent:100,remaining:0};const s=t.threshold,a=i.threshold,o=e-s,c=a-s;return{percent:Math.min(100,Math.max(0,o/c*100)),remaining:a-e}}function nw(){const{user:e}=Ke(),t=_t(),[i,s]=T.useState(0),[a,o]=T.useState(!0);if(T.useEffect(()=>{if(!e?.uid)return;const w=Ot(ze(he,"users",e.uid),j=>{const S=j.data();s(S?.stats?.verifiedRevenue||0),o(!1)});return()=>w()},[e?.uid]),a)return n.jsx("div",{className:"h-36 bg-gradient-to-r from-[#0a0a0a] to-[#121212] rounded-[2rem] animate-pulse border border-white/5"});const c=aa(i),u=ql(i);Vr.findIndex(w=>w.id===c.id);const h=c.threshold,d=u?.threshold||h*2,f=d-h,p=i-h,x=f>0?Math.min(100,Math.max(0,p/f*100)):100,b=c.color,y=b.replace("text-","bg-");return n.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-[#0a0a0a] to-[#121212] rounded-[2rem] p-6 border border-white/10 relative overflow-hidden group cursor-pointer hover:border-white/20 transition-all",onClick:()=>t("/owner/journey"),children:[n.jsx("div",{className:`absolute top-0 right-0 w-40 h-40 ${y}/5 blur-[80px] rounded-full pointer-events-none transition-all duration-1000`}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex justify-between items-start mb-5",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#1a1a1a] border border-white/10 flex items-center justify-center text-2xl shadow-lg",children:c.icon}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:["Sua Patente ",n.jsx(Pn,{size:10,className:"text-green-500"})]}),n.jsx("h2",{className:`text-xl font-black ${b} tracking-tight`,children:c.label})]})]}),u&&n.jsxs("div",{className:"bg-white/5 border border-white/10 px-3 py-2 rounded-xl text-right hidden md:block",children:[n.jsx("p",{className:"text-[9px] text-white/40 uppercase font-bold mb-0.5",children:"Prxima Conquista"}),n.jsxs("p",{className:"text-xs font-bold text-white flex items-center justify-end gap-1.5",children:[n.jsx("span",{className:"truncate max-w-[120px]",children:u.benefits[0]}),n.jsx(Gt,{size:10,className:"text-white/30 shrink-0"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-white/40 uppercase",children:[n.jsxs("span",{children:["XP Verificado: R$ ",i.toLocaleString("pt-BR")]}),n.jsxs("span",{children:["Meta: R$ ",d.toLocaleString("pt-BR")]})]}),n.jsx("div",{className:"h-5 bg-[#050505] rounded-full border border-white/5 relative overflow-hidden shadow-inner",children:n.jsxs(K.div,{initial:{width:0},animate:{width:`${x}%`},transition:{duration:1.2,ease:"easeOut"},className:`h-full relative overflow-hidden flex items-center justify-end pr-2 ${y}`,children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-full shimmer"}),x>10&&n.jsxs("span",{className:"text-[9px] font-black text-black/60 relative z-10",children:[x.toFixed(0),"%"]})]})})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-white/30",children:[n.jsx(Rx,{size:12,className:"shrink-0"}),n.jsxs("p",{children:["Vendas via ",n.jsx("strong",{className:"text-white/50",children:"Checkout Online"})," contam para evoluo"]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-white/50 group-hover:text-primary transition-colors",children:[n.jsx(at,{size:12}),n.jsx("span",{children:"Ver Jornada"}),n.jsx(Mr,{size:12,className:"group-hover:translate-x-0.5 transition-transform"})]})]})]})]})}function iw(){const{user:e}=Ke(),{canAccess:t}=Bp(),i=_t(),{totalSales:s,totalOrders:a}=ew(),o=a>0?s/a:0,[c,u]=T.useState(!1);T.useEffect(()=>{const d=f=>{(f.metaKey||f.ctrlKey)&&f.key==="k"&&(f.preventDefault(),u(!0))};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[]);const h=[{title:"Operao em Tempo Real",apps:[{title:"Logstica",desc:"Gesto de Motoboys",icon:In,path:"/dispatch",color:"text-green-400",bg:"bg-green-500/10",feature:"dispatch_console"},{title:"Cozinha (KDS)",desc:"Pedidos para Preparo",icon:gt,path:"/kitchen-display",color:"text-orange-400",bg:"bg-orange-500/10",feature:"kds_kitchen"},{title:"Terminal PDV",desc:"Caixa Unificado",icon:Mx,path:"/pos",color:"text-cyan-400",bg:"bg-cyan-500/10",feature:"pos_terminal"}]},{title:"Gesto & Estratgia",apps:[{title:"Cardpio",desc:"Editar Produtos",icon:hi,path:"/menu-builder",color:"text-blue-400",bg:"bg-blue-500/10",feature:"menu_builder"},{title:"Financeiro",desc:"Fluxo de Caixa",icon:pi,path:"/finance",color:"text-yellow-400",bg:"bg-yellow-500/10",feature:"financial_advanced"},{title:"Equipe",desc:"Acessos e PINs",icon:vn,path:"/staff",color:"text-purple-400",bg:"bg-purple-500/10",feature:"staff_management"},{title:"Vitrine",desc:"Personalizar Loja",icon:kl,path:"/store-settings",color:"text-slate-400",bg:"bg-slate-500/10",feature:"basic_access"}]},{title:"Inteligncia Artificial",apps:[{title:"EmprataBrain",desc:"Anlise de Negcio",icon:fi,path:"/intelligence",color:"text-pink-400",bg:"bg-pink-500/10",border:"border-pink-500/30",feature:"emprata_brain"}]},{title:"Apps & Ferramentas",apps:[{title:"App do Dono",desc:"Controle Mobile",icon:mi,path:"/owner",color:"text-violet-400",bg:"bg-violet-500/10",feature:"basic_access"},{title:"QR Codes",desc:"Mesas e Links",icon:pa,path:"/qr-print",color:"text-emerald-400",bg:"bg-emerald-500/10",feature:"qr_codes"}]}];return n.jsxs("div",{className:"space-y-10 pb-20",children:[n.jsx(qv,{isOpen:c,onClose:()=>u(!1)}),n.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-br from-[#121212] to-black border border-white/10 p-8 md:p-12 shadow-2xl",children:[n.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-primary/10 blur-[100px] rounded-full pointer-events-none"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-60 h-60 bg-purple-500/10 blur-[80px] rounded-full pointer-events-none"}),n.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter text-white mb-2",children:["Painel de ",n.jsx("span",{className:"text-primary",children:"Controle"})]}),n.jsxs("div",{className:"flex items-center gap-4 text-white/60",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/5",children:[n.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-xs font-bold uppercase",children:"Sistema Online"})]}),n.jsxs("span",{className:"text-sm",children:["Ol, ",e?.displayName?.split(" ")[0]||"Chef"]})]})]}),n.jsxs("div",{className:"flex gap-3 flex-wrap",children:[n.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-4 rounded-2xl border border-white/10 min-w-[130px]",children:[n.jsx("p",{className:"text-[10px] uppercase font-bold text-white/40 mb-1",children:"Vendas Hoje"}),n.jsx("p",{className:"text-2xl font-black text-white",children:dn(s)})]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-4 rounded-2xl border border-white/10 min-w-[100px]",children:[n.jsx("p",{className:"text-[10px] uppercase font-bold text-white/40 mb-1",children:"Pedidos"}),n.jsx("p",{className:"text-2xl font-black text-white",children:a})]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-4 rounded-2xl border border-white/10 min-w-[130px]",children:[n.jsx("p",{className:"text-[10px] uppercase font-bold text-white/40 mb-1",children:"Ticket Mdio"}),n.jsx("p",{className:"text-2xl font-black text-white",children:dn(o)})]})]})]}),n.jsx("div",{className:"mt-8 relative max-w-2xl",children:n.jsxs("button",{onClick:()=>u(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl p-4 flex items-center justify-between text-white/40 group transition-all",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ln,{size:20,className:"group-hover:text-white transition-colors"}),n.jsx("span",{children:"Buscar ferramenta, pedido ou configurao..."})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("kbd",{className:"bg-black/40 px-2 py-1 rounded text-xs font-bold border border-white/10",children:""}),n.jsx("kbd",{className:"bg-black/40 px-2 py-1 rounded text-xs font-bold border border-white/10",children:"K"})]})]})})]}),n.jsx(nw,{}),n.jsx("div",{className:"space-y-8",children:h.map((d,f)=>n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},children:[n.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-white/20 mb-4 ml-2 flex items-center gap-2",children:d.title}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.apps.map(p=>{const x=t(p.feature);return n.jsxs(K.button,{onClick:()=>i(x?p.path:"/subscription"),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`p-6 rounded-3xl border transition-all text-left group relative overflow-hidden ${x?`bg-[#121212] ${p.border||"border-white/5"} hover:border-white/20`:"bg-[#0a0a0a] border-white/5 opacity-80"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4 relative z-10",children:[n.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${p.bg} ${p.color} text-xl shadow-lg group-hover:scale-110 transition-transform`,children:n.jsx(p.icon,{size:28})}),x?n.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/10 p-2 rounded-full",children:n.jsx(Wt,{size:14,className:"text-white"})}):n.jsx("div",{className:"bg-white/10 p-2 rounded-full backdrop-blur-md",children:n.jsx(Gt,{size:14,className:"text-white/60"})})]}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("h4",{className:"text-xl font-bold text-white mb-1",children:p.title}),n.jsx("p",{className:"text-sm text-white/40 font-medium",children:p.desc})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/0 to-white/[0.02] opacity-0 group-hover:opacity-100 transition-opacity"}),!x&&n.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20",children:n.jsxs("span",{className:"bg-white text-black px-4 py-2 rounded-xl text-xs font-black flex items-center gap-2 transform translate-y-4 group-hover:translate-y-0 transition-transform",children:[n.jsx(Wt,{size:12,className:"fill-black"})," DESBLOQUEAR"]})})]},p.path)})})]},f))}),n.jsx("div",{className:"text-center text-white/20 text-xs py-4",children:n.jsxs("p",{children:["EmprataOS v2.0  Pressione ",n.jsx("kbd",{className:"bg-white/5 px-1.5 py-0.5 rounded mx-1",children:"K"})," para buscar"]})})]})}function Gp(e,t){const i=T.useRef(t);T.useEffect(function(){t!==i.current&&e.attributionControl!=null&&(i.current!=null&&e.attributionControl.removeAttribution(i.current),t!=null&&e.attributionControl.addAttribution(t)),i.current=t},[e,t])}const rw=1;function sw(e){return Object.freeze({__version:rw,map:e})}function aw(e,t){return Object.freeze({...e,...t})}const Wp=T.createContext(null),Zp=Wp.Provider;function $l(){const e=T.useContext(Wp);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function ow(e){function t(i,s){const{instance:a,context:o}=e(i).current;return T.useImperativeHandle(s,()=>a),i.children==null?null:te.createElement(Zp,{value:o},i.children)}return T.forwardRef(t)}function lw(e){function t(i,s){const[a,o]=T.useState(!1),{instance:c}=e(i,o).current;T.useImperativeHandle(s,()=>c),T.useEffect(function(){a&&c.update()},[c,a,i.children]);const u=c._contentNode;return u?hg.createPortal(i.children,u):null}return T.forwardRef(t)}function cw(e){function t(i,s){const{instance:a}=e(i).current;return T.useImperativeHandle(s,()=>a),null}return T.forwardRef(t)}function Kp(e,t){const i=T.useRef();T.useEffect(function(){return t!=null&&e.instance.on(t),i.current=t,function(){i.current!=null&&e.instance.off(i.current),i.current=null}},[e,t])}function Gl(e,t){const i=e.pane??t.pane;return i?{...e,pane:i}:e}function uw(e,t){return function(s,a){const o=$l(),c=e(Gl(s,o),o);return Gp(o.map,s.attribution),Kp(c.current,s.eventHandlers),t(c.current,o,s,a),c}}var Sr={exports:{}};var dw=Sr.exports,wd;function hw(){return wd||(wd=1,(function(e,t){(function(i,s){s(t)})(dw,(function(i){var s="1.9.4";function a(r){var l,m,g,v;for(m=1,g=arguments.length;m<g;m++){v=arguments[m];for(l in v)r[l]=v[l]}return r}var o=Object.create||(function(){function r(){}return function(l){return r.prototype=l,new r}})();function c(r,l){var m=Array.prototype.slice;if(r.bind)return r.bind.apply(r,m.call(arguments,1));var g=m.call(arguments,2);return function(){return r.apply(l,g.length?g.concat(m.call(arguments)):arguments)}}var u=0;function h(r){return"_leaflet_id"in r||(r._leaflet_id=++u),r._leaflet_id}function d(r,l,m){var g,v,E,z;return z=function(){g=!1,v&&(E.apply(m,v),v=!1)},E=function(){g?v=arguments:(r.apply(m,arguments),setTimeout(z,l),g=!0)},E}function f(r,l,m){var g=l[1],v=l[0],E=g-v;return r===g&&m?r:((r-v)%E+E)%E+v}function p(){return!1}function x(r,l){if(l===!1)return r;var m=Math.pow(10,l===void 0?6:l);return Math.round(r*m)/m}function b(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function y(r){return b(r).split(/\s+/)}function w(r,l){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var m in l)r.options[m]=l[m];return r.options}function j(r,l,m){var g=[];for(var v in r)g.push(encodeURIComponent(m?v.toUpperCase():v)+"="+encodeURIComponent(r[v]));return(!l||l.indexOf("?")===-1?"?":"&")+g.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function C(r,l){return r.replace(S,function(m,g){var v=l[g];if(v===void 0)throw new Error("No value provided for variable "+m);return typeof v=="function"&&(v=v(l)),v})}var N=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function R(r,l){for(var m=0;m<r.length;m++)if(r[m]===l)return m;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var F=0;function $(r){var l=+new Date,m=Math.max(0,16-(l-F));return F=l+m,window.setTimeout(r,m)}var ne=window.requestAnimationFrame||I("RequestAnimationFrame")||$,O=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function D(r,l,m){if(m&&ne===$)r.call(l);else return ne.call(window,c(r,l))}function M(r){r&&O.call(window,r)}var q={__proto__:null,extend:a,create:o,bind:c,get lastId(){return u},stamp:h,throttle:d,wrapNum:f,falseFn:p,formatNum:x,trim:b,splitWords:y,setOptions:w,getParamString:j,template:C,isArray:N,indexOf:R,emptyImageUrl:P,requestFn:ne,cancelFn:O,requestAnimFrame:D,cancelAnimFrame:M};function Z(){}Z.extend=function(r){var l=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=l.__super__=this.prototype,g=o(m);g.constructor=l,l.prototype=g;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return r.statics&&a(l,r.statics),r.includes&&(W(r.includes),a.apply(null,[g].concat(r.includes))),a(g,r),delete g.statics,delete g.includes,g.options&&(g.options=m.options?o(m.options):{},a(g.options,r.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,z=g._initHooks.length;E<z;E++)g._initHooks[E].call(this)}},l},Z.include=function(r){var l=this.prototype.options;return a(this.prototype,r),r.options&&(this.prototype.options=l,this.mergeOptions(r.options)),this},Z.mergeOptions=function(r){return a(this.prototype.options,r),this},Z.addInitHook=function(r){var l=Array.prototype.slice.call(arguments,1),m=typeof r=="function"?r:function(){this[r].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function W(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=N(r)?r:[r];for(var l=0;l<r.length;l++)r[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(r,l,m){if(typeof r=="object")for(var g in r)this._on(g,r[g],l);else{r=y(r);for(var v=0,E=r.length;v<E;v++)this._on(r[v],l,m)}return this},off:function(r,l,m){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var g in r)this._off(g,r[g],l);else{r=y(r);for(var v=arguments.length===1,E=0,z=r.length;E<z;E++)v?this._off(r[E]):this._off(r[E],l,m)}return this},_on:function(r,l,m,g){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(r,l,m)===!1){m===this&&(m=void 0);var v={fn:l,ctx:m};g&&(v.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(v)}},_off:function(r,l,m){var g,v,E;if(this._events&&(g=this._events[r],!!g)){if(arguments.length===1){if(this._firingCount)for(v=0,E=g.length;v<E;v++)g[v].fn=p;delete this._events[r];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var z=this._listens(r,l,m);if(z!==!1){var G=g[z];this._firingCount&&(G.fn=p,this._events[r]=g=g.slice()),g.splice(z,1)}}},fire:function(r,l,m){if(!this.listens(r,m))return this;var g=a({},l,{type:r,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[r];if(v){this._firingCount=this._firingCount+1||1;for(var E=0,z=v.length;E<z;E++){var G=v[E],Y=G.fn;G.once&&this.off(r,Y,G.ctx),Y.call(G.ctx||this,g)}this._firingCount--}}return m&&this._propagateEvent(g),this},listens:function(r,l,m,g){typeof r!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(g=!!l,v=void 0,m=void 0);var E=this._events&&this._events[r];if(E&&E.length&&this._listens(r,v,m)!==!1)return!0;if(g){for(var z in this._eventParents)if(this._eventParents[z].listens(r,l,m,g))return!0}return!1},_listens:function(r,l,m){if(!this._events)return!1;var g=this._events[r]||[];if(!l)return!!g.length;m===this&&(m=void 0);for(var v=0,E=g.length;v<E;v++)if(g[v].fn===l&&g[v].ctx===m)return v;return!1},once:function(r,l,m){if(typeof r=="object")for(var g in r)this._on(g,r[g],l,!0);else{r=y(r);for(var v=0,E=r.length;v<E;v++)this._on(r[v],l,m,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[h(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[h(r)],this},_propagateEvent:function(r){for(var l in this._eventParents)this._eventParents[l].fire(r.type,a({layer:r.target,propagatedFrom:r.target},r),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var ce=Z.extend(ee);function se(r,l,m){this.x=m?Math.round(r):r,this.y=m?Math.round(l):l}var ve=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};se.prototype={clone:function(){return new se(this.x,this.y)},add:function(r){return this.clone()._add(_(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(_(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new se(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new se(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ve(this.x),this.y=ve(this.y),this},distanceTo:function(r){r=_(r);var l=r.x-this.x,m=r.y-this.y;return Math.sqrt(l*l+m*m)},equals:function(r){return r=_(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=_(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function _(r,l,m){return r instanceof se?r:N(r)?new se(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new se(r.x,r.y):new se(r,l,m)}function A(r,l){if(r)for(var m=l?[r,l]:r,g=0,v=m.length;g<v;g++)this.extend(m[g])}A.prototype={extend:function(r){var l,m;if(!r)return this;if(r instanceof se||typeof r[0]=="number"||"x"in r)l=m=_(r);else if(r=H(r),l=r.min,m=r.max,!l||!m)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=m.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(r){return _((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return _(this.min.x,this.max.y)},getTopRight:function(){return _(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var l,m;return typeof r[0]=="number"||r instanceof se?r=_(r):r=H(r),r instanceof A?(l=r.min,m=r.max):l=m=r,l.x>=this.min.x&&m.x<=this.max.x&&l.y>=this.min.y&&m.y<=this.max.y},intersects:function(r){r=H(r);var l=this.min,m=this.max,g=r.min,v=r.max,E=v.x>=l.x&&g.x<=m.x,z=v.y>=l.y&&g.y<=m.y;return E&&z},overlaps:function(r){r=H(r);var l=this.min,m=this.max,g=r.min,v=r.max,E=v.x>l.x&&g.x<m.x,z=v.y>l.y&&g.y<m.y;return E&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var l=this.min,m=this.max,g=Math.abs(l.x-m.x)*r,v=Math.abs(l.y-m.y)*r;return H(_(l.x-g,l.y-v),_(m.x+g,m.y+v))},equals:function(r){return r?(r=H(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function H(r,l){return!r||r instanceof A?r:new A(r,l)}function k(r,l){if(r)for(var m=l?[r,l]:r,g=0,v=m.length;g<v;g++)this.extend(m[g])}k.prototype={extend:function(r){var l=this._southWest,m=this._northEast,g,v;if(r instanceof U)g=r,v=r;else if(r instanceof k){if(g=r._southWest,v=r._northEast,!g||!v)return this}else return r?this.extend(V(r)||B(r)):this;return!l&&!m?(this._southWest=new U(g.lat,g.lng),this._northEast=new U(v.lat,v.lng)):(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),m.lat=Math.max(v.lat,m.lat),m.lng=Math.max(v.lng,m.lng)),this},pad:function(r){var l=this._southWest,m=this._northEast,g=Math.abs(l.lat-m.lat)*r,v=Math.abs(l.lng-m.lng)*r;return new k(new U(l.lat-g,l.lng-v),new U(m.lat+g,m.lng+v))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof U||"lat"in r?r=V(r):r=B(r);var l=this._southWest,m=this._northEast,g,v;return r instanceof k?(g=r.getSouthWest(),v=r.getNorthEast()):g=v=r,g.lat>=l.lat&&v.lat<=m.lat&&g.lng>=l.lng&&v.lng<=m.lng},intersects:function(r){r=B(r);var l=this._southWest,m=this._northEast,g=r.getSouthWest(),v=r.getNorthEast(),E=v.lat>=l.lat&&g.lat<=m.lat,z=v.lng>=l.lng&&g.lng<=m.lng;return E&&z},overlaps:function(r){r=B(r);var l=this._southWest,m=this._northEast,g=r.getSouthWest(),v=r.getNorthEast(),E=v.lat>l.lat&&g.lat<m.lat,z=v.lng>l.lng&&g.lng<m.lng;return E&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,l){return r?(r=B(r),this._southWest.equals(r.getSouthWest(),l)&&this._northEast.equals(r.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function B(r,l){return r instanceof k?r:new k(r,l)}function U(r,l,m){if(isNaN(r)||isNaN(l))throw new Error("Invalid LatLng object: ("+r+", "+l+")");this.lat=+r,this.lng=+l,m!==void 0&&(this.alt=+m)}U.prototype={equals:function(r,l){if(!r)return!1;r=V(r);var m=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return m<=(l===void 0?1e-9:l)},toString:function(r){return"LatLng("+x(this.lat,r)+", "+x(this.lng,r)+")"},distanceTo:function(r){return J.distance(this,V(r))},wrap:function(){return J.wrapLatLng(this)},toBounds:function(r){var l=180*r/40075017,m=l/Math.cos(Math.PI/180*this.lat);return B([this.lat-l,this.lng-m],[this.lat+l,this.lng+m])},clone:function(){return new U(this.lat,this.lng,this.alt)}};function V(r,l,m){return r instanceof U?r:N(r)&&typeof r[0]!="object"?r.length===3?new U(r[0],r[1],r[2]):r.length===2?new U(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new U(r.lat,"lng"in r?r.lng:r.lon,r.alt):l===void 0?null:new U(r,l,m)}var Q={latLngToPoint:function(r,l){var m=this.projection.project(r),g=this.scale(l);return this.transformation._transform(m,g)},pointToLatLng:function(r,l){var m=this.scale(l),g=this.transformation.untransform(r,m);return this.projection.unproject(g)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var l=this.projection.bounds,m=this.scale(r),g=this.transformation.transform(l.min,m),v=this.transformation.transform(l.max,m);return new A(g,v)},infinite:!1,wrapLatLng:function(r){var l=this.wrapLng?f(r.lng,this.wrapLng,!0):r.lng,m=this.wrapLat?f(r.lat,this.wrapLat,!0):r.lat,g=r.alt;return new U(m,l,g)},wrapLatLngBounds:function(r){var l=r.getCenter(),m=this.wrapLatLng(l),g=l.lat-m.lat,v=l.lng-m.lng;if(g===0&&v===0)return r;var E=r.getSouthWest(),z=r.getNorthEast(),G=new U(E.lat-g,E.lng-v),Y=new U(z.lat-g,z.lng-v);return new k(G,Y)}},J=a({},Q,{wrapLng:[-180,180],R:6371e3,distance:function(r,l){var m=Math.PI/180,g=r.lat*m,v=l.lat*m,E=Math.sin((l.lat-r.lat)*m/2),z=Math.sin((l.lng-r.lng)*m/2),G=E*E+Math.cos(g)*Math.cos(v)*z*z,Y=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*Y}}),de=6378137,me={R:de,MAX_LATITUDE:85.0511287798,project:function(r){var l=Math.PI/180,m=this.MAX_LATITUDE,g=Math.max(Math.min(m,r.lat),-m),v=Math.sin(g*l);return new se(this.R*r.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(r){var l=180/Math.PI;return new U((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*l,r.x*l/this.R)},bounds:(function(){var r=de*Math.PI;return new A([-r,-r],[r,r])})()};function ye(r,l,m,g){if(N(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=l,this._c=m,this._d=g}ye.prototype={transform:function(r,l){return this._transform(r.clone(),l)},_transform:function(r,l){return l=l||1,r.x=l*(this._a*r.x+this._b),r.y=l*(this._c*r.y+this._d),r},untransform:function(r,l){return l=l||1,new se((r.x/l-this._b)/this._a,(r.y/l-this._d)/this._c)}};function Ne(r,l,m,g){return new ye(r,l,m,g)}var He=a({},J,{code:"EPSG:3857",projection:me,transformation:(function(){var r=.5/(Math.PI*me.R);return Ne(r,.5,-r,.5)})()}),ke=a({},He,{code:"EPSG:900913"});function We(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ot(r,l){var m="",g,v,E,z,G,Y;for(g=0,E=r.length;g<E;g++){for(G=r[g],v=0,z=G.length;v<z;v++)Y=G[v],m+=(v?"L":"M")+Y.x+" "+Y.y;m+=l?pe.svg?"z":"x":""}return m||"M0 0"}var Xe=document.documentElement.style,nt="ActiveXObject"in window,st=nt&&!document.addEventListener,ae="msLaunchUri"in navigator&&!("documentMode"in document),be=Qt("webkit"),we=Qt("android"),Pe=Qt("android 2")||Qt("android 3"),Ue=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Pt=we&&Qt("Google")&&Ue<537&&!("AudioNode"in window),X=!!window.opera,oe=!ae&&Qt("chrome"),ge=Qt("gecko")&&!be&&!X&&!nt,Se=!oe&&Qt("safari"),Re=Qt("phantom"),ut="OTransition"in Xe,bt=navigator.platform.indexOf("Win")===0,kt=nt&&"transition"in Xe,mn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pe,fn="MozPerspective"in Xe,vt=!window.L_DISABLE_3D&&(kt||mn||fn)&&!ut&&!Re,Dt=typeof orientation<"u"||Qt("mobile"),It=Dt&&be,_n=Dt&&mn,Jr=!window.PointerEvent&&window.MSPointerEvent,es=!!(window.PointerEvent||Jr),ar="ontouchstart"in window||!!window.TouchEvent,ts=!window.L_NO_TOUCH&&(ar||es),Ae=Dt&&X,pt=Dt&&ge,yt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Rt=(function(){var r=!1;try{var l=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",p,l),window.removeEventListener("testPassiveEventSupport",p,l)}catch{}return r})(),Ei=(function(){return!!document.createElement("canvas").getContext})(),dt=!!(document.createElementNS&&We("svg").createSVGRect),zt=!!dt&&(function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Si=!dt&&(function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var l=r.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),Yt=navigator.platform.indexOf("Mac")===0,Xt=navigator.platform.indexOf("Linux")===0;function Qt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var pe={ie:nt,ielt9:st,edge:ae,webkit:be,android:we,android23:Pe,androidStock:Pt,opera:X,chrome:oe,gecko:ge,safari:Se,phantom:Re,opera12:ut,win:bt,ie3d:kt,webkit3d:mn,gecko3d:fn,any3d:vt,mobile:Dt,mobileWebkit:It,mobileWebkit3d:_n,msPointer:Jr,pointer:es,touch:ts,touchNative:ar,mobileOpera:Ae,mobileGecko:pt,retina:yt,passiveEvents:Rt,canvas:Ei,svg:dt,vml:Si,inlineSvg:zt,mac:Yt,linux:Xt},Ta=pe.msPointer?"MSPointerDown":"pointerdown",mc=pe.msPointer?"MSPointerMove":"pointermove",fc=pe.msPointer?"MSPointerUp":"pointerup",xc=pe.msPointer?"MSPointerCancel":"pointercancel",Pa={touchstart:Ta,touchmove:mc,touchend:fc,touchcancel:xc},gc={touchstart:Nf,touchmove:ns,touchend:ns,touchcancel:ns},Ai={},bc=!1;function vf(r,l,m){return l==="touchstart"&&jf(),gc[l]?(m=gc[l].bind(this,m),r.addEventListener(Pa[l],m,!1),m):(console.warn("wrong event specified:",l),p)}function yf(r,l,m){if(!Pa[l]){console.warn("wrong event specified:",l);return}r.removeEventListener(Pa[l],m,!1)}function wf(r){Ai[r.pointerId]=r}function _f(r){Ai[r.pointerId]&&(Ai[r.pointerId]=r)}function vc(r){delete Ai[r.pointerId]}function jf(){bc||(document.addEventListener(Ta,wf,!0),document.addEventListener(mc,_f,!0),document.addEventListener(fc,vc,!0),document.addEventListener(xc,vc,!0),bc=!0)}function ns(r,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var m in Ai)l.touches.push(Ai[m]);l.changedTouches=[l],r(l)}}function Nf(r,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&jt(l),ns(r,l)}function kf(r){var l={},m,g;for(g in r)m=r[g],l[g]=m&&m.bind?m.bind(r):m;return r=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Cf=200;function Ef(r,l){r.addEventListener("dblclick",l);var m=0,g;function v(E){if(E.detail!==1){g=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var z=Nc(E);if(!(z.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!z.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var G=Date.now();G-m<=Cf?(g++,g===2&&l(kf(E))):g=1,m=G}}}return r.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Sf(r,l){r.removeEventListener("dblclick",l.dblclick),r.removeEventListener("click",l.simDblclick)}var Ia=ss(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),or=ss(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yc=or==="webkitTransition"||or==="OTransition"?or+"End":"transitionend";function wc(r){return typeof r=="string"?document.getElementById(r):r}function lr(r,l){var m=r.style[l]||r.currentStyle&&r.currentStyle[l];if((!m||m==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(r,null);m=g?g[l]:null}return m==="auto"?null:m}function qe(r,l,m){var g=document.createElement(r);return g.className=l||"",m&&m.appendChild(g),g}function lt(r){var l=r.parentNode;l&&l.removeChild(r)}function is(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Ti(r){var l=r.parentNode;l&&l.lastChild!==r&&l.appendChild(r)}function Pi(r){var l=r.parentNode;l&&l.firstChild!==r&&l.insertBefore(r,l.firstChild)}function Ra(r,l){if(r.classList!==void 0)return r.classList.contains(l);var m=rs(r);return m.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(m)}function Me(r,l){if(r.classList!==void 0)for(var m=y(l),g=0,v=m.length;g<v;g++)r.classList.add(m[g]);else if(!Ra(r,l)){var E=rs(r);Ma(r,(E?E+" ":"")+l)}}function ht(r,l){r.classList!==void 0?r.classList.remove(l):Ma(r,b((" "+rs(r)+" ").replace(" "+l+" "," ")))}function Ma(r,l){r.className.baseVal===void 0?r.className=l:r.className.baseVal=l}function rs(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function sn(r,l){"opacity"in r.style?r.style.opacity=l:"filter"in r.style&&Af(r,l)}function Af(r,l){var m=!1,g="DXImageTransform.Microsoft.Alpha";try{m=r.filters.item(g)}catch{if(l===1)return}l=Math.round(l*100),m?(m.Enabled=l!==100,m.Opacity=l):r.style.filter+=" progid:"+g+"(opacity="+l+")"}function ss(r){for(var l=document.documentElement.style,m=0;m<r.length;m++)if(r[m]in l)return r[m];return!1}function ni(r,l,m){var g=l||new se(0,0);r.style[Ia]=(pe.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(m?" scale("+m+")":"")}function mt(r,l){r._leaflet_pos=l,pe.any3d?ni(r,l):(r.style.left=l.x+"px",r.style.top=l.y+"px")}function ii(r){return r._leaflet_pos||new se(0,0)}var cr,ur,La;if("onselectstart"in document)cr=function(){Te(window,"selectstart",jt)},ur=function(){Qe(window,"selectstart",jt)};else{var dr=ss(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cr=function(){if(dr){var r=document.documentElement.style;La=r[dr],r[dr]="none"}},ur=function(){dr&&(document.documentElement.style[dr]=La,La=void 0)}}function Oa(){Te(window,"dragstart",jt)}function Da(){Qe(window,"dragstart",jt)}var as,za;function Fa(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(os(),as=r,za=r.style.outlineStyle,r.style.outlineStyle="none",Te(window,"keydown",os))}function os(){as&&(as.style.outlineStyle=za,as=void 0,za=void 0,Qe(window,"keydown",os))}function _c(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ba(r){var l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}var Tf={__proto__:null,TRANSFORM:Ia,TRANSITION:or,TRANSITION_END:yc,get:wc,getStyle:lr,create:qe,remove:lt,empty:is,toFront:Ti,toBack:Pi,hasClass:Ra,addClass:Me,removeClass:ht,setClass:Ma,getClass:rs,setOpacity:sn,testProp:ss,setTransform:ni,setPosition:mt,getPosition:ii,get disableTextSelection(){return cr},get enableTextSelection(){return ur},disableImageDrag:Oa,enableImageDrag:Da,preventOutline:Fa,restoreOutline:os,getSizedParentNode:_c,getScale:Ba};function Te(r,l,m,g){if(l&&typeof l=="object")for(var v in l)Va(r,v,l[v],m);else{l=y(l);for(var E=0,z=l.length;E<z;E++)Va(r,l[E],m,g)}return this}var jn="_leaflet_events";function Qe(r,l,m,g){if(arguments.length===1)jc(r),delete r[jn];else if(l&&typeof l=="object")for(var v in l)Ha(r,v,l[v],m);else if(l=y(l),arguments.length===2)jc(r,function(G){return R(l,G)!==-1});else for(var E=0,z=l.length;E<z;E++)Ha(r,l[E],m,g);return this}function jc(r,l){for(var m in r[jn]){var g=m.split(/\d/)[0];(!l||l(g))&&Ha(r,g,null,null,m)}}var Ua={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Va(r,l,m,g){var v=l+h(m)+(g?"_"+h(g):"");if(r[jn]&&r[jn][v])return this;var E=function(G){return m.call(g||r,G||window.event)},z=E;!pe.touchNative&&pe.pointer&&l.indexOf("touch")===0?E=vf(r,l,E):pe.touch&&l==="dblclick"?E=Ef(r,E):"addEventListener"in r?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?r.addEventListener(Ua[l]||l,E,pe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(G){G=G||window.event,$a(r,G)&&z(G)},r.addEventListener(Ua[l],E,!1)):r.addEventListener(l,z,!1):r.attachEvent("on"+l,E),r[jn]=r[jn]||{},r[jn][v]=E}function Ha(r,l,m,g,v){v=v||l+h(m)+(g?"_"+h(g):"");var E=r[jn]&&r[jn][v];if(!E)return this;!pe.touchNative&&pe.pointer&&l.indexOf("touch")===0?yf(r,l,E):pe.touch&&l==="dblclick"?Sf(r,E):"removeEventListener"in r?r.removeEventListener(Ua[l]||l,E,!1):r.detachEvent("on"+l,E),r[jn][v]=null}function ri(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function qa(r){return Va(r,"wheel",ri),this}function hr(r){return Te(r,"mousedown touchstart dblclick contextmenu",ri),r._leaflet_disable_click=!0,this}function jt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function si(r){return jt(r),ri(r),this}function Nc(r){if(r.composedPath)return r.composedPath();for(var l=[],m=r.target;m;)l.push(m),m=m.parentNode;return l}function kc(r,l){if(!l)return new se(r.clientX,r.clientY);var m=Ba(l),g=m.boundingClientRect;return new se((r.clientX-g.left)/m.x-l.clientLeft,(r.clientY-g.top)/m.y-l.clientTop)}var Pf=pe.linux&&pe.chrome?window.devicePixelRatio:pe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Cc(r){return pe.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Pf:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function $a(r,l){var m=l.relatedTarget;if(!m)return!0;try{for(;m&&m!==r;)m=m.parentNode}catch{return!1}return m!==r}var If={__proto__:null,on:Te,off:Qe,stopPropagation:ri,disableScrollPropagation:qa,disableClickPropagation:hr,preventDefault:jt,stop:si,getPropagationPath:Nc,getMousePosition:kc,getWheelDelta:Cc,isExternalTarget:$a,addListener:Te,removeListener:Qe},Ec=ce.extend({run:function(r,l,m,g){this.stop(),this._el=r,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=ii(r),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(r){var l=+new Date-this._startTime,m=this._duration*1e3;l<m?this._runFrame(this._easeOut(l/m),r):(this._runFrame(1),this._complete())},_runFrame:function(r,l){var m=this._startPos.add(this._offset.multiplyBy(r));l&&m._round(),mt(this._el,m),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ve=ce.extend({options:{crs:He,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,l){l=w(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(V(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=or&&pe.any3d&&!pe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Te(this._proxy,yc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,l,m){if(l=l===void 0?this._zoom:this._limitZoom(l),r=this._limitCenter(V(r),l,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=a({animate:m.animate},m.zoom),m.pan=a({animate:m.animate,duration:m.duration},m.pan));var g=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,l,m.zoom):this._tryAnimatedPan(r,m.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(r,l,m.pan&&m.pan.noMoveStart),this},setZoom:function(r,l){return this._loaded?this.setView(this.getCenter(),r,{zoom:l}):(this._zoom=r,this)},zoomIn:function(r,l){return r=r||(pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,l)},zoomOut:function(r,l){return r=r||(pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,l)},setZoomAround:function(r,l,m){var g=this.getZoomScale(l),v=this.getSize().divideBy(2),E=r instanceof se?r:this.latLngToContainerPoint(r),z=E.subtract(v).multiplyBy(1-1/g),G=this.containerPointToLatLng(v.add(z));return this.setView(G,l,{zoom:m})},_getBoundsCenterZoom:function(r,l){l=l||{},r=r.getBounds?r.getBounds():B(r);var m=_(l.paddingTopLeft||l.padding||[0,0]),g=_(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(r,!1,m.add(g));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:r.getCenter(),zoom:v};var E=g.subtract(m).divideBy(2),z=this.project(r.getSouthWest(),v),G=this.project(r.getNorthEast(),v),Y=this.unproject(z.add(G).divideBy(2).add(E),v);return{center:Y,zoom:v}},fitBounds:function(r,l){if(r=B(r),!r.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(r,l);return this.setView(m.center,m.zoom,l)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,l){return this.setView(r,this._zoom,{pan:l})},panBy:function(r,l){if(r=_(r).round(),l=l||{},!r.x&&!r.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ec,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Me(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,m,l.duration||.25,l.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,l,m){if(m=m||{},m.animate===!1||!pe.any3d)return this.setView(r,l,m);this._stop();var g=this.project(this.getCenter()),v=this.project(r),E=this.getSize(),z=this._zoom;r=V(r),l=l===void 0?z:l;var G=Math.max(E.x,E.y),Y=G*this.getZoomScale(z,l),re=v.distanceTo(g)||1,ue=1.42,_e=ue*ue;function De(ft){var vs=ft?-1:1,yx=ft?Y:G,wx=Y*Y-G*G+vs*_e*_e*re*re,_x=2*yx*_e*re,no=wx/_x,ou=Math.sqrt(no*no+1)-no,jx=ou<1e-9?-18:Math.log(ou);return jx}function Mt(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function wt(ft){return(Math.exp(ft)+Math.exp(-ft))/2}function on(ft){return Mt(ft)/wt(ft)}var Ft=De(0);function Di(ft){return G*(wt(Ft)/wt(Ft+ue*ft))}function xx(ft){return G*(wt(Ft)*on(Ft+ue*ft)-Mt(Ft))/_e}function gx(ft){return 1-Math.pow(1-ft,1.5)}var bx=Date.now(),su=(De(1)-Ft)/ue,vx=m.duration?1e3*m.duration:1e3*su*.8;function au(){var ft=(Date.now()-bx)/vx,vs=gx(ft)*su;ft<=1?(this._flyToFrame=D(au,this),this._move(this.unproject(g.add(v.subtract(g).multiplyBy(xx(vs)/re)),z),this.getScaleZoom(G/Di(vs),z),{flyTo:!0})):this._move(r,l)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),au.call(this),this},flyToBounds:function(r,l){var m=this._getBoundsCenterZoom(r,l);return this.flyTo(m.center,m.zoom,l)},setMaxBounds:function(r){return r=B(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var l=this.options.minZoom;return this.options.minZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var l=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,l){this._enforcingBounds=!0;var m=this.getCenter(),g=this._limitCenter(m,this._zoom,B(r));return m.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(r,l){l=l||{};var m=_(l.paddingTopLeft||l.padding||[0,0]),g=_(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),E=this.project(r),z=this.getPixelBounds(),G=H([z.min.add(m),z.max.subtract(g)]),Y=G.getSize();if(!G.contains(E)){this._enforcingBounds=!0;var re=E.subtract(G.getCenter()),ue=G.extend(E).getSize().subtract(Y);v.x+=re.x<0?-ue.x:ue.x,v.y+=re.y<0?-ue.y:ue.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=a({animate:!1,pan:!0},r===!0?{animate:!0}:r);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),g=l.divideBy(2).round(),v=m.divideBy(2).round(),E=g.subtract(v);return!E.x&&!E.y?this:(r.animate&&r.pan?this.panBy(E):(r.pan&&this._rawPanBy(E),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=a({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),m=c(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,m,r):navigator.geolocation.getCurrentPosition(l,m,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var l=r.code,m=r.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var l=r.coords.latitude,m=r.coords.longitude,g=new U(l,m),v=g.toBounds(r.coords.accuracy*2),E=this._locateOptions;if(E.setView){var z=this.getBoundsZoom(v);this.setView(g,E.maxZoom?Math.min(z,E.maxZoom):z)}var G={latlng:g,bounds:v,timestamp:r.timestamp};for(var Y in r.coords)typeof r.coords[Y]=="number"&&(G[Y]=r.coords[Y]);this.fire("locationfound",G)}},addHandler:function(r,l){if(!l)return this;var m=this[r]=new l(this);return this._handlers.push(m),this.options[r]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)lt(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,l){var m="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),g=qe("div",m,l||this._mapPane);return r&&(this._panes[r]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),l=this.unproject(r.getBottomLeft()),m=this.unproject(r.getTopRight());return new k(l,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,l,m){r=B(r),m=_(m||[0,0]);var g=this.getZoom()||0,v=this.getMinZoom(),E=this.getMaxZoom(),z=r.getNorthWest(),G=r.getSouthEast(),Y=this.getSize().subtract(m),re=H(this.project(G,g),this.project(z,g)).getSize(),ue=pe.any3d?this.options.zoomSnap:1,_e=Y.x/re.x,De=Y.y/re.y,Mt=l?Math.max(_e,De):Math.min(_e,De);return g=this.getScaleZoom(Mt,g),ue&&(g=Math.round(g/(ue/100))*(ue/100),g=l?Math.ceil(g/ue)*ue:Math.floor(g/ue)*ue),Math.max(v,Math.min(E,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new se(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,l){var m=this._getTopLeftPoint(r,l);return new A(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,l){var m=this.options.crs;return l=l===void 0?this._zoom:l,m.scale(r)/m.scale(l)},getScaleZoom:function(r,l){var m=this.options.crs;l=l===void 0?this._zoom:l;var g=m.zoom(r*m.scale(l));return isNaN(g)?1/0:g},project:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(V(r),l)},unproject:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(_(r),l)},layerPointToLatLng:function(r){var l=_(r).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(r){var l=this.project(V(r))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(V(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(B(r))},distance:function(r,l){return this.options.crs.distance(V(r),V(l))},containerPointToLayerPoint:function(r){return _(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return _(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var l=this.containerPointToLayerPoint(_(r));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(r)))},mouseEventToContainerPoint:function(r){return kc(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var l=this._container=wc(r);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Te(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&pe.any3d,Me(r,"leaflet-container"+(pe.touch?" leaflet-touch":"")+(pe.retina?" leaflet-retina":"")+(pe.ielt9?" leaflet-oldie":"")+(pe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=lr(r,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),mt(this._mapPane,new se(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Me(r.markerPane,"leaflet-zoom-hide"),Me(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,l,m){mt(this._mapPane,new se(0,0));var g=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,m)._move(r,l)._moveEnd(v),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(r,l){return r&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(r,l,m,g){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),g?m&&m.pinch&&this.fire("zoom",m):((v||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){mt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[h(this._container)]=this;var l=r?Qe:Te;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),pe.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,l){for(var m=[],g,v=l==="mouseout"||l==="mouseover",E=r.target||r.srcElement,z=!1;E;){if(g=this._targets[h(E)],g&&(l==="click"||l==="preclick")&&this._draggableMoved(g)){z=!0;break}if(g&&g.listens(l,!0)&&(v&&!$a(E,r)||(m.push(g),v))||E===this._container)break;E=E.parentNode}return!m.length&&!z&&!v&&this.listens(l,!0)&&(m=[this]),m},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var l=r.target||r.srcElement;if(!(!this._loaded||l._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(l))){var m=r.type;m==="mousedown"&&Fa(l),this._fireDOMEvent(r,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,l,m){if(r.type==="click"){var g=a({},r);g.type="preclick",this._fireDOMEvent(g,g.type,m)}var v=this._findEventTargets(r,l);if(m){for(var E=[],z=0;z<m.length;z++)m[z].listens(l,!0)&&E.push(m[z]);v=E.concat(v)}if(v.length){l==="contextmenu"&&jt(r);var G=v[0],Y={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var re=G.getLatLng&&(!G._radius||G._radius<=10);Y.containerPoint=re?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(r),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=re?G.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(z=0;z<v.length;z++)if(v[z].fire(l,Y,!0),Y.originalEvent._stopped||v[z].options.bubblingMouseEvents===!1&&R(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,l=this._handlers.length;r<l;r++)this._handlers[r].disable()},whenReady:function(r,l){return this._loaded?r.call(l||this,{target:this}):this.on("load",r,l),this},_getMapPanePos:function(){return ii(this._mapPane)||new se(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,l){var m=r&&l!==void 0?this._getNewPixelOrigin(r,l):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,l){var m=this.getSize()._divideBy(2);return this.project(r,l)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,l,m){var g=this._getNewPixelOrigin(m,l);return this.project(r,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(r,l,m){var g=this._getNewPixelOrigin(m,l);return H([this.project(r.getSouthWest(),l)._subtract(g),this.project(r.getNorthWest(),l)._subtract(g),this.project(r.getSouthEast(),l)._subtract(g),this.project(r.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,l,m){if(!m)return r;var g=this.project(r,l),v=this.getSize().divideBy(2),E=new A(g.subtract(v),g.add(v)),z=this._getBoundsOffset(E,m,l);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?r:this.unproject(g.add(z),l)},_limitOffset:function(r,l){if(!l)return r;var m=this.getPixelBounds(),g=new A(m.min.add(r),m.max.add(r));return r.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(r,l,m){var g=H(this.project(l.getNorthEast(),m),this.project(l.getSouthWest(),m)),v=g.min.subtract(r.min),E=g.max.subtract(r.max),z=this._rebound(v.x,-E.x),G=this._rebound(v.y,-E.y);return new se(z,G)},_rebound:function(r,l){return r+l>0?Math.round(r-l)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(l))},_limitZoom:function(r){var l=this.getMinZoom(),m=this.getMaxZoom(),g=pe.any3d?this.options.zoomSnap:1;return g&&(r=Math.round(r/g)*g),Math.max(l,Math.min(m,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,l){var m=this._getCenterOffset(r)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,l),!0)},_createAnimProxy:function(){var r=this._proxy=qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(l){var m=Ia,g=this._proxy.style[m];ni(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),l=this.getZoom();ni(this._proxy,this.project(r,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,l,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),v=this._getCenterOffset(r)._divideBy(1-1/g);return m.animate!==!0&&!this.getSize().contains(v)?!1:(D(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(r,l,!0)},this),!0)},_animateZoom:function(r,l,m,g){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=l,Me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Rf(r,l){return new Ve(r,l)}var xn=Z.extend({options:{position:"topright"},initialize:function(r){w(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var l=this._map;return l&&l.removeControl(this),this.options.position=r,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var l=this._container=this.onAdd(r),m=this.getPosition(),g=r._controlCorners[m];return Me(l,"leaflet-control"),m.indexOf("bottom")!==-1?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),pr=function(r){return new xn(r)};Ve.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},l="leaflet-",m=this._controlContainer=qe("div",l+"control-container",this._container);function g(v,E){var z=l+v+" "+l+E;r[v+E]=qe("div",z,m)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)lt(this._controlCorners[r]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Sc=xn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,l,m,g){return m<g?-1:g<m?1:0}},initialize:function(r,l,m){w(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in r)this._addLayer(r[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return xn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,l){return this._addLayer(r,l),this._map?this._update():this},addOverlay:function(r,l){return this._addLayer(r,l,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(r));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(Me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",l=this._container=qe("div",r),m=this.options.collapsed;l.setAttribute("aria-haspopup",!0),hr(l),qa(l);var g=this._section=qe("section",r+"-list");m&&(this._map.on("click",this.collapse,this),Te(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=qe("a",r+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Te(v,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){jt(E),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=qe("div",r+"-base",g),this._separator=qe("div",r+"-separator",g),this._overlaysList=qe("div",r+"-overlays",g),l.appendChild(g)},_getLayer:function(r){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===r)return this._layers[l]},_addLayer:function(r,l,m){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:l,overlay:m}),this.options.sortLayers&&this._layers.sort(c(function(g,v){return this.options.sortFunction(g.layer,v.layer,g.name,v.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;is(this._baseLayersList),is(this._overlaysList),this._layerControlInputs=[];var r,l,m,g,v=0;for(m=0;m<this._layers.length;m++)g=this._layers[m],this._addItem(g),l=l||g.overlay,r=r||!g.overlay,v+=g.overlay?0:1;return this.options.hideSingleBase&&(r=r&&v>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=l&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var l=this._getLayer(h(r.target)),m=l.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;m&&this._map.fire(m,l)},_createRadioElement:function(r,l){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=m,g.firstChild},_addItem:function(r){var l=document.createElement("label"),m=this._map.hasLayer(r.layer),g;r.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=m):g=this._createRadioElement("leaflet-base-layers_"+h(this),m),this._layerControlInputs.push(g),g.layerId=h(r.layer),Te(g,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+r.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(g),E.appendChild(v);var z=r.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,l,m,g=[],v=[];this._handlingClick=!0;for(var E=r.length-1;E>=0;E--)l=r[E],m=this._getLayer(l.layerId).layer,l.checked?g.push(m):l.checked||v.push(m);for(E=0;E<v.length;E++)this._map.hasLayer(v[E])&&this._map.removeLayer(v[E]);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])||this._map.addLayer(g[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,l,m,g=this._map.getZoom(),v=r.length-1;v>=0;v--)l=r[v],m=this._getLayer(l.layerId).layer,l.disabled=m.options.minZoom!==void 0&&g<m.options.minZoom||m.options.maxZoom!==void 0&&g>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Te(r,"click",jt),this.expand();var l=this;setTimeout(function(){Qe(r,"click",jt),l._preventClick=!1})}}),Mf=function(r,l,m){return new Sc(r,l,m)},Ga=xn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var l="leaflet-control-zoom",m=qe("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",m,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,l,m,g,v){var E=qe("a",m,g);return E.innerHTML=r,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),hr(E),Te(E,"click",si),Te(E,"click",v,this),Te(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var r=this._map,l="leaflet-disabled";ht(this._zoomInButton,l),ht(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(Me(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(Me(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ve.mergeOptions({zoomControl:!0}),Ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ga,this.addControl(this.zoomControl))});var Lf=function(r){return new Ga(r)},Ac=xn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var l="leaflet-control-scale",m=qe("div",l),g=this.options;return this._addScales(g,l+"-line",m),r.on(g.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),m},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,l,m){r.metric&&(this._mScale=qe("div",l,m)),r.imperial&&(this._iScale=qe("div",l,m))},_update:function(){var r=this._map,l=r.getSize().y/2,m=r.distance(r.containerPointToLatLng([0,l]),r.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(m)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var l=this._getRoundNum(r),m=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,m,l/r)},_updateImperial:function(r){var l=r*3.2808399,m,g,v;l>5280?(m=l/5280,g=this._getRoundNum(m),this._updateScale(this._iScale,g+" mi",g/m)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(r,l,m){r.style.width=Math.round(this.options.maxWidth*m)+"px",r.innerHTML=l},_getRoundNum:function(r){var l=Math.pow(10,(Math.floor(r)+"").length-1),m=r/l;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,l*m}}),Of=function(r){return new Ac(r)},Df='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Wa=xn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(pe.inlineSvg?Df+" ":"")+"Leaflet</a>"},initialize:function(r){w(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=qe("div","leaflet-control-attribution"),hr(this._container);for(var l in r._layers)r._layers[l].getAttribution&&this.addAttribution(r._layers[l].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var l in this._attributions)this._attributions[l]&&r.push(l);var m=[];this.options.prefix&&m.push(this.options.prefix),r.length&&m.push(r.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Ve.mergeOptions({attributionControl:!0}),Ve.addInitHook(function(){this.options.attributionControl&&new Wa().addTo(this)});var zf=function(r){return new Wa(r)};xn.Layers=Sc,xn.Zoom=Ga,xn.Scale=Ac,xn.Attribution=Wa,pr.layers=Mf,pr.zoom=Lf,pr.scale=Of,pr.attribution=zf;var Nn=Z.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Nn.addTo=function(r,l){return r.addHandler(l,this),this};var Ff={Events:ee},Tc=pe.touch?"touchstart mousedown":"mousedown",qn=ce.extend({options:{clickTolerance:3},initialize:function(r,l,m,g){w(this,g),this._element=r,this._dragStartTarget=l||r,this._preventOutline=m},enable:function(){this._enabled||(Te(this._dragStartTarget,Tc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qn._dragging===this&&this.finishDrag(!0),Qe(this._dragStartTarget,Tc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Ra(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){qn._dragging===this&&this.finishDrag();return}if(!(qn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(qn._dragging=this,this._preventOutline&&Fa(this._element),Oa(),cr(),!this._moving)){this.fire("down");var l=r.touches?r.touches[0]:r,m=_c(this._element);this._startPoint=new se(l.clientX,l.clientY),this._startPos=ii(this._element),this._parentScale=Ba(m);var g=r.type==="mousedown";Te(document,g?"mousemove":"touchmove",this._onMove,this),Te(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var l=r.touches&&r.touches.length===1?r.touches[0]:r,m=new se(l.clientX,l.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,jt(r),this._moved||(this.fire("dragstart"),this._moved=!0,Me(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),mt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qe(document,"mousemove touchmove",this._onMove,this),Qe(document,"mouseup touchend touchcancel",this._onUp,this),Da(),ur();var l=this._moved&&this._moving;this._moving=!1,qn._dragging=!1,l&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Pc(r,l,m){var g,v=[1,4,2,8],E,z,G,Y,re,ue,_e,De;for(E=0,ue=r.length;E<ue;E++)r[E]._code=ai(r[E],l);for(G=0;G<4;G++){for(_e=v[G],g=[],E=0,ue=r.length,z=ue-1;E<ue;z=E++)Y=r[E],re=r[z],Y._code&_e?re._code&_e||(De=ls(re,Y,_e,l,m),De._code=ai(De,l),g.push(De)):(re._code&_e&&(De=ls(re,Y,_e,l,m),De._code=ai(De,l),g.push(De)),g.push(Y));r=g}return r}function Ic(r,l){var m,g,v,E,z,G,Y,re,ue;if(!r||r.length===0)throw new Error("latlngs not passed");an(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var _e=V([0,0]),De=B(r),Mt=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());Mt<1700&&(_e=Za(r));var wt=r.length,on=[];for(m=0;m<wt;m++){var Ft=V(r[m]);on.push(l.project(V([Ft.lat-_e.lat,Ft.lng-_e.lng])))}for(G=Y=re=0,m=0,g=wt-1;m<wt;g=m++)v=on[m],E=on[g],z=v.y*E.x-E.y*v.x,Y+=(v.x+E.x)*z,re+=(v.y+E.y)*z,G+=z*3;G===0?ue=on[0]:ue=[Y/G,re/G];var Di=l.unproject(_(ue));return V([Di.lat+_e.lat,Di.lng+_e.lng])}function Za(r){for(var l=0,m=0,g=0,v=0;v<r.length;v++){var E=V(r[v]);l+=E.lat,m+=E.lng,g++}return V([l/g,m/g])}var Bf={__proto__:null,clipPolygon:Pc,polygonCenter:Ic,centroid:Za};function Rc(r,l){if(!l||!r.length)return r.slice();var m=l*l;return r=Hf(r,m),r=Vf(r,m),r}function Mc(r,l,m){return Math.sqrt(mr(r,l,m,!0))}function Uf(r,l,m){return mr(r,l,m)}function Vf(r,l){var m=r.length,g=typeof Uint8Array<"u"?Uint8Array:Array,v=new g(m);v[0]=v[m-1]=1,Ka(r,v,l,0,m-1);var E,z=[];for(E=0;E<m;E++)v[E]&&z.push(r[E]);return z}function Ka(r,l,m,g,v){var E=0,z,G,Y;for(G=g+1;G<=v-1;G++)Y=mr(r[G],r[g],r[v],!0),Y>E&&(z=G,E=Y);E>m&&(l[z]=1,Ka(r,l,m,g,z),Ka(r,l,m,z,v))}function Hf(r,l){for(var m=[r[0]],g=1,v=0,E=r.length;g<E;g++)qf(r[g],r[v])>l&&(m.push(r[g]),v=g);return v<E-1&&m.push(r[E-1]),m}var Lc;function Oc(r,l,m,g,v){var E=g?Lc:ai(r,m),z=ai(l,m),G,Y,re;for(Lc=z;;){if(!(E|z))return[r,l];if(E&z)return!1;G=E||z,Y=ls(r,l,G,m,v),re=ai(Y,m),G===E?(r=Y,E=re):(l=Y,z=re)}}function ls(r,l,m,g,v){var E=l.x-r.x,z=l.y-r.y,G=g.min,Y=g.max,re,ue;return m&8?(re=r.x+E*(Y.y-r.y)/z,ue=Y.y):m&4?(re=r.x+E*(G.y-r.y)/z,ue=G.y):m&2?(re=Y.x,ue=r.y+z*(Y.x-r.x)/E):m&1&&(re=G.x,ue=r.y+z*(G.x-r.x)/E),new se(re,ue,v)}function ai(r,l){var m=0;return r.x<l.min.x?m|=1:r.x>l.max.x&&(m|=2),r.y<l.min.y?m|=4:r.y>l.max.y&&(m|=8),m}function qf(r,l){var m=l.x-r.x,g=l.y-r.y;return m*m+g*g}function mr(r,l,m,g){var v=l.x,E=l.y,z=m.x-v,G=m.y-E,Y=z*z+G*G,re;return Y>0&&(re=((r.x-v)*z+(r.y-E)*G)/Y,re>1?(v=m.x,E=m.y):re>0&&(v+=z*re,E+=G*re)),z=r.x-v,G=r.y-E,g?z*z+G*G:new se(v,E)}function an(r){return!N(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Dc(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),an(r)}function zc(r,l){var m,g,v,E,z,G,Y,re;if(!r||r.length===0)throw new Error("latlngs not passed");an(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ue=V([0,0]),_e=B(r),De=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());De<1700&&(ue=Za(r));var Mt=r.length,wt=[];for(m=0;m<Mt;m++){var on=V(r[m]);wt.push(l.project(V([on.lat-ue.lat,on.lng-ue.lng])))}for(m=0,g=0;m<Mt-1;m++)g+=wt[m].distanceTo(wt[m+1])/2;if(g===0)re=wt[0];else for(m=0,E=0;m<Mt-1;m++)if(z=wt[m],G=wt[m+1],v=z.distanceTo(G),E+=v,E>g){Y=(E-g)/v,re=[G.x-Y*(G.x-z.x),G.y-Y*(G.y-z.y)];break}var Ft=l.unproject(_(re));return V([Ft.lat+ue.lat,Ft.lng+ue.lng])}var $f={__proto__:null,simplify:Rc,pointToSegmentDistance:Mc,closestPointOnSegment:Uf,clipSegment:Oc,_getEdgeIntersection:ls,_getBitCode:ai,_sqClosestPointOnSegment:mr,isFlat:an,_flat:Dc,polylineCenter:zc},Ya={project:function(r){return new se(r.lng,r.lat)},unproject:function(r){return new U(r.y,r.x)},bounds:new A([-180,-90],[180,90])},Xa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new A([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var l=Math.PI/180,m=this.R,g=r.lat*l,v=this.R_MINOR/m,E=Math.sqrt(1-v*v),z=E*Math.sin(g),G=Math.tan(Math.PI/4-g/2)/Math.pow((1-z)/(1+z),E/2);return g=-m*Math.log(Math.max(G,1e-10)),new se(r.lng*l*m,g)},unproject:function(r){for(var l=180/Math.PI,m=this.R,g=this.R_MINOR/m,v=Math.sqrt(1-g*g),E=Math.exp(-r.y/m),z=Math.PI/2-2*Math.atan(E),G=0,Y=.1,re;G<15&&Math.abs(Y)>1e-7;G++)re=v*Math.sin(z),re=Math.pow((1-re)/(1+re),v/2),Y=Math.PI/2-2*Math.atan(E*re)-z,z+=Y;return new U(z*l,r.x*l/m)}},Gf={__proto__:null,LonLat:Ya,Mercator:Xa,SphericalMercator:me},Wf=a({},J,{code:"EPSG:3395",projection:Xa,transformation:(function(){var r=.5/(Math.PI*Xa.R);return Ne(r,.5,-r,.5)})()}),Fc=a({},J,{code:"EPSG:4326",projection:Ya,transformation:Ne(1/180,1,-1/180,.5)}),Zf=a({},Q,{projection:Ya,transformation:Ne(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,l){var m=l.lng-r.lng,g=l.lat-r.lat;return Math.sqrt(m*m+g*g)},infinite:!0});Q.Earth=J,Q.EPSG3395=Wf,Q.EPSG3857=He,Q.EPSG900913=ke,Q.EPSG4326=Fc,Q.Simple=Zf;var gn=ce.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[h(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[h(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var l=r.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var m=this.getEvents();l.on(m,this),this.once("remove",function(){l.off(m,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ve.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(r);return this._layers[l]?this:(this._layers[l]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var l=h(r);return this._layers[l]?(this._loaded&&r.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return h(r)in this._layers},eachLayer:function(r,l){for(var m in this._layers)r.call(l,this._layers[m]);return this},_addLayers:function(r){r=r?N(r)?r:[r]:[];for(var l=0,m=r.length;l<m;l++)this.addLayer(r[l])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[h(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var l=h(r);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,l=-1/0,m=this._getZoomSpan();for(var g in this._zoomBoundLayers){var v=this._zoomBoundLayers[g].options;r=v.minZoom===void 0?r:Math.min(r,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=r===1/0?void 0:r,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ii=gn.extend({initialize:function(r,l){w(this,l),this._layers={};var m,g;if(r)for(m=0,g=r.length;m<g;m++)this.addLayer(r[m])},addLayer:function(r){var l=this.getLayerId(r);return this._layers[l]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var l=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(r){var l=typeof r=="number"?r:this.getLayerId(r);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var l=Array.prototype.slice.call(arguments,1),m,g;for(m in this._layers)g=this._layers[m],g[r]&&g[r].apply(g,l);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,l){for(var m in this._layers)r.call(l,this._layers[m]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return h(r)}}),Kf=function(r,l){return new Ii(r,l)},On=Ii.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Ii.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Ii.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new k;for(var l in this._layers){var m=this._layers[l];r.extend(m.getBounds?m.getBounds():m.getLatLng())}return r}}),Yf=function(r,l){return new On(r,l)},Ri=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){w(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,l){var m=this._getIconUrl(r);if(!m){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(m,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(g,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(r,l){var m=this.options,g=m[l+"Size"];typeof g=="number"&&(g=[g,g]);var v=_(g),E=_(l==="shadow"&&m.shadowAnchor||m.iconAnchor||v&&v.divideBy(2,!0));r.className="leaflet-marker-"+l+" "+(m.className||""),E&&(r.style.marginLeft=-E.x+"px",r.style.marginTop=-E.y+"px"),v&&(r.style.width=v.x+"px",r.style.height=v.y+"px")},_createImg:function(r,l){return l=l||document.createElement("img"),l.src=r,l},_getIconUrl:function(r){return pe.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Xf(r){return new Ri(r)}var fr=Ri.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof fr.imagePath!="string"&&(fr.imagePath=this._detectIconPath()),(this.options.imagePath||fr.imagePath)+Ri.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var l=function(m,g,v){var E=g.exec(m);return E&&E[v]};return r=l(r,/^url\((['"])?(.+)\1\)$/,2),r&&l(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=qe("div","leaflet-default-icon-path",document.body),l=lr(r,"background-image")||lr(r,"backgroundImage");if(document.body.removeChild(r),l=this._stripUrl(l),l)return l;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Bc=Nn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new qn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Me(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var l=this._marker,m=l._map,g=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,E=ii(l._icon),z=m.getPixelBounds(),G=m.getPixelOrigin(),Y=H(z.min._subtract(G).add(v),z.max._subtract(G).subtract(v));if(!Y.contains(E)){var re=_((Math.max(Y.max.x,E.x)-Y.max.x)/(z.max.x-Y.max.x)-(Math.min(Y.min.x,E.x)-Y.min.x)/(z.min.x-Y.min.x),(Math.max(Y.max.y,E.y)-Y.max.y)/(z.max.y-Y.max.y)-(Math.min(Y.min.y,E.y)-Y.min.y)/(z.min.y-Y.min.y)).multiplyBy(g);m.panBy(re,{animate:!1}),this._draggable._newPos._add(re),this._draggable._startPos._add(re),mt(l._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=D(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,r)))},_onDrag:function(r){var l=this._marker,m=l._shadow,g=ii(l._icon),v=l._map.layerPointToLatLng(g);m&&mt(m,g),l._latlng=v,r.latlng=v,r.oldLatLng=this._oldLatLng,l.fire("move",r).fire("drag",r)},_onDragEnd:function(r){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),cs=gn.extend({options:{icon:new fr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,l){w(this,l),this._latlng=V(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var l=this._latlng;return this._latlng=V(r),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=r.icon.createIcon(this._icon),g=!1;m!==this._icon&&(this._icon&&this._removeIcon(),g=!0,r.title&&(m.title=r.title),m.tagName==="IMG"&&(m.alt=r.alt||"")),Me(m,l),r.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Te(m,"focus",this._panOnFocus,this);var v=r.icon.createShadow(this._shadow),E=!1;v!==this._shadow&&(this._removeShadow(),E=!0),v&&(Me(v,l),v.alt=""),this._shadow=v,r.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&E&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(this._icon,"focus",this._panOnFocus,this),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&mt(this._icon,r),this._shadow&&mt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bc)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bc(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&sn(this._icon,r),this._shadow&&sn(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var l=this.options.icon.options,m=l.iconSize?_(l.iconSize):_(0,0),g=l.iconAnchor?_(l.iconAnchor):_(0,0);r.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:m.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qf(r,l){return new cs(r,l)}var $n=gn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return w(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),us=$n.extend({options:{fill:!0,radius:10},initialize:function(r,l){w(this,l),this._latlng=V(r),this._radius=this.options.radius},setLatLng:function(r){var l=this._latlng;return this._latlng=V(r),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var l=r&&r.radius||this._radius;return $n.prototype.setStyle.call(this,r),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,l=this._radiusY||r,m=this._clickTolerance(),g=[r+m,l+m];this._pxBounds=new A(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Jf(r,l){return new us(r,l)}var Qa=us.extend({initialize:function(r,l,m){if(typeof l=="number"&&(l=a({},m,{radius:l})),w(this,l),this._latlng=V(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new k(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:$n.prototype.setStyle,_project:function(){var r=this._latlng.lng,l=this._latlng.lat,m=this._map,g=m.options.crs;if(g.distance===J.distance){var v=Math.PI/180,E=this._mRadius/J.R/v,z=m.project([l+E,r]),G=m.project([l-E,r]),Y=z.add(G).divideBy(2),re=m.unproject(Y).lat,ue=Math.acos((Math.cos(E*v)-Math.sin(l*v)*Math.sin(re*v))/(Math.cos(l*v)*Math.cos(re*v)))/v;(isNaN(ue)||ue===0)&&(ue=E/Math.cos(Math.PI/180*l)),this._point=Y.subtract(m.getPixelOrigin()),this._radius=isNaN(ue)?0:Y.x-m.project([re,r-ue]).x,this._radiusY=Y.y-z.y}else{var _e=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(_e).x}this._updateBounds()}});function ex(r,l,m){return new Qa(r,l,m)}var Dn=$n.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,l){w(this,l),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var l=1/0,m=null,g=mr,v,E,z=0,G=this._parts.length;z<G;z++)for(var Y=this._parts[z],re=1,ue=Y.length;re<ue;re++){v=Y[re-1],E=Y[re];var _e=g(r,v,E,!0);_e<l&&(l=_e,m=g(r,v,E))}return m&&(m.distance=Math.sqrt(l)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,l){return l=l||this._defaultShape(),r=V(r),l.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new k,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return an(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var l=[],m=an(r),g=0,v=r.length;g<v;g++)m?(l[g]=V(r[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(r[g]);return l},_project:function(){var r=new A;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),l=new se(r,r);this._rawPxBounds&&(this._pxBounds=new A([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(r,l,m){var g=r[0]instanceof U,v=r.length,E,z;if(g){for(z=[],E=0;E<v;E++)z[E]=this._map.latLngToLayerPoint(r[E]),m.extend(z[E]);l.push(z)}else for(E=0;E<v;E++)this._projectLatlngs(r[E],l,m)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,m,g,v,E,z,G,Y;for(m=0,v=0,E=this._rings.length;m<E;m++)for(Y=this._rings[m],g=0,z=Y.length;g<z-1;g++)G=Oc(Y[g],Y[g+1],r,g,!0),G&&(l[v]=l[v]||[],l[v].push(G[0]),(G[1]!==Y[g+1]||g===z-2)&&(l[v].push(G[1]),v++))}},_simplifyPoints:function(){for(var r=this._parts,l=this.options.smoothFactor,m=0,g=r.length;m<g;m++)r[m]=Rc(r[m],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,l){var m,g,v,E,z,G,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(m=0,E=this._parts.length;m<E;m++)for(G=this._parts[m],g=0,z=G.length,v=z-1;g<z;v=g++)if(!(!l&&g===0)&&Mc(r,G[v],G[g])<=Y)return!0;return!1}});function tx(r,l){return new Dn(r,l)}Dn._flat=Dc;var Mi=Dn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ic(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var l=Dn.prototype._convertLatLngs.call(this,r),m=l.length;return m>=2&&l[0]instanceof U&&l[0].equals(l[m-1])&&l.pop(),l},_setLatLngs:function(r){Dn.prototype._setLatLngs.call(this,r),an(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return an(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,l=this.options.weight,m=new se(l,l);if(r=new A(r.min.subtract(m),r.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,v=this._rings.length,E;g<v;g++)E=Pc(this._rings[g],r,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var l=!1,m,g,v,E,z,G,Y,re;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(E=0,Y=this._parts.length;E<Y;E++)for(m=this._parts[E],z=0,re=m.length,G=re-1;z<re;G=z++)g=m[z],v=m[G],g.y>r.y!=v.y>r.y&&r.x<(v.x-g.x)*(r.y-g.y)/(v.y-g.y)+g.x&&(l=!l);return l||Dn.prototype._containsPoint.call(this,r,!0)}});function nx(r,l){return new Mi(r,l)}var zn=On.extend({initialize:function(r,l){w(this,l),this._layers={},r&&this.addData(r)},addData:function(r){var l=N(r)?r:r.features,m,g,v;if(l){for(m=0,g=l.length;m<g;m++)v=l[m],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var E=this.options;if(E.filter&&!E.filter(r))return this;var z=ds(r,E);return z?(z.feature=ms(r),z.defaultOptions=z.options,this.resetStyle(z),E.onEachFeature&&E.onEachFeature(r,z),this.addLayer(z)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=a({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(l){this._setLayerStyle(l,r)},this)},_setLayerStyle:function(r,l){r.setStyle&&(typeof l=="function"&&(l=l(r.feature)),r.setStyle(l))}});function ds(r,l){var m=r.type==="Feature"?r.geometry:r,g=m?m.coordinates:null,v=[],E=l&&l.pointToLayer,z=l&&l.coordsToLatLng||Ja,G,Y,re,ue;if(!g&&!m)return null;switch(m.type){case"Point":return G=z(g),Uc(E,r,G,l);case"MultiPoint":for(re=0,ue=g.length;re<ue;re++)G=z(g[re]),v.push(Uc(E,r,G,l));return new On(v);case"LineString":case"MultiLineString":return Y=hs(g,m.type==="LineString"?0:1,z),new Dn(Y,l);case"Polygon":case"MultiPolygon":return Y=hs(g,m.type==="Polygon"?1:2,z),new Mi(Y,l);case"GeometryCollection":for(re=0,ue=m.geometries.length;re<ue;re++){var _e=ds({geometry:m.geometries[re],type:"Feature",properties:r.properties},l);_e&&v.push(_e)}return new On(v);case"FeatureCollection":for(re=0,ue=m.features.length;re<ue;re++){var De=ds(m.features[re],l);De&&v.push(De)}return new On(v);default:throw new Error("Invalid GeoJSON object.")}}function Uc(r,l,m,g){return r?r(l,m):new cs(m,g&&g.markersInheritOptions&&g)}function Ja(r){return new U(r[1],r[0],r[2])}function hs(r,l,m){for(var g=[],v=0,E=r.length,z;v<E;v++)z=l?hs(r[v],l-1,m):(m||Ja)(r[v]),g.push(z);return g}function eo(r,l){return r=V(r),r.alt!==void 0?[x(r.lng,l),x(r.lat,l),x(r.alt,l)]:[x(r.lng,l),x(r.lat,l)]}function ps(r,l,m,g){for(var v=[],E=0,z=r.length;E<z;E++)v.push(l?ps(r[E],an(r[E])?0:l-1,m,g):eo(r[E],g));return!l&&m&&v.length>0&&v.push(v[0].slice()),v}function Li(r,l){return r.feature?a({},r.feature,{geometry:l}):ms(l)}function ms(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var to={toGeoJSON:function(r){return Li(this,{type:"Point",coordinates:eo(this.getLatLng(),r)})}};cs.include(to),Qa.include(to),us.include(to),Dn.include({toGeoJSON:function(r){var l=!an(this._latlngs),m=ps(this._latlngs,l?1:0,!1,r);return Li(this,{type:(l?"Multi":"")+"LineString",coordinates:m})}}),Mi.include({toGeoJSON:function(r){var l=!an(this._latlngs),m=l&&!an(this._latlngs[0]),g=ps(this._latlngs,m?2:l?1:0,!0,r);return l||(g=[g]),Li(this,{type:(m?"Multi":"")+"Polygon",coordinates:g})}}),Ii.include({toMultiPoint:function(r){var l=[];return this.eachLayer(function(m){l.push(m.toGeoJSON(r).geometry.coordinates)}),Li(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(r){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(r);var m=l==="GeometryCollection",g=[];return this.eachLayer(function(v){if(v.toGeoJSON){var E=v.toGeoJSON(r);if(m)g.push(E.geometry);else{var z=ms(E);z.type==="FeatureCollection"?g.push.apply(g,z.features):g.push(z)}}}),m?Li(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function Vc(r,l){return new zn(r,l)}var ix=Vc,fs=gn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,l,m){this._url=r,this._bounds=B(l),w(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Ti(this._image),this},bringToBack:function(){return this._map&&Pi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=B(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",l=this._image=r?this._url:qe("img");if(Me(l,"leaflet-image-layer"),this._zoomAnimated&&Me(l,"leaflet-zoom-animated"),this.options.className&&Me(l,this.options.className),l.onselectstart=p,l.onmousemove=p,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(r){var l=this._map.getZoomScale(r.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;ni(this._image,m,l)},_reset:function(){var r=this._image,l=new A(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=l.getSize();mt(r,l.min),r.style.width=m.x+"px",r.style.height=m.y+"px"},_updateOpacity:function(){sn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),rx=function(r,l,m){return new fs(r,l,m)},Hc=fs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",l=this._image=r?this._url:qe("video");if(Me(l,"leaflet-image-layer"),this._zoomAnimated&&Me(l,"leaflet-zoom-animated"),this.options.className&&Me(l,this.options.className),l.onselectstart=p,l.onmousemove=p,l.onloadeddata=c(this.fire,this,"load"),r){for(var m=l.getElementsByTagName("source"),g=[],v=0;v<m.length;v++)g.push(m[v].src);this._url=m.length>0?g:[l.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var z=qe("source");z.src=this._url[E],l.appendChild(z)}}});function sx(r,l,m){return new Hc(r,l,m)}var qc=fs.extend({_initImage:function(){var r=this._image=this._url;Me(r,"leaflet-image-layer"),this._zoomAnimated&&Me(r,"leaflet-zoom-animated"),this.options.className&&Me(r,this.options.className),r.onselectstart=p,r.onmousemove=p}});function ax(r,l,m){return new qc(r,l,m)}var kn=gn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,l){r&&(r instanceof U||N(r))?(this._latlng=V(r),w(this,l)):(w(this,r),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&sn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&sn(this._container,1),this.bringToFront(),this.options.interactive&&(Me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(sn(this._container,0),this._removeTimeout=setTimeout(c(lt,void 0,this._container),200)):lt(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=V(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ti(this._container),this},bringToBack:function(){return this._map&&Pi(this._container),this},_prepareOpen:function(r){var l=this._source;if(!l._map)return!1;if(l instanceof On){l=null;var m=this._source._layers;for(var g in m)if(m[g]._map){l=m[g];break}if(!l)return!1;this._source=l}if(!r)if(l.getCenter)r=l.getCenter();else if(l.getLatLng)r=l.getLatLng();else if(l.getBounds)r=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")r.innerHTML=l;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),l=_(this.options.offset),m=this._getAnchor();this._zoomAnimated?mt(this._container,r.add(m)):l=l.add(r).add(m);var g=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Ve.include({_initOverlay:function(r,l,m,g){var v=l;return v instanceof r||(v=new r(g).setContent(l)),m&&v.setLatLng(m),v}}),gn.include({_initOverlay:function(r,l,m,g){var v=m;return v instanceof r?(w(v,g),v._source=this):(v=l&&!g?l:new r(g,this),v.setContent(m)),v}});var xs=kn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,kn.prototype.openOn.call(this,r)},onAdd:function(r){kn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof $n||this._source.on("preclick",ri))},onRemove:function(r){kn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof $n||this._source.off("preclick",ri))},getEvents:function(){var r=kn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",l=this._container=qe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=qe("div",r+"-content-wrapper",l);if(this._contentNode=qe("div",r+"-content",m),hr(l),qa(this._contentNode),Te(l,"contextmenu",ri),this._tipContainer=qe("div",r+"-tip-container",l),this._tip=qe("div",r+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=qe("a",r+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',Te(g,"click",function(v){jt(v),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,l=r.style;l.width="",l.whiteSpace="nowrap";var m=r.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),l.width=m+1+"px",l.whiteSpace="",l.height="";var g=r.offsetHeight,v=this.options.maxHeight,E="leaflet-popup-scrolled";v&&g>v?(l.height=v+"px",Me(r,E)):ht(r,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),m=this._getAnchor();mt(this._container,l.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,l=parseInt(lr(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+l,g=this._containerWidth,v=new se(this._containerLeft,-m-this._containerBottom);v._add(ii(this._container));var E=r.layerPointToContainerPoint(v),z=_(this.options.autoPanPadding),G=_(this.options.autoPanPaddingTopLeft||z),Y=_(this.options.autoPanPaddingBottomRight||z),re=r.getSize(),ue=0,_e=0;E.x+g+Y.x>re.x&&(ue=E.x+g-re.x+Y.x),E.x-ue-G.x<0&&(ue=E.x-G.x),E.y+m+Y.y>re.y&&(_e=E.y+m-re.y+Y.y),E.y-_e-G.y<0&&(_e=E.y-G.y),(ue||_e)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ue,_e]))}},_getAnchor:function(){return _(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ox=function(r,l){return new xs(r,l)};Ve.mergeOptions({closePopupOnClick:!0}),Ve.include({openPopup:function(r,l,m){return this._initOverlay(xs,r,l,m).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),gn.include({bindPopup:function(r,l){return this._popup=this._initOverlay(xs,this._popup,r,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof On||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){si(r);var l=r.layer||r.target;if(this._popup._source===l&&!(l instanceof $n)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=l,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var gs=kn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){kn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){kn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=kn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",l=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=qe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var l,m,g=this._map,v=this._container,E=g.latLngToContainerPoint(g.getCenter()),z=g.layerPointToContainerPoint(r),G=this.options.direction,Y=v.offsetWidth,re=v.offsetHeight,ue=_(this.options.offset),_e=this._getAnchor();G==="top"?(l=Y/2,m=re):G==="bottom"?(l=Y/2,m=0):G==="center"?(l=Y/2,m=re/2):G==="right"?(l=0,m=re/2):G==="left"?(l=Y,m=re/2):z.x<E.x?(G="right",l=0,m=re/2):(G="left",l=Y+(ue.x+_e.x)*2,m=re/2),r=r.subtract(_(l,m,!0)).add(ue).add(_e),ht(v,"leaflet-tooltip-right"),ht(v,"leaflet-tooltip-left"),ht(v,"leaflet-tooltip-top"),ht(v,"leaflet-tooltip-bottom"),Me(v,"leaflet-tooltip-"+G),mt(v,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&sn(this._container,r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(l)},_getAnchor:function(){return _(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),lx=function(r,l){return new gs(r,l)};Ve.include({openTooltip:function(r,l,m){return this._initOverlay(gs,r,l,m).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),gn.include({bindTooltip:function(r,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(gs,this._tooltip,r,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var l=r?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[l](m),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof On||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&(Te(l,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Te(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var l=r.latlng,m,g;this._tooltip.options.sticky&&r.originalEvent&&(m=this._map.mouseEventToContainerPoint(r.originalEvent),g=this._map.containerPointToLayerPoint(m),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var $c=Ri.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var l=r&&r.tagName==="DIV"?r:document.createElement("div"),m=this.options;if(m.html instanceof Element?(is(l),l.appendChild(m.html)):l.innerHTML=m.html!==!1?m.html:"",m.bgPos){var g=_(m.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function cx(r){return new $c(r)}Ri.Default=fr;var xr=gn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:pe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){w(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),lt(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ti(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Pi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof se?r:new se(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var l=this.getPane().children,m=-r(-1/0,1/0),g=0,v=l.length,E;g<v;g++)E=l[g].style.zIndex,l[g]!==this._container&&E&&(m=r(m,+E));isFinite(m)&&(this.options.zIndex=m+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!pe.ielt9){sn(this._container,this.options.opacity);var r=+new Date,l=!1,m=!1;for(var g in this._tiles){var v=this._tiles[g];if(!(!v.current||!v.loaded)){var E=Math.min(1,(r-v.loaded)/200);sn(v.el,E),E<1?l=!0:(v.active?m=!0:this._onOpaqueTile(v),v.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),l&&(M(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,l=this.options.maxZoom;if(r!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===r?(this._levels[m].el.style.zIndex=l-Math.abs(r-m),this._onUpdateLevel(m)):(lt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var g=this._levels[r],v=this._map;return g||(g=this._levels[r]={},g.el=qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=v.project(v.unproject(v.getPixelOrigin()),r).round(),g.zoom=r,this._setZoomTransform(g,v.getCenter(),v.getZoom()),p(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var r,l,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)l=this._tiles[r],l.retain=l.current;for(r in this._tiles)if(l=this._tiles[r],l.current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var l in this._tiles)this._tiles[l].coords.z===r&&this._removeTile(l)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)lt(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,l,m,g){var v=Math.floor(r/2),E=Math.floor(l/2),z=m-1,G=new se(+v,+E);G.z=+z;var Y=this._tileCoordsToKey(G),re=this._tiles[Y];return re&&re.active?(re.retain=!0,!0):(re&&re.loaded&&(re.retain=!0),z>g?this._retainParent(v,E,z,g):!1)},_retainChildren:function(r,l,m,g){for(var v=2*r;v<2*r+2;v++)for(var E=2*l;E<2*l+2;E++){var z=new se(v,E);z.z=m+1;var G=this._tileCoordsToKey(z),Y=this._tiles[G];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);m+1<g&&this._retainChildren(v,E,m+1,g)}},_resetView:function(r){var l=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var l=this.options;return l.minNativeZoom!==void 0&&r<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<r?l.maxNativeZoom:r},_setView:function(r,l,m,g){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var E=this.options.updateWhenZooming&&v!==this._tileZoom;(!g||E)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(r),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(r,l)},_setZoomTransforms:function(r,l){for(var m in this._levels)this._setZoomTransform(this._levels[m],r,l)},_setZoomTransform:function(r,l,m){var g=this._map.getZoomScale(m,r.zoom),v=r.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,m)).round();pe.any3d?ni(r.el,v,g):mt(r.el,v)},_resetGrid:function(){var r=this._map,l=r.options.crs,m=this._tileSize=this.getTileSize(),g=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,l.wrapLng[0]],g).x/m.x),Math.ceil(r.project([0,l.wrapLng[1]],g).x/m.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([l.wrapLat[0],0],g).y/m.x),Math.ceil(r.project([l.wrapLat[1],0],g).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var l=this._map,m=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(m,this._tileZoom),v=l.project(r,this._tileZoom).floor(),E=l.getSize().divideBy(g*2);return new A(v.subtract(E),v.add(E))},_update:function(r){var l=this._map;if(l){var m=this._clampZoom(l.getZoom());if(r===void 0&&(r=l.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(r),v=this._pxBoundsToTileRange(g),E=v.getCenter(),z=[],G=this.options.keepBuffer,Y=new A(v.getBottomLeft().subtract([G,-G]),v.getTopRight().add([G,-G]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var re in this._tiles){var ue=this._tiles[re].coords;(ue.z!==this._tileZoom||!Y.contains(new se(ue.x,ue.y)))&&(this._tiles[re].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(r,m);return}for(var _e=v.min.y;_e<=v.max.y;_e++)for(var De=v.min.x;De<=v.max.x;De++){var Mt=new se(De,_e);if(Mt.z=this._tileZoom,!!this._isValidTile(Mt)){var wt=this._tiles[this._tileCoordsToKey(Mt)];wt?wt.current=!0:z.push(Mt)}}if(z.sort(function(Ft,Di){return Ft.distanceTo(E)-Di.distanceTo(E)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var on=document.createDocumentFragment();for(De=0;De<z.length;De++)this._addTile(z[De],on);this._level.el.appendChild(on)}}}},_isValidTile:function(r){var l=this._map.options.crs;if(!l.infinite){var m=this._globalTileRange;if(!l.wrapLng&&(r.x<m.min.x||r.x>m.max.x)||!l.wrapLat&&(r.y<m.min.y||r.y>m.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(r);return B(this.options.bounds).overlaps(g)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var l=this._map,m=this.getTileSize(),g=r.scaleBy(m),v=g.add(m),E=l.unproject(g,r.z),z=l.unproject(v,r.z);return[E,z]},_tileCoordsToBounds:function(r){var l=this._tileCoordsToNwSe(r),m=new k(l[0],l[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var l=r.split(":"),m=new se(+l[0],+l[1]);return m.z=+l[2],m},_removeTile:function(r){var l=this._tiles[r];l&&(lt(l.el),delete this._tiles[r],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){Me(r,"leaflet-tile");var l=this.getTileSize();r.style.width=l.x+"px",r.style.height=l.y+"px",r.onselectstart=p,r.onmousemove=p,pe.ielt9&&this.options.opacity<1&&sn(r,this.options.opacity)},_addTile:function(r,l){var m=this._getTilePos(r),g=this._tileCoordsToKey(r),v=this.createTile(this._wrapCoords(r),c(this._tileReady,this,r));this._initTile(v),this.createTile.length<2&&D(c(this._tileReady,this,r,null,v)),mt(v,m),this._tiles[g]={el:v,coords:r,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:r})},_tileReady:function(r,l,m){l&&this.fire("tileerror",{error:l,tile:m,coords:r});var g=this._tileCoordsToKey(r);m=this._tiles[g],m&&(m.loaded=+new Date,this._map._fadeAnimated?(sn(m.el,0),M(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),l||(Me(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),pe.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var l=new se(this._wrapX?f(r.x,this._wrapX):r.x,this._wrapY?f(r.y,this._wrapY):r.y);return l.z=r.z,l},_pxBoundsToTileRange:function(r){var l=this.getTileSize();return new A(r.min.unscaleBy(l).floor(),r.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function ux(r){return new xr(r)}var Oi=xr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,l){this._url=r,l=w(this,l),l.detectRetina&&pe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,l){return this._url===r&&l===void 0&&(l=!0),this._url=r,l||this.redraw(),this},createTile:function(r,l){var m=document.createElement("img");return Te(m,"load",c(this._tileOnLoad,this,l,m)),Te(m,"error",c(this._tileOnError,this,l,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(r),m},getTileUrl:function(r){var l={r:pe.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-r.y;this.options.tms&&(l.y=m),l["-y"]=m}return C(this._url,a(l,this.options))},_tileOnLoad:function(r,l){pe.ielt9?setTimeout(c(r,this,null,l),0):r(null,l)},_tileOnError:function(r,l,m){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),r(m,l)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,l=this.options.maxZoom,m=this.options.zoomReverse,g=this.options.zoomOffset;return m&&(r=l-r),r+g},_getSubdomain:function(r){var l=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var r,l;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(l=this._tiles[r].el,l.onload=p,l.onerror=p,!l.complete)){l.src=P;var m=this._tiles[r].coords;lt(l),delete this._tiles[r],this.fire("tileabort",{tile:l,coords:m})}},_removeTile:function(r){var l=this._tiles[r];if(l)return l.el.setAttribute("src",P),xr.prototype._removeTile.call(this,r)},_tileReady:function(r,l,m){if(!(!this._map||m&&m.getAttribute("src")===P))return xr.prototype._tileReady.call(this,r,l,m)}});function Gc(r,l){return new Oi(r,l)}var Wc=Oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,l){this._url=r;var m=a({},this.defaultWmsParams);for(var g in l)g in this.options||(m[g]=l[g]);l=w(this,l);var v=l.detectRetina&&pe.retina?2:1,E=this.getTileSize();m.width=E.x*v,m.height=E.y*v,this.wmsParams=m},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Oi.prototype.onAdd.call(this,r)},getTileUrl:function(r){var l=this._tileCoordsToNwSe(r),m=this._crs,g=H(m.project(l[0]),m.project(l[1])),v=g.min,E=g.max,z=(this._wmsVersion>=1.3&&this._crs===Fc?[v.y,v.x,E.y,E.x]:[v.x,v.y,E.x,E.y]).join(","),G=Oi.prototype.getTileUrl.call(this,r);return G+j(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(r,l){return a(this.wmsParams,r),l||this.redraw(),this}});function dx(r,l){return new Wc(r,l)}Oi.WMS=Wc,Gc.wms=dx;var Fn=gn.extend({options:{padding:.1},initialize:function(r){w(this,r),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,l){var m=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),E=g.multiplyBy(-m).add(v).subtract(this._map._getNewPixelOrigin(r,l));pe.any3d?ni(this._container,E,m):mt(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,l=this._map.getSize(),m=this._map.containerPointToLayerPoint(l.multiplyBy(-r)).round();this._bounds=new A(m,m.add(l.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zc=Fn.extend({options:{tolerance:0},getEvents:function(){var r=Fn.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Te(r,"mousemove",this._onMouseMove,this),Te(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Te(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,lt(this._container),Qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var l in this._layers)r=this._layers[l],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fn.prototype._update.call(this);var r=this._bounds,l=this._container,m=r.getSize(),g=pe.retina?2:1;mt(l,r.min),l.width=g*m.x,l.height=g*m.y,l.style.width=m.x+"px",l.style.height=m.y+"px",pe.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Fn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[h(r)]=r;var l=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var l=r._order,m=l.next,g=l.prev;m?m.prev=g:this._drawLast=g,g?g.next=m:this._drawFirst=m,delete r._order,delete this._layers[h(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var l=r.options.dashArray.split(/[, ]+/),m=[],g,v;for(v=0;v<l.length;v++){if(g=Number(l[v]),isNaN(g))return;m.push(g)}r.options._dashArray=m}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var l=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new A,this._redrawBounds.extend(r._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(r._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var l=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,l=this._redrawBounds;if(this._ctx.save(),l){var m=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)r=g.layer,(!l||r._pxBounds&&r._pxBounds.intersects(l))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,l){if(this._drawing){var m,g,v,E,z=r._parts,G=z.length,Y=this._ctx;if(G){for(Y.beginPath(),m=0;m<G;m++){for(g=0,v=z[m].length;g<v;g++)E=z[m][g],Y[g?"lineTo":"moveTo"](E.x,E.y);l&&Y.closePath()}this._fillStroke(Y,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var l=r._point,m=this._ctx,g=Math.max(Math.round(r._radius),1),v=(Math.max(Math.round(r._radiusY),1)||g)/g;v!==1&&(m.save(),m.scale(1,v)),m.beginPath(),m.arc(l.x,l.y/v,g,0,Math.PI*2,!1),v!==1&&m.restore(),this._fillStroke(m,r)}},_fillStroke:function(r,l){var m=l.options;m.fill&&(r.globalAlpha=m.fillOpacity,r.fillStyle=m.fillColor||m.color,r.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(r.setLineDash&&r.setLineDash(l.options&&l.options._dashArray||[]),r.globalAlpha=m.opacity,r.lineWidth=m.weight,r.strokeStyle=m.color,r.lineCap=m.lineCap,r.lineJoin=m.lineJoin,r.stroke())},_onClick:function(r){for(var l=this._map.mouseEventToLayerPoint(r),m,g,v=this._drawFirst;v;v=v.next)m=v.layer,m.options.interactive&&m._containsPoint(l)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(m))&&(g=m);this._fireEvent(g?[g]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,l)}},_handleMouseOut:function(r){var l=this._hoveredLayer;l&&(ht(this._container,"leaflet-interactive"),this._fireEvent([l],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,l){if(!this._mouseHoverThrottled){for(var m,g,v=this._drawFirst;v;v=v.next)m=v.layer,m.options.interactive&&m._containsPoint(l)&&(g=m);g!==this._hoveredLayer&&(this._handleMouseOut(r),g&&(Me(this._container,"leaflet-interactive"),this._fireEvent([g],r,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,l,m){this._map._fireDOMEvent(l,m||l.type,r)},_bringToFront:function(r){var l=r._order;if(l){var m=l.next,g=l.prev;if(m)m.prev=g;else return;g?g.next=m:m&&(this._drawFirst=m),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(r)}},_bringToBack:function(r){var l=r._order;if(l){var m=l.next,g=l.prev;if(g)g.next=m;else return;m?m.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(r)}}});function Kc(r){return pe.canvas?new Zc(r):null}var gr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),hx={_initContainer:function(){this._container=qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fn.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var l=r._container=gr("shape");Me(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",r._path=gr("path"),l.appendChild(r._path),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){var l=r._container;this._container.appendChild(l),r.options.interactive&&r.addInteractiveTarget(l)},_removePath:function(r){var l=r._container;lt(l),r.removeInteractiveTarget(l),delete this._layers[h(r)]},_updateStyle:function(r){var l=r._stroke,m=r._fill,g=r.options,v=r._container;v.stroked=!!g.stroke,v.filled=!!g.fill,g.stroke?(l||(l=r._stroke=gr("stroke")),v.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,g.dashArray?l.dashStyle=N(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(v.removeChild(l),r._stroke=null),g.fill?(m||(m=r._fill=gr("fill")),v.appendChild(m),m.color=g.fillColor||g.color,m.opacity=g.fillOpacity):m&&(v.removeChild(m),r._fill=null)},_updateCircle:function(r){var l=r._point.round(),m=Math.round(r._radius),g=Math.round(r._radiusY||m);this._setPath(r,r._empty()?"M0 0":"AL "+l.x+","+l.y+" "+m+","+g+" 0,"+65535*360)},_setPath:function(r,l){r._path.v=l},_bringToFront:function(r){Ti(r._container)},_bringToBack:function(r){Pi(r._container)}},bs=pe.vml?gr:We,br=Fn.extend({_initContainer:function(){this._container=bs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=bs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),Qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fn.prototype._update.call(this);var r=this._bounds,l=r.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,m.setAttribute("width",l.x),m.setAttribute("height",l.y)),mt(m,r.min),m.setAttribute("viewBox",[r.min.x,r.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(r){var l=r._path=bs("path");r.options.className&&Me(l,r.options.className),r.options.interactive&&Me(l,"leaflet-interactive"),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){lt(r._path),r.removeInteractiveTarget(r._path),delete this._layers[h(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var l=r._path,m=r.options;l&&(m.stroke?(l.setAttribute("stroke",m.color),l.setAttribute("stroke-opacity",m.opacity),l.setAttribute("stroke-width",m.weight),l.setAttribute("stroke-linecap",m.lineCap),l.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?l.setAttribute("stroke-dasharray",m.dashArray):l.removeAttribute("stroke-dasharray"),m.dashOffset?l.setAttribute("stroke-dashoffset",m.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),m.fill?(l.setAttribute("fill",m.fillColor||m.color),l.setAttribute("fill-opacity",m.fillOpacity),l.setAttribute("fill-rule",m.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(r,l){this._setPath(r,ot(r._parts,l))},_updateCircle:function(r){var l=r._point,m=Math.max(Math.round(r._radius),1),g=Math.max(Math.round(r._radiusY),1)||m,v="a"+m+","+g+" 0 1,0 ",E=r._empty()?"M0 0":"M"+(l.x-m)+","+l.y+v+m*2+",0 "+v+-m*2+",0 ";this._setPath(r,E)},_setPath:function(r,l){r._path.setAttribute("d",l)},_bringToFront:function(r){Ti(r._path)},_bringToBack:function(r){Pi(r._path)}});pe.vml&&br.include(hx);function Yc(r){return pe.svg||pe.vml?new br(r):null}Ve.include({getRenderer:function(r){var l=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var l=this._paneRenderers[r];return l===void 0&&(l=this._createRenderer({pane:r}),this._paneRenderers[r]=l),l},_createRenderer:function(r){return this.options.preferCanvas&&Kc(r)||Yc(r)}});var Xc=Mi.extend({initialize:function(r,l){Mi.prototype.initialize.call(this,this._boundsToLatLngs(r),l)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=B(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function px(r,l){return new Xc(r,l)}br.create=bs,br.pointsToPath=ot,zn.geometryToLayer=ds,zn.coordsToLatLng=Ja,zn.coordsToLatLngs=hs,zn.latLngToCoords=eo,zn.latLngsToCoords=ps,zn.getFeature=Li,zn.asFeature=ms,Ve.mergeOptions({boxZoom:!0});var Qc=Nn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cr(),Oa(),this._startPoint=this._map.mouseEventToContainerPoint(r),Te(document,{contextmenu:si,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=qe("div","leaflet-zoom-box",this._container),Me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var l=new A(this._point,this._startPoint),m=l.getSize();mt(this._box,l.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(lt(this._box),ht(this._container,"leaflet-crosshair")),ur(),Da(),Qe(document,{contextmenu:si,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new k(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ve.addInitHook("addHandler","boxZoom",Qc),Ve.mergeOptions({doubleClickZoom:!0});var Jc=Nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var l=this._map,m=l.getZoom(),g=l.options.zoomDelta,v=r.originalEvent.shiftKey?m-g:m+g;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(r.containerPoint,v)}});Ve.addInitHook("addHandler","doubleClickZoom",Jc),Ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var eu=Nn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new qn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}Me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=B(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var l=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(l),this._prunePositions(l)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,l){return r-(r-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;r.x<l.min.x&&(r.x=this._viscousLimit(r.x,l.min.x)),r.y<l.min.y&&(r.y=this._viscousLimit(r.y,l.min.y)),r.x>l.max.x&&(r.x=this._viscousLimit(r.x,l.max.x)),r.y>l.max.y&&(r.y=this._viscousLimit(r.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,l=Math.round(r/2),m=this._initialWorldOffset,g=this._draggable._newPos.x,v=(g-l+m)%r+l-m,E=(g+l+m)%r-l-m,z=Math.abs(v+m)<Math.abs(E+m)?v:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(r){var l=this._map,m=l.options,g=!m.inertia||r.noInertia||this._times.length<2;if(l.fire("dragend",r),g)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,z=m.easeLinearity,G=v.multiplyBy(z/E),Y=G.distanceTo([0,0]),re=Math.min(m.inertiaMaxSpeed,Y),ue=G.multiplyBy(re/Y),_e=re/(m.inertiaDeceleration*z),De=ue.multiplyBy(-_e/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),D(function(){l.panBy(De,{duration:_e,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});Ve.addInitHook("addHandler","dragging",eu),Ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var tu=Nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Te(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,l=document.documentElement,m=r.scrollTop||l.scrollTop,g=r.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var l=this._panKeys={},m=this.keyCodes,g,v;for(g=0,v=m.left.length;g<v;g++)l[m.left[g]]=[-1*r,0];for(g=0,v=m.right.length;g<v;g++)l[m.right[g]]=[r,0];for(g=0,v=m.down.length;g<v;g++)l[m.down[g]]=[0,r];for(g=0,v=m.up.length;g<v;g++)l[m.up[g]]=[0,-1*r]},_setZoomDelta:function(r){var l=this._zoomKeys={},m=this.keyCodes,g,v;for(g=0,v=m.zoomIn.length;g<v;g++)l[m.zoomIn[g]]=r;for(g=0,v=m.zoomOut.length;g<v;g++)l[m.zoomOut[g]]=-r},_addHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var l=r.keyCode,m=this._map,g;if(l in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(g=this._panKeys[l],r.shiftKey&&(g=_(g).multiplyBy(3)),m.options.maxBounds&&(g=m._limitOffset(_(g),m.options.maxBounds)),m.options.worldCopyJump){var v=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(g)));m.panTo(v)}else m.panBy(g)}else if(l in this._zoomKeys)m.setZoom(m.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;si(r)}}});Ve.addInitHook("addHandler","keyboard",tu),Ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var nu=Nn.extend({addHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var l=Cc(r),m=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var g=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),g),si(r)},_performZoom:function(){var r=this._map,l=r.getZoom(),m=this._map.options.zoomSnap||0;r._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,E=m?Math.ceil(v/m)*m:v,z=r._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,z&&(r.options.scrollWheelZoom==="center"?r.setZoom(l+z):r.setZoomAround(this._lastMousePos,l+z))}});Ve.addInitHook("addHandler","scrollWheelZoom",nu);var mx=600;Ve.mergeOptions({tapHold:pe.touchNative&&pe.safari&&pe.mobile,tapTolerance:15});var iu=Nn.extend({addHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var l=r.touches[0];this._startPos=this._newPos=new se(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Te(document,"touchend",jt),Te(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),mx),Te(document,"touchend touchcancel contextmenu",this._cancel,this),Te(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Qe(document,"touchend",jt),Qe(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)},_onMove:function(r){var l=r.touches[0];this._newPos=new se(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,l){var m=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});m._simulated=!0,l.target.dispatchEvent(m)}});Ve.addInitHook("addHandler","tapHold",iu),Ve.mergeOptions({touchZoom:pe.touch,bounceAtZoomLimits:!0});var ru=Nn.extend({addHooks:function(){Me(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var l=this._map;if(!(!r.touches||r.touches.length!==2||l._animatingZoom||this._zooming)){var m=l.mouseEventToContainerPoint(r.touches[0]),g=l.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(m.add(g)._divideBy(2))),this._startDist=m.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend touchcancel",this._onTouchEnd,this),jt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var l=this._map,m=l.mouseEventToContainerPoint(r.touches[0]),g=l.mouseEventToContainerPoint(r.touches[1]),v=m.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var E=m._add(g)._divideBy(2)._subtract(this._centerPoint);if(v===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var z=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(z,this,!0),jt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ve.addInitHook("addHandler","touchZoom",ru),Ve.BoxZoom=Qc,Ve.DoubleClickZoom=Jc,Ve.Drag=eu,Ve.Keyboard=tu,Ve.ScrollWheelZoom=nu,Ve.TapHold=iu,Ve.TouchZoom=ru,i.Bounds=A,i.Browser=pe,i.CRS=Q,i.Canvas=Zc,i.Circle=Qa,i.CircleMarker=us,i.Class=Z,i.Control=xn,i.DivIcon=$c,i.DivOverlay=kn,i.DomEvent=If,i.DomUtil=Tf,i.Draggable=qn,i.Evented=ce,i.FeatureGroup=On,i.GeoJSON=zn,i.GridLayer=xr,i.Handler=Nn,i.Icon=Ri,i.ImageOverlay=fs,i.LatLng=U,i.LatLngBounds=k,i.Layer=gn,i.LayerGroup=Ii,i.LineUtil=$f,i.Map=Ve,i.Marker=cs,i.Mixin=Ff,i.Path=$n,i.Point=se,i.PolyUtil=Bf,i.Polygon=Mi,i.Polyline=Dn,i.Popup=xs,i.PosAnimation=Ec,i.Projection=Gf,i.Rectangle=Xc,i.Renderer=Fn,i.SVG=br,i.SVGOverlay=qc,i.TileLayer=Oi,i.Tooltip=gs,i.Transformation=ye,i.Util=q,i.VideoOverlay=Hc,i.bind=c,i.bounds=H,i.canvas=Kc,i.circle=ex,i.circleMarker=Jf,i.control=pr,i.divIcon=cx,i.extend=a,i.featureGroup=Yf,i.geoJSON=Vc,i.geoJson=ix,i.gridLayer=ux,i.icon=Xf,i.imageOverlay=rx,i.latLng=V,i.latLngBounds=B,i.layerGroup=Kf,i.map=Rf,i.marker=Qf,i.point=_,i.polygon=nx,i.polyline=tx,i.popup=ox,i.rectangle=px,i.setOptions=w,i.stamp=h,i.svg=Yc,i.svgOverlay=ax,i.tileLayer=Gc,i.tooltip=lx,i.transformation=Ne,i.version=s,i.videoOverlay=sx;var fx=window.L;i.noConflict=function(){return window.L=fx,this},window.L=i}))})(Sr,Sr.exports)),Sr.exports}var Yr=hw();const _a=pn(Yr);function Wl(e,t,i){return Object.freeze({instance:e,context:t,container:i})}function Zl(e,t){return t==null?function(s,a){const o=T.useRef();return o.current||(o.current=e(s,a)),o}:function(s,a){const o=T.useRef();o.current||(o.current=e(s,a));const c=T.useRef(s),{instance:u}=o.current;return T.useEffect(function(){c.current!==s&&(t(u,s,c.current),c.current=s)},[u,s,a]),o}}function pw(e,t){T.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Yp(e){return function(i){const s=$l(),a=e(Gl(i,s),s);return Gp(s.map,i.attribution),Kp(a.current,i.eventHandlers),pw(a.current,s),a}}function mw(e,t){const i=Zl(e,t),s=Yp(i);return ow(s)}function fw(e,t){const i=Zl(e),s=uw(i,t);return lw(s)}function xw(e,t){const i=Zl(e,t),s=Yp(i);return cw(s)}function gw(e,t,i){const{opacity:s,zIndex:a}=t;s!=null&&s!==i.opacity&&e.setOpacity(s),a!=null&&a!==i.zIndex&&e.setZIndex(a)}function bw(){return $l().map}function al(){return al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},al.apply(this,arguments)}function vw({bounds:e,boundsOptions:t,center:i,children:s,className:a,id:o,placeholder:c,style:u,whenReady:h,zoom:d,...f},p){const[x]=T.useState({className:a,id:o,style:u}),[b,y]=T.useState(null);T.useImperativeHandle(p,()=>b?.map??null,[b]);const w=T.useCallback(S=>{if(S!==null&&b===null){const C=new Yr.Map(S,f);i!=null&&d!=null?C.setView(i,d):e!=null&&C.fitBounds(e,t),h!=null&&C.whenReady(h),y(sw(C))}},[]);T.useEffect(()=>()=>{b?.map.remove()},[b]);const j=b?te.createElement(Zp,{value:b},s):c??null;return te.createElement("div",al({},x,{ref:w}),j)}const Xp=T.forwardRef(vw),ol=mw(function({position:t,...i},s){const a=new Yr.Marker(t,i);return Wl(a,aw(s,{overlayContainer:a}))},function(t,i,s){i.position!==s.position&&t.setLatLng(i.position),i.icon!=null&&i.icon!==s.icon&&t.setIcon(i.icon),i.zIndexOffset!=null&&i.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(i.zIndexOffset),i.opacity!=null&&i.opacity!==s.opacity&&t.setOpacity(i.opacity),t.dragging!=null&&i.draggable!==s.draggable&&(i.draggable===!0?t.dragging.enable():t.dragging.disable())}),ll=fw(function(t,i){const s=new Yr.Popup(t,i.overlayContainer);return Wl(s,i)},function(t,i,{position:s},a){T.useEffect(function(){const{instance:c}=t;function u(d){d.popup===c&&(c.update(),a(!0))}function h(d){d.popup===c&&a(!1)}return i.map.on({popupopen:u,popupclose:h}),i.overlayContainer==null?(s!=null&&c.setLatLng(s),c.openOn(i.map)):i.overlayContainer.bindPopup(c),function(){i.map.off({popupopen:u,popupclose:h}),i.overlayContainer?.unbindPopup(),i.map.removeLayer(c)}},[t,i,a,s])}),Qp=xw(function({url:t,...i},s){const a=new Yr.TileLayer(t,Gl(i,s));return Wl(a,s)},function(t,i,s){gw(t,i,s);const{url:a}=i;a!=null&&a!==s.url&&t.setUrl(a)}),yw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",ww="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",_w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";delete _a.Icon.Default.prototype._getIconUrl;_a.Icon.Default.mergeOptions({iconRetinaUrl:yw,iconUrl:ww,shadowUrl:_w});function jw(){const[e,t]=T.useState("MAP"),[i,s]=T.useState([]);return T.useEffect(()=>{const a=rt.currentUser;if(!a)return;const o=tt($e(he,"drivers"),Oe("restaurantId","==",a.uid)),c=Ot(o,u=>{s(u.docs.map(h=>({id:h.id,...h.data()})))});return()=>c()},[]),n.jsxs("div",{className:"h-screen bg-[#0a0a0a] flex flex-col text-white",children:[n.jsxs("header",{className:"h-16 bg-[#121212] border-b border-white/5 px-6 flex items-center justify-between shrink-0 z-50",children:[n.jsxs(it,{to:"/dashboard",className:"flex items-center gap-2 text-white font-bold hover:text-primary",children:[n.jsx(_i,{size:20})," Voltar"]}),n.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1",children:[n.jsx("button",{onClick:()=>t("LIST"),className:`px-4 py-1 rounded text-xs font-bold transition-all ${e==="LIST"?"bg-white text-black":"text-white"}`,children:"Lista"}),n.jsx("button",{onClick:()=>t("MAP"),className:`px-4 py-1 rounded text-xs font-bold transition-all ${e==="MAP"?"bg-white text-black":"text-white"}`,children:"Mapa"})]})]}),n.jsx("div",{className:"flex-1 relative overflow-hidden",children:e==="MAP"?n.jsx("div",{style:{height:"100%",width:"100%"},children:n.jsxs(Xp,{center:[-23.5505,-46.6333],zoom:13,style:{height:"100%",width:"100%"},children:[n.jsx(Qp,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),i.map(a=>a.location&&n.jsx(ol,{position:[a.location.lat,a.location.lng],children:n.jsx(ll,{children:n.jsxs("div",{className:"text-black",children:[n.jsx("strong",{children:a.name}),n.jsx("br",{}),"Status: ",a.currentStatus]})})},a.id))]})}):n.jsxs("div",{className:"p-8 text-white overflow-y-auto h-full",children:[n.jsx("h2",{className:"font-bold text-xl mb-4",children:"Lista de Motoboys"}),i.length===0&&n.jsx("p",{className:"text-white/40",children:"Nenhum motoboy encontrado."}),i.map(a=>n.jsxs("div",{className:"bg-[#1a1a1a] p-4 rounded-xl border border-white/10 mb-2 flex justify-between items-center",children:[n.jsx("span",{className:"font-bold",children:a.name}),n.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${a.currentStatus==="busy"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:a.currentStatus==="busy"?"Ocupado":"Livre"})]},a.id))]})})]})}var Nw=Object.defineProperty,oa=Object.getOwnPropertySymbols,Jp=Object.prototype.hasOwnProperty,em=Object.prototype.propertyIsEnumerable,_d=(e,t,i)=>t in e?Nw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,cl=(e,t)=>{for(var i in t||(t={}))Jp.call(t,i)&&_d(e,i,t[i]);if(oa)for(var i of oa(t))em.call(t,i)&&_d(e,i,t[i]);return e},ul=(e,t)=>{var i={};for(var s in e)Jp.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&oa)for(var s of oa(e))t.indexOf(s)<0&&em.call(e,s)&&(i[s]=e[s]);return i};var wi;(e=>{const t=class Fe{constructor(h,d,f,p){if(this.version=h,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],h<Fe.MIN_VERSION||h>Fe.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=h*4+17;let x=[];for(let y=0;y<this.size;y++)x.push(!1);for(let y=0;y<this.size;y++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(f);if(this.drawCodewords(b),p==-1){let y=1e9;for(let w=0;w<8;w++){this.applyMask(w),this.drawFormatBits(w);const j=this.getPenaltyScore();j<y&&(p=w,y=j),this.applyMask(w)}}a(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(h,d){const f=e.QrSegment.makeSegments(h);return Fe.encodeSegments(f,d)}static encodeBinary(h,d){const f=e.QrSegment.makeBytes(h);return Fe.encodeSegments([f],d)}static encodeSegments(h,d,f=1,p=40,x=-1,b=!0){if(!(Fe.MIN_VERSION<=f&&f<=p&&p<=Fe.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let y,w;for(y=f;;y++){const N=Fe.getNumDataCodewords(y,d)*8,R=c.getTotalBits(h,y);if(R<=N){w=R;break}if(y>=p)throw new RangeError("Data too long")}for(const N of[Fe.Ecc.MEDIUM,Fe.Ecc.QUARTILE,Fe.Ecc.HIGH])b&&w<=Fe.getNumDataCodewords(y,N)*8&&(d=N);let j=[];for(const N of h){i(N.mode.modeBits,4,j),i(N.numChars,N.mode.numCharCountBits(y),j);for(const R of N.getData())j.push(R)}a(j.length==w);const S=Fe.getNumDataCodewords(y,d)*8;a(j.length<=S),i(0,Math.min(4,S-j.length),j),i(0,(8-j.length%8)%8,j),a(j.length%8==0);for(let N=236;j.length<S;N^=253)i(N,8,j);let C=[];for(;C.length*8<j.length;)C.push(0);return j.forEach((N,R)=>C[R>>>3]|=N<<7-(R&7)),new Fe(y,d,C,x)}getModule(h,d){return 0<=h&&h<this.size&&0<=d&&d<this.size&&this.modules[d][h]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const h=this.getAlignmentPatternPositions(),d=h.length;for(let f=0;f<d;f++)for(let p=0;p<d;p++)f==0&&p==0||f==0&&p==d-1||f==d-1&&p==0||this.drawAlignmentPattern(h[f],h[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(h){const d=this.errorCorrectionLevel.formatBits<<3|h;let f=d;for(let x=0;x<10;x++)f=f<<1^(f>>>9)*1335;const p=(d<<10|f)^21522;a(p>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,s(p,x));this.setFunctionModule(8,7,s(p,6)),this.setFunctionModule(8,8,s(p,7)),this.setFunctionModule(7,8,s(p,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,s(p,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,s(p,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,s(p,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let h=this.version;for(let f=0;f<12;f++)h=h<<1^(h>>>11)*7973;const d=this.version<<12|h;a(d>>>18==0);for(let f=0;f<18;f++){const p=s(d,f),x=this.size-11+f%3,b=Math.floor(f/3);this.setFunctionModule(x,b,p),this.setFunctionModule(b,x,p)}}drawFinderPattern(h,d){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const x=Math.max(Math.abs(p),Math.abs(f)),b=h+p,y=d+f;0<=b&&b<this.size&&0<=y&&y<this.size&&this.setFunctionModule(b,y,x!=2&&x!=4)}}drawAlignmentPattern(h,d){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(h+p,d+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(h,d,f){this.modules[d][h]=f,this.isFunction[d][h]=!0}addEccAndInterleave(h){const d=this.version,f=this.errorCorrectionLevel;if(h.length!=Fe.getNumDataCodewords(d,f))throw new RangeError("Invalid argument");const p=Fe.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][d],x=Fe.ECC_CODEWORDS_PER_BLOCK[f.ordinal][d],b=Math.floor(Fe.getNumRawDataModules(d)/8),y=p-b%p,w=Math.floor(b/p);let j=[];const S=Fe.reedSolomonComputeDivisor(x);for(let N=0,R=0;N<p;N++){let P=h.slice(R,R+w-x+(N<y?0:1));R+=P.length;const I=Fe.reedSolomonComputeRemainder(P,S);N<y&&P.push(0),j.push(P.concat(I))}let C=[];for(let N=0;N<j[0].length;N++)j.forEach((R,P)=>{(N!=w-x||P>=y)&&C.push(R[N])});return a(C.length==b),C}drawCodewords(h){if(h.length!=Math.floor(Fe.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let x=0;x<2;x++){const b=f-x,w=(f+1&2)==0?this.size-1-p:p;!this.isFunction[w][b]&&d<h.length*8&&(this.modules[w][b]=s(h[d>>>3],7-(d&7)),d++)}}a(d==h.length*8)}applyMask(h){if(h<0||h>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let f=0;f<this.size;f++){let p;switch(h){case 0:p=(f+d)%2==0;break;case 1:p=d%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+d)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(d/2))%2==0;break;case 5:p=f*d%2+f*d%3==0;break;case 6:p=(f*d%2+f*d%3)%2==0;break;case 7:p=((f+d)%2+f*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][f]&&p&&(this.modules[d][f]=!this.modules[d][f])}}getPenaltyScore(){let h=0;for(let x=0;x<this.size;x++){let b=!1,y=0,w=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[x][j]==b?(y++,y==5?h+=Fe.PENALTY_N1:y>5&&h++):(this.finderPenaltyAddHistory(y,w),b||(h+=this.finderPenaltyCountPatterns(w)*Fe.PENALTY_N3),b=this.modules[x][j],y=1);h+=this.finderPenaltyTerminateAndCount(b,y,w)*Fe.PENALTY_N3}for(let x=0;x<this.size;x++){let b=!1,y=0,w=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][x]==b?(y++,y==5?h+=Fe.PENALTY_N1:y>5&&h++):(this.finderPenaltyAddHistory(y,w),b||(h+=this.finderPenaltyCountPatterns(w)*Fe.PENALTY_N3),b=this.modules[j][x],y=1);h+=this.finderPenaltyTerminateAndCount(b,y,w)*Fe.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let b=0;b<this.size-1;b++){const y=this.modules[x][b];y==this.modules[x][b+1]&&y==this.modules[x+1][b]&&y==this.modules[x+1][b+1]&&(h+=Fe.PENALTY_N2)}let d=0;for(const x of this.modules)d=x.reduce((b,y)=>b+(y?1:0),d);const f=this.size*this.size,p=Math.ceil(Math.abs(d*20-f*10)/f)-1;return a(0<=p&&p<=9),h+=p*Fe.PENALTY_N4,a(0<=h&&h<=2568888),h}getAlignmentPatternPositions(){if(this.version==1)return[];{const h=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(h*2-2))*2;let f=[6];for(let p=this.size-7;f.length<h;p-=d)f.splice(1,0,p);return f}}static getNumRawDataModules(h){if(h<Fe.MIN_VERSION||h>Fe.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*h+128)*h+64;if(h>=2){const f=Math.floor(h/7)+2;d-=(25*f-10)*f-55,h>=7&&(d-=36)}return a(208<=d&&d<=29648),d}static getNumDataCodewords(h,d){return Math.floor(Fe.getNumRawDataModules(h)/8)-Fe.ECC_CODEWORDS_PER_BLOCK[d.ordinal][h]*Fe.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][h]}static reedSolomonComputeDivisor(h){if(h<1||h>255)throw new RangeError("Degree out of range");let d=[];for(let p=0;p<h-1;p++)d.push(0);d.push(1);let f=1;for(let p=0;p<h;p++){for(let x=0;x<d.length;x++)d[x]=Fe.reedSolomonMultiply(d[x],f),x+1<d.length&&(d[x]^=d[x+1]);f=Fe.reedSolomonMultiply(f,2)}return d}static reedSolomonComputeRemainder(h,d){let f=d.map(p=>0);for(const p of h){const x=p^f.shift();f.push(0),d.forEach((b,y)=>f[y]^=Fe.reedSolomonMultiply(b,x))}return f}static reedSolomonMultiply(h,d){if(h>>>8||d>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(d>>>p&1)*h;return a(f>>>8==0),f}finderPenaltyCountPatterns(h){const d=h[1];a(d<=this.size*3);const f=d>0&&h[2]==d&&h[3]==d*3&&h[4]==d&&h[5]==d;return(f&&h[0]>=d*4&&h[6]>=d?1:0)+(f&&h[6]>=d*4&&h[0]>=d?1:0)}finderPenaltyTerminateAndCount(h,d,f){return h&&(this.finderPenaltyAddHistory(d,f),d=0),d+=this.size,this.finderPenaltyAddHistory(d,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(h,d){d[0]==0&&(h+=this.size),d.pop(),d.unshift(h)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function i(u,h,d){if(h<0||h>31||u>>>h)throw new RangeError("Value out of range");for(let f=h-1;f>=0;f--)d.push(u>>>f&1)}function s(u,h){return(u>>>h&1)!=0}function a(u){if(!u)throw new Error("Assertion error")}const o=class ct{constructor(h,d,f){if(this.mode=h,this.numChars=d,this.bitData=f,d<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(h){let d=[];for(const f of h)i(f,8,d);return new ct(ct.Mode.BYTE,h.length,d)}static makeNumeric(h){if(!ct.isNumeric(h))throw new RangeError("String contains non-numeric characters");let d=[];for(let f=0;f<h.length;){const p=Math.min(h.length-f,3);i(parseInt(h.substring(f,f+p),10),p*3+1,d),f+=p}return new ct(ct.Mode.NUMERIC,h.length,d)}static makeAlphanumeric(h){if(!ct.isAlphanumeric(h))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],f;for(f=0;f+2<=h.length;f+=2){let p=ct.ALPHANUMERIC_CHARSET.indexOf(h.charAt(f))*45;p+=ct.ALPHANUMERIC_CHARSET.indexOf(h.charAt(f+1)),i(p,11,d)}return f<h.length&&i(ct.ALPHANUMERIC_CHARSET.indexOf(h.charAt(f)),6,d),new ct(ct.Mode.ALPHANUMERIC,h.length,d)}static makeSegments(h){return h==""?[]:ct.isNumeric(h)?[ct.makeNumeric(h)]:ct.isAlphanumeric(h)?[ct.makeAlphanumeric(h)]:[ct.makeBytes(ct.toUtf8ByteArray(h))]}static makeEci(h){let d=[];if(h<0)throw new RangeError("ECI assignment value out of range");if(h<128)i(h,8,d);else if(h<16384)i(2,2,d),i(h,14,d);else if(h<1e6)i(6,3,d),i(h,21,d);else throw new RangeError("ECI assignment value out of range");return new ct(ct.Mode.ECI,0,d)}static isNumeric(h){return ct.NUMERIC_REGEX.test(h)}static isAlphanumeric(h){return ct.ALPHANUMERIC_REGEX.test(h)}getData(){return this.bitData.slice()}static getTotalBits(h,d){let f=0;for(const p of h){const x=p.mode.numCharCountBits(d);if(p.numChars>=1<<x)return 1/0;f+=4+x+p.bitData.length}return f}static toUtf8ByteArray(h){h=encodeURI(h);let d=[];for(let f=0;f<h.length;f++)h.charAt(f)!="%"?d.push(h.charCodeAt(f)):(d.push(parseInt(h.substring(f+1,f+3),16)),f+=2);return d}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=o;e.QrSegment=o})(wi||(wi={}));(e=>{(t=>{const i=class{constructor(a,o){this.ordinal=a,this.formatBits=o}};i.LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),t.Ecc=i})(e.QrCode||(e.QrCode={}))})(wi||(wi={}));(e=>{(t=>{const i=class{constructor(a,o){this.modeBits=a,this.numBitsCharCount=o}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};i.NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),t.Mode=i})(e.QrSegment||(e.QrSegment={}))})(wi||(wi={}));var Ki=wi;var kw={L:Ki.QrCode.Ecc.LOW,M:Ki.QrCode.Ecc.MEDIUM,Q:Ki.QrCode.Ecc.QUARTILE,H:Ki.QrCode.Ecc.HIGH},tm=128,nm="L",im="#FFFFFF",rm="#000000",sm=!1,am=1,Cw=4,Ew=0,Sw=.1;function om(e,t=0){const i=[];return e.forEach(function(s,a){let o=null;s.forEach(function(c,u){if(!c&&o!==null){i.push(`M${o+t} ${a+t}h${u-o}v1H${o+t}z`),o=null;return}if(u===s.length-1){if(!c)return;o===null?i.push(`M${u+t},${a+t} h1v1H${u+t}z`):i.push(`M${o+t},${a+t} h${u+1-o}v1H${o+t}z`);return}c&&o===null&&(o=u)})}),i.join("")}function lm(e,t){return e.slice().map((i,s)=>s<t.y||s>=t.y+t.h?i:i.map((a,o)=>o<t.x||o>=t.x+t.w?a:!1))}function Aw(e,t,i,s){if(s==null)return null;const a=e.length+i*2,o=Math.floor(t*Sw),c=a/t,u=(s.width||o)*c,h=(s.height||o)*c,d=s.x==null?e.length/2-u/2:s.x*c,f=s.y==null?e.length/2-h/2:s.y*c,p=s.opacity==null?1:s.opacity;let x=null;if(s.excavate){let y=Math.floor(d),w=Math.floor(f),j=Math.ceil(u+d-y),S=Math.ceil(h+f-w);x={x:y,y:w,w:j,h:S}}const b=s.crossOrigin;return{x:d,y:f,h,w:u,excavation:x,opacity:p,crossOrigin:b}}function Tw(e,t){return t!=null?Math.max(Math.floor(t),0):e?Cw:Ew}function cm({value:e,level:t,minVersion:i,includeMargin:s,marginSize:a,imageSettings:o,size:c,boostLevel:u}){let h=te.useMemo(()=>{const y=(Array.isArray(e)?e:[e]).reduce((w,j)=>(w.push(...Ki.QrSegment.makeSegments(j)),w),[]);return Ki.QrCode.encodeSegments(y,kw[t],i,void 0,void 0,u)},[e,t,i,u]);const{cells:d,margin:f,numCells:p,calculatedImageSettings:x}=te.useMemo(()=>{let b=h.getModules();const y=Tw(s,a),w=b.length+y*2,j=Aw(b,c,y,o);return{cells:b,margin:y,numCells:w,calculatedImageSettings:j}},[h,c,o,s,a]);return{qrcode:h,margin:f,cells:d,numCells:p,calculatedImageSettings:x}}var Pw=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Iw=te.forwardRef(function(t,i){const s=t,{value:a,size:o=tm,level:c=nm,bgColor:u=im,fgColor:h=rm,includeMargin:d=sm,minVersion:f=am,boostLevel:p,marginSize:x,imageSettings:b}=s,w=ul(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=w,S=ul(w,["style"]),C=b?.src,N=te.useRef(null),R=te.useRef(null),P=te.useCallback(Z=>{N.current=Z,typeof i=="function"?i(Z):i&&(i.current=Z)},[i]),[I,F]=te.useState(!1),{margin:$,cells:ne,numCells:O,calculatedImageSettings:D}=cm({value:a,level:c,minVersion:f,boostLevel:p,includeMargin:d,marginSize:x,imageSettings:b,size:o});te.useEffect(()=>{if(N.current!=null){const Z=N.current,W=Z.getContext("2d");if(!W)return;let ee=ne;const ce=R.current,se=D!=null&&ce!==null&&ce.complete&&ce.naturalHeight!==0&&ce.naturalWidth!==0;se&&D.excavation!=null&&(ee=lm(ne,D.excavation));const ve=window.devicePixelRatio||1;Z.height=Z.width=o*ve;const _=o/O*ve;W.scale(_,_),W.fillStyle=u,W.fillRect(0,0,O,O),W.fillStyle=h,Pw?W.fill(new Path2D(om(ee,$))):ne.forEach(function(A,H){A.forEach(function(k,B){k&&W.fillRect(B+$,H+$,1,1)})}),D&&(W.globalAlpha=D.opacity),se&&W.drawImage(ce,D.x+$,D.y+$,D.w,D.h)}}),te.useEffect(()=>{F(!1)},[C]);const M=cl({height:o,width:o},j);let q=null;return C!=null&&(q=te.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{F(!0)},ref:R,crossOrigin:D?.crossOrigin})),te.createElement(te.Fragment,null,te.createElement("canvas",cl({style:M,height:o,width:o,ref:P,role:"img"},S)),q)});Iw.displayName="QRCodeCanvas";var Kl=te.forwardRef(function(t,i){const s=t,{value:a,size:o=tm,level:c=nm,bgColor:u=im,fgColor:h=rm,includeMargin:d=sm,minVersion:f=am,boostLevel:p,title:x,marginSize:b,imageSettings:y}=s,w=ul(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:S,numCells:C,calculatedImageSettings:N}=cm({value:a,level:c,minVersion:f,boostLevel:p,includeMargin:d,marginSize:b,imageSettings:y,size:o});let R=S,P=null;y!=null&&N!=null&&(N.excavation!=null&&(R=lm(S,N.excavation)),P=te.createElement("image",{href:y.src,height:N.h,width:N.w,x:N.x+j,y:N.y+j,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const I=om(R,j);return te.createElement("svg",cl({height:o,width:o,viewBox:`0 0 ${C} ${C}`,ref:i,role:"img"},w),!!x&&te.createElement("title",null,x),te.createElement("path",{fill:u,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),te.createElement("path",{fill:h,d:I,shapeRendering:"crispEdges"}),P)});Kl.displayName="QRCodeSVG";const Rw=({order:e})=>{const t=`https://emprata.ai/menu/${e.restaurantId}`;return n.jsxs("div",{className:"w-[80mm] p-2 font-mono text-black text-xs leading-tight",children:[n.jsxs("div",{className:"text-center border-b border-black pb-2 mb-2",children:[n.jsx("h1",{className:"text-lg font-black uppercase",children:"EmprataAI"}),n.jsxs("p",{children:["Senha: #",e.id.slice(-4).toUpperCase()]}),n.jsx("p",{children:new Date().toLocaleString()})]}),n.jsxs("div",{className:"mb-2",children:[n.jsx("p",{className:"font-bold text-sm",children:e.customer.name}),n.jsxs("p",{children:["Origem: ",e.source||"App Prprio"]})]}),n.jsx("div",{className:"border-b border-black pb-2 mb-2",children:e.items.map((i,s)=>n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsxs("span",{className:"font-bold w-6",children:[i.quantity,"x"]}),n.jsx("span",{className:"flex-1",children:i.name}),n.jsxs("span",{children:["R$ ",(i.price*i.quantity).toFixed(2)]})]},s))}),n.jsx("div",{className:"text-right font-bold text-sm mb-4",children:n.jsxs("p",{children:["Total: R$ ",e.financials?.total?.toFixed(2)||e.total?.toFixed(2)]})}),e.source!=="APP_PROPRIO"&&n.jsxs("div",{className:"border-2 border-dashed border-black p-2 text-center rounded-lg mt-4",children:[n.jsx("p",{className:"font-bold text-sm mb-1",children:"Ganhe 10% OFF no prximo!"}),n.jsx("p",{className:"text-[10px] mb-2",children:"Escaneie e pea direto pelo nosso App:"}),n.jsx("div",{className:"flex justify-center my-2",children:n.jsx(Kl,{value:t,size:100})}),n.jsx("p",{className:"text-[10px] font-bold",children:"emprata.ai/menu/seurestaurante"})]}),n.jsx("div",{className:"text-center text-[10px] mt-4",children:"Powered by Emprata.ai"})]})};function jd(){const[e,t]=T.useState([]),[i,s]=T.useState([]),[a,o]=T.useState(null),[c,u]=T.useState(null),h=T.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),d=T.useRef(!0),f=T.useRef(0);T.useEffect(()=>{const y=rt.currentUser;if(!y)return;const w=tt($e(he,"orders"),Oe("restaurantId","==",y.uid),Oe("status","in",["PENDING","pending","PREPARING","preparing","READY","ready"]),Ni("createdAt","asc")),j=Ot(w,S=>{const C=[],N=[];S.docs.forEach(R=>{const P={id:R.id,...R.data()},I=P.status?.toUpperCase();I==="PENDING"?C.push(P):I==="PREPARING"&&N.push(P)}),!d.current&&C.length>f.current&&(h.current.play().catch(()=>{}),ie.info(" Novo pedido na cozinha!")),f.current=C.length,t(C),s(N),d.current=!1});return()=>j()},[]);const p=async(y,w)=>{o(y);try{await Et(ze(he,"orders",y),{status:w,...w==="READY"?{kitchenFinishedAt:Lt()}:{},updatedAt:Lt()}),w==="READY"&&ie.success("Pedido enviado para expedio!")}catch(j){console.error(j),ie.error("Erro ao atualizar. Tente novamente.")}finally{o(null)}},x=y=>{u(y),setTimeout(()=>{window.print(),u(null)},500)},b=y=>{if(!y)return"0m";const w=y.toDate?y.toDate().getTime():new Date(y).getTime();return`${Math.floor((Date.now()-w)/6e4)}m`};return n.jsxs("div",{className:"min-h-screen bg-[#101010] text-white p-4",children:[c&&n.jsx("div",{className:"hidden print:block fixed top-0 left-0 bg-white text-black w-full h-full z-[9999]",children:n.jsx(Rw,{order:c})}),n.jsxs("header",{className:"flex items-center justify-between mb-6 p-4 bg-[#1a1a1a] rounded-2xl border border-white/5 shadow-xl print:hidden",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-orange-500/10 rounded-xl text-orange-500 border border-orange-500/20",children:n.jsx(gt,{size:32})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-black uppercase tracking-tighter flex items-center gap-2",children:["Cozinha ",n.jsx("span",{className:"text-orange-500",children:"Inteligente"}),n.jsx("span",{className:"text-[10px] bg-white/10 px-2 py-0.5 rounded text-white/40",children:"V2.0"})]}),n.jsxs("p",{className:"text-xs text-white/40 font-bold flex items-center gap-1",children:[n.jsx(Lx,{size:10})," Sistema de som ativo"]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"block text-3xl font-black text-white",children:e.length}),n.jsx("span",{className:"text-[10px] text-white/40 uppercase font-bold",children:"A Fazer"})]}),n.jsx("div",{className:"w-px bg-white/10"}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"block text-3xl font-black text-orange-500",children:i.length}),n.jsx("span",{className:"text-[10px] text-orange-500/60 uppercase font-bold",children:"No Fogo"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-160px)] print:hidden",children:[n.jsxs("div",{className:"bg-[#0a0a0a] rounded-3xl border border-white/5 p-4 flex flex-col shadow-inner",children:[n.jsxs("h2",{className:"text-sm font-black uppercase mb-4 flex items-center gap-2 text-white/60 tracking-widest",children:[n.jsx(Nl,{className:"w-4 h-4 text-blue-500"})," Fila de Pedidos"]}),n.jsx("div",{className:"space-y-3 overflow-y-auto flex-1 pr-2",children:n.jsxs(Ye,{mode:"popLayout",children:[e.length===0&&n.jsxs("div",{className:"text-center py-20 opacity-30",children:[n.jsx(Ox,{size:48,className:"mx-auto mb-4"}),n.jsx("p",{children:"Tudo limpo por aqui, Chef!"})]}),e.map(y=>n.jsxs(K.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,x:-50},className:"bg-[#18181b] p-0 rounded-xl border border-white/5 overflow-hidden group hover:border-blue-500/50 transition-all relative",children:[y.paymentStatus==="PAID"&&n.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-black text-[10px] font-black px-2 py-1 rounded shadow-lg animate-bounce z-20",children:" PAGO (PIX)"}),n.jsxs("div",{className:"p-4 flex justify-between items-start bg-gradient-to-r from-blue-500/5 to-transparent",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-bold text-lg text-white",children:y.customer.name}),n.jsxs("span",{className:"text-[10px] font-mono text-white/30",children:["#",y.id.slice(-4)]})]}),n.jsxs("div",{className:"flex gap-2",children:[y.deliveryType==="DINE_IN"?n.jsxs("span",{className:"bg-purple-500/20 text-purple-400 text-[10px] px-2 py-0.5 rounded font-bold uppercase",children:["Mesa ",y.tableNumber]}):n.jsx("span",{className:"bg-green-500/20 text-green-400 text-[10px] px-2 py-0.5 rounded font-bold uppercase",children:y.source||"Delivery"}),n.jsxs("span",{className:"bg-white/5 text-white/60 text-[10px] px-2 py-0.5 rounded font-bold uppercase flex items-center gap-1",children:[n.jsx(cu,{size:10})," ",b(y.createdAt)]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>x(y),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-white/60 transition-colors",title:"Imprimir Ticket",children:n.jsx(uu,{size:18})}),n.jsx("button",{onClick:()=>p(y.id,"PREPARING"),disabled:a===y.id,className:"bg-blue-600 hover:bg-blue-500 text-white px-5 py-3 rounded-xl font-bold text-xs uppercase tracking-wider shadow-lg shadow-blue-900/20 transition-all active:scale-95 disabled:opacity-50",children:a===y.id?"...":"Iniciar"})]})]}),n.jsxs("div",{className:"p-4 border-t border-white/5 bg-black/20",children:[n.jsx("ul",{className:"space-y-2",children:y.items.map((w,j)=>n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsxs("span",{className:"font-black text-blue-400 bg-blue-400/10 px-1.5 rounded text-sm",children:[w.quantity,"x"]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-white/90 block",children:w.name}),w.notes&&n.jsxs("span",{className:"text-xs text-red-400 font-bold block mt-0.5",children:[" ",w.notes]}),w.options&&w.options.length>0&&n.jsxs("span",{className:"text-[10px] text-white/40 block",children:["+ ",w.options.map(S=>S.name).join(", ")]})]})]},j))}),y.notes&&n.jsxs("div",{className:"mt-3 p-2 bg-yellow-500/10 border border-yellow-500/20 rounded text-xs text-yellow-200",children:[" ",y.notes]})]})]},y.id))]})})]}),n.jsxs("div",{className:"bg-[#0a0a0a] rounded-3xl border border-white/5 p-4 flex flex-col shadow-inner",children:[n.jsxs("h2",{className:"text-sm font-black uppercase mb-4 flex items-center gap-2 text-white/60 tracking-widest",children:[n.jsx(Zo,{className:"w-4 h-4 text-orange-500"})," Em Preparo"]}),n.jsx("div",{className:"space-y-3 overflow-y-auto flex-1 pr-2",children:n.jsx(Ye,{mode:"popLayout",children:i.map(y=>n.jsxs(K.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,x:50},className:"bg-[#18181b] rounded-xl border-l-4 border-orange-500 overflow-hidden relative",children:[n.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-5 pointer-events-none",children:n.jsx(Zo,{size:100})}),n.jsxs("div",{className:"p-5 flex justify-between items-start relative z-10",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:y.customer.name}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-orange-500 text-xs font-bold uppercase flex items-center gap-1 bg-orange-500/10 px-2 py-1 rounded",children:[n.jsx(xi,{size:12})," ",b(y.createdAt)]}),n.jsxs("span",{className:"text-white/30 text-xs font-mono",children:[y.items.reduce((w,j)=>w+j.quantity,0)," itens"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>x(y),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-white/60 transition-colors",title:"Imprimir Ticket",children:n.jsx(uu,{size:18})}),n.jsxs("button",{onClick:()=>p(y.id,"READY"),disabled:a===y.id,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-4 rounded-xl font-bold text-sm uppercase tracking-wider shadow-lg shadow-green-900/20 transition-all active:scale-95 flex items-center gap-2 disabled:opacity-50",children:[a===y.id?n.jsx(cu,{className:"animate-spin"}):n.jsx(gi,{size:18}),n.jsx("span",{children:"Pronto"})]})]})]}),n.jsx("div",{className:"px-5 pb-5",children:n.jsx("div",{className:"flex flex-wrap gap-2",children:y.items.map((w,j)=>n.jsxs("span",{className:"bg-white/5 border border-white/10 px-3 py-1.5 rounded-lg text-sm font-medium text-white/80",children:[n.jsxs("span",{className:"text-orange-500 font-bold mr-1",children:[w.quantity,"x"]})," ",w.name]},j))})})]},y.id))})})]})]})]})}var Ui={},go,Nd;function um(){return Nd||(Nd=1,go={L:1,M:0,Q:3,H:2}),go}var bo,kd;function dm(){return kd||(kd=1,bo={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),bo}var vo,Cd;function Mw(){if(Cd)return vo;Cd=1;var e=dm();function t(i){this.mode=e.MODE_8BIT_BYTE,this.data=i}return t.prototype={getLength:function(i){return this.data.length},write:function(i){for(var s=0;s<this.data.length;s++)i.put(this.data.charCodeAt(s),8)}},vo=t,vo}var yo,Ed;function Lw(){if(Ed)return yo;Ed=1;var e=um();function t(i,s){this.totalCount=i,this.dataCount=s}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(i,s){var a=t.getRsBlockTable(i,s);if(a==null)throw new Error("bad rs block @ typeNumber:"+i+"/errorCorrectLevel:"+s);for(var o=a.length/3,c=new Array,u=0;u<o;u++)for(var h=a[u*3+0],d=a[u*3+1],f=a[u*3+2],p=0;p<h;p++)c.push(new t(d,f));return c},t.getRsBlockTable=function(i,s){switch(s){case e.L:return t.RS_BLOCK_TABLE[(i-1)*4+0];case e.M:return t.RS_BLOCK_TABLE[(i-1)*4+1];case e.Q:return t.RS_BLOCK_TABLE[(i-1)*4+2];case e.H:return t.RS_BLOCK_TABLE[(i-1)*4+3];default:return}},yo=t,yo}var wo,Sd;function Ow(){if(Sd)return wo;Sd=1;function e(){this.buffer=new Array,this.length=0}return e.prototype={get:function(t){var i=Math.floor(t/8);return(this.buffer[i]>>>7-t%8&1)==1},put:function(t,i){for(var s=0;s<i;s++)this.putBit((t>>>i-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),t&&(this.buffer[i]|=128>>>this.length%8),this.length++}},wo=e,wo}var _o,Ad;function hm(){if(Ad)return _o;Ad=1;for(var e={glog:function(i){if(i<1)throw new Error("glog("+i+")");return e.LOG_TABLE[i]},gexp:function(i){for(;i<0;)i+=255;for(;i>=256;)i-=255;return e.EXP_TABLE[i]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)e.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(var t=0;t<255;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t;return _o=e,_o}var jo,Td;function pm(){if(Td)return jo;Td=1;var e=hm();function t(i,s){if(i.length==null)throw new Error(i.length+"/"+s);for(var a=0;a<i.length&&i[a]==0;)a++;this.num=new Array(i.length-a+s);for(var o=0;o<i.length-a;o++)this.num[o]=i[o+a]}return t.prototype={get:function(i){return this.num[i]},getLength:function(){return this.num.length},multiply:function(i){for(var s=new Array(this.getLength()+i.getLength()-1),a=0;a<this.getLength();a++)for(var o=0;o<i.getLength();o++)s[a+o]^=e.gexp(e.glog(this.get(a))+e.glog(i.get(o)));return new t(s,0)},mod:function(i){if(this.getLength()-i.getLength()<0)return this;for(var s=e.glog(this.get(0))-e.glog(i.get(0)),a=new Array(this.getLength()),o=0;o<this.getLength();o++)a[o]=this.get(o);for(var o=0;o<i.getLength();o++)a[o]^=e.gexp(e.glog(i.get(o))+s);return new t(a,0).mod(i)}},jo=t,jo}var No,Pd;function Dw(){if(Pd)return No;Pd=1;var e=dm(),t=pm(),i=hm(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(o){for(var c=o<<10;a.getBCHDigit(c)-a.getBCHDigit(a.G15)>=0;)c^=a.G15<<a.getBCHDigit(c)-a.getBCHDigit(a.G15);return(o<<10|c)^a.G15_MASK},getBCHTypeNumber:function(o){for(var c=o<<12;a.getBCHDigit(c)-a.getBCHDigit(a.G18)>=0;)c^=a.G18<<a.getBCHDigit(c)-a.getBCHDigit(a.G18);return o<<12|c},getBCHDigit:function(o){for(var c=0;o!=0;)c++,o>>>=1;return c},getPatternPosition:function(o){return a.PATTERN_POSITION_TABLE[o-1]},getMask:function(o,c,u){switch(o){case s.PATTERN000:return(c+u)%2==0;case s.PATTERN001:return c%2==0;case s.PATTERN010:return u%3==0;case s.PATTERN011:return(c+u)%3==0;case s.PATTERN100:return(Math.floor(c/2)+Math.floor(u/3))%2==0;case s.PATTERN101:return c*u%2+c*u%3==0;case s.PATTERN110:return(c*u%2+c*u%3)%2==0;case s.PATTERN111:return(c*u%3+(c+u)%2)%2==0;default:throw new Error("bad maskPattern:"+o)}},getErrorCorrectPolynomial:function(o){for(var c=new t([1],0),u=0;u<o;u++)c=c.multiply(new t([1,i.gexp(u)],0));return c},getLengthInBits:function(o,c){if(1<=c&&c<10)switch(o){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:return 8;case e.MODE_KANJI:return 8;default:throw new Error("mode:"+o)}else if(c<27)switch(o){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+o)}else if(c<41)switch(o){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+o)}else throw new Error("type:"+c)},getLostPoint:function(o){for(var c=o.getModuleCount(),u=0,h=0;h<c;h++)for(var d=0;d<c;d++){for(var f=0,p=o.isDark(h,d),x=-1;x<=1;x++)if(!(h+x<0||c<=h+x))for(var b=-1;b<=1;b++)d+b<0||c<=d+b||x==0&&b==0||p==o.isDark(h+x,d+b)&&f++;f>5&&(u+=3+f-5)}for(var h=0;h<c-1;h++)for(var d=0;d<c-1;d++){var y=0;o.isDark(h,d)&&y++,o.isDark(h+1,d)&&y++,o.isDark(h,d+1)&&y++,o.isDark(h+1,d+1)&&y++,(y==0||y==4)&&(u+=3)}for(var h=0;h<c;h++)for(var d=0;d<c-6;d++)o.isDark(h,d)&&!o.isDark(h,d+1)&&o.isDark(h,d+2)&&o.isDark(h,d+3)&&o.isDark(h,d+4)&&!o.isDark(h,d+5)&&o.isDark(h,d+6)&&(u+=40);for(var d=0;d<c;d++)for(var h=0;h<c-6;h++)o.isDark(h,d)&&!o.isDark(h+1,d)&&o.isDark(h+2,d)&&o.isDark(h+3,d)&&o.isDark(h+4,d)&&!o.isDark(h+5,d)&&o.isDark(h+6,d)&&(u+=40);for(var w=0,d=0;d<c;d++)for(var h=0;h<c;h++)o.isDark(h,d)&&w++;var j=Math.abs(100*w/c/c-50)/5;return u+=j*10,u}};return No=a,No}var ko,Id;function zw(){if(Id)return ko;Id=1;var e=Mw(),t=Lw(),i=Ow(),s=Dw(),a=pm();function o(u,h){this.typeNumber=u,this.errorCorrectLevel=h,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=o.prototype;return c.addData=function(u){var h=new e(u);this.dataList.push(h),this.dataCache=null},c.isDark=function(u,h){if(u<0||this.moduleCount<=u||h<0||this.moduleCount<=h)throw new Error(u+","+h);return this.modules[u][h]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var u=1;for(u=1;u<40;u++){for(var h=t.getRSBlocks(u,this.errorCorrectLevel),d=new i,f=0,p=0;p<h.length;p++)f+=h[p].dataCount;for(var p=0;p<this.dataList.length;p++){var x=this.dataList[p];d.put(x.mode,4),d.put(x.getLength(),s.getLengthInBits(x.mode,u)),x.write(d)}if(d.getLengthInBits()<=f*8)break}this.typeNumber=u}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(u,h){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var f=0;f<this.moduleCount;f++)this.modules[d][f]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(u,h),this.typeNumber>=7&&this.setupTypeNumber(u),this.dataCache==null&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,h)},c.setupPositionProbePattern=function(u,h){for(var d=-1;d<=7;d++)if(!(u+d<=-1||this.moduleCount<=u+d))for(var f=-1;f<=7;f++)h+f<=-1||this.moduleCount<=h+f||(0<=d&&d<=6&&(f==0||f==6)||0<=f&&f<=6&&(d==0||d==6)||2<=d&&d<=4&&2<=f&&f<=4?this.modules[u+d][h+f]=!0:this.modules[u+d][h+f]=!1)},c.getBestMaskPattern=function(){for(var u=0,h=0,d=0;d<8;d++){this.makeImpl(!0,d);var f=s.getLostPoint(this);(d==0||u>f)&&(u=f,h=d)}return h},c.createMovieClip=function(u,h,d){var f=u.createEmptyMovieClip(h,d),p=1;this.make();for(var x=0;x<this.modules.length;x++)for(var b=x*p,y=0;y<this.modules[x].length;y++){var w=y*p,j=this.modules[x][y];j&&(f.beginFill(0,100),f.moveTo(w,b),f.lineTo(w+p,b),f.lineTo(w+p,b+p),f.lineTo(w,b+p),f.endFill())}return f},c.setupTimingPattern=function(){for(var u=8;u<this.moduleCount-8;u++)this.modules[u][6]==null&&(this.modules[u][6]=u%2==0);for(var h=8;h<this.moduleCount-8;h++)this.modules[6][h]==null&&(this.modules[6][h]=h%2==0)},c.setupPositionAdjustPattern=function(){for(var u=s.getPatternPosition(this.typeNumber),h=0;h<u.length;h++)for(var d=0;d<u.length;d++){var f=u[h],p=u[d];if(this.modules[f][p]==null)for(var x=-2;x<=2;x++)for(var b=-2;b<=2;b++)x==-2||x==2||b==-2||b==2||x==0&&b==0?this.modules[f+x][p+b]=!0:this.modules[f+x][p+b]=!1}},c.setupTypeNumber=function(u){for(var h=s.getBCHTypeNumber(this.typeNumber),d=0;d<18;d++){var f=!u&&(h>>d&1)==1;this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=f}for(var d=0;d<18;d++){var f=!u&&(h>>d&1)==1;this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=f}},c.setupTypeInfo=function(u,h){for(var d=this.errorCorrectLevel<<3|h,f=s.getBCHTypeInfo(d),p=0;p<15;p++){var x=!u&&(f>>p&1)==1;p<6?this.modules[p][8]=x:p<8?this.modules[p+1][8]=x:this.modules[this.moduleCount-15+p][8]=x}for(var p=0;p<15;p++){var x=!u&&(f>>p&1)==1;p<8?this.modules[8][this.moduleCount-p-1]=x:p<9?this.modules[8][15-p-1+1]=x:this.modules[8][15-p-1]=x}this.modules[this.moduleCount-8][8]=!u},c.mapData=function(u,h){for(var d=-1,f=this.moduleCount-1,p=7,x=0,b=this.moduleCount-1;b>0;b-=2)for(b==6&&b--;;){for(var y=0;y<2;y++)if(this.modules[f][b-y]==null){var w=!1;x<u.length&&(w=(u[x]>>>p&1)==1);var j=s.getMask(h,f,b-y);j&&(w=!w),this.modules[f][b-y]=w,p--,p==-1&&(x++,p=7)}if(f+=d,f<0||this.moduleCount<=f){f-=d,d=-d;break}}},o.PAD0=236,o.PAD1=17,o.createData=function(u,h,d){for(var f=t.getRSBlocks(u,h),p=new i,x=0;x<d.length;x++){var b=d[x];p.put(b.mode,4),p.put(b.getLength(),s.getLengthInBits(b.mode,u)),b.write(p)}for(var y=0,x=0;x<f.length;x++)y+=f[x].dataCount;if(p.getLengthInBits()>y*8)throw new Error("code length overflow. ("+p.getLengthInBits()+">"+y*8+")");for(p.getLengthInBits()+4<=y*8&&p.put(0,4);p.getLengthInBits()%8!=0;)p.putBit(!1);for(;!(p.getLengthInBits()>=y*8||(p.put(o.PAD0,8),p.getLengthInBits()>=y*8));)p.put(o.PAD1,8);return o.createBytes(p,f)},o.createBytes=function(u,h){for(var d=0,f=0,p=0,x=new Array(h.length),b=new Array(h.length),y=0;y<h.length;y++){var w=h[y].dataCount,j=h[y].totalCount-w;f=Math.max(f,w),p=Math.max(p,j),x[y]=new Array(w);for(var S=0;S<x[y].length;S++)x[y][S]=255&u.buffer[S+d];d+=w;var C=s.getErrorCorrectPolynomial(j),N=new a(x[y],C.getLength()-1),R=N.mod(C);b[y]=new Array(C.getLength()-1);for(var S=0;S<b[y].length;S++){var P=S+R.getLength()-b[y].length;b[y][S]=P>=0?R.get(P):0}}for(var I=0,S=0;S<h.length;S++)I+=h[S].totalCount;for(var F=new Array(I),$=0,S=0;S<f;S++)for(var y=0;y<h.length;y++)S<x[y].length&&(F[$++]=x[y][S]);for(var S=0;S<p;S++)for(var y=0;y<h.length;y++)S<b[y].length&&(F[$++]=b[y][S]);return F},ko=o,ko}var ks={},Rd;function Fw(){if(Rd)return ks;Rd=1,Object.defineProperty(ks,"__esModule",{value:!0});var e=Object.assign||function(d){for(var f=1;f<arguments.length;f++){var p=arguments[f];for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(d[x]=p[x])}return d},t=Vl(),i=o(t),s=op(),a=o(s);function o(d){return d&&d.__esModule?d:{default:d}}function c(d,f){var p={};for(var x in d)f.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(d,x)&&(p[x]=d[x]);return p}var u={bgColor:i.default.oneOfType([i.default.object,i.default.string]).isRequired,bgD:i.default.string.isRequired,fgColor:i.default.oneOfType([i.default.object,i.default.string]).isRequired,fgD:i.default.string.isRequired,size:i.default.number.isRequired,title:i.default.string,viewBoxSize:i.default.number.isRequired,xmlns:i.default.string},h=(0,s.forwardRef)(function(d,f){var p=d.bgColor,x=d.bgD,b=d.fgD,y=d.fgColor,w=d.size,j=d.title,S=d.viewBoxSize,C=d.xmlns,N=C===void 0?"http://www.w3.org/2000/svg":C,R=c(d,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",e({},R,{height:w,ref:f,viewBox:"0 0 "+S+" "+S,width:w,xmlns:N}),j?a.default.createElement("title",null,j):null,a.default.createElement("path",{d:x,fill:p}),a.default.createElement("path",{d:b,fill:y}))});return h.displayName="QRCodeSvg",h.propTypes=u,ks.default=h,ks}var Md;function Bw(){if(Md)return Ui;Md=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.QRCode=void 0;var e=Object.assign||function(w){for(var j=1;j<arguments.length;j++){var S=arguments[j];for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(w[C]=S[C])}return w},t=Vl(),i=p(t),s=um(),a=p(s),o=zw(),c=p(o),u=op(),h=p(u),d=Fw(),f=p(d);function p(w){return w&&w.__esModule?w:{default:w}}function x(w,j){var S={};for(var C in w)j.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(w,C)&&(S[C]=w[C]);return S}var b={bgColor:i.default.oneOfType([i.default.object,i.default.string]),fgColor:i.default.oneOfType([i.default.object,i.default.string]),level:i.default.string,size:i.default.number,value:i.default.string.isRequired},y=(0,u.forwardRef)(function(w,j){var S=w.bgColor,C=S===void 0?"#FFFFFF":S,N=w.fgColor,R=N===void 0?"#000000":N,P=w.level,I=P===void 0?"L":P,F=w.size,$=F===void 0?256:F,ne=w.value,O=x(w,["bgColor","fgColor","level","size","value"]),D=new c.default(-1,a.default[I]);D.addData(ne),D.make();var M=D.modules;return h.default.createElement(f.default,e({},O,{bgColor:C,bgD:M.map(function(q,Z){return q.map(function(W,ee){return W?"":"M "+ee+" "+Z+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:R,fgD:M.map(function(q,Z){return q.map(function(W,ee){return W?"M "+ee+" "+Z+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:j,size:$,viewBoxSize:M.length}))});return Ui.QRCode=y,y.displayName="QRCode",y.propTypes=b,Ui.default=y,Ui}var Uw=Bw();const Vw=pn(Uw),Yl="menus";async function Hw(e){const t=ze($e(he,Yl)),i={...e,id:t.id,createdAt:new Date,updatedAt:new Date};return await di(t,{...i,createdAt:Lt(),updatedAt:Lt()}),i}async function qw(e,t){const i=ze(he,Yl,e);await Et(i,{...t,updatedAt:Lt()})}async function $w(e){const t=tt($e(he,Yl),Oe("ownerId","==",e)),i=await Zt(t);if(i.empty)return null;const s=i.docs[0].data();return{...s,id:i.docs[0].id,createdAt:s.createdAt?.toDate()||new Date,updatedAt:s.updatedAt?.toDate()||new Date}}function Co(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,50)}const ja=new Kr("AIzaSyAFo1Hq5LuuaqkKLzZgUOl3PTtKk_cagVc"),Na="gemini-1.5-flash";async function mm(e,t="gourmet"){if(!e.trim())throw new Error("Texto vazio no pode ser aprimorado.");const i=ja.getGenerativeModel({model:Na}),s=`Atue como um Copywriter Gastronmico de elite. Reescreva a descrio deste prato para torn-la irresistvel, focada em despertar fome e sensorialidade. Mantenha curto (mx 150 caracteres). Vibe: ${t}.

Descrio original: "${e}"

Responda APENAS com a descrio aprimorada, sem aspas nem explicaes.`;return(await i.generateContent(s)).response.text().trim().substring(0,150)}async function fm(e){if(!e.length)throw new Error("Lista de itens vazia.");const t=ja.getGenerativeModel({model:Na,generationConfig:{responseMimeType:"application/json"}}),s=`Atue como um Engenheiro de Cardpio. Analise esta lista de itens.
1. Categorize-os logicamente (Entradas, Pratos Principais, Burgers, Pizzas, Bebidas, Sobremesas, etc).
2. Identifique quais itens tm maior potencial de venda para serem "Destaques" (Highlights) - mximo 3 itens.

Lista de itens:
${e.map((c,u)=>`${u+1}. ${c}`).join(`
`)}

Retorne APENAS um JSON vlido com a estrutura:
{
  "categories": [
    { "name": "Nome da Categoria", "items": ["Item 1", "Item 2"] }
  ],
  "suggestedHighlights": ["Item destaque 1", "Item destaque 2"]
}`,o=(await t.generateContent(s)).response.text();try{const c=JSON.parse(o);if(!c.categories||!Array.isArray(c.categories))throw new Error("Resposta invlida da IA");return c}catch{throw console.error(" Erro ao parsear resposta da IA:",o),new Error("Erro ao processar resposta da IA. Tente novamente.")}}async function xm(e){const t=`
    Analise o texto de cardpio abaixo e extraia os itens em formato JSON estruturado.
    O texto pode estar bagunado. Tente identificar Categoria, Nome do Prato, Descrio e Preo.
    
    Retorne APENAS um JSON com esta estrutura:
    {
      "categories": [
        {
          "title": "Nome da Categoria",
          "items": [
            {
              "title": "Nome do Item",
              "description": "Descrio (se houver)",
              "price": 0.00 (number)
            }
          ]
        }
      ]
    }

    TEXTO DO CARDPIO:
    ${e}
  `;try{const o=(await ja.getGenerativeModel({model:Na}).generateContent(t)).response.text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(o)}catch(i){throw console.error("Erro ao processar cardpio:",i),new Error("No foi possvel ler o cardpio. Tente formatar melhor o texto.")}}async function Gw(e,t){const i=t.map(o=>`${o.id}: ${o.title} (${o.description})`).join(`
`),s=ja.getGenerativeModel({model:Na,generationConfig:{responseMimeType:"application/json"}}),a=`
    Um cliente buscou: "${e}".
    Abaixo est o cardpio.
    Retorne uma lista JSON com os IDs dos 3 itens que melhor combinam com a INTENO do cliente (ex: se ele pediu "leve", procure saladas ou grelhados).
    
    Cardpio:
    ${i}

    Retorne APENAS: ["id1", "id2", "id3"]
  `;try{const o=await s.generateContent(a);return JSON.parse(o.response.text())}catch(o){return console.error(o),[]}}const Ww=Object.freeze(Object.defineProperty({__proto__:null,enhanceDescription:mm,organizeMenuStructure:fm,parseMenuFromText:xm,semanticSearch:Gw},Symbol.toStringTag,{value:"Module"})),Zw=new Kr("AIzaSyAFo1Hq5LuuaqkKLzZgUOl3PTtKk_cagVc"),Kw="gemini-1.5-flash";async function Yw(e,t){if(!e.trim())throw new Error("Descrio do prato  obrigatria.");const i=Zw.getGenerativeModel({model:Kw,generationConfig:{responseMimeType:"application/json"}}),s=`Atue como um Consultor de Menu Michelin com expertise em precificao gastronmica no Brasil.

Analise este prato: "${e}"

SUAS TAREFAS:
1. **Custo Estimado:** Estime o custo dos ingredientes em Reais (R$), considerando fornecedores brasileiros de mdio porte. Seja realista com pores tpicas.
2. **Preo de Venda:** Sugira um Preo de Venda ideal para atingir ${t}% de margem de lucro bruta. Use a frmula: Preo = Custo / (1 - ${t}/100).
3. **Dica de Neuromarketing:** D UMA dica psicolgica matadora para aumentar o valor percebido (ex: trocar palavras no nome, usar nmero quebrado, sugesto de empratamento, tcnica de ancoragem).

Retorne APENAS um JSON vlido com esta estrutura exata:
{
  "suggestedPrice": 45.90,
  "costEstimate": 12.50,
  "tip": "Troque 'Burger' por 'Smash Artesanal' e use preo R$ 44,90 (nmeros mpares parecem mais autnticos)"
}`;console.log(" [Business AI] Analisando precificao...");const o=(await i.generateContent(s)).response.text();try{const c=JSON.parse(o);if(typeof c.suggestedPrice!="number"||typeof c.costEstimate!="number"||typeof c.tip!="string")throw new Error("Estrutura de resposta invlida");return console.log(" [Business AI] Anlise de precificao concluda!"),c}catch{throw console.error(" [Business AI] Erro ao parsear resposta:",o),new Error("Erro ao processar anlise. Tente novamente.")}}const Ld=new Kr("AIzaSyAFo1Hq5LuuaqkKLzZgUOl3PTtKk_cagVc"),Eo="gemini-1.5-flash",So="gemini-1.5-flash";async function Xw(e,t=1080){return new Promise((i,s)=>{const a=new Image,o=document.createElement("canvas"),c=o.getContext("2d");if(!c){s(new Error("Canvas context not available"));return}a.onload=()=>{const u=Math.min(a.width,a.height),h=(a.width-u)/2,d=(a.height-u)/2;o.width=t,o.height=t,c.drawImage(a,h,d,u,u,0,0,t,t),o.toBlob(f=>{f?i(new File([f],e.name,{type:"image/jpeg",lastModified:Date.now()})):s(new Error("Failed to create blob"))},"image/jpeg",.95)},a.onerror=()=>s(new Error("Failed to load image")),a.src=URL.createObjectURL(e)})}function Qw(e){return new Promise((t,i)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{const a=s.result;t(a.split(",")[1])},s.onerror=a=>i(a)})}function Jw(e,t,i){const s={rustico:"rustic wooden table",gourmet:"white marble surface",dark:"dark matte black surface",domingo:"bright white with morning sunlight",marble:"luxurious black onyx marble",neon:"reflective surface with neon lights"},a={top:"90 flat lay top-down",diagonal:"45 diner's perspective",front:"eye-level hero shot",macro:"extreme close-up macro"},o=i>70?"bright studio softbox lighting":i>40?"balanced natural lighting":"dramatic low-key shadows";return`Role: Food Photographer Expert.
Task: Enhance this request into a high-end food delivery photography prompt.
Context:
- Surface: ${s[e]||s.rustico}
- Camera Angle: ${a[t]||a.diagonal}  
- Lighting: ${o}
Technical Specs: 85mm lens, f/1.8, shallow DOF, 1080x1080 square, 8K quality.
Keywords: commercial food photography, appetizing, Michelin star presentation.
Output: Just the prompt in English. No explanations.`}async function gm(e){console.log(" [Neural Engine v4.2] Iniciando...");const t=ki.getState(),i=rt.currentUser;if(!i)return{success:!1,error:"Usurio no autenticado."};if(t.plan!=="PRO"&&t.credits<1)return{success:!1,error:"Crditos insuficientes. Faa um upgrade."};console.log(" Cobrana otimista (UI + Firestore)..."),t.decrementCredit();const s=ze(he,"users",i.uid);try{await Et(s,{credits:gu(-1)}),console.log(" Crdito deduzido no Firestore")}catch(a){return console.error(" Erro ao deduzir crdito no Firestore:",a),t.refundCredit(),{success:!1,error:"Erro ao processar pagamento. Tente novamente."}}try{console.log(" Processando imagem 1080x1080...");const a=await Xw(e.file,1080),o=await Qw(a);console.log(` [Prompt Architect] Usando ${Eo}...`);const c=Ld.getGenerativeModel({model:Eo}),u=Jw(e.vibe,e.angle,e.lightIntensity||50),d=(await c.generateContent([{text:u},{inlineData:{mimeType:a.type,data:o}}])).response.text();console.log(" Prompt gerado:",d.substring(0,100)+"..."),console.log(` [Image Generator] Usando ${So}...`);const b=(await Ld.getGenerativeModel({model:So}).generateContent(d)).response.candidates?.[0]?.content?.parts||[];let y;for(const w of b)if(w.inlineData?.mimeType?.startsWith("image/")){y=`data:${w.inlineData.mimeType};base64,${w.inlineData.data}`;break}return y||(console.log(" Fallback para Pollinations..."),y=`https://image.pollinations.ai/prompt/${encodeURIComponent(d)}?model=flux-realism&width=1080&height=1080&nologo=true&seed=${Date.now()}`),console.log(" [Neural Engine] Gerao concluda!"),{success:!0,imageUrl:y,debugInfo:{usedModel:`${Eo} + ${So}`,promptGenerated:d}}}catch(a){console.error(" Erro na gerao:",a),console.log(" Rollback: Devolvendo crdito (UI + Firestore)..."),t.refundCredit();try{await Et(s,{credits:gu(1)}),console.log(" Crdito devolvido no Firestore")}catch(o){console.error(" Erro crtico ao estornar crdito:",o)}return{success:!1,error:a.message||"Erro na Engine Neural. Tente novamente."}}}function e1({isOpen:e,onClose:t,onImageReady:i}){const[s,a]=T.useState(null),[o,c]=T.useState(null),[u,h]=T.useState(null),[d,f]=T.useState(!1),p=T.useRef(null),x=ki(),b=S=>{const C=S.target.files?.[0];C&&(a(C),c(URL.createObjectURL(C)),h(null))},y=async()=>{if(s){f(!0);try{const S=await gm({file:s,vibe:"standard",angle:"front",lightIntensity:70});S.success&&S.imageUrl&&(h(S.imageUrl),x.useCredit())}catch(S){console.error("Studio Error:",S)}finally{f(!1)}}},w=()=>{u&&(i(u),j())},j=()=>{a(null),c(null),h(null),f(!1),t()};return e?n.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",children:n.jsxs(K.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-[#111] border border-white/10 rounded-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-black uppercase tracking-widest text-white flex items-center gap-2",children:[n.jsx($r,{className:"w-4 h-4 text-primary"}),"Studio Express"]}),n.jsx("button",{onClick:j,className:"p-1 hover:bg-white/10 rounded-lg",children:n.jsx(Ht,{className:"w-4 h-4 text-white/40"})})]}),n.jsx("div",{className:"p-6 flex-1 overflow-y-auto flex flex-col items-center justify-center min-h-[300px]",children:o?n.jsxs("div",{className:"relative w-full aspect-square bg-black rounded-xl overflow-hidden border border-white/10 group",children:[n.jsx("img",{src:u||o,className:`w-full h-full object-contain ${d?"blur-lg scale-105":""} transition-all duration-700`,alt:"Preview"}),d&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[n.jsx(Ee,{className:"w-12 h-12 text-primary animate-spin mb-4"}),n.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-primary animate-pulse",children:"Melhorando Iluminao..."})]}),!u&&!d&&n.jsx("div",{className:"absolute inset-x-0 bottom-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:n.jsxs("button",{onClick:y,className:"w-full py-3 bg-primary hover:bg-orange-600 rounded-xl font-bold flex items-center justify-center gap-2 text-white shadow-lg shadow-orange-900/50 transition-all transform active:scale-95",children:[n.jsx(Yo,{className:"w-4 h-4"}),"Melhorar com IA (1 Crdito)"]})})]}):n.jsxs("div",{onClick:()=>p.current?.click(),className:"w-full h-64 border-2 border-dashed border-white/10 rounded-2xl flex flex-col items-center justify-center gap-4 cursor-pointer hover:border-primary hover:bg-primary/5 transition-all text-white/30 hover:text-primary",children:[n.jsx(Ko,{className:"w-12 h-12"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Upload Foto do Prato"}),n.jsx("input",{ref:p,type:"file",className:"hidden",accept:"image/*",onChange:b})]})}),u&&n.jsxs("div",{className:"p-4 border-t border-white/10 bg-white/5 flex gap-3",children:[n.jsx("button",{onClick:()=>{h(null)},className:"px-4 py-3 rounded-xl font-bold text-xs uppercase tracking-wider text-white/40 hover:text-white transition-colors",children:"Tentar De Novo"}),n.jsxs("button",{onClick:w,className:"flex-1 py-3 bg-green-500 hover:bg-green-600 rounded-xl font-bold flex items-center justify-center gap-2 text-white shadow-lg transition-all",children:[n.jsx(Nt,{className:"w-4 h-4"}),"Usar Foto"]})]})]})}):null}function t1({isOpen:e,onClose:t,onImport:i}){const[s,a]=T.useState("text"),[o,c]=T.useState(""),[u,h]=T.useState(!1),d=async()=>{if(!o)return ie.error("Cole o texto do cardpio!");h(!0);try{const f=await xm(o);i(f),ie.success(`${f.categories.length} categorias identificadas!`),t()}catch{ie.error("Falha ao processar. Verifique o texto.")}finally{h(!1)}};return n.jsx(Ye,{children:e&&n.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",children:n.jsxs(K.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[#121212] w-full max-w-2xl rounded-3xl border border-white/10 overflow-hidden shadow-2xl",children:[n.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-purple-900/20 to-blue-900/20",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-black italic flex items-center gap-2",children:[n.jsx(at,{className:"text-purple-400"})," Importador Mgico"]}),n.jsx("p",{className:"text-xs text-white/40",children:"Cole o texto do seu cardpio (PDF, Excel ou WhatsApp)"})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full",children:n.jsx(Ht,{})})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex gap-4 mb-4",children:[n.jsxs("button",{onClick:()=>a("text"),className:`flex-1 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${s==="text"?"bg-white/10 text-white":"text-white/40 hover:bg-white/5"}`,children:[n.jsx(Yh,{size:16})," Colar Texto"]}),n.jsxs("button",{onClick:()=>a("file"),className:`flex-1 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${s==="file"?"bg-white/10 text-white":"text-white/40 hover:bg-white/5"}`,children:[n.jsx(Ko,{size:16})," Upload Arquivo (CSV)"]})]}),s==="text"?n.jsx("textarea",{value:o,onChange:f=>c(f.target.value),placeholder:"Ex: X-Burger R$ 30,00, Coca-Cola R$ 5,00...",className:"w-full h-64 bg-black/50 border border-white/10 rounded-xl p-4 text-sm text-white focus:border-purple-500 outline-none resize-none font-mono"}):n.jsxs("div",{className:"h-64 border-2 border-dashed border-white/10 rounded-xl flex flex-col items-center justify-center text-white/30",children:[n.jsx(Ko,{size:32,className:"mb-2"}),n.jsx("p",{children:"Arraste seu arquivo CSV ou Excel aqui"}),n.jsx("p",{className:"text-[10px] mt-2",children:"(Funcionalidade em breve - use Colar Texto por enquanto)"})]}),n.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[n.jsx("button",{onClick:t,className:"px-6 py-3 rounded-xl font-bold text-white/60 hover:text-white",children:"Cancelar"}),n.jsxs("button",{onClick:d,disabled:u||!o,className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl font-black text-white shadow-lg hover:shadow-purple-500/20 transition-all disabled:opacity-50 flex items-center gap-2",children:[u?n.jsx(Ee,{className:"animate-spin"}):n.jsx(at,{size:18}),"PROCESSAR COM IA"]})]})]}),n.jsx("div",{className:"p-4 bg-purple-500/10 border-t border-white/5 text-center",children:n.jsxs("p",{className:"text-xs text-purple-300 font-bold flex items-center justify-center gap-2",children:[n.jsx(Sl,{size:14})," Dica: Voc pode copiar o cardpio inteiro do iFood e colar aqui!"]})})]})})})}const Cs=()=>crypto.randomUUID(),Od=e=>({ownerId:e,slug:"",name:"",description:"",logoUrl:null,phone:"",themeColor:"#FF6B00",categories:[]});function n1({menu:e}){const t=e.categories.flatMap(i=>i.items).filter(i=>i.isHighlight);return n.jsxs("div",{className:"w-[320px] h-[640px] bg-[#0a0a0a] rounded-[40px] border-4 border-white/10 overflow-hidden shadow-2xl relative",children:[n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-black rounded-b-2xl z-10"}),n.jsxs("div",{className:"h-full overflow-y-auto no-scrollbar",children:[n.jsxs("div",{className:"h-40 flex flex-col items-center justify-center relative",style:{background:`linear-gradient(135deg, ${e.themeColor}40, ${e.themeColor}10)`},children:[e.logoUrl?n.jsx("img",{src:e.logoUrl,alt:"",className:"w-16 h-16 rounded-2xl object-cover"}):n.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/10 flex items-center justify-center",children:n.jsx(gt,{className:"w-8 h-8 text-white/40"})}),n.jsx("h1",{className:"text-lg font-black mt-3 text-white text-center px-4",children:e.name||"Nome do Restaurante"}),n.jsx("p",{className:"text-[10px] text-white/50 mt-1",children:e.description||"Descrio curta aqui"})]}),t.length>0&&n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-white/30 mb-2",children:"Destaques"}),n.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:t.slice(0,3).map(i=>n.jsxs("div",{className:"flex-shrink-0 w-24 h-24 rounded-2xl overflow-hidden relative",children:[i.imageUrl?n.jsx("img",{src:i.imageUrl,alt:"",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-white/5 flex items-center justify-center",children:n.jsx(Js,{className:"w-8 h-8 text-white/20"})}),n.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:n.jsx("span",{className:"text-[9px] font-bold text-white line-clamp-1",children:i.title})})]},i.id))})]}),n.jsx("div",{className:"p-4 pt-0 space-y-4",children:e.categories.map(i=>n.jsxs("div",{children:[n.jsx("h3",{className:"text-xs font-black uppercase tracking-wider text-white/60 mb-2",children:i.title}),n.jsx("div",{className:"space-y-2",children:i.items.map(s=>n.jsxs("div",{className:"flex gap-3 p-2 bg-white/5 rounded-xl",children:[n.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden flex-shrink-0",children:s.imageUrl?n.jsx("img",{src:s.imageUrl,alt:"",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-white/10 flex items-center justify-center",children:n.jsx(Js,{className:"w-6 h-6 text-white/20"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-[11px] font-bold text-white line-clamp-1",children:s.title}),n.jsx("p",{className:"text-[9px] text-white/40 line-clamp-2",children:s.description})]}),n.jsxs("div",{className:"text-[11px] font-black text-primary",children:["R$ ",s.price.toFixed(2).replace(".",",")]})]},s.id))})]},i.id))}),e.categories.length===0&&n.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-white/20",children:[n.jsx(gt,{className:"w-12 h-12 mb-2"}),n.jsx("span",{className:"text-xs",children:"Adicione categorias"})]})]})]})}function i1(){const{user:e}=Ke(),t=ki(U=>U.generatedImage),[i,s]=T.useState(null),[a,o]=T.useState(null),[c,u]=T.useState(!0),[h,d]=T.useState(!1),[f,p]=T.useState(!1),[x,b]=T.useState(!1),[y,w]=T.useState(!1),[j,S]=T.useState(!1),[C,N]=T.useState(null),[R,P]=T.useState(!1),[I,F]=T.useState(null),$=(U,V)=>{F({catId:U,itemId:V}),P(!0)},ne=U=>{I&&(se(I.catId,I.itemId,{imageUrl:U}),F(null),ie.success("Imagem aplicada com sucesso! "))};T.useEffect(()=>{async function U(){if(e?.uid)try{const V=await $w(e.uid);V?(s({ownerId:V.ownerId,slug:V.slug,name:V.name,description:V.description,logoUrl:V.logoUrl,phone:V.phone,themeColor:V.themeColor,categories:V.categories}),o(V.id)):s(Od(e.uid))}catch(V){console.error("Erro ao carregar menu:",V),ie.error("Erro ao carregar menu"),s(Od(e?.uid||""))}finally{u(!1)}}U()},[e?.uid]);const O=T.useCallback(async()=>{if(!(!i||!e?.uid)){d(!0);try{if(a)await qw(a,i);else{const U=await Hw(i);o(U.id)}ie.success("Cardpio salvo!",{duration:1500})}catch(U){console.error("Erro ao salvar:",U),ie.error("Erro ao salvar cardpio")}finally{d(!1)}}},[i,a,e?.uid]),D=(U,V)=>{s(Q=>Q?{...Q,[U]:V}:null)},M=U=>{D("name",U),(!i?.slug||i.slug===Co(i.name))&&D("slug",Co(U))},q=()=>{const U={id:Cs(),title:"Nova Categoria",items:[]};s(V=>V?{...V,categories:[...V.categories,U]}:null)},Z=(U,V)=>{s(Q=>Q?{...Q,categories:Q.categories.map(J=>J.id===U?{...J,title:V}:J)}:null)},W=U=>{s(V=>V?{...V,categories:V.categories.filter(Q=>Q.id!==U)}:null)},ee=U=>{s(V=>{if(!V)return null;const Q=U.categories.map(J=>({id:crypto.randomUUID(),title:J.title,items:J.items.map(de=>({id:crypto.randomUUID(),title:de.title,description:de.description||"",price:Number(de.price)||0,imageUrl:null,isHighlight:!1}))}));return{...V,categories:[...V.categories,...Q]}})},ce=U=>{const V={id:Cs(),title:"Novo Item",description:"",price:0,imageUrl:null,isHighlight:!1};s(Q=>Q?{...Q,categories:Q.categories.map(J=>J.id===U?{...J,items:[...J.items,V]}:J)}:null),N({catId:U,itemId:V.id})},se=(U,V,Q)=>{s(J=>J?{...J,categories:J.categories.map(de=>de.id===U?{...de,items:de.items.map(me=>me.id===V?{...me,...Q}:me)}:de)}:null)},ve=(U,V)=>{s(Q=>Q?{...Q,categories:Q.categories.map(J=>J.id===U?{...J,items:J.items.filter(de=>de.id!==V)}:J)}:null)},_=()=>{if(!t){ie.error("Gere uma imagem no Studio primeiro!");return}i?.categories.length===0&&q();const U=i?.categories[0]?.id;if(!U)return;const V={id:Cs(),title:"Novo Prato do Studio",description:"Descrio do prato...",price:29.9,imageUrl:t,isHighlight:!1};s(Q=>Q?{...Q,categories:Q.categories.map(J=>J.id===U?{...J,items:[...J.items,V]}:J)}:null),ie.success("Imagem importada do Studio!")},A=async(U,V)=>{const Q=i?.categories.find(J=>J.id===U)?.items.find(J=>J.id===V);if(!Q?.description){ie.error("Adicione uma descrio primeiro");return}b(!0);try{const J=await mm(Q.description,"gourmet");se(U,V,{description:J}),ie.success("Descrio aprimorada! ")}catch(J){ie.error(J.message||"Erro ao aprimorar descrio")}finally{b(!1)}},H=async(U,V,Q)=>{if(!Q||Q.length<3)return;const J=i?.categories.find(me=>me.id===U)?.items.find(me=>me.id===V);if(!J)return;(!J.description||J.description.length<10)&&ie.promise(async()=>{const me=await Sv();se(U,V,{description:me});const ye=await Yw(me||Q,50);if(ye?.suggestedPrice)return se(U,V,{description:me,price:ye.suggestedPrice,costPrice:ye.costEstimate}),`Sugesto: R$ ${ye.suggestedPrice.toFixed(2)}`},{loading:"IA Criando prato...",success:me=>`${me||"Prato criado com IA!"}`,error:"Erro na IA"})},k=async()=>{if(!i)return;const U=i.categories.flatMap(Q=>Q.items);if(U.length<2){ie.error("Adicione mais itens para organizar");return}const V=U.map(Q=>Q.title);w(!0);try{const Q=await fm(V),J=Q.categories.map(de=>({id:Cs(),title:de.name,items:de.items.map(me=>U.find(Ne=>Ne.title===me)||null).filter(me=>me!==null).map(me=>({...me,isHighlight:Q.suggestedHighlights.includes(me.title)}))}));s(de=>de?{...de,categories:J}:null),ie.success(`Cardpio organizado! ${Q.suggestedHighlights.length} destaques sugeridos `)}catch(Q){ie.error(Q.message||"Erro ao organizar cardpio")}finally{w(!1)}},B=i?.slug?`https://emprata.ai/menu/${i.slug}`:"";return c?n.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:n.jsx(Ee,{className:"w-8 h-8 text-primary animate-spin"})}):i?n.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:[n.jsxs("header",{className:"h-16 md:h-20 border-b border-white/5 flex items-center justify-between px-4 md:px-8 bg-[#0a0a0a]/80 backdrop-blur-xl sticky top-0 z-50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(it,{to:"/dashboard",className:"text-white/40 hover:text-white transition-colors",children:n.jsx(Xo,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-lg font-black italic tracking-tight flex items-center gap-2",children:[n.jsx(gt,{className:"w-5 h-5 text-primary"}),"Living Menu"]}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-white/30",children:"Cardpio Digital"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[n.jsxs("button",{onClick:_,disabled:!t,className:`flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${t?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:[n.jsx(li,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Importar do Studio"})]}),n.jsx("button",{onClick:()=>p(!0),disabled:!i.slug,className:"p-2 bg-white/5 hover:bg-white/10 rounded-xl transition-colors disabled:opacity-50",children:n.jsx(pa,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:O,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-primary hover:bg-orange-600 rounded-xl font-bold text-sm transition-all",children:[h?n.jsx(Ee,{className:"w-4 h-4 animate-spin"}):n.jsx(Nt,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Salvar"})]})]})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-4rem)] md:h-[calc(100vh-5rem)]",children:[n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6",children:[n.jsxs("section",{className:"bg-white/5 rounded-3xl p-6 border border-white/5",children:[n.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white/40 mb-4",children:"Configurao"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"Nome do Restaurante"}),n.jsx("input",{type:"text",value:i.name,onChange:U=>M(U.target.value),placeholder:"Ex: Pizzaria do Zico",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/20 focus:border-primary focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"URL do Cardpio"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-white/30 text-sm",children:"/menu/"}),n.jsx("input",{type:"text",value:i.slug,onChange:U=>D("slug",Co(U.target.value)),placeholder:"pizzaria-do-zico",className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/20 focus:border-primary focus:outline-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"WhatsApp"}),n.jsxs("div",{className:"relative",children:[n.jsx(Xh,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30"}),n.jsx("input",{type:"text",value:i.phone,onChange:U=>D("phone",U.target.value),placeholder:"5511999999999",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 pl-10 text-white placeholder-white/20 focus:border-primary focus:outline-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"Cor Principal"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:i.themeColor,onChange:U=>D("themeColor",U.target.value),className:"w-12 h-12 rounded-xl border-2 border-white/10 cursor-pointer"}),n.jsx("input",{type:"text",value:i.themeColor,onChange:U=>D("themeColor",U.target.value),className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white uppercase focus:border-primary focus:outline-none"})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"Descrio Curta"}),n.jsx("textarea",{value:i.description,onChange:U=>D("description",U.target.value),placeholder:"Desde 1990 servindo as melhores pizzas...",rows:2,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/20 focus:border-primary focus:outline-none resize-none"})]})]}),n.jsxs("section",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white/40",children:"Categorias & Itens"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:k,disabled:y||i.categories.flatMap(U=>U.items).length<2,className:"flex items-center gap-2 px-3 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 rounded-xl text-xs font-bold uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[y?n.jsx(Ee,{className:"w-4 h-4 animate-spin"}):n.jsx(Yo,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Organizar com IA"})]}),n.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-3 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold uppercase tracking-wider transition-all",children:[n.jsx(yn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Categoria"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ye,{children:i.categories.map(U=>n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white/5 rounded-2xl border border-white/5 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-white/5",children:[n.jsx(Dx,{className:"w-4 h-4 text-white/20 cursor-grab"}),n.jsx("input",{type:"text",value:U.title,onChange:V=>Z(U.id,V.target.value),className:"flex-1 bg-transparent text-sm font-bold text-white focus:outline-none"}),n.jsx("button",{onClick:()=>ce(U.id),className:"p-1.5 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:n.jsx(yn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>W(U.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"divide-y divide-white/5",children:[U.items.map(V=>n.jsxs("div",{className:"p-4 flex items-start gap-4",children:[n.jsxs("div",{onClick:()=>$(U.id,V.id),className:"w-16 h-16 rounded-xl overflow-hidden bg-white/5 flex-shrink-0 relative cursor-pointer group",children:[V.imageUrl?n.jsx("img",{src:V.imageUrl,alt:"",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full flex items-center justify-center group-hover:bg-white/10 transition-colors",children:n.jsx(ea,{className:"w-6 h-6 text-white/20"})}),n.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:n.jsx(Yo,{className:"w-4 h-4 text-white"})}),V.isHighlight&&n.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500 rounded-full p-0.5",children:n.jsx(at,{className:"w-3 h-3 text-black"})})]}),n.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[n.jsx("input",{type:"text",value:V.title,onChange:Q=>se(U.id,V.id,{title:Q.target.value}),onBlur:Q=>H(U.id,V.id,Q.target.value),className:"w-full bg-transparent text-sm font-bold text-white focus:outline-none",placeholder:"Nome do prato (ex: X-Bacon)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("textarea",{value:V.description,onChange:Q=>se(U.id,V.id,{description:Q.target.value}),className:"flex-1 bg-white/5 rounded-lg px-3 py-2 text-xs text-white/60 focus:outline-none resize-none",placeholder:"Descrio...",rows:2}),n.jsx("button",{onClick:()=>A(U.id,V.id),disabled:x||!V.description,className:"p-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 rounded-lg transition-colors disabled:opacity-50",title:"Aprimorar com IA",children:x?n.jsx(Ee,{className:"w-4 h-4 animate-spin"}):n.jsx(at,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-white/40 text-xs",children:"Venda R$"}),n.jsx("input",{type:"number",step:"0.01",value:V.price||"",onChange:Q=>se(U.id,V.id,{price:parseFloat(Q.target.value)||0}),className:"w-20 bg-white/5 rounded-lg px-2 py-1 text-xs text-white focus:outline-none",placeholder:"0,00"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-red-400/60 text-xs",children:"Custo R$"}),n.jsx("input",{type:"number",step:"0.01",value:V.costPrice||"",onChange:Q=>se(U.id,V.id,{costPrice:parseFloat(Q.target.value)||0}),className:"w-20 bg-red-500/10 border border-red-500/20 rounded-lg px-2 py-1 text-xs text-red-300 focus:outline-none",placeholder:"0,00"})]}),V.price>0&&V.costPrice>0&&n.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${(V.price-V.costPrice)/V.price*100>=30?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[((V.price-V.costPrice)/V.price*100).toFixed(0),"% margem"]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:V.isHighlight,onChange:Q=>se(U.id,V.id,{isHighlight:Q.target.checked}),className:"w-4 h-4 rounded bg-white/5 border-white/10"}),n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-yellow-500",children:"Destaque"})]})]})]}),n.jsx("button",{onClick:()=>ve(U.id,V.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]},V.id)),U.items.length===0&&n.jsx("div",{className:"p-4 text-center text-white/20 text-xs",children:"Clique em + para adicionar itens"})]})]},U.id))}),i.categories.length===0&&n.jsxs("div",{className:"text-center py-12 text-white/20",children:[n.jsx(gt,{className:"w-12 h-12 mx-auto mb-3"}),n.jsx("p",{className:"text-sm",children:"Adicione sua primeira categoria"})]})]})]})]}),n.jsxs("div",{className:"hidden lg:flex w-[400px] border-l border-white/5 flex-col items-center justify-center p-8 bg-black/20",children:[n.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-white/30 mb-4",children:"Preview"}),n.jsx(n1,{menu:i}),i.slug&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-3 py-2 bg-purple-500/10 hover:bg-purple-500/20 text-purple-400 rounded-xl text-xs font-bold uppercase tracking-wider border border-purple-500/30 transition-colors",children:[n.jsx(at,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Importar Mgico"})]}),i.slug&&n.jsxs(it,{to:`/menu/${i.slug}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 mt-4 text-xs text-white/40 hover:text-primary transition-colors",children:[n.jsx(Or,{className:"w-4 h-4"}),"Ver pgina pblica"]})]})]})]}),n.jsx(e1,{isOpen:R,onClose:()=>P(!1),onImageReady:ne}),n.jsx(Ye,{children:f&&n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4",onClick:()=>p(!1),children:n.jsxs(K.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[#1a1a1a] rounded-3xl p-8 border border-white/10 max-w-md w-full text-center",onClick:U=>U.stopPropagation(),children:[n.jsx("h3",{className:"text-xl font-black mb-2",children:"QR Code do Cardpio"}),n.jsx("p",{className:"text-white/40 text-sm mb-6",children:"Escaneie para acessar o cardpio"}),n.jsx("div",{className:"bg-white p-4 rounded-2xl inline-block mb-6",children:n.jsx(Vw,{value:B,size:200})}),n.jsx("p",{className:"text-xs text-white/40 mb-4 break-all",children:B}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>navigator.clipboard.writeText(B).then(()=>ie.success("Link copiado!")),className:"flex-1 py-3 bg-white/10 hover:bg-white/20 rounded-xl font-bold text-sm transition-all",children:"Copiar Link"}),n.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-3 bg-primary hover:bg-orange-600 rounded-xl font-bold text-sm transition-all",children:"Fechar"})]})]})})}),n.jsx(t1,{isOpen:j,onClose:()=>S(!1),onImport:ee})]}):null}var bm=T.forwardRef(({transition:e,...t},i)=>{let s={position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:e?`clip-path ${e}`:void 0,userSelect:"none",willChange:"clip-path, transition",KhtmlUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"};return n.jsx("div",{...t,style:s,"data-rcs":"clip-item",ref:i})});bm.displayName="ContainerClip";var vm=T.forwardRef(({children:e,disabled:t,portrait:i,position:s,transition:a},o)=>{let c={position:"absolute",top:0,width:i?"100%":void 0,height:i?void 0:"100%",background:"none",border:0,padding:0,pointerEvents:"all",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:0,transform:i?"translate3d(0, -50% ,0)":"translate3d(-50%, 0, 0)",transition:a?`${i?"top":"left"} ${a}`:void 0};return n.jsx("button",{ref:o,"aria-label":"Drag to move or focus and use arrow keys","aria-orientation":i?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":s,"data-rcs":"handle-container",disabled:t,role:"slider",style:c,children:e})});vm.displayName="ThisHandleContainer";var Dd=({flip:e})=>n.jsx("div",{className:"__rcs-handle-arrow",style:{width:0,height:0,borderTop:"8px solid transparent",borderRight:"10px solid",borderBottom:"8px solid transparent",transform:e?"rotate(180deg)":void 0}}),r1=({className:e="__rcs-handle-root",disabled:t,buttonStyle:i,linesStyle:s,portrait:a,style:o,...c})=>{let u={display:"flex",flexDirection:a?"row":"column",placeItems:"center",height:"100%",cursor:t?"not-allowed":a?"ns-resize":"ew-resize",pointerEvents:"none",color:"#fff",...o},h={flexGrow:1,height:a?2:"100%",width:a?"100%":2,backgroundColor:"currentColor",pointerEvents:"auto",boxShadow:"0 0 4px rgba(0,0,0,.5)",...s},d={display:"grid",gridAutoFlow:"column",gap:8,placeContent:"center",flexShrink:0,width:56,height:56,borderRadius:"50%",borderStyle:"solid",borderWidth:2,pointerEvents:"auto",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",backgroundColor:"rgba(0, 0, 0, 0.125)",boxShadow:"0 0 4px rgba(0,0,0,.35)",transform:a?"rotate(90deg)":void 0,...i};return n.jsxs("div",{...c,className:e,style:u,children:[n.jsx("div",{className:"__rcs-handle-line",style:h}),n.jsxs("div",{className:"__rcs-handle-button",style:d,children:[n.jsx(Dd,{}),n.jsx(Dd,{flip:!0})]}),n.jsx("div",{className:"__rcs-handle-line",style:h})]})},ym=(e=>(e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e))(ym||{}),s1=({boxSizing:e="border-box",objectFit:t="cover",objectPosition:i="center center",...s}={})=>({display:"block",width:"100%",height:"100%",maxWidth:"100%",boxSizing:e,objectFit:t,objectPosition:i,...s}),a1=e=>{let t=T.useRef(e);return T.useEffect(()=>{t.current=e}),t.current},Ao=(e,t,i,s)=>{let a=T.useRef();T.useEffect(()=>{a.current=t},[t]),T.useEffect(()=>{if(!(i&&i.addEventListener))return;let o=c=>a.current&&a.current(c);return i.addEventListener(e,o,s),()=>{i.removeEventListener(e,o,s)}},[e,i,s])},o1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?T.useLayoutEffect:T.useEffect,l1=(e,t)=>{let i=T.useRef(),s=T.useCallback(()=>{e.current&&i.current&&i.current.observe(e.current)},[e]);o1(()=>(i.current=new ResizeObserver(([a])=>t(a.contentRect)),s(),()=>{i.current&&i.current.disconnect()}),[t,s])},Es={capture:!1,passive:!0},To={capture:!0,passive:!1},c1=e=>{e.preventDefault(),e.currentTarget.focus()},wm=T.forwardRef(({boundsPadding:e=0,browsingContext:t=globalThis,changePositionOnHover:i=!1,disabled:s=!1,handle:a,itemOne:o,itemTwo:c,keyboardIncrement:u="5%",onlyHandleDraggable:h=!1,onPositionChange:d,portrait:f=!1,position:p=50,style:x,transition:b,...y},w)=>{let j=T.useRef(null),S=T.useRef(null),C=T.useRef(null),N=T.useRef(p),[R,P]=T.useState(!1),[I,F]=T.useState(!0),$=T.useRef(!1),[ne,O]=T.useState(),D=a1(p),M=T.useCallback(function({x:A,y:H,isOffset:k}){let B=j.current,U=C.current,V=S.current,{width:Q,height:J,left:de,top:me}=B.getBoundingClientRect();if(Q===0||J===0)return;let ye=f?k?H-me-t.scrollY:H:k?A-de-t.scrollX:A,Ne=Math.min(Math.max(ye/(f?J:Q)*100,0),100),He=f?J/(B.offsetHeight||1):Q/(B.offsetWidth||1),ke=e*He/(f?J:Q)*100,We=Math.min(Math.max(Ne,ke*He),100-ke*He);N.current=Ne,U.setAttribute("aria-valuenow",`${Math.round(N.current)}`),U.style.top=f?`${We}%`:"0",U.style.left=f?"0":`${We}%`,V.style.clipPath=f?`inset(${We}% 0 0 0)`:`inset(0 0 0 ${We}%)`,d&&d(N.current)},[e,d,f,t]);T.useEffect(()=>{let{width:A,height:H}=j.current.getBoundingClientRect(),k=p===D?N.current:p;M({x:A/100*k,y:H/100*k})},[e,p,f,D,M]);let q=T.useCallback(A=>{A.preventDefault(),!(s||A.button!==0)&&(M({isOffset:!0,x:A.pageX,y:A.pageY}),P(!0),F(!0))},[s,M]),Z=T.useCallback(function(A){M({isOffset:!0,x:A.pageX,y:A.pageY}),F(!1)},[M]),W=T.useCallback(()=>{P(!1),F(!0)},[]),ee=T.useCallback(({width:A,height:H})=>{let{width:k,height:B}=j.current.getBoundingClientRect();M({x:A/100*N.current*k/A,y:H/100*N.current*B/H})},[M]),ce=T.useCallback(A=>{if(!Object.values(ym).includes(A.key))return;A.preventDefault(),F(!0);let{top:H,left:k}=C.current.getBoundingClientRect(),{width:B,height:U}=j.current.getBoundingClientRect(),V=typeof u=="string"?parseFloat(u):u/B*100,Q=f?A.key==="ArrowLeft"||A.key==="ArrowDown":A.key==="ArrowRight"||A.key==="ArrowUp",J=Math.min(Math.max(Q?N.current+V:N.current-V,0),100);M({x:f?k:B*J/100,y:f?U*J/100:H})},[u,f,M]);T.useEffect(()=>{O(h?C.current:j.current)},[h]),T.useEffect(()=>{let A=j.current,H=()=>{R||W()};return i&&(A.addEventListener("pointermove",Z,Es),A.addEventListener("pointerleave",H,Es)),()=>{A.removeEventListener("pointermove",Z),A.removeEventListener("pointerleave",H)}},[i,Z,W,R]),T.useEffect(()=>(R&&!$.current&&(t.addEventListener("pointermove",Z,Es),t.addEventListener("pointerup",W,Es),$.current=!0),()=>{$.current&&(t.removeEventListener("pointermove",Z),t.removeEventListener("pointerup",W),$.current=!1)}),[Z,W,R,t]),T.useImperativeHandle(w,()=>({rootContainer:j.current,handleContainer:C.current,setPosition(A){let{width:H,height:k}=j.current.getBoundingClientRect();M({x:H/100*A,y:k/100*A})}}),[M]),l1(j,ee),Ao("keydown",ce,C.current,To),Ao("click",c1,C.current,To),Ao("pointerdown",q,ne,To);let se=a||n.jsx(r1,{disabled:s,portrait:f}),ve=I?b:void 0,_={position:"relative",display:"flex",overflow:"hidden",cursor:R?f?"ns-resize":"ew-resize":void 0,touchAction:"none",userSelect:"none",KhtmlUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",...x};return n.jsxs("div",{...y,ref:j,style:_,"data-rcs":"root",children:[o,n.jsx(bm,{ref:S,transition:ve,children:c}),n.jsx(vm,{disabled:s,portrait:f,position:Math.round(N.current),ref:C,transition:ve,children:se})]})});wm.displayName="ReactCompareSlider";var dl=T.forwardRef(({style:e,...t},i)=>{let s=s1(e);return n.jsx("img",{ref:i,...t,style:s,"data-rcs":"image"})});dl.displayName="ReactCompareSliderImage";var Xl={};(function e(t,i,s,a){var o=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),c=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=(function(){if(!t.OffscreenCanvas)return!1;try{var _=new OffscreenCanvas(1,1),A=_.getContext("2d");A.fillRect(0,0,1,1);var H=_.transferToImageBitmap();A.createPattern(H,"no-repeat")}catch{return!1}return!0})();function h(){}function d(_){var A=i.exports.Promise,H=A!==void 0?A:t.Promise;return typeof H=="function"?new H(_):(_(h,h),null)}var f=(function(_,A){return{transform:function(H){if(_)return H;if(A.has(H))return A.get(H);var k=new OffscreenCanvas(H.width,H.height),B=k.getContext("2d");return B.drawImage(H,0,0),A.set(H,k),k},clear:function(){A.clear()}}})(u,new Map),p=(function(){var _=Math.floor(16.666666666666668),A,H,k={},B=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(A=function(U){var V=Math.random();return k[V]=requestAnimationFrame(function Q(J){B===J||B+_-1<J?(B=J,delete k[V],U()):k[V]=requestAnimationFrame(Q)}),V},H=function(U){k[U]&&cancelAnimationFrame(k[U])}):(A=function(U){return setTimeout(U,_)},H=function(U){return clearTimeout(U)}),{frame:A,cancel:H}})(),x=(function(){var _,A,H={};function k(B){function U(V,Q){B.postMessage({options:V||{},callback:Q})}B.init=function(Q){var J=Q.transferControlToOffscreen();B.postMessage({canvas:J},[J])},B.fire=function(Q,J,de){if(A)return U(Q,null),A;var me=Math.random().toString(36).slice(2);return A=d(function(ye){function Ne(He){He.data.callback===me&&(delete H[me],B.removeEventListener("message",Ne),A=null,f.clear(),de(),ye())}B.addEventListener("message",Ne),U(Q,me),H[me]=Ne.bind(null,{data:{callback:me}})}),A},B.reset=function(){B.postMessage({reset:!0});for(var Q in H)H[Q](),delete H[Q]}}return function(){if(_)return _;if(!s&&o){var B=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{_=new Worker(URL.createObjectURL(new Blob([B])))}catch(U){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",U),null}k(_)}return _}})(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(_,A){return A?A(_):_}function w(_){return _!=null}function j(_,A,H){return y(_&&w(_[A])?_[A]:b[A],H)}function S(_){return _<0?0:Math.floor(_)}function C(_,A){return Math.floor(Math.random()*(A-_))+_}function N(_){return parseInt(_,16)}function R(_){return _.map(P)}function P(_){var A=String(_).replace(/[^0-9a-f]/gi,"");return A.length<6&&(A=A[0]+A[0]+A[1]+A[1]+A[2]+A[2]),{r:N(A.substring(0,2)),g:N(A.substring(2,4)),b:N(A.substring(4,6))}}function I(_){var A=j(_,"origin",Object);return A.x=j(A,"x",Number),A.y=j(A,"y",Number),A}function F(_){_.width=document.documentElement.clientWidth,_.height=document.documentElement.clientHeight}function $(_){var A=_.getBoundingClientRect();_.width=A.width,_.height=A.height}function ne(_){var A=document.createElement("canvas");return A.style.position="fixed",A.style.top="0px",A.style.left="0px",A.style.pointerEvents="none",A.style.zIndex=_,A}function O(_,A,H,k,B,U,V,Q,J){_.save(),_.translate(A,H),_.rotate(U),_.scale(k,B),_.arc(0,0,1,V,Q,J),_.restore()}function D(_){var A=_.angle*(Math.PI/180),H=_.spread*(Math.PI/180);return{x:_.x,y:_.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:_.startVelocity*.5+Math.random()*_.startVelocity,angle2D:-A+(.5*H-Math.random()*H),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:_.color,shape:_.shape,tick:0,totalTicks:_.ticks,decay:_.decay,drift:_.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:_.gravity*3,ovalScalar:.6,scalar:_.scalar,flat:_.flat}}function M(_,A){A.x+=Math.cos(A.angle2D)*A.velocity+A.drift,A.y+=Math.sin(A.angle2D)*A.velocity+A.gravity,A.velocity*=A.decay,A.flat?(A.wobble=0,A.wobbleX=A.x+10*A.scalar,A.wobbleY=A.y+10*A.scalar,A.tiltSin=0,A.tiltCos=0,A.random=1):(A.wobble+=A.wobbleSpeed,A.wobbleX=A.x+10*A.scalar*Math.cos(A.wobble),A.wobbleY=A.y+10*A.scalar*Math.sin(A.wobble),A.tiltAngle+=.1,A.tiltSin=Math.sin(A.tiltAngle),A.tiltCos=Math.cos(A.tiltAngle),A.random=Math.random()+2);var H=A.tick++/A.totalTicks,k=A.x+A.random*A.tiltCos,B=A.y+A.random*A.tiltSin,U=A.wobbleX+A.random*A.tiltCos,V=A.wobbleY+A.random*A.tiltSin;if(_.fillStyle="rgba("+A.color.r+", "+A.color.g+", "+A.color.b+", "+(1-H)+")",_.beginPath(),c&&A.shape.type==="path"&&typeof A.shape.path=="string"&&Array.isArray(A.shape.matrix))_.fill(ce(A.shape.path,A.shape.matrix,A.x,A.y,Math.abs(U-k)*.1,Math.abs(V-B)*.1,Math.PI/10*A.wobble));else if(A.shape.type==="bitmap"){var Q=Math.PI/10*A.wobble,J=Math.abs(U-k)*.1,de=Math.abs(V-B)*.1,me=A.shape.bitmap.width*A.scalar,ye=A.shape.bitmap.height*A.scalar,Ne=new DOMMatrix([Math.cos(Q)*J,Math.sin(Q)*J,-Math.sin(Q)*de,Math.cos(Q)*de,A.x,A.y]);Ne.multiplySelf(new DOMMatrix(A.shape.matrix));var He=_.createPattern(f.transform(A.shape.bitmap),"no-repeat");He.setTransform(Ne),_.globalAlpha=1-H,_.fillStyle=He,_.fillRect(A.x-me/2,A.y-ye/2,me,ye),_.globalAlpha=1}else if(A.shape==="circle")_.ellipse?_.ellipse(A.x,A.y,Math.abs(U-k)*A.ovalScalar,Math.abs(V-B)*A.ovalScalar,Math.PI/10*A.wobble,0,2*Math.PI):O(_,A.x,A.y,Math.abs(U-k)*A.ovalScalar,Math.abs(V-B)*A.ovalScalar,Math.PI/10*A.wobble,0,2*Math.PI);else if(A.shape==="star")for(var ke=Math.PI/2*3,We=4*A.scalar,ot=8*A.scalar,Xe=A.x,nt=A.y,st=5,ae=Math.PI/st;st--;)Xe=A.x+Math.cos(ke)*ot,nt=A.y+Math.sin(ke)*ot,_.lineTo(Xe,nt),ke+=ae,Xe=A.x+Math.cos(ke)*We,nt=A.y+Math.sin(ke)*We,_.lineTo(Xe,nt),ke+=ae;else _.moveTo(Math.floor(A.x),Math.floor(A.y)),_.lineTo(Math.floor(A.wobbleX),Math.floor(B)),_.lineTo(Math.floor(U),Math.floor(V)),_.lineTo(Math.floor(k),Math.floor(A.wobbleY));return _.closePath(),_.fill(),A.tick<A.totalTicks}function q(_,A,H,k,B){var U=A.slice(),V=_.getContext("2d"),Q,J,de=d(function(me){function ye(){Q=J=null,V.clearRect(0,0,k.width,k.height),f.clear(),B(),me()}function Ne(){s&&!(k.width===a.width&&k.height===a.height)&&(k.width=_.width=a.width,k.height=_.height=a.height),!k.width&&!k.height&&(H(_),k.width=_.width,k.height=_.height),V.clearRect(0,0,k.width,k.height),U=U.filter(function(He){return M(V,He)}),U.length?Q=p.frame(Ne):ye()}Q=p.frame(Ne),J=ye});return{addFettis:function(me){return U=U.concat(me),de},canvas:_,promise:de,reset:function(){Q&&p.cancel(Q),J&&J()}}}function Z(_,A){var H=!_,k=!!j(A||{},"resize"),B=!1,U=j(A,"disableForReducedMotion",Boolean),V=o&&!!j(A||{},"useWorker"),Q=V?x():null,J=H?F:$,de=_&&Q?!!_.__confetti_initialized:!1,me=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ye;function Ne(ke,We,ot){for(var Xe=j(ke,"particleCount",S),nt=j(ke,"angle",Number),st=j(ke,"spread",Number),ae=j(ke,"startVelocity",Number),be=j(ke,"decay",Number),we=j(ke,"gravity",Number),Pe=j(ke,"drift",Number),Ue=j(ke,"colors",R),Pt=j(ke,"ticks",Number),X=j(ke,"shapes"),oe=j(ke,"scalar"),ge=!!j(ke,"flat"),Se=I(ke),Re=Xe,ut=[],bt=_.width*Se.x,kt=_.height*Se.y;Re--;)ut.push(D({x:bt,y:kt,angle:nt,spread:st,startVelocity:ae,color:Ue[Re%Ue.length],shape:X[C(0,X.length)],ticks:Pt,decay:be,gravity:we,drift:Pe,scalar:oe,flat:ge}));return ye?ye.addFettis(ut):(ye=q(_,ut,J,We,ot),ye.promise)}function He(ke){var We=U||j(ke,"disableForReducedMotion",Boolean),ot=j(ke,"zIndex",Number);if(We&&me)return d(function(ae){ae()});H&&ye?_=ye.canvas:H&&!_&&(_=ne(ot),document.body.appendChild(_)),k&&!de&&J(_);var Xe={width:_.width,height:_.height};Q&&!de&&Q.init(_),de=!0,Q&&(_.__confetti_initialized=!0);function nt(){if(Q){var ae={getBoundingClientRect:function(){if(!H)return _.getBoundingClientRect()}};J(ae),Q.postMessage({resize:{width:ae.width,height:ae.height}});return}Xe.width=Xe.height=null}function st(){ye=null,k&&(B=!1,t.removeEventListener("resize",nt)),H&&_&&(document.body.contains(_)&&document.body.removeChild(_),_=null,de=!1)}return k&&!B&&(B=!0,t.addEventListener("resize",nt,!1)),Q?Q.fire(ke,Xe,st):Ne(ke,Xe,st)}return He.reset=function(){Q&&Q.reset(),ye&&ye.reset()},He}var W;function ee(){return W||(W=Z(null,{useWorker:!0,resize:!0})),W}function ce(_,A,H,k,B,U,V){var Q=new Path2D(_),J=new Path2D;J.addPath(Q,new DOMMatrix(A));var de=new Path2D;return de.addPath(J,new DOMMatrix([Math.cos(V)*B,Math.sin(V)*B,-Math.sin(V)*U,Math.cos(V)*U,H,k])),de}function se(_){if(!c)throw new Error("path confetti are not supported in this browser");var A,H;typeof _=="string"?A=_:(A=_.path,H=_.matrix);var k=new Path2D(A),B=document.createElement("canvas"),U=B.getContext("2d");if(!H){for(var V=1e3,Q=V,J=V,de=0,me=0,ye,Ne,He=0;He<V;He+=2)for(var ke=0;ke<V;ke+=2)U.isPointInPath(k,He,ke,"nonzero")&&(Q=Math.min(Q,He),J=Math.min(J,ke),de=Math.max(de,He),me=Math.max(me,ke));ye=de-Q,Ne=me-J;var We=10,ot=Math.min(We/ye,We/Ne);H=[ot,0,0,ot,-Math.round(ye/2+Q)*ot,-Math.round(Ne/2+J)*ot]}return{type:"path",path:A,matrix:H}}function ve(_){var A,H=1,k="#000000",B='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof _=="string"?A=_:(A=_.text,H="scalar"in _?_.scalar:H,B="fontFamily"in _?_.fontFamily:B,k="color"in _?_.color:k);var U=10*H,V=""+U+"px "+B,Q=new OffscreenCanvas(U,U),J=Q.getContext("2d");J.font=V;var de=J.measureText(A),me=Math.ceil(de.actualBoundingBoxRight+de.actualBoundingBoxLeft),ye=Math.ceil(de.actualBoundingBoxAscent+de.actualBoundingBoxDescent),Ne=2,He=de.actualBoundingBoxLeft+Ne,ke=de.actualBoundingBoxAscent+Ne;me+=Ne+Ne,ye+=Ne+Ne,Q=new OffscreenCanvas(me,ye),J=Q.getContext("2d"),J.font=V,J.fillStyle=k,J.fillText(A,He,ke);var We=1/H;return{type:"bitmap",bitmap:Q.transferToImageBitmap(),matrix:[We,0,0,We,-me*We/2,-ye*We/2]}}i.exports=function(){return ee().apply(this,arguments)},i.exports.reset=function(){ee().reset()},i.exports.create=Z,i.exports.shapeFromPath=se,i.exports.shapeFromText=ve})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Xl,!1);const _m=Xl.exports;Xl.exports.create;function u1({isOpen:e,onClose:t}){const i=ki(a=>a.userId);_t();const s=a=>{let o;a==="starter"?o="https://pay.kirvano.com/30cef9d1-c08e-49ed-b361-2862f182485f":o="https://pay.kirvano.com/b26facd0-9585-4b17-8b68-d58aaf659939";const c=i?`${o}?external_id=${i}`:o;window.open(c,"_blank")};return n.jsx(Ye,{children:e&&n.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6",children:[n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/90 backdrop-blur-md"}),n.jsxs(K.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-6xl bg-[#0a0a0a] border border-white/10 rounded-[3rem] overflow-hidden shadow-[0_0_100px_rgba(255,94,0,0.3)] max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"absolute top-0 inset-x-0 h-60 bg-gradient-to-b from-primary/20 via-primary/5 to-transparent pointer-events-none"}),n.jsx("button",{onClick:t,className:"absolute top-6 right-6 p-3 hover:bg-white/5 rounded-full text-white/40 hover:text-white transition-colors z-10",children:n.jsx(Ht,{className:"w-6 h-6"})}),n.jsxs("div",{className:"p-8 md:p-12 pt-20 relative z-10",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("div",{className:"w-20 h-20 bg-primary rounded-3xl flex items-center justify-center mb-6 shadow-2xl shadow-primary/40 rotate-12 mx-auto",children:n.jsx(Wt,{className:"w-10 h-10 text-white fill-current"})}),n.jsxs("h2",{className:"text-4xl md:text-6xl font-black italic tracking-tighter uppercase mb-4",children:["Escolha Seu ",n.jsx("span",{className:"text-primary",children:"Arsenal"})]}),n.jsx("p",{className:"text-white/50 font-medium text-lg max-w-2xl mx-auto",children:"De teste gratuito a domnio total do delivery. Voc escolhe o ritmo."})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 flex flex-col",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-white/30",children:"Teste Grtis"}),n.jsx("h3",{className:"text-2xl font-black mt-2 mb-1 italic uppercase",children:"Degustao"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"text-5xl font-black tracking-tight mb-1 italic",children:"R$ 0"}),n.jsx("p",{className:"text-xs font-bold text-white/40",children:"Sem carto  Sem compromisso"})]}),n.jsxs("ul",{className:"space-y-2 mb-8 flex-grow text-sm font-medium text-white/50",children:[n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(Wi,{className:"w-4 h-4 text-white/20 shrink-0 mt-0.5"}),n.jsxs("span",{children:[n.jsx("span",{className:"text-white font-bold",children:"1 Crdito"})," para testar"]})]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(Wi,{className:"w-4 h-4 text-white/20 shrink-0 mt-0.5"}),"Baixa Resoluo (720p)"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(Wi,{className:"w-4 h-4 text-white/20 shrink-0 mt-0.5"}),"Com Marca d'gua"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(Wi,{className:"w-4 h-4 text-white/20 shrink-0 mt-0.5"}),"1 Estilo disponvel"]})]}),n.jsx(it,{to:"/app",onClick:t,className:"mt-auto",children:n.jsx("button",{className:"w-full py-4 rounded-2xl border-2 border-white/10 font-black hover:bg-white/5 transition-all uppercase tracking-widest text-xs",children:"Testar Agora"})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-2 border-blue-500/30 rounded-3xl p-8 flex flex-col relative",children:[n.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-4 py-1 rounded-full font-black text-[10px] tracking-widest uppercase",children:"Ideal Cardpios Pequenos"}),n.jsxs("div",{className:"mb-6 mt-2",children:[n.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-blue-400",children:"Pagamento nico"}),n.jsx("h3",{className:"text-2xl font-black mt-2 mb-1 italic uppercase",children:"Pack Delivery"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[n.jsx("span",{className:"text-5xl font-black tracking-tight italic",children:"R$ 97"}),n.jsx("span",{className:"text-lg font-bold text-white/40",children:"/ms"})]}),n.jsx("p",{className:"text-sm font-bold text-blue-400",children:"15 Crditos Mensais"}),n.jsx("p",{className:"text-xs font-black text-white/30 mt-1",children:"(Acumulativos)  R$ 6,40/foto"})]}),n.jsxs("ul",{className:"space-y-2 mb-8 flex-grow text-sm font-medium",children:[n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),n.jsx("span",{className:"text-white font-bold",children:"15 Crditos"})]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),"Full HD (1080p)"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),"Sem Marca d'gua"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),"Todos os Estilos Pro"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),"Suporte via Email"]})]}),n.jsx("button",{onClick:()=>s("starter"),className:"w-full py-5 rounded-2xl bg-blue-500 hover:bg-blue-600 font-black text-white shadow-xl shadow-blue-500/30 uppercase tracking-tighter text-base transition-all hover:scale-[1.02] active:scale-95 mt-auto",children:"Comprar Pack"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-primary/20 to-orange-600/10 border-2 border-primary rounded-3xl p-8 flex flex-col relative overflow-hidden transform scale-105",children:[n.jsx("div",{className:"absolute top-0 right-0 bg-primary text-white px-6 py-2 rounded-bl-3xl font-black text-[10px] tracking-widest uppercase italic",children:"MAIS VENDIDO"}),n.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-primary/5 to-transparent pointer-events-none"}),n.jsxs("div",{className:"mb-6 mt-6 relative z-10",children:[n.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-primary",children:"Emprata Neural Engine"}),n.jsx("h3",{className:"text-2xl font-black mt-2 mb-1 italic uppercase",children:"Franquia / Pro"})]}),n.jsxs("div",{className:"mb-6 relative z-10",children:[n.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[n.jsx("span",{className:"text-5xl font-black tracking-tight italic",children:"R$ 197"}),n.jsx("span",{className:"text-lg font-bold text-white/40",children:"/ms"})]}),n.jsx("p",{className:"text-sm font-bold text-primary",children:"50 Crditos Mensais + Vibes PRO"}),n.jsx("p",{className:"text-xs font-black text-white/30 mt-1",children:"(Acumulativos)  R$ 3,90/foto "})]}),n.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-3 mb-6 relative z-10",children:n.jsx("p",{className:"text-xs font-black text-primary uppercase tracking-wide text-center",children:" Recomendado para Dark Kitchens"})}),n.jsxs("ul",{className:"space-y-2 mb-8 flex-grow text-sm font-medium relative z-10",children:[n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(cn,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),n.jsx("span",{className:"text-white font-bold",children:"50 Crditos Premium"})]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(cn,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"4K Ultra HD"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(cn,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"Sem Marca d'gua"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(cn,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"Estilos Exclusivos"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(cn,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"Suporte WhatsApp"]}),n.jsxs("li",{className:"flex gap-2 items-start",children:[n.jsx(cn,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"Processamento Rpido"]})]}),n.jsxs("button",{onClick:()=>s("pro"),className:"w-full py-5 rounded-2xl bg-primary hover:bg-orange-600 font-black text-white shadow-xl shadow-primary/40 uppercase tracking-tighter text-base transition-all hover:scale-[1.02] active:scale-95 mt-auto relative z-10",children:[n.jsx(Gr,{className:"w-5 h-5 inline-block mr-2 fill-current"}),"Quero Lucro Mximo"]})]})]}),n.jsx("p",{className:"text-center text-xs font-black uppercase tracking-widest text-white/20 mt-8",children:"Pagamento 100% Seguro  Processado pela Kirvano"})]})]})]})})}function d1(){const[e,t]=T.useState(!1),[i,s]=T.useState(null);return{downloadImage:async(o,c)=>{try{t(!0),s(null);const u=document.createElement("canvas");u.width=1080,u.height=1080;const h=u.getContext("2d");if(!h)throw new Error("Canvas context not available");const d=await h1(o);p1(h,d,u.width,u.height),c==="FREE"&&m1(h,u.width,u.height),await f1(u,"emprata_resultado.jpg")}catch(u){throw console.error("Download error:",u),s("Erro ao baixar imagem. Tente novamente."),u}finally{t(!1)}},isDownloading:e,error:i}}function h1(e){return new Promise((t,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>t(s),s.onerror=()=>i(new Error("Failed to load image")),s.src=e})}function p1(e,t,i,s){const a=t.width/t.height,o=i/s;let c=0,u=0,h=t.width,d=t.height;a>o?(h=t.height*o,c=(t.width-h)/2):(d=t.width/o,u=(t.height-d)/2),e.drawImage(t,c,u,h,d,0,0,i,s)}function m1(e,t,i){e.save(),e.translate(t/2,i/2),e.rotate(-Math.PI/4),e.font="bold 80px sans-serif",e.fillStyle="rgba(255, 255, 255, 0.3)",e.textAlign="center",e.textBaseline="middle",e.fillText("EMPRATA.AI - FREE",0,0),e.restore(),e.save();const s=40,a=30;e.font=`bold ${s}px sans-serif`,e.fillStyle="rgba(255, 94, 0, 0.6)",e.strokeStyle="rgba(0, 0, 0, 0.5)",e.lineWidth=3,e.textAlign="right",e.textBaseline="bottom";const o="Emprata.ai";e.strokeText(o,t-a,i-a),e.fillText(o,t-a,i-a),e.restore()}function f1(e,t){return new Promise((i,s)=>{e.toBlob(a=>{if(!a){s(new Error("Failed to create blob"));return}const o=URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o),i()},"image/jpeg",.95)})}const x1=[{id:"rustico",name:"Mesa Rstica",image:"https://images.unsplash.com/photo-1547592166-23ac45744acd?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"rustic wooden table, natural lighting, artisanal presentation",description:"Madeira natural, iluminao suave, estilo caseiro"},{id:"gourmet",name:"Mrmore Clean",image:"https://images.unsplash.com/photo-1615799998603-7c6270a45196?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"white marble surface, minimalist, clean aesthetic, soft shadows",description:"Mrmore branco, minimalista, sombras suaves"},{id:"dark",name:"Moody Dark",image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"dark moody atmosphere, dramatic lighting, black background",description:"Atmosfera escura, iluminao dramtica"},{id:"domingo",name:"Sol de Manh",image:"https://images.unsplash.com/photo-1473093226795-af9932fe5856?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"bright morning sunlight, warm tones, fresh and airy",description:"Luz solar matinal, tons quentes, fresco"},{id:"marble",name:"Onyx Luxo",image:"https://images.unsplash.com/photo-1518013431117-eb1465fa5752?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"black marble, luxury presentation, gold accents",description:"Mrmore preto, apresentao luxuosa"},{id:"neon",name:"Neon Cyber",image:"https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"neon lights, cyberpunk aesthetic, vibrant colors, futuristic",description:"Luzes neon, esttica cyberpunk, futurista"},{id:"chefs-table",name:"Chef's Table",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"fine dining, dramatic spotlight, dark background, professional plating, michelin star presentation",description:"Iluminao dramtica, foco pontual, alta gastronomia"},{id:"editorial",name:"Editorial Magazine",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"solid color background, hard shadows, pop art style, magazine editorial, bold composition",description:"Fundo colorido slido, sombras duras, estilo revista"},{id:"morning-brunch",name:"Morning Brunch",image:"https://images.unsplash.com/photo-1533777324565-a040eb52facd?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"intense natural light, plant shadows, airy atmosphere, fresh breakfast setting, window light",description:"Luz natural intensa, sombras de plantas, arejado"},{id:"dark-kitchen",name:"Dark Kitchen",image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"slate stone surface, steam rising, industrial style, professional kitchen atmosphere",description:"Pedra ardsia, vapor, estilo industrial"},{id:"golden-hour",name:"Golden Hour",image:"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"sunset lighting, warm golden tones, soft glow, magic hour photography",description:"Luz do pr do sol, tons dourados, brilho suave"},{id:"macro-detail",name:"Macro Detail",image:"https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"extreme close-up, texture focus, bokeh background, macro photography, shallow depth of field",description:"Foco extremo na textura, fundo desfocado (bokeh)"}],g1=[{id:"top",label:"Flat Lay",subLabel:"90",icon:zx},{id:"diagonal",label:"Diner's Eye",subLabel:"45",icon:Fx},{id:"front",label:"The Hero",subLabel:"0",icon:Js},{id:"macro",label:"Macro",subLabel:"Close",icon:Bx}];function b1(){const e=ki(),{user:t}=Ke(),{downloadImage:i,isDownloading:s,error:a}=d1(),[o,c]=T.useState(!1),[u,h]=T.useState(!1),[d,f]=T.useState(null),[p,x]=T.useState(""),[b,y]=T.useState(!1),[w,j]=T.useState(!1),[S,C]=T.useState(!1),N=T.useRef(null),R=async O=>new Promise((D,M)=>{const q=new Image,Z=document.createElement("canvas"),W=Z.getContext("2d");if(!W){M(new Error("Canvas context not available"));return}q.onload=()=>{console.log(" Cortando imagem para 1080x1080...");const ee=Math.min(q.width,q.height),ce=(q.width-ee)/2,se=(q.height-ee)/2;Z.width=1080,Z.height=1080,W.drawImage(q,ce,se,ee,ee,0,0,1080,1080),Z.toBlob(ve=>{if(ve){const _=new File([ve],O.name,{type:"image/jpeg",lastModified:Date.now()});console.log(" Imagem cortada:",_.size,"bytes"),D(_)}else M(new Error("Failed to create blob from canvas"))},"image/jpeg",.95)},q.onerror=()=>M(new Error("Failed to load image for cropping")),q.src=URL.createObjectURL(O)});T.useEffect(()=>{if(e.generatedImage){j(!0),y(!1);const O=new Image;O.onload=()=>{console.log(" Imagem carregada com sucesso"),y(!0),j(!1)},O.onerror=()=>{console.error(" Erro ao carregar imagem"),f("Erro ao carregar a imagem gerada."),j(!1),e.setGeneratedImage(null)},O.src=e.generatedImage}else y(!1),j(!1)},[e.generatedImage]),T.useEffect(()=>{a&&f(a)},[a]);const P=async O=>{const D=O.target.files?.[0];if(D)try{C(!0),f(null);const M=await R(D),q=URL.createObjectURL(M);e.setOriginalImage(q,M),C(!1)}catch(M){console.error("Erro ao processar imagem:",M),f("Erro ao processar a imagem."),C(!1)}},I=(O,D)=>{const M=e.plan.toLowerCase();if(D&&M==="free"){c(!0);return}e.setVibe(O)},F=async()=>{if(!(!e.originalImage||!e.originalFile||e.isGenerating)){if(e.plan==="FREE"&&e.credits<=0){c(!0);return}e.setIsGenerating(!0),f(null);try{x("Identificando textura..."),await new Promise(D=>setTimeout(D,800)),x("Ajustando iluminao..."),await new Promise(D=>setTimeout(D,800)),x("Empratando...");const O=await gm({file:e.originalFile,vibe:e.selectedVibe,angle:e.selectedPerspective,lightIntensity:e.lightIntensity});O.success&&O.imageUrl?(console.log(" URL recebida:",O.imageUrl),e.setGeneratedImage(O.imageUrl),e.useCredit(),setTimeout(()=>{_m({particleCount:200,spread:100,origin:{y:.6},colors:["#ff5e00","#FFC107","#FFFFFF"],ticks:300})},500)):f(O.error||"A Engine Neural falhou.")}catch(O){console.error(O),f("Erro de conexo.")}finally{e.setIsGenerating(!1),x("")}}},$=async()=>{if(e.generatedImage){if(!t){h(!0);return}try{await i(e.generatedImage,e.plan)}catch(O){console.error("Download failed:",O)}}},ne=()=>n.jsxs("div",{className:"space-y-6 md:space-y-12 pb-safe",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-end mb-4",children:[n.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30",children:"Vibe da Foto"}),n.jsx(at,{className:"w-4 h-4 text-primary"})]}),n.jsx("div",{className:"flex md:grid md:grid-cols-2 gap-3 overflow-x-auto md:overflow-x-visible no-scrollbar pb-2 px-4 md:px-0 scroll-px-4",children:x1.map(O=>{const D=O.isPro&&e.plan.toLowerCase()==="free";return n.jsx("button",{onClick:()=>I(O.id,O.isPro),className:`flex-shrink-0 w-24 h-24 md:w-auto md:aspect-square rounded-2xl md:rounded-[2rem] overflow-hidden border-2 transition-all duration-300 group ${e.selectedVibe===O.id?"border-primary ring-2 ring-primary/20 scale-105":"border-white/5"}`,children:n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("img",{src:O.image,alt:O.name,className:`w-full h-full object-cover transition-transform duration-700 ${e.selectedVibe===O.id?"scale-110":"group-hover:scale-105"}`}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-2 md:p-5",children:n.jsx("span",{className:"text-[9px] md:text-xs font-black uppercase tracking-tight italic",children:O.name})}),D&&n.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 md:w-8 md:h-8 bg-black/60 backdrop-blur-md rounded-full flex items-center justify-center border border-white/10",children:n.jsx(Gt,{className:"w-3 h-3 md:w-4 md:h-4 text-amber-500 fill-current"})})]})},O.id)})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30 mb-4",children:"ngulo"}),n.jsx("div",{className:"grid grid-cols-4 gap-2 md:gap-3",children:g1.map(O=>n.jsxs("button",{onClick:()=>e.setPerspective(O.id),className:`flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-2xl md:rounded-3xl border-2 transition-all ${e.selectedPerspective===O.id?"bg-primary border-primary text-white shadow-xl shadow-primary/20":"bg-white/5 border-white/5 text-white/40"}`,children:[n.jsx(O.icon,{className:"w-5 h-5 md:w-6 md:h-6"}),n.jsx("span",{className:"text-[8px] md:text-[9px] font-black uppercase tracking-tight",children:O.label}),n.jsx("span",{className:"text-[7px] md:text-[8px] font-bold text-white/60",children:O.subLabel})]},O.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30",children:"Luz"}),n.jsxs("span",{className:"text-sm font-black text-primary italic",children:[e.lightIntensity,"%"]})]}),n.jsxs("div",{className:"relative h-10 md:h-12 flex items-center",children:[n.jsx("div",{className:"absolute inset-x-0 h-2 bg-white/5 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-orange-900 via-primary to-amber-200",style:{width:`${e.lightIntensity}%`}})}),n.jsx("input",{type:"range",min:"0",max:"100",value:e.lightIntensity,disabled:e.plan==="FREE",onChange:O=>e.setLightIntensity(parseInt(O.target.value)),className:`absolute inset-x-0 appearance-none bg-transparent cursor-pointer z-10 h-10 md:h-12 ${e.plan==="FREE"?"cursor-not-allowed opacity-50":""}`})]}),e.plan==="FREE"&&n.jsxs("div",{onClick:()=>c(!0),className:"flex items-center gap-2 mt-3 text-[9px] md:text-[10px] font-bold text-amber-500 uppercase cursor-pointer",children:[n.jsx(Gt,{className:"w-3 h-3"})," PRO"]})]}),n.jsx(K.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:F,disabled:!e.originalImage||e.isGenerating||e.plan==="FREE"&&e.credits<=0,className:`w-full py-6 md:py-8 rounded-3xl md:rounded-[2.5rem] font-black text-lg md:text-2xl uppercase italic tracking-ultra-tight flex items-center justify-center gap-3 md:gap-4 transition-all shadow-2xl shimmer ${e.originalImage&&!e.isGenerating?"bg-primary text-white shadow-orange-intense":"bg-white/5 text-white/20 cursor-not-allowed"}`,children:e.isGenerating?n.jsx(Pl,{className:"w-6 h-6 md:w-8 md:h-8 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"w-6 h-6 md:w-8 md:h-8 fill-current"}),"GERAR MGICA"]})})]});return n.jsxs("div",{className:"min-h-[100dvh] w-screen bg-[#0a0a0a] text-white flex flex-col md:flex-row font-sans overflow-hidden",children:[n.jsx(u1,{isOpen:o,onClose:()=>c(!1)}),n.jsx(kp,{isOpen:u,onClose:()=>h(!1)}),n.jsxs("header",{className:"md:hidden absolute top-0 left-0 right-0 z-50 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent backdrop-blur-sm",children:[n.jsx(it,{to:"/dashboard",className:"text-white/60 hover:text-white transition-colors",children:n.jsx(Xo,{className:"w-7 h-7"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 bg-black/60 backdrop-blur-xl px-3 py-1.5 rounded-full border border-white/10",children:[n.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${e.credits>0?"bg-green-500":"bg-red-500"}`}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-white/80",children:e.plan==="PRO"?"":e.credits})]}),e.originalImage&&n.jsx("button",{onClick:()=>e.resetEditor(),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full border border-white/10 transition-colors",title:"Nova Foto",children:n.jsx(du,{className:"w-4 h-4 text-white/60"})}),e.generatedImage&&b&&n.jsx("button",{onClick:$,disabled:s,className:"p-2 bg-primary rounded-full disabled:opacity-50",children:s?n.jsx(Ee,{className:"w-4 h-4 text-white animate-spin"}):n.jsx(li,{className:"w-4 h-4 text-white"})})]})]}),n.jsxs("header",{className:"hidden md:flex h-20 w-full border-b border-white/5 items-center justify-between px-8 bg-[#0a0a0a]/80 backdrop-blur-3xl z-40 absolute top-0 left-0 right-0",children:[n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx(it,{to:"/dashboard",className:"text-white/40 hover:text-white transition-colors",children:n.jsx(Xo,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("h1",{className:"text-xl font-black italic tracking-ultra-tight leading-none",children:["Emprata",n.jsx("span",{className:"text-primary",children:".ai"})," Studio"]}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30",children:"v10.0 Admin Ready"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(jp,{}),e.originalImage&&n.jsxs("button",{onClick:()=>e.resetEditor(),className:"flex items-center gap-2 px-5 py-3 rounded-2xl font-black text-xs uppercase tracking-widest border border-white/10 text-white/60 hover:text-white hover:border-white/20 hover:bg-white/5 transition-all",children:[n.jsx(du,{className:"w-4 h-4"}),"Nova Foto"]}),n.jsx("button",{onClick:$,disabled:!e.generatedImage||!b||s,className:`px-8 py-3 rounded-2xl font-black text-xs uppercase tracking-widest shadow-lg transition-all ${e.generatedImage&&b&&!s?"bg-primary text-white shadow-orange-glow hover:scale-105 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"}`,children:s?"Exportando...":"Exportar"})]})]}),n.jsx(Ye,{children:d&&n.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-20 md:top-24 left-1/2 -translate-x-1/2 z-50 bg-red-500/90 backdrop-blur-xl px-4 md:px-6 py-3 md:py-4 rounded-2xl border border-red-400/50 shadow-2xl flex items-center gap-3 md:gap-4 max-w-[90%] md:max-w-none",children:[n.jsx(Qh,{className:"w-4 h-4 md:w-5 md:h-5 text-white flex-shrink-0"}),n.jsx("p",{className:"text-xs md:text-sm font-bold text-white uppercase tracking-tight",children:d}),n.jsx("button",{onClick:()=>f(null),className:"p-1 hover:bg-white/10 rounded-full transition-colors flex-shrink-0",children:n.jsx(Ht,{className:"w-3 h-3 md:w-4 md:h-4 text-white"})})]})}),n.jsx("aside",{className:"hidden md:flex w-[400px] h-full border-r border-white/5 flex-col bg-[#0a0a0a] z-10 overflow-y-auto no-scrollbar mt-20",children:n.jsx("div",{className:"p-8",children:n.jsx(ne,{})})}),n.jsxs("section",{className:`flex-1 relative min-h-0 flex items-center justify-center bg-[#0a0a0a] overflow-hidden \r
                          h-[55%] md:h-full w-full md:flex-1 md:mt-20`,children:[n.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"60px 60px"}}),n.jsx(Ye,{mode:"wait",children:e.originalImage?n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},className:"relative w-full h-full flex items-center justify-center p-4 md:p-12",children:n.jsxs("div",{className:"relative w-full h-full max-w-5xl max-h-5xl flex items-center justify-center",children:[n.jsx("div",{className:"relative shadow-[0_50px_100px_-30px_rgba(0,0,0,1)] border-4 md:border-[12px] border-white/5 rounded-2xl md:rounded-3xl overflow-hidden bg-black w-full h-full max-w-full max-h-full aspect-square",children:e.generatedImage&&b?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx(wm,{itemOne:n.jsxs("div",{className:"relative h-full flex items-center justify-center bg-black",children:[n.jsx(dl,{src:e.originalImage,alt:"Original",style:{width:"100%",height:"100%",objectFit:"contain"}}),n.jsx("div",{className:"absolute top-4 left-4 bg-black/60 backdrop-blur-xl px-3 py-1.5 rounded-full border border-white/10 text-[9px] md:text-[10px] font-black uppercase tracking-widest text-white/40 italic",children:"Original"})]}),itemTwo:n.jsxs("div",{className:"relative h-full flex items-center justify-center bg-black",children:[n.jsx(dl,{src:e.generatedImage,alt:"Generated",style:{width:"100%",height:"100%",objectFit:"contain"}}),n.jsx("div",{className:"absolute top-4 right-4 bg-primary/80 backdrop-blur-xl px-3 py-1.5 rounded-full border border-white/10 text-[9px] md:text-[10px] font-black uppercase tracking-widest text-white italic shadow-lg",children:"Neural"})]}),className:"w-full h-full"}),e.plan==="FREE"&&n.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-10",children:n.jsx("div",{className:"rotate-45 text-white/5 text-6xl md:text-[10rem] font-black tracking-ultra-tight select-none whitespace-nowrap",children:"Emprata.ai"})})]}):w?n.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4 md:gap-6 bg-black",children:[n.jsx(Ee,{className:"w-12 h-12 md:w-16 md:h-16 text-primary animate-spin"}),n.jsx("span",{className:"text-sm md:text-lg font-black italic uppercase tracking-widest text-primary/80",children:"Carregando..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("img",{src:e.originalImage,className:`w-full h-full object-contain transition-all duration-700 ${e.isGenerating?"blur-2xl opacity-40 scale-110":""}`,alt:"Preview"}),e.isGenerating&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4 md:gap-6 z-20",children:[n.jsxs("div",{className:"relative w-16 h-16 md:w-24 md:h-24",children:[n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/5 border-t-primary animate-spin"}),n.jsx("div",{className:"absolute inset-2 md:inset-4 rounded-full border-4 border-white/5 border-b-primary animate-spin-reverse"})]}),n.jsx("span",{className:"text-base md:text-2xl font-black italic uppercase tracking-widest animate-pulse text-primary drop-shadow-[0_0_15px_rgba(255,94,0,0.5)] px-4 text-center",children:p||"Processando..."})]})]})}),e.isGenerating&&n.jsx("div",{className:"scanner-line"})]})},"editor"):n.jsxs(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},onClick:()=>!S&&N.current?.click(),className:`group flex flex-col items-center ${S?"cursor-wait":"cursor-pointer"}`,children:[n.jsxs("div",{className:"w-32 h-32 md:w-56 md:h-56 bg-white/5 border-2 border-dashed border-white/20 rounded-3xl md:rounded-[4rem] flex items-center justify-center text-white/20 group-hover:border-primary group-hover:text-primary transition-all duration-500 relative",children:[n.jsx("div",{className:"absolute inset-0 bg-primary/0 group-hover:bg-primary/5 transition-all duration-500 rounded-3xl md:rounded-[4rem]"}),S?n.jsx(Ee,{className:"w-12 h-12 md:w-20 md:h-20 animate-spin text-primary"}):n.jsx($r,{className:"w-12 h-12 md:w-20 md:h-20"}),n.jsx("input",{ref:N,type:"file",onChange:P,className:"hidden",accept:"image/*",disabled:S})]}),n.jsxs("div",{className:"mt-6 md:mt-10 text-center px-4",children:[n.jsx("h2",{className:"text-xl md:text-3xl font-black uppercase italic tracking-ultra-tight mb-1 md:mb-2",children:S?"Processando...":"Sirva seu Rango"}),n.jsx("p",{className:"text-white/30 font-bold uppercase tracking-widest text-[10px] md:text-xs",children:S?"Cortando para 1080x1080":"Toque para buscar"})]})]},"empty")})]}),n.jsx("div",{className:"md:hidden w-full h-[45%] bg-[#1a1a1a] rounded-t-[30px] shadow-2xl overflow-y-auto px-6 py-6 z-20 border-t border-white/10",children:n.jsx(ne,{})})]})}function v1(){const[e,t]=T.useState([]),[i,s]=T.useState(!1),[a,o]=T.useState(!1),[c,u]=T.useState({name:"",phone:"",role:"DRIVER",pin:"",vehicle:"",plate:""});T.useEffect(()=>{const b=rt.currentUser;if(!b)return;const y=tt($e(he,"staff"),Oe("restaurantId","==",b.uid)),w=Ot(y,j=>{t(j.docs.map(S=>({id:S.id,...S.data()})))});return()=>w()},[]);const h=()=>{let b=!1,y="";for(;!b;)y=Math.floor(1e5+Math.random()*9e5).toString(),e.find(j=>j.pin===y)||(b=!0);return y},d=()=>{u(b=>({...b,pin:h()}))};T.useEffect(()=>{i&&!c.pin&&d()},[i]);const f=async()=>{if(!c.name||!c.phone)return ie.error("Preencha os dados obrigatrios");o(!0);try{await fa($e(he,"staff"),{...c,restaurantId:rt.currentUser?.uid,active:!0,createdAt:Lt()}),ie.success("Crach criado! PIN: "+c.pin),s(!1),u({name:"",phone:"",role:"DRIVER",pin:"",vehicle:"",plate:""})}catch{ie.error("Erro ao salvar")}finally{o(!1)}},p=async b=>{confirm("Revogar acesso?")&&await cp(ze(he,"staff",b))},x=async b=>{const y=h();confirm(`Atualizar o PIN de ${b.name} para 6 dgitos? Novo ser: ${y}`)&&(await Et(ze(he,"staff",b.id),{pin:y}),ie.success("PIN Atualizado!"))};return n.jsxs("div",{className:"space-y-8 p-6 text-white min-h-screen",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-black italic flex items-center gap-2",children:[n.jsx(Pn,{className:"text-primary"})," Staff & Acessos"]}),n.jsx("p",{className:"text-white/40",children:"Gerenciamento de crachs digitais."})]}),n.jsxs("button",{onClick:()=>s(!0),className:"bg-white text-black px-6 py-3 rounded-xl font-black flex items-center gap-2 hover:scale-105 transition-transform",children:[n.jsx(yn,{size:20})," NOVO MEMBRO"]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.length===0&&n.jsxs("div",{className:"col-span-full text-center py-20 bg-[#121212] rounded-3xl border border-white/5 border-dashed",children:[n.jsx(vn,{size:48,className:"mx-auto text-white/20 mb-4"}),n.jsx("p",{className:"text-white/40 font-bold",children:"Sua equipe est vazia."}),n.jsx("p",{className:"text-xs text-white/20",children:'Clique em "Novo Membro" para comear.'})]}),e.map(b=>n.jsxs(K.div,{layout:!0,className:"bg-[#121212] border border-white/10 rounded-2xl p-6 relative group hover:border-white/20 transition-all",children:[n.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx("button",{onClick:()=>p(b.id),className:"text-red-500 hover:bg-red-500/10 p-2 rounded",children:n.jsx(Lr,{size:16})})}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-2xl shadow-lg border border-white/5 ${b.role==="DRIVER"?"bg-green-500/20 text-green-400":b.role==="WAITER"?"bg-blue-500/20 text-blue-400":b.role==="KITCHEN"?"bg-orange-500/20 text-orange-400":"bg-purple-500/20 text-purple-400"}`,children:[b.role==="DRIVER"&&n.jsx(In,{}),b.role==="WAITER"&&n.jsx(Tn,{}),b.role==="KITCHEN"&&n.jsx(gt,{}),b.role==="MANAGER"&&n.jsx(Pn,{})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg leading-tight",children:b.name}),n.jsx("span",{className:"text-xs font-mono text-white/40 uppercase tracking-widest",children:b.role})]})]}),n.jsx("div",{className:"bg-black/40 rounded-xl p-4 border border-white/5 mb-2 relative overflow-hidden",children:n.jsxs("div",{className:"flex justify-between items-end relative z-10",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-[9px] uppercase font-bold text-white/30 mb-1 flex items-center gap-1",children:[n.jsx(Ux,{size:10})," PIN de Acesso"]}),n.jsx("p",{className:`text-2xl font-mono font-black tracking-[0.2em] select-all ${b.pin.length<6?"text-red-400":"text-white"}`,children:b.pin})]}),n.jsx("button",{onClick:()=>{navigator.clipboard.writeText(b.pin),ie.success("PIN copiado!")},className:"text-white/20 hover:text-white",children:n.jsx(ha,{size:18})})]})}),b.pin.length<6&&n.jsxs("button",{onClick:()=>x(b),className:"w-full mt-2 py-2 bg-red-500/10 text-red-400 text-xs font-bold rounded-lg border border-red-500/20 flex items-center justify-center gap-2 hover:bg-red-500/20",children:[n.jsx(ji,{size:12})," Atualizar para 6 Dgitos"]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-white/5 mt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/30",children:[n.jsx(Yn,{size:12}),n.jsxs("span",{className:"font-mono",children:["ID: ",b.id.slice(0,6).toUpperCase()]})]}),b.role==="DRIVER"&&b.plate&&n.jsx("span",{className:"text-xs font-bold text-white/40 bg-white/5 px-2 py-1 rounded",children:b.plate.toUpperCase()})]})]},b.id))]}),n.jsx(Ye,{children:i&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",children:n.jsxs(K.div,{initial:{scale:.9},animate:{scale:1},className:"bg-[#121212] w-full max-w-md rounded-3xl border border-white/10 p-8 shadow-2xl",children:[n.jsx("h2",{className:"text-2xl font-black mb-6",children:"Novo Acesso"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-2",children:["DRIVER","WAITER","KITCHEN","MANAGER"].map(b=>n.jsx("button",{onClick:()=>u({...c,role:b}),className:`py-3 rounded-xl text-xs font-bold border transition-all ${c.role===b?"bg-white text-black border-white":"border-white/10 text-white/40 hover:bg-white/5"}`,children:b==="DRIVER"?"ENTREGADOR":b==="WAITER"?"GAROM":b==="KITCHEN"?"COZINHA":"GERENTE"},b))}),n.jsx("input",{placeholder:"Nome Completo",value:c.name,onChange:b=>u({...c,name:b.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-4 text-white focus:border-primary outline-none"}),n.jsx("input",{placeholder:"WhatsApp (Ex: 11999999999)",value:c.phone,onChange:b=>u({...c,phone:b.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-4 text-white focus:border-primary outline-none"}),c.role==="DRIVER"&&n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{placeholder:"Veculo",value:c.vehicle,onChange:b=>u({...c,vehicle:b.target.value}),className:"bg-black/50 border border-white/10 rounded-xl p-4 text-white text-sm focus:border-primary outline-none"}),n.jsx("input",{placeholder:"Placa",value:c.plate,onChange:b=>u({...c,plate:b.target.value}),className:"bg-black/50 border border-white/10 rounded-xl p-4 text-white text-sm uppercase focus:border-primary outline-none"})]}),n.jsxs("div",{className:"bg-primary/10 border border-primary/20 p-4 rounded-xl flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-primary font-bold uppercase",children:"PIN Gerado (6 Dgitos)"}),n.jsx("p",{className:"text-3xl font-black font-mono text-white tracking-widest",children:c.pin})]}),n.jsx("button",{onClick:d,className:"p-2 bg-white/5 rounded-full hover:bg-white/10 transition-colors",children:n.jsx(Pl,{size:16})})]}),n.jsx("button",{onClick:f,disabled:a,className:"w-full py-4 bg-primary text-black font-black rounded-xl hover:scale-[1.02] transition-transform disabled:opacity-50",children:a?n.jsx(Ee,{className:"animate-spin mx-auto"}):"CRIAR CRACH"}),n.jsx("button",{onClick:()=>s(!1),className:"w-full py-2 text-xs text-white/40 font-bold hover:text-white transition-colors",children:"Cancelar"})]})]})})})]})}function y1(){return n.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-4 md:p-8 pt-24",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 md:p-8 animate-pulse",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[n.jsx("div",{className:"w-24 h-24 md:w-28 md:h-28 rounded-full bg-white/10"}),n.jsxs("div",{className:"flex-1 text-center md:text-left space-y-3",children:[n.jsx("div",{className:"h-8 bg-white/10 rounded-lg w-48 mx-auto md:mx-0"}),n.jsx("div",{className:"h-4 bg-white/10 rounded w-64 mx-auto md:mx-0"})]}),n.jsx("div",{className:"h-12 w-32 bg-white/10 rounded-2xl"})]})}),n.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[1,2,3].map(e=>n.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-white/10 rounded w-24 mb-4"}),n.jsx("div",{className:"h-8 bg-white/10 rounded w-16 mb-2"}),n.jsx("div",{className:"h-3 bg-white/10 rounded w-20"})]},e))}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1 h-14 bg-white/10 rounded-2xl animate-pulse"}),n.jsx("div",{className:"flex-1 h-14 bg-white/10 rounded-2xl animate-pulse"})]})]})})}function w1(){const e=_t(),{user:t,userData:i,loading:s,signOut:a}=Ke(),{credits:o,plan:c}=ki(),[u,h]=T.useState(""),[d,f]=T.useState(!1),[p,x]=T.useState(!1),[b,y]=T.useState(null),w=12,S=(()=>{const F=new Date,$=new Date(F);$.setDate($.getDate()+30);const ne=O=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(O);return{start:ne(F),renewal:ne($)}})(),C=c?.toLowerCase()||"free",N=C==="pro"||C==="starter";if(T.useEffect(()=>{i?.name?h(i.name):t?.displayName&&h(t.displayName)},[i,t]),s)return n.jsx(y1,{});if(!t)return n.jsx(Dr,{to:"/",replace:!0});const R=async()=>{if(!(!t||!u.trim()))try{x(!0);const F=ze(he,"users",t.uid);await Et(F,{name:u.trim()}),y(" Nome atualizado!"),f(!1),setTimeout(()=>y(null),3e3)}catch(F){console.error("Error updating name:",F),y(" Erro ao atualizar")}finally{x(!1)}},P=async()=>{await a(),e("/")},I=()=>{window.open("https://kirvano.com/portal","_blank")};return n.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-4 md:p-8 pt-24",children:[n.jsx("header",{className:"fixed top-0 left-0 right-0 border-b border-white/5 bg-zinc-950/80 backdrop-blur-xl z-50",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8 py-4 flex items-center justify-between",children:[n.jsxs("button",{onClick:()=>e("/app"),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors group",children:[n.jsx(_i,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),n.jsx("span",{className:"font-bold",children:"Voltar ao Studio"})]}),n.jsxs("h1",{className:"text-xl font-black italic",children:["Emprata",n.jsx("span",{className:"text-primary",children:".ai"})]})]})}),n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white/5 border border-white/10 rounded-3xl p-6 md:p-8 backdrop-blur-xl",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`w-24 h-24 md:w-28 md:h-28 rounded-full bg-gradient-to-br ${N?"from-primary to-orange-600":"from-gray-500 to-gray-600"} flex items-center justify-center text-4xl font-black ring-4 ${N?"ring-primary/30":"ring-white/10"}`,children:t?.photoURL?n.jsx("img",{src:t.photoURL,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):n.jsx("span",{children:u?.charAt(0)?.toUpperCase()||"U"})}),n.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:scale-110 transition-transform ring-2 ring-zinc-950",children:n.jsx($r,{className:"w-4 h-4 text-white"})})]}),n.jsxs("div",{className:"flex-1 text-center md:text-left space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start",children:[n.jsx("input",{type:"text",value:u,onChange:F=>{h(F.target.value),f(!0)},className:"text-2xl md:text-3xl font-black bg-transparent border-b-2 border-transparent hover:border-white/20 focus:border-primary focus:outline-none transition-colors max-w-[200px] md:max-w-[300px]",placeholder:"Seu Nome"}),d&&n.jsx("button",{onClick:R,disabled:p,className:"p-2 bg-primary rounded-lg hover:bg-orange-600 transition-colors",children:p?n.jsx(Ee,{className:"w-4 h-4 animate-spin"}):n.jsx(Il,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-white/60 justify-center md:justify-start",children:[n.jsx(Ls,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:t?.email})]}),b&&n.jsx(K.p,{initial:{opacity:0},animate:{opacity:1},className:`text-sm font-bold ${b.includes("")?"text-green-400":"text-red-400"}`,children:b})]}),n.jsxs("div",{className:`px-6 py-3 rounded-2xl ${N?"bg-gradient-to-r from-primary to-orange-600":"bg-white/10"} text-white font-black text-sm uppercase flex items-center gap-2 shadow-lg`,children:[n.jsx(cn,{className:`w-5 h-5 ${N?"fill-current":""}`}),N?"ASSINANTE PRO":"MEMBRO GRATUITO"]})]})}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"bg-gradient-to-br from-primary/20 to-orange-600/20 border-2 border-primary/30 rounded-2xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Wt,{className:"w-5 h-5 text-primary fill-current"}),n.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider",children:"Crditos"})]}),n.jsx("p",{className:"text-4xl font-black text-white mb-1",children:o}),n.jsx("p",{className:"text-xs text-white/40 font-bold",children:"Disponveis"})]}),n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Rl,{className:"w-5 h-5 text-blue-400"}),n.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider",children:"Ciclo Atual"})]}),n.jsx("div",{className:"space-y-1",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-white/60 text-sm",children:"Renovao:"}),n.jsx("span",{className:"font-bold text-sm text-primary",children:S.renewal})]})}),n.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[n.jsx(gi,{className:"w-3 h-3 text-green-500"}),n.jsx("span",{className:"text-green-400 font-bold text-xs",children:"Ativo"})]})]}),n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(ea,{className:"w-5 h-5 text-purple-400"}),n.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider",children:"Imagens"})]}),n.jsx("p",{className:"text-4xl font-black text-white mb-1",children:w}),n.jsx("p",{className:"text-xs text-white/40 font-bold",children:"Geradas este ms"})]})]}),n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("button",{onClick:I,className:"flex-1 bg-primary hover:bg-orange-600 text-white font-black py-4 px-6 rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg shadow-primary/20",children:[n.jsx(Or,{className:"w-5 h-5"}),"Gerenciar Assinatura"]}),n.jsxs("button",{onClick:P,className:"flex-1 bg-white/5 hover:bg-red-500/20 border border-white/10 hover:border-red-500/50 text-white font-bold py-4 px-6 rounded-2xl flex items-center justify-center gap-2 transition-all",children:[n.jsx(qr,{className:"w-5 h-5"}),"Sair da Conta"]})]})]})]})}function _1({feature:e,children:t,fallback:i="blur",lockedMessage:s}){const{checkAccess:a}=ir(),o=_t(),c=a(e),u=tr(e),h=bi[u];return c?n.jsx(n.Fragment,{children:t}):i==="hidden"?null:i==="blur"?n.jsxs("div",{className:"relative group cursor-not-allowed overflow-hidden rounded-xl",children:[n.jsx("div",{className:"filter blur-md opacity-50 pointer-events-none select-none grayscale scale-[1.02]",children:t}),n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center z-10 bg-black/20 backdrop-blur-[2px] group-hover:bg-black/40 transition-all duration-300",children:n.jsxs("div",{className:"flex flex-col items-center gap-3 p-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-black/50 flex items-center justify-center border border-white/10",children:n.jsx(Gt,{className:"text-white/80",size:20})}),n.jsx("p",{className:"text-white/60 text-sm text-center max-w-[200px]",children:s||`Recurso exclusivo do plano ${h.label}`}),n.jsxs(K.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o("/subscription"),className:`${h.bgColor} text-black px-5 py-2 rounded-full text-xs font-black uppercase tracking-wider flex items-center gap-2 shadow-lg hover:shadow-xl transition-shadow`,children:[n.jsx(Wt,{size:14,fill:"currentColor"}),"Desbloquear"]})]})})]}):i==="card"?n.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"relative rounded-2xl border border-white/10 bg-white/5 p-6 flex flex-col items-center justify-center min-h-[200px] cursor-pointer hover:border-white/20 transition-colors group",onClick:()=>o("/subscription"),children:[n.jsx("div",{className:`w-16 h-16 rounded-xl ${h.bgColor}/20 flex items-center justify-center mb-4`,children:n.jsx(cn,{className:h.color,size:28})}),n.jsx("p",{className:"text-white font-bold text-center mb-1",children:s||"Recurso Premium"}),n.jsxs("p",{className:"text-white/40 text-sm text-center mb-4",children:["Requer plano ",h.label]}),n.jsxs(K.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`${h.bgColor} text-black px-6 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 group-hover:shadow-lg transition-shadow`,children:[n.jsx(Wt,{size:16,fill:"currentColor"}),"Fazer Upgrade"]})]}):null}function j1(){const{currentPlan:e}=ir();return n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-8 min-h-screen pb-20",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-white",children:"Central Financeira"}),n.jsx("p",{className:"text-white/50",children:"Gerencie seus ganhos e saques."})]}),n.jsx(N1,{}),n.jsxs("div",{className:"pt-8 border-t border-white/10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(nr,{className:"text-purple-400"}),n.jsx("h2",{className:"text-xl font-bold text-white",children:"Inteligncia de Lucro"}),e!=="BLACK"&&n.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-300 px-2 py-1 rounded border border-purple-500/30",children:"EXCLUSIVO BLACK"})]}),n.jsx(_1,{feature:"financial_analytics",fallback:"blur",children:n.jsx(k1,{})})]})]})}function N1(){const{user:e}=Ke(),[t,i]=T.useState({available:0,pending:0}),[s,a]=T.useState([]),[o,c]=T.useState(!0);T.useEffect(()=>{if(!e)return;(async()=>{c(!0);try{const d=new Date,f=new Date(d.getFullYear(),d.getMonth(),1),p=tt($e(he,"orders"),Oe("restaurantId","==",e.uid),Oe("status","in",["DELIVERED","PAID","delivered","paid","COMPLETED","completed"]),Oe("createdAt",">=",wn.fromDate(f))),x=await Zt(p);let b=0;const y=[];x.forEach(w=>{const j=w.data(),S=Number(j.total)||0;if(b+=S,y.length<5){const C=j.createdAt?.toDate?.()||new Date,N=Math.floor((d.getTime()-C.getTime())/(1e3*60));let R=`${N}min`;N>=60&&(R=`${Math.floor(N/60)}h`),N>=1440&&(R=`${Math.floor(N/1440)}d`),y.push({id:w.id,type:"income",desc:`Pedido #${w.id.slice(-4).toUpperCase()}`,amount:S,time:R})}}),i({available:b*.7,pending:b*.3}),a(y)}catch(d){console.error("[FinanceModule] Error loading balance:",d),ie.error("Erro ao carregar saldo")}finally{c(!1)}})()},[e]);const u=()=>{if(t.available<10){ie.error("Saldo mnimo para saque: R$ 10,00");return}ie.success(" Solicitao de saque enviada para sua conta bancria!",{description:"O valor estar disponvel em at 1 dia til."})};return o?n.jsx("div",{className:"flex justify-center items-center p-16",children:n.jsx(Ee,{className:"animate-spin text-green-500",size:32})}):n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs(K.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-[#1a1a1a] to-black p-8 rounded-[2rem] border border-green-500/20 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-green-500/10 blur-[60px] rounded-full pointer-events-none"}),n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg text-green-500",children:n.jsx(Jh,{size:20})}),n.jsx("span",{className:"text-sm font-bold text-white/60 uppercase tracking-widest",children:"Saldo Disponvel"})]}),n.jsxs("h2",{className:"text-5xl font-black text-white mb-6",children:["R$ ",t.available.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:u,className:"flex-1 bg-green-500 hover:bg-green-400 text-black font-black py-4 rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg shadow-green-500/20 active:scale-95",children:["SACAR AGORA ",n.jsx(ep,{size:18})]}),n.jsxs("div",{className:"flex-1 bg-[#121212] border border-white/10 rounded-xl flex flex-col justify-center px-4",children:[n.jsx("span",{className:"text-[10px] text-white/40 uppercase font-bold",children:"A liberar"}),n.jsxs("span",{className:"text-lg font-bold text-white/60",children:["R$ ",t.pending.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsxs(K.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-[#121212] p-6 rounded-[2rem] border border-white/5 h-full flex flex-col",children:[n.jsxs("h3",{className:"text-sm font-bold text-white/40 uppercase mb-4 flex items-center gap-2",children:[n.jsx(tp,{size:16})," ltimas Transaes"]}),n.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto pr-2 custom-scrollbar",children:s.length===0?n.jsxs("div",{className:"text-center py-8 text-white/40",children:[n.jsx(Yn,{size:32,className:"mx-auto mb-2"}),n.jsx("p",{children:"Nenhuma transao este ms."})]}):s.map((h,d)=>n.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},className:"flex justify-between items-center p-3 hover:bg-white/5 rounded-xl transition-colors",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-sm text-white",children:h.desc}),n.jsxs("p",{className:"text-xs text-white/40 flex items-center gap-1",children:[n.jsx(Rl,{size:10})," ",h.time," atrs"]})]}),n.jsxs("span",{className:`font-mono font-bold ${h.type==="income"?"text-green-400":"text-red-400"}`,children:[h.type==="income"?"+":"-"," R$ ",Math.abs(h.amount).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},h.id))})]})]})}function k1(){return n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"md:col-span-2 bg-[#121212] h-64 rounded-3xl border border-white/5 flex flex-col items-center justify-center relative group overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent"}),n.jsx(El,{size:48,className:"text-purple-400/30 mb-4"}),n.jsx("p",{className:"text-white/40 font-bold",children:"Grfico de Lucro Lquido (DRE)"}),n.jsx("p",{className:"text-white/20 text-sm mt-2",children:"Em breve: Anlise completa de receitas vs. custos"})]}),n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-[#121212] h-64 rounded-3xl border border-white/5 flex flex-col items-center justify-center overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-transparent"}),n.jsx(Vx,{size:48,className:"text-green-400/30 mb-4"}),n.jsx("p",{className:"text-white/40 font-bold",children:"Curva ABC"}),n.jsx("p",{className:"text-white/20 text-sm mt-2",children:"Produtos mais lucrativos"})]}),n.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"md:col-span-3 grid grid-cols-4 gap-4",children:[{label:"Margem Bruta",value:"32%",color:"green"},{label:"CMV",value:"R$ 4.250",color:"red"},{label:"Ticket Mdio",value:"R$ 45,90",color:"blue"},{label:"Crescimento",value:"+18%",color:"purple"}].map((e,t)=>n.jsxs("div",{className:`bg-[#0a0a0a] p-4 rounded-2xl border border-${e.color}-500/20`,children:[n.jsx("p",{className:"text-white/40 text-xs uppercase font-bold mb-1",children:e.label}),n.jsx("p",{className:`text-2xl font-black text-${e.color}-400`,children:e.value})]},t))})]})}function C1(){const e=_t();return n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},className:"py-12",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h2",{className:"text-3xl font-black italic mb-4 text-white",children:"Escolha seu Modelo de Negcio"}),n.jsx("p",{className:"text-white/50 max-w-xl mx-auto",children:"Comece sem custos fixos no Starter. Migre para assinaturas quando quiser pagar menos taxas e ter mais inteligncia."})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-6xl mx-auto px-6",children:[n.jsx(Po,{title:"Starter",price:"R$ 0",period:"Sem mensalidade",fee:`${(uo.STARTER*100).toFixed(0)}% por venda`,color:"gray",features:[{name:"Cardpio Digital & QR Code",included:!0},{name:"Painel de Pedidos (KDS)",included:!0},{name:"Carteira Digital & Saques",included:!0},{name:"App do Motorista (GPS)",included:!1},{name:"Inteligncia Artificial",included:!1}],btnText:"Plano Atual",disabled:!0}),n.jsx(Po,{title:"Growth",price:"R$ 149,90",period:"/ms",fee:`${(uo.GROWTH*100).toFixed(0)}% por venda`,color:"green",highlight:"Melhor Custo-Benefcio",features:[{name:"Tudo do Starter",included:!0},{name:"Taxas Reduzidas (9%)",included:!0},{name:"App de Entregadores (GPS)",included:!0},{name:"Modo Chuva & Taxas Dinmicas",included:!0},{name:"Inteligncia Artificial",included:!1}],btnText:"Assinar Growth",onClick:()=>e("/subscription")}),n.jsx(Po,{title:"Emprata Black",price:"R$ 299,90",period:"/ms",fee:`${(uo.BLACK*100).toFixed(0)}% por venda`,color:"purple",features:[{name:"Tudo do Growth",included:!0},{name:"Menor Taxa do Mercado (6%)",included:!0},{name:"EmprataBrain (IA Consultora)",included:!0},{name:"DRE e Relatrios Financeiros",included:!0},{name:"CRM Automtico (Recuperao)",included:!0}],btnText:"Assinar Black",onClick:()=>e("/subscription")})]})]})}function Po({title:e,price:t,period:i,fee:s,color:a,features:o,btnText:c,onClick:u,disabled:h,highlight:d}){const f={gray:"border-white/10 bg-[#121212]",green:"border-green-500/30 bg-[#121212] shadow-[0_0_30px_rgba(34,197,94,0.1)]",purple:"border-purple-500/30 bg-gradient-to-b from-[#1a1a1a] to-black shadow-[0_0_30px_rgba(147,51,234,0.1)]"},p={gray:"text-white",green:"text-green-400",purple:"text-purple-400"};return n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},transition:{duration:.3},className:`rounded-3xl p-8 border relative ${f[a]} flex flex-col h-full`,children:[d&&n.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-green-500 text-black px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-1",children:[n.jsx(at,{size:12})," ",d]}),n.jsx("h3",{className:`text-xl font-bold mb-2 ${p[a]}`,children:e}),n.jsxs("div",{className:"mb-1 flex items-end gap-1",children:[n.jsx("span",{className:"text-4xl font-black text-white",children:t}),n.jsx("span",{className:"text-sm text-white/40 mb-1",children:i})]}),n.jsxs("div",{className:"bg-white/5 rounded-lg p-2 text-center mb-8 border border-white/5",children:[n.jsx("span",{className:"text-xs text-white/60 font-bold uppercase",children:"Taxa sobre vendas:"}),n.jsx("p",{className:`text-lg font-black ${p[a]}`,children:s})]}),n.jsx("ul",{className:"space-y-4 mb-8 flex-1",children:o.map((x,b)=>n.jsxs("li",{className:`flex items-start gap-3 text-sm ${x.included?"text-white":"text-white/20"}`,children:[x.included?n.jsx(Nt,{size:18,className:p[a]}):n.jsx(Ht,{size:18}),n.jsx("span",{children:x.name})]},b))}),n.jsx("button",{onClick:u,disabled:h,className:`w-full py-4 rounded-xl font-black transition-all active:scale-95 ${h?"bg-white/5 text-white/20 cursor-not-allowed":a==="green"?"bg-green-500 hover:bg-green-400 text-black shadow-lg shadow-green-500/20":a==="purple"?"bg-purple-600 hover:bg-purple-500 text-white shadow-lg shadow-purple-500/20":"bg-white hover:bg-gray-200 text-black shadow-lg"}`,children:c})]})}async function E1(e){const t=tt($e(he,"orders"),Oe("restaurantId","==",e),Ni("createdAt","desc"),Ol(500)),i=await Zt(t),s={},a={};let o=0;i.docs.forEach(p=>{const x=p.data(),b=x.customer?.uid||x.customer?.phone||"anonymous";s[b]||(s[b]={id:b,name:x.customer?.name||"Cliente",totalSpent:0,orderCount:0,favoriteItems:[],lastOrderDate:x.createdAt,riskLevel:"LOW",tags:[]});const y=x.total||0;s[b].totalSpent+=y,s[b].orderCount+=1,o+=y,x.items?.forEach(w=>{const j=w.name||w.title||"Item";s[b].favoriteItems.push(j),a[j]=(a[j]||0)+(w.quantity||1)})});const c=Object.values(s).map(p=>{const x={};p.favoriteItems.forEach(S=>{x[S]=(x[S]||0)+1});const b=Object.entries(x).sort((S,C)=>C[1]-S[1])[0]?.[0]||"Variado";let y=0;try{const S=p.lastOrderDate?.toDate?.()||new Date(p.lastOrderDate);y=(new Date().getTime()-S.getTime())/(1e3*3600*24)}catch{y=0}let w="LOW";y>30?w="HIGH":y>14&&(w="MEDIUM");const j=[];return p.totalSpent>500&&j.push(" VIP"),p.orderCount===1&&j.push(" Novo"),p.orderCount>=10&&j.push(" Frequente"),(b.toLowerCase().includes("vegan")||b.toLowerCase().includes("salad"))&&j.push(" Saudvel"),{...p,favoriteItems:[b],riskLevel:w,tags:j}}),u={totalCustomers:c.length,activeCustomers:c.filter(p=>p.riskLevel==="LOW").length,atRiskCustomers:c.filter(p=>p.riskLevel==="HIGH").length,vipCustomers:c.filter(p=>p.totalSpent>500).length,avgTicket:c.length>0?o/i.docs.length:0,totalRevenue:o},h=Object.entries(a).sort((p,x)=>x[1]-p[1]).slice(0,5),d=`
    Analise estes dados do meu restaurante de delivery:
    
    DADOS:
    - Top 5 Produtos Mais Vendidos: ${JSON.stringify(h)}
    - Total Clientes: ${u.totalCustomers}
    - Clientes Ativos (ltimos 14 dias): ${u.activeCustomers}
    - Clientes em Risco (mais de 30 dias sem pedir): ${u.atRiskCustomers}
    - Clientes VIP (gastaram +R$500): ${u.vipCustomers}
    - Ticket Mdio: R$ ${u.avgTicket.toFixed(2)}
    - Faturamento Total: R$ ${u.totalRevenue.toFixed(2)}

    Gere um resumo estratgico para o dono do restaurante:
    1. Um insight sobre o estado atual do negcio (max 2 linhas)
    2. Uma ao concreta para melhorar vendas ou recuperar clientes

    Retorne APENAS um JSON vlido (sem markdown):
    { "insight": "texto aqui", "actionItem": "ao aqui" }
  `;let f={insight:"Processando dados de vendas...",actionItem:"Aguarde a anlise completa."};try{const b=(await ya.generateContent(d)).response.text().replace(/```json/g,"").replace(/```/g,"").trim();f=JSON.parse(b)}catch(p){console.error("AI insight error:",p),u.atRiskCustomers>u.activeCustomers*.3?f={insight:`${u.atRiskCustomers} clientes esto h mais de 30 dias sem pedir. Isso representa um risco de perda de receita.`,actionItem:"Envie uma mensagem com desconto exclusivo para reconquistar esses clientes ausentes."}:u.vipCustomers>0&&(f={insight:`Voc tem ${u.vipCustomers} clientes VIP que representam alta receita. Mantenha-os engajados!`,actionItem:"Crie um programa de fidelidade ou oferea vantagens exclusivas para seus top clientes."})}return{profiles:c,aiInsight:f,topProducts:h,stats:u}}function S1({label:e="EmprataBrain",state:t="idle",compact:i=!1}){const a={idle:{color:"bg-green-500",textColor:"text-green-400",label:"Ativo"},learning:{color:"bg-purple-500",textColor:"text-purple-400",label:"Aprendendo"},working:{color:"bg-blue-500",textColor:"text-blue-400",label:"Processando"},error:{color:"bg-red-500",textColor:"text-red-400",label:"Erro"}}[t];return i?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(fi,{size:14,className:`relative z-10 ${a.textColor}`}),n.jsx(K.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:`absolute inset-0 rounded-full blur-sm ${a.color}`})]}),n.jsx("span",{className:`text-[10px] font-bold uppercase ${a.textColor}`,children:a.label})]}):n.jsxs("div",{className:"flex items-center gap-3 bg-white/5 backdrop-blur-md border border-white/10 px-4 py-2 rounded-full w-fit shadow-[0_0_15px_rgba(0,0,0,0.2)]",children:[n.jsxs("div",{className:"relative",children:[n.jsx(fi,{size:18,className:`relative z-10 ${a.textColor}`}),n.jsx(K.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:`absolute inset-0 rounded-full blur-md ${a.color}`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white/60",children:e}),t==="learning"&&n.jsx(K.span,{initial:{opacity:0},animate:{opacity:1},className:"text-[9px] text-purple-300 font-bold",children:"Calibrando algoritmos..."}),t==="working"&&n.jsx(K.span,{initial:{opacity:0},animate:{opacity:1},className:"text-[9px] text-blue-300 font-bold",children:"Analisando dados..."})]})]})}function A1(){const{user:e}=Ke(),[t,i]=T.useState(null),[s,a]=T.useState(!0),[o,c]=T.useState(""),[u,h]=T.useState(null);T.useEffect(()=>{e?.uid&&(a(!0),E1(e.uid).then(p=>{i(p)}).catch(p=>{console.error("BI Error:",p)}).finally(()=>{a(!1)}))},[e?.uid]);const d=t?.profiles||[],f=d.filter(p=>p.name.toLowerCase().includes(o.toLowerCase())).filter(p=>!u||p.tags.some(x=>x.includes(u))).sort((p,x)=>x.totalSpent-p.totalSpent);return n.jsxs("div",{className:"space-y-8 pb-20",children:[n.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-[#1a1a1a] to-black border border-white/10 p-8 shadow-2xl",children:[n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-500/10 blur-[120px] rounded-full pointer-events-none"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl md:text-4xl font-black italic tracking-tighter text-white mb-2",children:["Business ",n.jsx("span",{className:"text-purple-400",children:"Intelligence"})]}),n.jsx("p",{className:"text-white/40 text-sm md:text-base max-w-xl",children:s?"Analisando histrico de pedidos...":`EmprataBrain analisou ${d.length} perfis de consumo.`})]}),n.jsx(S1,{state:s?"learning":"idle",label:"Neural Engine"})]}),t?.stats&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-6",children:[n.jsx(Ss,{icon:n.jsx(vn,{size:18}),label:"Total Clientes",value:t.stats.totalCustomers.toString(),color:"text-white"}),n.jsx(Ss,{icon:n.jsx(Hx,{size:18}),label:"Ativos",value:t.stats.activeCustomers.toString(),color:"text-green-400"}),n.jsx(Ss,{icon:n.jsx(qx,{size:18}),label:"Em Risco",value:t.stats.atRiskCustomers.toString(),color:"text-red-400"}),n.jsx(Ss,{icon:n.jsx(cn,{size:18}),label:"VIPs",value:t.stats.vipCustomers.toString(),color:"text-yellow-400"})]}),!s&&t?.aiInsight&&n.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-6 mt-6 flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-xs font-black uppercase text-purple-400 mb-2 flex items-center gap-2",children:[n.jsx(at,{size:14})," Insight Estratgico"]}),n.jsxs("p",{className:"text-white/90 font-medium leading-relaxed",children:['"',t.aiInsight.insight,'"']})]}),n.jsx("div",{className:"h-px w-full md:w-px md:h-auto bg-white/10"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-xs font-black uppercase text-green-400 mb-2 flex items-center gap-2",children:[n.jsx(nr,{size:14})," Ao Recomendada"]}),n.jsxs("p",{className:"text-white/90 font-medium leading-relaxed",children:['"',t.aiInsight.actionItem,'"']})]})]})]})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center sticky top-20 z-30 bg-[#0a0a0a]/80 backdrop-blur-xl py-2 px-1",children:[n.jsxs("div",{className:"relative w-full md:w-96 group",children:[n.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30 group-focus-within:text-primary transition-colors",size:18}),n.jsx("input",{value:o,onChange:p=>c(p.target.value),placeholder:"Buscar por nome do cliente...",className:"w-full bg-[#121212] border border-white/10 rounded-2xl py-3 pl-12 pr-4 text-white focus:border-primary outline-none transition-all shadow-lg"})]}),n.jsx("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[{label:" VIPs",tag:"VIP"},{label:" Risco",tag:null,filter:"risk"},{label:" Novos",tag:"Novo"},{label:" Frequentes",tag:"Frequente"}].map(p=>n.jsx("button",{onClick:()=>h(u===p.tag?null:p.tag),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${u===p.tag?"bg-white text-black":"bg-[#121212] border border-white/10 hover:bg-white/5"}`,children:p.label},p.label))})]}),n.jsxs("div",{className:"bg-[#121212] border border-white/5 rounded-3xl overflow-hidden shadow-2xl",children:[n.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 p-5 border-b border-white/5 bg-white/[0.02] text-xs font-black uppercase tracking-widest text-white/40",children:[n.jsx("div",{className:"col-span-4",children:"Cliente"}),n.jsx("div",{className:"col-span-2 text-right",children:"Gasto Total"}),n.jsx("div",{className:"col-span-2 text-center",children:"Pedidos"}),n.jsx("div",{className:"col-span-2",children:"Favorito"}),n.jsx("div",{className:"col-span-2 text-right",children:"Status"})]}),n.jsx("div",{className:"divide-y divide-white/5",children:s?n.jsxs("div",{className:"p-20 flex flex-col items-center justify-center gap-4",children:[n.jsx(Ee,{className:"animate-spin text-purple-400",size:40}),n.jsx("p",{className:"text-white/40 text-sm",children:"Processando DNA dos clientes..."})]}):f.length===0?n.jsxs("div",{className:"p-20 text-center",children:[n.jsx(vn,{size:48,className:"mx-auto text-white/10 mb-4"}),n.jsx("p",{className:"text-white/40",children:"Nenhum cliente encontrado"})]}):f.map(p=>n.jsxs(K.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"group hover:bg-white/[0.02] transition-colors",children:[n.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 p-5 items-center",children:[n.jsxs("div",{className:"col-span-4 flex items-center gap-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${p.totalSpent>500?"bg-gradient-to-br from-yellow-400 to-orange-500 text-black":"bg-white/10 text-white"}`,children:p.totalSpent>500?n.jsx(cn,{size:16}):p.name[0]?.toUpperCase()}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-white text-sm",children:p.name}),n.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:p.tags.map(x=>n.jsx("span",{className:"text-[9px] bg-white/5 px-1.5 py-0.5 rounded text-white/50",children:x},x))})]})]}),n.jsx("div",{className:"col-span-2 text-right font-mono text-white/80",children:dn(p.totalSpent)}),n.jsx("div",{className:"col-span-2 text-center",children:n.jsxs("span",{className:"bg-white/5 px-3 py-1 rounded-lg text-xs font-bold",children:[p.orderCount,"x"]})}),n.jsx("div",{className:"col-span-2 text-xs text-white/60 truncate",children:p.favoriteItems[0]}),n.jsx("div",{className:"col-span-2 flex justify-end",children:n.jsx(zd,{risk:p.riskLevel})})]}),n.jsxs("div",{className:"md:hidden p-5 flex flex-col gap-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-lg font-bold ${p.totalSpent>500?"bg-gradient-to-br from-yellow-400 to-orange-500 text-black":"bg-white/5 text-white"}`,children:p.totalSpent>500?n.jsx(cn,{size:20}):p.name[0]?.toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg",children:p.name}),n.jsxs("p",{className:"text-xs text-white/40",children:[p.orderCount," pedido",p.orderCount!==1?"s":""]})]})]}),n.jsx(zd,{risk:p.riskLevel})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 bg-black/20 p-3 rounded-xl border border-white/5",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-white/30 uppercase font-bold",children:"LTV (Gasto)"}),n.jsx("p",{className:"text-lg font-mono font-bold text-primary",children:dn(p.totalSpent)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-white/30 uppercase font-bold",children:"Favorito"}),n.jsx("p",{className:"text-sm font-bold text-white truncate",children:p.favoriteItems[0]})]})]}),p.tags.length>0&&n.jsx("div",{className:"flex gap-2 flex-wrap",children:p.tags.map(x=>n.jsx("span",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-white/60",children:x},x))})]})]},p.id))})]})]})}function Ss({icon:e,label:t,value:i,color:s}){return n.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/5",children:[n.jsxs("div",{className:`flex items-center gap-2 mb-1 ${s}`,children:[e,n.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider opacity-60",children:t})]}),n.jsx("p",{className:`text-2xl font-black ${s}`,children:i})]})}function zd({risk:e}){return e==="HIGH"?n.jsxs("span",{className:"flex items-center gap-1 bg-red-500/10 text-red-400 px-3 py-1 rounded-full text-[10px] font-black uppercase border border-red-500/20",children:[n.jsx(ji,{size:10})," Risco"]}):e==="MEDIUM"?n.jsx("span",{className:"bg-yellow-500/10 text-yellow-400 px-3 py-1 rounded-full text-[10px] font-black uppercase border border-yellow-500/20",children:"Ausente"}):n.jsx("span",{className:"bg-green-500/10 text-green-400 px-3 py-1 rounded-full text-[10px] font-black uppercase border border-green-500/20",children:"Ativo"})}function T1(){const{user:e}=Ke(),{currentPlan:t}=Bp(),i=_t(),[s,a]=T.useState(null),o=async c=>{if(!e){ie.error("Faa login para continuar");return}if(c===t){ie.info("Voc j est neste plano");return}a(c);try{typeof window<"u"&&window.gtag&&window.gtag("event","begin_checkout",{currency:"BRL",value:c==="GROWTH"?149.9:299.9,items:[{item_name:`Emprata ${c}`,price:c==="GROWTH"?149.9:299.9}]});const d=(await hn(ze(he,"users",e.uid))).data()?.finance?.asaasAccountId||null,p=await(await fetch("/api/create-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:d,value:c==="GROWTH"?149.9:299.9,billingType:"PIX",description:`Assinatura Emprata ${c}`})})).json();if(p.error)throw new Error(p.error);if(p.invoiceUrl){window.location.href=p.invoiceUrl;return}await Et(ze(he,"users",e.uid),{subscription:{plan:c,status:"active",updatedAt:new Date}}),ie.success(` Parabns! Voc agora  ${bi[c].label}!`),setTimeout(()=>i("/dashboard"),1500)}catch(u){console.error("[Subscription] Error:",u),ie.error("Erro ao processar assinatura. Tente novamente.")}finally{a(null)}};return n.jsxs("div",{className:"min-h-screen bg-[#050505] text-white py-12 px-6",children:[n.jsx("button",{onClick:()=>i("/dashboard"),className:"fixed top-6 left-6 bg-white/5 hover:bg-white/10 p-3 rounded-full transition-colors z-50",children:n.jsx(_i,{size:20})}),n.jsx("div",{className:"text-center max-w-2xl mx-auto mb-16 pt-8",children:n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[n.jsx(cn,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),n.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter mb-4",children:["Escolha seu ",n.jsx("span",{className:"text-primary",children:"Poder"})]}),n.jsx("p",{className:"text-white/50 text-lg",children:"Desbloqueie o verdadeiro potencial do seu delivery com ferramentas exclusivas."})]})}),n.jsxs("div",{className:"max-w-6xl mx-auto grid md:grid-cols-3 gap-6 items-stretch",children:[n.jsxs(K.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1},className:`bg-[#121212] p-8 rounded-3xl border transition-all ${t==="STARTER"?"border-gray-500/50 opacity-70":"border-white/5 hover:border-white/20"}`,children:[n.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-400",children:"Starter"}),n.jsx("p",{className:"text-4xl font-black mb-1",children:"Grtis"}),n.jsx("p",{className:"text-xs text-white/40 mb-6",children:"para sempre"}),n.jsxs("ul",{className:"space-y-3 mb-8 text-sm",children:[n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-gray-400 shrink-0"}),n.jsx("span",{children:"Cardpio Digital"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-gray-400 shrink-0"}),n.jsx("span",{children:"Gestor de Pedidos"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-gray-400 shrink-0"}),n.jsx("span",{children:"Cozinha (KDS)"})]}),n.jsxs("li",{className:"flex gap-2 items-center text-white/30",children:[n.jsx(Ht,{size:16,className:"shrink-0"}),n.jsx("span",{children:"App do Motorista"})]}),n.jsxs("li",{className:"flex gap-2 items-center text-white/30",children:[n.jsx(Ht,{size:16,className:"shrink-0"}),n.jsx("span",{children:"Inteligncia Artificial"})]})]}),n.jsx("button",{disabled:!0,className:"w-full py-4 border border-white/10 rounded-xl font-bold text-white/30 cursor-not-allowed",children:t==="STARTER"?"Plano Atual":"Downgrade"})]}),n.jsxs(K.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},className:`bg-[#121212] p-8 rounded-3xl border relative transform hover:scale-[1.02] transition-all ${t==="GROWTH"?"border-green-500 shadow-xl shadow-green-500/10":"border-green-500/30 hover:border-green-500/60"}`,children:[n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-green-500 text-black px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest",children:"Mais Popular"}),n.jsx("h3",{className:"text-xl font-bold mb-2 text-green-400",children:"Growth"}),n.jsxs("p",{className:"text-4xl font-black mb-1",children:["R$ 149",n.jsx("span",{className:"text-lg text-white/40",children:",90"})]}),n.jsx("p",{className:"text-xs text-white/40 mb-6",children:"por ms"}),n.jsxs("ul",{className:"space-y-3 mb-8 text-sm",children:[n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-green-400 shrink-0"}),n.jsx("span",{children:"Tudo do Starter"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-green-400 shrink-0"}),n.jsx("span",{children:"App do Motorista (GPS)"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-green-400 shrink-0"}),n.jsx("span",{children:"Terminal PDV"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-green-400 shrink-0"}),n.jsx("span",{children:"Modo Chuva"})]}),n.jsxs("li",{className:"flex gap-2 items-center text-white/30",children:[n.jsx(Ht,{size:16,className:"shrink-0"}),n.jsx("span",{children:"Inteligncia Artificial"})]})]}),n.jsx("button",{onClick:()=>o("GROWTH"),disabled:s!==null||t==="GROWTH",className:"w-full py-4 bg-green-500 hover:bg-green-400 disabled:opacity-50 disabled:cursor-not-allowed text-black rounded-xl font-black shadow-lg shadow-green-500/20 transition-all flex items-center justify-center gap-2",children:s==="GROWTH"?n.jsx(Ee,{className:"w-5 h-5 animate-spin"}):t==="GROWTH"?"Plano Atual":"ASSINAR GROWTH"})]}),n.jsxs(K.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3},className:`bg-gradient-to-b from-[#1a1a1a] to-black p-8 rounded-3xl border relative overflow-hidden transform hover:scale-[1.02] transition-all ${t==="BLACK"?"border-purple-500 shadow-xl shadow-purple-500/20":"border-purple-500/30 hover:border-purple-500/60"}`,children:[n.jsx("div",{className:"absolute inset-0 bg-purple-500/5 blur-[80px] pointer-events-none"}),n.jsxs("h3",{className:"text-xl font-bold mb-2 text-purple-400 flex items-center gap-2 relative z-10",children:["Emprata Black ",n.jsx(Wt,{size:16,className:"fill-purple-400"})]}),n.jsxs("p",{className:"text-4xl font-black mb-1 relative z-10",children:["R$ 299",n.jsx("span",{className:"text-lg text-white/40",children:",90"})]}),n.jsx("p",{className:"text-xs text-white/40 mb-6 relative z-10",children:"por ms"}),n.jsxs("ul",{className:"space-y-3 mb-8 text-sm relative z-10",children:[n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-purple-400 shrink-0"}),n.jsx("span",{children:"Tudo do Growth"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-purple-400 shrink-0"}),n.jsx("span",{children:"EmprataBrain (IA)"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-purple-400 shrink-0"}),n.jsx("span",{children:"Previso de Demanda"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-purple-400 shrink-0"}),n.jsx("span",{children:"Consultoria de Lucro"})]}),n.jsxs("li",{className:"flex gap-2 items-center",children:[n.jsx(Nt,{size:16,className:"text-purple-400 shrink-0"}),n.jsx("span",{children:"Suporte VIP"})]})]}),n.jsx("button",{onClick:()=>o("BLACK"),disabled:s!==null||t==="BLACK",className:"w-full py-4 bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-black rounded-xl font-black shadow-xl relative z-10 transition-all flex items-center justify-center gap-2",children:s==="BLACK"?n.jsx(Ee,{className:"w-5 h-5 animate-spin"}):t==="BLACK"?"Plano Atual":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{size:16,className:"fill-black"})," ASSINAR BLACK"]})})]})]}),n.jsx("div",{className:"max-w-2xl mx-auto text-center mt-16",children:n.jsx("p",{className:"text-white/30 text-sm",children:" Pagamento seguro  Cancele quando quiser  Suporte em portugus"})})]})}function P1(){const[e,t]=T.useState(!1),[i,s]=T.useState(!1),[a,o]=T.useState(!1),[c,u]=T.useState({isActive:!1,slug:"",displayName:"",description:"",bannerUrl:"",logoUrl:"",cuisineType:"",rating:5,deliveryFee:5,minTime:30,maxTime:45,isOpen:!0,tags:[],address:{street:"",number:"",neighborhood:"",city:"",state:"",zipCode:""}});T.useEffect(()=>{rt.currentUser&&hn(ze(he,"users",rt.currentUser.uid)).then(x=>{x.exists()&&x.data().marketplace?u(x.data().marketplace):x.exists()&&u(b=>({...b,displayName:x.data().restaurantName||x.data().name||rt.currentUser?.displayName||"Minha Loja"}))})},[]);const h=async()=>{s(!0),setTimeout(()=>{u(x=>({...x,description:`Experimente o melhor de ${x.cuisineType||"nossa cozinha"}! Ingredientes selecionados, preparo artesanal e entrega rpida para voc.`,tags:["Saboroso","Entrega Rpida","Favorito da Galera"]})),s(!1),ie.success("IA: Descrio otimizada para vendas!")},1500)},d=async()=>{const x=c.address;if(!x?.street||!x?.city){ie.error("Preencha rua e cidade primeiro");return}o(!0);const b=`${x.street}${x.number?` ${x.number}`:""}, ${x.neighborhood||""}, ${x.city}, ${x.state||"Brasil"}`;try{const w=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(b)}&limit=1`,{headers:{"User-Agent":"EmprataAI/1.0"}})).json();if(w&&w.length>0){const j=parseFloat(w[0].lat),S=parseFloat(w[0].lon);u(C=>({...C,location:{lat:j,lng:S}})),ie.success(" Localizao encontrada!")}else ie.error("Endereo no encontrado no mapa. Verifique os dados.")}catch(y){console.error(y),ie.error("Erro ao buscar coordenadas")}finally{o(!1)}},f=()=>{o(!0),navigator.geolocation.getCurrentPosition(x=>{u(b=>({...b,location:{lat:x.coords.latitude,lng:x.coords.longitude}})),ie.success(" Usando sua localizao atual!"),o(!1)},x=>{ie.error("No foi possvel obter sua localizao"),o(!1)},{enableHighAccuracy:!0})},p=async()=>{if(rt.currentUser){t(!0);try{await Et(ze(he,"users",rt.currentUser.uid),{marketplace:c}),ie.success("Loja atualizada no Marketplace!")}catch{ie.error("Erro ao salvar")}finally{t(!1)}}};return n.jsxs("div",{className:"bg-[#121212] rounded-3xl border border-white/10 p-6 max-w-5xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-black italic flex items-center gap-2",children:[n.jsx(hi,{className:"text-primary"})," Vitrine da Loja"]}),n.jsx("p",{className:"text-white/40 text-sm",children:"Configure como voc aparece no App do Cliente"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:h,disabled:i,className:"px-4 py-2 bg-purple-500/20 text-purple-400 border border-purple-500/50 rounded-xl text-xs font-bold uppercase flex items-center gap-2 hover:bg-purple-500/30 transition-all",children:[n.jsx(at,{size:14})," ",i?"Criando...":"Mgica IA"]}),n.jsx("button",{onClick:()=>u(x=>({...x,isActive:!x.isActive})),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase border transition-all ${c.isActive?"bg-green-500/20 text-green-400 border-green-500":"bg-red-500/20 text-red-400 border-red-500"}`,children:c.isActive?" Loja Online":" Loja Oculta"})]})]}),n.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"border border-white/10 rounded-[2rem] p-4 bg-black max-w-sm mx-auto shadow-2xl relative",children:[n.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-[#121212] rounded-b-xl z-20"}),n.jsxs("div",{className:"h-full overflow-hidden rounded-2xl bg-[#1a1a1a] relative",children:[n.jsxs("div",{className:"h-40 bg-gray-800 relative",children:[c.bannerUrl&&n.jsx("img",{src:c.bannerUrl,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute bottom-[-20px] left-4 w-16 h-16 rounded-full border-4 border-[#1a1a1a] bg-black overflow-hidden shadow-lg",children:c.logoUrl&&n.jsx("img",{src:c.logoUrl,className:"w-full h-full object-cover"})})]}),n.jsxs("div",{className:"pt-8 px-4 pb-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("h3",{className:"font-black text-xl text-white",children:c.displayName||"Nome da Loja"}),n.jsxs("div",{className:"flex gap-1 text-[10px] font-bold text-yellow-400 bg-yellow-400/10 px-2 py-1 rounded-lg",children:[" ",c.rating||5]})]}),n.jsxs("p",{className:"text-xs text-white/40 mt-1",children:[c.cuisineType,"  ",c.minTime,"-",c.maxTime," min"]}),n.jsx("p",{className:"text-xs text-white/70 mt-3 leading-relaxed",children:c.description||"Descrio da loja..."}),c.location&&n.jsxs("div",{className:"mt-3 flex items-center gap-1 text-[10px] text-green-400",children:[n.jsx(gi,{size:10}),"GPS Configurado"]}),n.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:c.tags?.map(x=>n.jsx("span",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-white/60",children:x},x))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Nome da Loja"}),n.jsx("input",{value:c.displayName,onChange:x=>u({...c,displayName:x.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",placeholder:"Ex: Burger King"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Categoria"}),n.jsx("input",{value:c.cuisineType,onChange:x=>u({...c,cuisineType:x.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",placeholder:"Ex: Hamburgueria"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"URLs das Imagens"}),n.jsx("input",{value:c.bannerUrl,onChange:x=>u({...c,bannerUrl:x.target.value}),placeholder:"URL do Banner (Capa)",className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white text-xs mb-2 focus:border-primary outline-none"}),n.jsx("input",{value:c.logoUrl,onChange:x=>u({...c,logoUrl:x.target.value}),placeholder:"URL do Logo",className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white text-xs focus:border-primary outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Descrio (Use a Mgica IA!)"}),n.jsx("textarea",{value:c.description,onChange:x=>u({...c,description:x.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none h-24 resize-none",placeholder:"Conte um pouco sobre sua loja..."})]}),n.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Un,{size:16,className:"text-primary"}),n.jsx("span",{className:"text-sm font-bold",children:"Endereo da Loja"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx("input",{value:c.address?.street||"",onChange:x=>u({...c,address:{...c.address,street:x.target.value}}),placeholder:"Rua",className:"col-span-2 bg-black/50 border border-white/10 rounded-xl p-2 text-white text-xs"}),n.jsx("input",{value:c.address?.number||"",onChange:x=>u({...c,address:{...c.address,number:x.target.value}}),placeholder:"N",className:"bg-black/50 border border-white/10 rounded-xl p-2 text-white text-xs"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx("input",{value:c.address?.neighborhood||"",onChange:x=>u({...c,address:{...c.address,neighborhood:x.target.value}}),placeholder:"Bairro",className:"bg-black/50 border border-white/10 rounded-xl p-2 text-white text-xs"}),n.jsx("input",{value:c.address?.city||"",onChange:x=>u({...c,address:{...c.address,city:x.target.value}}),placeholder:"Cidade",className:"bg-black/50 border border-white/10 rounded-xl p-2 text-white text-xs"})]}),n.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-white/40",children:"Coordenadas GPS"}),n.jsx("p",{className:"font-mono text-xs text-primary",children:c.location?`${c.location.lat.toFixed(6)}, ${c.location.lng.toFixed(6)}`:"No configurado"})]}),c.location&&n.jsx(gi,{size:16,className:"text-green-400"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:d,disabled:a,className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-xs font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:[a?n.jsx(Ee,{size:14,className:"animate-spin"}):n.jsx(Un,{size:14}),"Buscar pelo Endereo"]}),n.jsxs("button",{onClick:f,disabled:a,className:"px-3 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-xs font-bold flex items-center gap-2 disabled:opacity-50",children:[n.jsx(Wr,{size:14}),"Usar GPS Atual"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Taxa Entrega"}),n.jsx("input",{type:"number",value:c.deliveryFee,onChange:x=>u({...c,deliveryFee:Number(x.target.value)}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Tempo Mn"}),n.jsx("input",{type:"number",value:c.minTime,onChange:x=>u({...c,minTime:Number(x.target.value)}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Tempo Mx"}),n.jsx("input",{type:"number",value:c.maxTime,onChange:x=>u({...c,maxTime:Number(x.target.value)}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white"})]})]}),n.jsx("button",{onClick:p,disabled:e,className:"w-full py-4 bg-primary hover:brightness-110 text-black font-black rounded-xl flex items-center justify-center gap-2 mt-4 transition-all disabled:opacity-50",children:e?n.jsx(Ee,{className:"animate-spin",size:18}):n.jsxs(n.Fragment,{children:[n.jsx(Il,{size:18})," SALVAR VITRINE"]})})]})]})]})}function I1({link:e,tableNum:t,restaurantName:i,theme:s,brandColor:a,id:o}){const u={DARK:{bg:"#000000",text:"#FFFFFF",accent:a,qrBg:"#FFFFFF",qrFg:"#000000"},LIGHT:{bg:"#FFFFFF",text:"#000000",accent:a,qrBg:"#FFFFFF",qrFg:"#000000"},BRAND:{bg:a,text:"#FFFFFF",accent:"#000000",qrBg:"#FFFFFF",qrFg:"#000000"}}[s];return n.jsxs("div",{id:o,className:"w-[300px] h-[450px] flex flex-col items-center justify-between p-8 rounded-3xl shadow-2xl relative overflow-hidden font-sans select-none",style:{backgroundColor:u.bg,color:u.text},children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-2",style:{backgroundColor:u.accent}}),n.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 blur-[60px] opacity-20 rounded-full pointer-events-none",style:{backgroundColor:u.accent}}),n.jsxs("div",{className:"text-center z-10",children:[n.jsx("h3",{className:"font-black text-lg uppercase tracking-widest opacity-80 mb-1",children:i}),n.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.2em] opacity-50",children:"Menu Digital"})]}),n.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-xl z-10",children:n.jsx(Kl,{value:e,size:180,level:"H",bgColor:u.qrBg,fgColor:u.qrFg,includeMargin:!1})}),n.jsxs("div",{className:"text-center space-y-2 z-10",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-60",children:[n.jsx($r,{size:16}),n.jsx("span",{className:"text-xs font-bold uppercase",children:"Aponte a Cmera"})]}),t?n.jsxs("div",{className:"mt-4 px-6 py-2 rounded-xl border-2 border-current inline-block",children:[n.jsx("span",{className:"text-xs font-bold uppercase mr-2 opacity-70",children:"Mesa"}),n.jsx("span",{className:"text-3xl font-black",children:t})]}):n.jsx("div",{className:"mt-4 px-6 py-2 rounded-xl border border-white/20 bg-white/10 inline-block",children:n.jsx("span",{className:"text-xs font-bold uppercase",children:"Delivery & Retirada"})})]}),n.jsxs("div",{className:"absolute bottom-4 flex items-center gap-2 opacity-30 text-[8px] font-mono",children:[n.jsx($x,{size:8})," POWERED BY EMPRATA.AI"]})]})}function R1(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const i=document.implementation.createHTMLDocument(),s=i.createElement("base"),a=i.createElement("a");return i.head.appendChild(s),i.body.appendChild(a),t&&(s.href=t),a.href=e,a.href}const M1=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Jn(e){const t=[];for(let i=0,s=e.length;i<s;i++)t.push(e[i]);return t}let Vi=null;function jm(e={}){return Vi||(e.includeStyleProperties?(Vi=e.includeStyleProperties,Vi):(Vi=Jn(window.getComputedStyle(document.documentElement)),Vi))}function la(e,t){const s=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return s?parseFloat(s.replace("px","")):0}function L1(e){const t=la(e,"border-left-width"),i=la(e,"border-right-width");return e.clientWidth+t+i}function O1(e){const t=la(e,"border-top-width"),i=la(e,"border-bottom-width");return e.clientHeight+t+i}function Nm(e,t={}){const i=t.width||L1(e),s=t.height||O1(e);return{width:i,height:s}}function D1(){let e,t;try{t=process}catch{}const i=t&&t.env?t.env.devicePixelRatio:null;return i&&(e=parseInt(i,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Jt=16384;function z1(e){(e.width>Jt||e.height>Jt)&&(e.width>Jt&&e.height>Jt?e.width>e.height?(e.height*=Jt/e.width,e.width=Jt):(e.width*=Jt/e.height,e.height=Jt):e.width>Jt?(e.height*=Jt/e.width,e.width=Jt):(e.width*=Jt/e.height,e.height=Jt))}function ca(e){return new Promise((t,i)=>{const s=new Image;s.onload=()=>{s.decode().then(()=>{requestAnimationFrame(()=>t(s))})},s.onerror=i,s.crossOrigin="anonymous",s.decoding="async",s.src=e})}async function F1(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function B1(e,t,i){const s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${i}`),a.setAttribute("viewBox",`0 0 ${t} ${i}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),a.appendChild(o),o.appendChild(e),F1(a)}const qt=(e,t)=>{if(e instanceof t)return!0;const i=Object.getPrototypeOf(e);return i===null?!1:i.constructor.name===t.name||qt(i,t)};function U1(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function V1(e,t){return jm(t).map(i=>{const s=e.getPropertyValue(i),a=e.getPropertyPriority(i);return`${i}: ${s}${a?" !important":""};`}).join(" ")}function H1(e,t,i,s){const a=`.${e}:${t}`,o=i.cssText?U1(i):V1(i,s);return document.createTextNode(`${a}{${o}}`)}function Fd(e,t,i,s){const a=window.getComputedStyle(e,i),o=a.getPropertyValue("content");if(o===""||o==="none")return;const c=M1();try{t.className=`${t.className} ${c}`}catch{return}const u=document.createElement("style");u.appendChild(H1(c,i,a,s)),t.appendChild(u)}function q1(e,t,i){Fd(e,t,":before",i),Fd(e,t,":after",i)}const Bd="application/font-woff",Ud="image/jpeg",$1={woff:Bd,woff2:Bd,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Ud,jpeg:Ud,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function G1(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Ql(e){const t=G1(e).toLowerCase();return $1[t]||""}function W1(e){return e.split(/,/)[1]}function hl(e){return e.search(/^(data:)/)!==-1}function Z1(e,t){return`data:${t};base64,${e}`}async function km(e,t,i){const s=await fetch(e,t);if(s.status===404)throw new Error(`Resource "${s.url}" not found`);const a=await s.blob();return new Promise((o,c)=>{const u=new FileReader;u.onerror=c,u.onloadend=()=>{try{o(i({res:s,result:u.result}))}catch(h){c(h)}},u.readAsDataURL(a)})}const Io={};function K1(e,t,i){let s=e.replace(/\?.*/,"");return i&&(s=e),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),t?`[${t}]${s}`:s}async function Jl(e,t,i){const s=K1(e,t,i.includeQueryParams);if(Io[s]!=null)return Io[s];i.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const o=await km(e,i.fetchRequestInit,({res:c,result:u})=>(t||(t=c.headers.get("Content-Type")||""),W1(u)));a=Z1(o,t)}catch(o){a=i.imagePlaceholder||"";let c=`Failed to fetch resource: ${e}`;o&&(c=typeof o=="string"?o:o.message),c&&console.warn(c)}return Io[s]=a,a}async function Y1(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):ca(t)}async function X1(e,t){if(e.currentSrc){const o=document.createElement("canvas"),c=o.getContext("2d");o.width=e.clientWidth,o.height=e.clientHeight,c?.drawImage(e,0,0,o.width,o.height);const u=o.toDataURL();return ca(u)}const i=e.poster,s=Ql(i),a=await Jl(i,s,t);return ca(a)}async function Q1(e,t){var i;try{if(!((i=e?.contentDocument)===null||i===void 0)&&i.body)return await ka(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function J1(e,t){return qt(e,HTMLCanvasElement)?Y1(e):qt(e,HTMLVideoElement)?X1(e,t):qt(e,HTMLIFrameElement)?Q1(e,t):e.cloneNode(Cm(e))}const e_=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Cm=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function t_(e,t,i){var s,a;if(Cm(t))return t;let o=[];return e_(e)&&e.assignedNodes?o=Jn(e.assignedNodes()):qt(e,HTMLIFrameElement)&&(!((s=e.contentDocument)===null||s===void 0)&&s.body)?o=Jn(e.contentDocument.body.childNodes):o=Jn(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),o.length===0||qt(e,HTMLVideoElement)||await o.reduce((c,u)=>c.then(()=>ka(u,i)).then(h=>{h&&t.appendChild(h)}),Promise.resolve()),t}function n_(e,t,i){const s=t.style;if(!s)return;const a=window.getComputedStyle(e);a.cssText?(s.cssText=a.cssText,s.transformOrigin=a.transformOrigin):jm(i).forEach(o=>{let c=a.getPropertyValue(o);o==="font-size"&&c.endsWith("px")&&(c=`${Math.floor(parseFloat(c.substring(0,c.length-2)))-.1}px`),qt(e,HTMLIFrameElement)&&o==="display"&&c==="inline"&&(c="block"),o==="d"&&t.getAttribute("d")&&(c=`path(${t.getAttribute("d")})`),s.setProperty(o,c,a.getPropertyPriority(o))})}function i_(e,t){qt(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),qt(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function r_(e,t){if(qt(e,HTMLSelectElement)){const s=Array.from(t.children).find(a=>e.value===a.getAttribute("value"));s&&s.setAttribute("selected","")}}function s_(e,t,i){return qt(t,Element)&&(n_(e,t,i),q1(e,t,i),i_(e,t),r_(e,t)),t}async function a_(e,t){const i=e.querySelectorAll?e.querySelectorAll("use"):[];if(i.length===0)return e;const s={};for(let o=0;o<i.length;o++){const u=i[o].getAttribute("xlink:href");if(u){const h=e.querySelector(u),d=document.querySelector(u);!h&&d&&!s[u]&&(s[u]=await ka(d,t,!0))}}const a=Object.values(s);if(a.length){const o="http://www.w3.org/1999/xhtml",c=document.createElementNS(o,"svg");c.setAttribute("xmlns",o),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";const u=document.createElementNS(o,"defs");c.appendChild(u);for(let h=0;h<a.length;h++)u.appendChild(a[h]);e.appendChild(c)}return e}async function ka(e,t,i){return!i&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(s=>J1(s,t)).then(s=>t_(e,s,t)).then(s=>s_(e,s,t)).then(s=>a_(s,t))}const Em=/url\((['"]?)([^'"]+?)\1\)/g,o_=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,l_=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function c_(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function u_(e){const t=[];return e.replace(Em,(i,s,a)=>(t.push(a),i)),t.filter(i=>!hl(i))}async function d_(e,t,i,s,a){try{const o=i?R1(t,i):t,c=Ql(t);let u;return a||(u=await Jl(o,c,s)),e.replace(c_(t),`$1${u}$3`)}catch{}return e}function h_(e,{preferredFontFormat:t}){return t?e.replace(l_,i=>{for(;;){const[s,,a]=o_.exec(i)||[];if(!a)return"";if(a===t)return`src: ${s};`}}):e}function Sm(e){return e.search(Em)!==-1}async function Am(e,t,i){if(!Sm(e))return e;const s=h_(e,i);return u_(s).reduce((o,c)=>o.then(u=>d_(u,c,t,i)),Promise.resolve(s))}async function Hi(e,t,i){var s;const a=(s=t.style)===null||s===void 0?void 0:s.getPropertyValue(e);if(a){const o=await Am(a,null,i);return t.style.setProperty(e,o,t.style.getPropertyPriority(e)),!0}return!1}async function p_(e,t){await Hi("background",e,t)||await Hi("background-image",e,t),await Hi("mask",e,t)||await Hi("-webkit-mask",e,t)||await Hi("mask-image",e,t)||await Hi("-webkit-mask-image",e,t)}async function m_(e,t){const i=qt(e,HTMLImageElement);if(!(i&&!hl(e.src))&&!(qt(e,SVGImageElement)&&!hl(e.href.baseVal)))return;const s=i?e.src:e.href.baseVal,a=await Jl(s,Ql(s),t);await new Promise((o,c)=>{e.onload=o,e.onerror=t.onImageErrorHandler?(...h)=>{try{o(t.onImageErrorHandler(...h))}catch(d){c(d)}}:c;const u=e;u.decode&&(u.decode=o),u.loading==="lazy"&&(u.loading="eager"),i?(e.srcset="",e.src=a):e.href.baseVal=a})}async function f_(e,t){const s=Jn(e.childNodes).map(a=>Tm(a,t));await Promise.all(s).then(()=>e)}async function Tm(e,t){qt(e,Element)&&(await p_(e,t),await m_(e,t),await f_(e,t))}function x_(e,t){const{style:i}=e;t.backgroundColor&&(i.backgroundColor=t.backgroundColor),t.width&&(i.width=`${t.width}px`),t.height&&(i.height=`${t.height}px`);const s=t.style;return s!=null&&Object.keys(s).forEach(a=>{i[a]=s[a]}),e}const Vd={};async function Hd(e){let t=Vd[e];if(t!=null)return t;const s=await(await fetch(e)).text();return t={url:e,cssText:s},Vd[e]=t,t}async function qd(e,t){let i=e.cssText;const s=/url\(["']?([^"')]+)["']?\)/g,o=(i.match(/url\([^)]+\)/g)||[]).map(async c=>{let u=c.replace(s,"$1");return u.startsWith("https://")||(u=new URL(u,e.url).href),km(u,t.fetchRequestInit,({result:h})=>(i=i.replace(c,`url(${h})`),[c,h]))});return Promise.all(o).then(()=>i)}function $d(e){if(e==null)return[];const t=[],i=/(\/\*[\s\S]*?\*\/)/gi;let s=e.replace(i,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const h=a.exec(s);if(h===null)break;t.push(h[0])}s=s.replace(a,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,c="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=new RegExp(c,"gi");for(;;){let h=o.exec(s);if(h===null){if(h=u.exec(s),h===null)break;o.lastIndex=u.lastIndex}else u.lastIndex=o.lastIndex;t.push(h[0])}return t}async function g_(e,t){const i=[],s=[];return e.forEach(a=>{if("cssRules"in a)try{Jn(a.cssRules||[]).forEach((o,c)=>{if(o.type===CSSRule.IMPORT_RULE){let u=c+1;const h=o.href,d=Hd(h).then(f=>qd(f,t)).then(f=>$d(f).forEach(p=>{try{a.insertRule(p,p.startsWith("@import")?u+=1:a.cssRules.length)}catch(x){console.error("Error inserting rule from remote css",{rule:p,error:x})}})).catch(f=>{console.error("Error loading remote css",f.toString())});s.push(d)}})}catch(o){const c=e.find(u=>u.href==null)||document.styleSheets[0];a.href!=null&&s.push(Hd(a.href).then(u=>qd(u,t)).then(u=>$d(u).forEach(h=>{c.insertRule(h,c.cssRules.length)})).catch(u=>{console.error("Error loading remote stylesheet",u)})),console.error("Error inlining remote css file",o)}}),Promise.all(s).then(()=>(e.forEach(a=>{if("cssRules"in a)try{Jn(a.cssRules||[]).forEach(o=>{i.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${a.href}`,o)}}),i))}function b_(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Sm(t.style.getPropertyValue("src")))}async function v_(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const i=Jn(e.ownerDocument.styleSheets),s=await g_(i,t);return b_(s)}function Pm(e){return e.trim().replace(/["']/g,"")}function y_(e){const t=new Set;function i(s){(s.style.fontFamily||getComputedStyle(s).fontFamily).split(",").forEach(o=>{t.add(Pm(o))}),Array.from(s.children).forEach(o=>{o instanceof HTMLElement&&i(o)})}return i(e),t}async function w_(e,t){const i=await v_(e,t),s=y_(e);return(await Promise.all(i.filter(o=>s.has(Pm(o.style.fontFamily))).map(o=>{const c=o.parentStyleSheet?o.parentStyleSheet.href:null;return Am(o.cssText,c,t)}))).join(`
`)}async function __(e,t){const i=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await w_(e,t);if(i){const s=document.createElement("style"),a=document.createTextNode(i);s.appendChild(a),e.firstChild?e.insertBefore(s,e.firstChild):e.appendChild(s)}}async function Im(e,t={}){const{width:i,height:s}=Nm(e,t),a=await ka(e,t,!0);return await __(a,t),await Tm(a,t),x_(a,t),await B1(a,i,s)}async function Rm(e,t={}){const{width:i,height:s}=Nm(e,t),a=await Im(e,t),o=await ca(a),c=document.createElement("canvas"),u=c.getContext("2d"),h=t.pixelRatio||D1(),d=t.canvasWidth||i,f=t.canvasHeight||s;return c.width=d*h,c.height=f*h,t.skipAutoScale||z1(c),c.style.width=`${d}`,c.style.height=`${f}`,t.backgroundColor&&(u.fillStyle=t.backgroundColor,u.fillRect(0,0,c.width,c.height)),u.drawImage(o,0,0,c.width,c.height),c}async function Mm(e,t={}){return(await Rm(e,t)).toDataURL()}const j_=Object.freeze(Object.defineProperty({__proto__:null,toCanvas:Rm,toPng:Mm,toSvg:Im},Symbol.toStringTag,{value:"Module"}));var Fs={exports:{}},N_=Fs.exports,Gd;function k_(){return Gd||(Gd=1,(function(e,t){(function(i,s){e.exports=s()})(N_,function(){return function i(s,a,o){var c=window,u="application/octet-stream",h=o||u,d=s,f=!a&&!o&&d,p=document.createElement("a"),x=function(F){return String(F)},b=c.Blob||c.MozBlob||c.WebKitBlob||x,y=a||"download",w,j;if(b=b.call?b.bind(c):Blob,String(this)==="true"&&(d=[d,h],h=d[0],d=d[1]),f&&f.length<2048&&(y=f.split("/").pop().split("?")[0],p.href=f,p.href.indexOf(f)!==-1)){var S=new XMLHttpRequest;return S.open("GET",f,!0),S.responseType="blob",S.onload=function(F){i(F.target.response,y,u)},setTimeout(function(){S.send()},0),S}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(d))if(d.length>1024*1024*1.999&&b!==x)d=P(d),h=d.type||u;else return navigator.msSaveBlob?navigator.msSaveBlob(P(d),y):I(d);else if(/([\x80-\xff])/.test(d)){var C=0,N=new Uint8Array(d.length),R=N.length;for(C;C<R;++C)N[C]=d.charCodeAt(C);d=new b([N],{type:h})}w=d instanceof b?d:new b([d],{type:h});function P(F){var $=F.split(/[:;,]/),ne=$[1],O=$[2]=="base64"?atob:decodeURIComponent,D=O($.pop()),M=D.length,q=0,Z=new Uint8Array(M);for(q;q<M;++q)Z[q]=D.charCodeAt(q);return new b([Z],{type:ne})}function I(F,$){if("download"in p)return p.href=F,p.setAttribute("download",y),p.className="download-js-link",p.innerHTML="downloading...",p.style.display="none",document.body.appendChild(p),setTimeout(function(){p.click(),document.body.removeChild(p),$===!0&&setTimeout(function(){c.URL.revokeObjectURL(p.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(F)&&(F="data:"+F.replace(/^data:([\w\/\-\+]+)/,u)),window.open(F)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=F),!0;var ne=document.createElement("iframe");document.body.appendChild(ne),!$&&/^data:/.test(F)&&(F="data:"+F.replace(/^data:([\w\/\-\+]+)/,u)),ne.src=F,setTimeout(function(){document.body.removeChild(ne)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(w,y);if(c.URL)I(c.URL.createObjectURL(w),!0);else{if(typeof w=="string"||w.constructor===x)try{return I("data:"+h+";base64,"+c.btoa(w))}catch{return I("data:"+h+","+encodeURIComponent(w))}j=new FileReader,j.onload=function(F){I(this.result)},j.readAsDataURL(w)}return!0}})})(Fs)),Fs.exports}var C_=k_();const E_=pn(C_);function S_(){const{user:e}=Ke(),[t,i]=T.useState("TABLE"),[s,a]=T.useState("1"),[o,c]=T.useState("DARK"),[u,h]=T.useState("#22c55e"),[d,f]=T.useState(!1),[p,x]=T.useState(null),[b,y]=T.useState(!0);T.useEffect(()=>{(async()=>{if(e?.uid)try{const N=tt($e(he,"menus"),Oe("ownerId","==",e.uid)),R=await Zt(N);if(!R.empty){const P=R.docs[0].data();x(P.slug)}}catch(N){console.error("Error fetching menu:",N)}finally{y(!1)}})()},[e?.uid]);const w=window.location.origin,j=t==="DELIVERY"?`${w}/menu/${p}`:`${w}/menu/${p}/table/${s}`,S=async()=>{f(!0);const C=document.getElementById("qr-plate-preview");if(C)try{const N=await Mm(C,{pixelRatio:3});E_(N,`Emprata_Mesa_${t==="TABLE"?s:"Delivery"}.png`),ie.success("Arte baixada em Alta Definio!")}catch(N){console.error("Error generating image:",N),ie.error("Erro ao gerar imagem.")}f(!1)};return b?n.jsx("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center",children:n.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full"})}):p?n.jsx("div",{className:"min-h-screen bg-[#050505] text-white p-6 md:p-12 font-sans",children:n.jsxs("div",{className:"max-w-6xl mx-auto grid md:grid-cols-2 gap-12 items-start",children:[n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-black italic mb-2",children:"QR Studio"}),n.jsx("p",{className:"text-white/50",children:"Crie placas de mesa profissionais prontas para impresso."})]}),n.jsxs("div",{className:"bg-[#121212] p-6 rounded-3xl border border-white/5",children:[n.jsxs("h3",{className:"font-bold text-white/70 mb-4 flex items-center gap-2",children:[n.jsx(hu,{size:18})," Tipo de QR"]}),n.jsxs("div",{className:"flex bg-black p-1 rounded-xl border border-white/10",children:[n.jsx("button",{onClick:()=>i("TABLE"),className:`flex-1 py-3 rounded-lg text-sm font-bold transition-all ${t==="TABLE"?"bg-white text-black shadow-lg":"text-white/40 hover:text-white/60"}`,children:"Mesa (Comanda)"}),n.jsx("button",{onClick:()=>i("DELIVERY"),className:`flex-1 py-3 rounded-lg text-sm font-bold transition-all ${t==="DELIVERY"?"bg-white text-black shadow-lg":"text-white/40 hover:text-white/60"}`,children:"Delivery (Link)"})]}),t==="TABLE"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase",children:"Nmero da Mesa"}),n.jsx("input",{type:"number",min:"1",value:s,onChange:C=>a(C.target.value),className:"w-full bg-black border border-white/10 rounded-xl p-3 mt-2 text-white font-black text-xl focus:border-primary outline-none transition-colors"})]})]}),n.jsxs("div",{className:"bg-[#121212] p-6 rounded-3xl border border-white/5",children:[n.jsxs("h3",{className:"font-bold text-white/70 mb-4 flex items-center gap-2",children:[n.jsx(Gx,{size:18})," Personalizao"]}),n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase mb-3 block",children:"Tema"}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[n.jsx("button",{onClick:()=>c("DARK"),className:`h-12 rounded-xl bg-black border-2 transition-all flex items-center justify-center ${o==="DARK"?"border-white":"border-white/10 hover:border-white/30"}`,children:o==="DARK"&&n.jsx("span",{className:"text-white text-xs font-bold",children:""})}),n.jsx("button",{onClick:()=>c("LIGHT"),className:`h-12 rounded-xl bg-white border-2 transition-all flex items-center justify-center ${o==="LIGHT"?"border-blue-500":"border-transparent hover:border-gray-300"}`,children:o==="LIGHT"&&n.jsx("span",{className:"text-black text-xs font-bold",children:""})}),n.jsx("button",{onClick:()=>c("BRAND"),className:`h-12 rounded-xl border-2 transition-all flex items-center justify-center ${o==="BRAND"?"border-white":"border-transparent hover:border-white/50"}`,style:{backgroundColor:u},children:o==="BRAND"&&n.jsx("span",{className:"text-white text-xs font-bold",children:""})})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase",children:"Cor da Marca (Hex)"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"color",value:u,onChange:C=>h(C.target.value),className:"w-10 h-10 rounded-lg bg-transparent border-none cursor-pointer"}),n.jsx("input",{type:"text",value:u,onChange:C=>h(C.target.value),className:"flex-1 bg-black border border-white/10 rounded-xl p-3 text-white font-mono text-sm uppercase focus:border-primary outline-none transition-colors"})]})]})]}),n.jsxs("div",{className:"bg-[#121212] p-6 rounded-3xl border border-white/5",children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase mb-2 block",children:"Link do QR Code"}),n.jsx("div",{className:"bg-black/50 border border-white/10 rounded-xl p-3 font-mono text-xs text-white/60 break-all",children:j})]}),n.jsx("button",{onClick:S,disabled:d,className:"w-full bg-primary hover:bg-green-400 disabled:opacity-50 disabled:cursor-not-allowed text-black py-5 rounded-2xl font-black text-lg flex items-center justify-center gap-3 shadow-[0_0_30px_rgba(34,197,94,0.3)] transition-all",children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-black border-t-transparent rounded-full"}),"Gerando Alta Resoluo..."]}):n.jsxs(n.Fragment,{children:[n.jsx(li,{size:24})," BAIXAR PLACA (PNG)"]})}),n.jsx("p",{className:"text-center text-xs text-white/30",children:"Formato ideal para imprimir em papel A5, Adesivo ou Acrlico."})]}),n.jsxs("div",{className:"sticky top-10 flex flex-col items-center justify-center bg-[#121212] rounded-[3rem] border border-white/5 p-12 min-h-[600px]",children:[n.jsx("p",{className:"mb-8 text-white/40 font-bold uppercase tracking-widest text-xs",children:"Preview da Impresso"}),n.jsx("div",{className:"shadow-2xl shadow-black",children:n.jsx(I1,{id:"qr-plate-preview",link:j,tableNum:t==="TABLE"?s:void 0,restaurantName:e?.displayName||"Seu Restaurante",theme:o,brandColor:u})})]})]})}):n.jsx("div",{className:"min-h-screen bg-[#050505] text-white flex flex-col items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-3xl flex items-center justify-center mx-auto mb-6",children:n.jsx(hu,{className:"w-10 h-10 text-white/20"})}),n.jsx("h2",{className:"text-2xl font-black mb-3",children:"Cardpio no encontrado"}),n.jsx("p",{className:"text-white/50",children:"Crie um cardpio primeiro no Menu Builder para gerar QR Codes."})]})})}function A_({level:e,revenue:t}){const{user:i}=Ke(),s=T.useRef(null),[a,o]=T.useState(!1),c=async()=>{if(s.current){o(!0);try{const{toPng:h}=await Cp(async()=>{const{toPng:p}=await Promise.resolve().then(()=>j_);return{toPng:p}},void 0),d=await h(s.current,{pixelRatio:3,backgroundColor:"#050505",cacheBust:!0}),f=document.createElement("a");f.download=`Certificado_Emprata_${e.label.replace(/\s/g,"_")}.png`,f.href=d,f.click()}catch(h){console.error("Erro ao gerar certificado:",h)}o(!1)}},u=e.color.split("-")[1];return n.jsxs("div",{className:"flex flex-col items-center gap-6",children:[n.jsx("div",{className:"relative group shadow-2xl rounded-xl overflow-hidden border border-white/10",children:n.jsxs("div",{ref:s,className:"w-[360px] h-[480px] bg-[#050505] relative flex flex-col items-center justify-between p-6 text-center font-sans",style:{fontFamily:"Inter, system-ui, sans-serif"},children:[n.jsx("div",{className:`absolute inset-0 bg-gradient-to-b from-black via-black to-${u}-900/30`}),n.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E")`}}),n.jsx("div",{className:"absolute inset-3 border-2 border-white/10 rounded-lg pointer-events-none"}),n.jsxs("div",{className:"relative z-10 mt-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx(at,{size:14,className:"text-white/40"}),n.jsx("h2",{className:"text-xs font-black text-white/60 tracking-[0.3em] uppercase",children:"Certificado de Conquista"}),n.jsx(at,{size:14,className:"text-white/40"})]}),n.jsx("div",{className:"w-20 h-0.5 bg-gradient-to-r from-transparent via-white/30 to-transparent mx-auto"})]}),n.jsxs("div",{className:"relative z-10 flex flex-col items-center py-6",children:[n.jsx("div",{className:"text-7xl mb-4",style:{filter:"drop-shadow(0 0 20px rgba(255,255,255,0.2))",textShadow:"0 0 40px rgba(255,255,255,0.3)"},children:e.icon}),n.jsx("h1",{className:`text-2xl font-black ${e.color} uppercase tracking-tight mb-3`,children:e.label}),n.jsxs("p",{className:"text-white/50 text-xs px-6 leading-relaxed",children:["Certificamos que o estabelecimento"," ",n.jsx("strong",{className:"text-white",children:i?.displayName||"Restaurante"})," ","atingiu a marca histrica de faturamento verificado na plataforma."]})]}),n.jsxs("div",{className:"relative z-10 w-full bg-white/5 border border-white/10 rounded-xl p-4 mb-4 backdrop-blur-sm",children:[n.jsx("p",{className:"text-[10px] text-white/40 uppercase font-bold tracking-widest mb-1",children:"Faturamento Verificado"}),n.jsxs("p",{className:"text-2xl font-black text-white",children:["R$ ",t.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),n.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-1",children:[n.jsx("div",{className:"text-[10px] text-white/20 tracking-[0.4em] font-black uppercase",children:"Powered by"}),n.jsx("div",{className:"text-sm font-black text-primary tracking-widest",children:"EMPRATA.AI"})]})]})}),n.jsx("button",{onClick:c,disabled:a,className:"bg-primary hover:bg-green-400 text-black px-8 py-3.5 rounded-xl font-black flex items-center gap-2 shadow-lg hover:shadow-[0_0_30px_rgba(34,197,94,0.3)] hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a?n.jsxs(n.Fragment,{children:[n.jsx(Ee,{size:18,className:"animate-spin"}),"Gerando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ma,{size:18}),"COMPARTILHAR CONQUISTA"]})}),n.jsxs("p",{className:"text-xs text-white/30 max-w-xs text-center",children:["Poste no Instagram e marque ",n.jsx("strong",{className:"text-primary",children:"@emprata.ai"})," para ser repostado!"]})]})}const T_="https://chat.whatsapp.com/SEU_LINK_DE_CONVITE";function P_(){const{user:e}=Ke(),[t,i]=T.useState(0),[s,a]=T.useState(!0),[o,c]=T.useState(!1);T.useEffect(()=>{if(!e?.uid)return;const x=Ot(ze(he,"users",e.uid),b=>{const y=b.data()?.stats?.verifiedRevenue||0,w=localStorage.getItem("emprata_journey_level"),j=aa(y);w&&w!==j.id&&j.threshold>0&&u(),localStorage.setItem("emprata_journey_level",j.id),i(y),a(!1)});return()=>x()},[e?.uid]);const u=()=>{_m({particleCount:150,spread:100,origin:{y:.6},colors:["#22c55e","#fbbf24","#a855f7"]})};if(s)return n.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:n.jsx(Ee,{className:"animate-spin text-primary w-8 h-8"})});const h=aa(t),d=ql(t),{percent:f,remaining:p}=tw(t);return n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8 pb-8",children:[n.jsxs("div",{className:`bg-gradient-to-br ${h.bgGradient} p-8 rounded-[2rem] relative overflow-hidden`,children:[n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-black/20 rounded-full blur-2xl"}),n.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6",children:[n.jsx(K.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-28 h-28 rounded-full border-4 border-white/20 flex items-center justify-center text-6xl shadow-2xl bg-black/30 backdrop-blur-md",children:h.icon}),n.jsxs("div",{className:"flex-1 text-center md:text-left space-y-2",children:[n.jsxs("p",{className:"text-white/60 font-bold uppercase tracking-widest text-xs flex items-center justify-center md:justify-start gap-2",children:["Sua Patente Atual ",n.jsx(Pn,{size:12,className:"text-green-400"})]}),n.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white",children:h.label}),n.jsxs("p",{className:"text-white/80",children:["Faturamento verificado: ",n.jsxs("span",{className:"font-bold text-white",children:["R$ ",t.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),n.jsxs("div",{className:"bg-black/30 backdrop-blur-md p-4 rounded-xl border border-white/10 text-left min-w-[220px]",children:[n.jsxs("p",{className:"text-xs font-bold text-white mb-2 flex items-center gap-2",children:[n.jsx(Gr,{size:12,fill:"white"})," Benefcios Ativos"]}),n.jsxs("ul",{className:"space-y-1.5",children:[h.benefits.map((x,b)=>n.jsxs("li",{className:"text-xs text-white/80 flex items-center gap-2",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full shrink-0"})," ",x]},b)),h.feeDiscount>0&&n.jsxs("li",{className:"text-xs text-green-400 font-bold flex items-center gap-2",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full shrink-0"}),"-",(h.feeDiscount*100).toFixed(1),"% na taxa"]})]})]})]}),d&&n.jsxs("div",{className:"mt-8 relative z-10",children:[n.jsxs("div",{className:"flex justify-between text-xs font-bold text-white/60 mb-2",children:[n.jsx("span",{children:"Progresso"}),n.jsxs("span",{children:["Prximo: ",d.label," (R$ ",d.threshold.toLocaleString(),")"]})]}),n.jsx("div",{className:"h-3 bg-black/30 rounded-full overflow-hidden border border-white/10",children:n.jsx(K.div,{initial:{width:0},animate:{width:`${f}%`},transition:{duration:1.5,ease:"easeOut"},className:"h-full bg-white/90 shadow-[0_0_20px_rgba(255,255,255,0.5)]"})}),n.jsxs("p",{className:"text-right text-xs text-white/50 mt-2",children:["Faltam ",n.jsxs("span",{className:"text-white font-bold",children:["R$ ",p.toLocaleString("pt-BR")]})," para evoluir"]})]})]}),h.reward&&n.jsxs("div",{className:"bg-gradient-to-r from-green-900/20 to-transparent p-6 rounded-2xl border border-green-500/30",children:[n.jsxs("h3",{className:"text-lg font-black text-white mb-4 flex items-center gap-2",children:[n.jsx(Ar,{className:"text-green-400"}),"  Recompensa Disponvel!"]}),h.rewardType==="DIGITAL_CERTIFICATE"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-white/60 text-sm",children:h.rewardDescription}),o?n.jsx(A_,{level:h,revenue:t}):n.jsxs("button",{onClick:()=>c(!0),className:"bg-primary hover:bg-green-400 text-black px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-all hover:scale-105",children:[n.jsx(Wx,{size:18})," Gerar Certificado"]})]}),h.rewardType==="VIP_COMMUNITY"&&n.jsxs("div",{className:"bg-white/5 border border-white/10 p-4 rounded-xl flex items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-green-400",children:"Acesso  Comunidade VIP"}),n.jsx("p",{className:"text-xs text-white/60",children:h.rewardDescription})]}),n.jsxs("a",{href:T_,target:"_blank",rel:"noopener noreferrer",className:"bg-green-500 text-black px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-green-400 transition-colors shrink-0",children:[n.jsx(Kh,{size:16})," ENTRAR AGORA"]})]}),h.rewardType==="FEATURE_UNLOCK"&&n.jsxs("div",{className:"bg-white/5 border border-white/10 p-4 rounded-xl",children:[n.jsxs("p",{className:"text-sm text-white/80",children:[n.jsxs("span",{className:"text-green-400 font-bold",children:[" ",h.reward]})," desbloqueado automaticamente!"]}),n.jsx("p",{className:"text-xs text-white/50 mt-1",children:h.rewardDescription})]}),(h.rewardType==="PHYSICAL_PLAQUE"||h.rewardType==="TROPHY")&&n.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 p-4 rounded-xl flex items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-bold text-yellow-400 flex items-center gap-2",children:[n.jsx(Ar,{size:16})," ",h.reward]}),n.jsx("p",{className:"text-xs text-white/60",children:h.rewardDescription})]}),n.jsxs("a",{href:"mailto:contato@emprata.ai?subject=Solicitao de Placa/Trofu",className:"bg-yellow-500 text-black px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-yellow-400 transition-colors shrink-0",children:[n.jsx(Or,{size:14})," SOLICITAR"]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[n.jsx(Zx,{className:"text-yellow-500"})," Mapa da Jornada"]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:Vr.map(x=>{const b=t>=x.threshold,y=d?.id===x.id,w=h.id===x.id;return n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:b?1.02:1},className:`p-5 rounded-2xl border transition-all relative overflow-hidden ${w?`bg-gradient-to-br ${x.bgGradient} border-white/30 ring-2 ring-white/20`:b?"bg-[#1a1a1a] border-green-500/30":y?"bg-[#121212] border-white/20 ring-1 ring-primary/30":"bg-[#0a0a0a] border-white/5 opacity-50"}`,children:[y&&n.jsx("div",{className:"absolute inset-0 bg-primary/5 animate-pulse pointer-events-none"}),n.jsxs("div",{className:"flex justify-between items-start mb-3 relative z-10",children:[n.jsx("span",{className:"text-3xl",children:x.icon}),b?n.jsx(Kx,{size:16,className:"text-green-400"}):n.jsx(Gt,{size:16,className:"text-white/20"})]}),n.jsx("h3",{className:`font-bold text-base ${w||b?"text-white":"text-white/60"}`,children:x.label}),n.jsxs("p",{className:"text-xs font-mono text-white/30 mb-3",children:["R$ ",x.threshold.toLocaleString()]}),n.jsx("ul",{className:"space-y-1.5 relative z-10",children:x.benefits.slice(0,2).map((j,S)=>n.jsxs("li",{className:"text-[11px] flex items-center gap-1.5 text-white/50",children:[n.jsx(Mr,{size:10,className:"shrink-0"}),n.jsx("span",{className:"truncate",children:j})]},S))}),x.reward&&n.jsx("div",{className:`mt-3 pt-3 border-t border-white/10 ${b?"opacity-100":"opacity-40"}`,children:n.jsxs("p",{className:"text-[10px] font-bold text-white/60 uppercase flex items-center gap-1",children:[n.jsx(Ar,{size:10})," ",x.reward]})})]},x.id)})})]}),d&&n.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-transparent p-6 rounded-2xl border border-primary/20",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"text-4xl",children:d.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-white font-bold",children:["Prxima conquista: ",d.label]}),n.jsxs("p",{className:"text-white/50 text-sm",children:["Venda mais R$ ",p.toLocaleString("pt-BR")," via checkout online!"]})]}),n.jsx("button",{onClick:()=>window.location.href="/menu-builder",className:"px-4 py-2 bg-primary text-black rounded-xl font-bold text-sm hover:bg-green-400 transition-colors",children:"Criar Promoo"})]})})]})}async function I_(e){try{const t=e.replace(/\D/g,"");if(t.length!==8)return null;const s=await(await fetch(`https://viacep.com.br/ws/${t}/json/`)).json();return s.erro?null:{street:s.logradouro,neighborhood:s.bairro,city:s.localidade,state:s.uf,postalCode:t}}catch{return null}}function R_({savedAddresses:e=[],selectedAddress:t,onSelect:i,onSaveNew:s}){const[a,o]=T.useState(!1),[c,u]=T.useState(!1),[h,d]=T.useState(!1),[f,p]=T.useState(!1),[x,b]=T.useState(!1),y=()=>!(!w.street||!w.neighborhood||!w.city||!w.number||w.number.length<1),[w,j]=T.useState({label:"casa",street:"",number:"",complement:"",neighborhood:"",city:"",state:"",postalCode:"",reference:""}),S=()=>{if(!navigator.geolocation){ie.error("Geolocalizao no suportada");return}d(!0),navigator.geolocation.getCurrentPosition(async P=>{const{latitude:I,longitude:F}=P.coords;try{const ne=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${I}&lon=${F}&format=json&addressdetails=1`,{headers:{"Accept-Language":"pt-BR"}})).json();if(ne.address){const O=ne.address;j({...w,street:O.road||O.pedestrian||"",neighborhood:O.suburb||O.neighbourhood||"",city:O.city||O.town||O.village||"",state:O.state||"",postalCode:O.postcode?.replace(/\D/g,"")||"",coords:{lat:I,lng:F}}),u(!0),ie.success("Localizao detectada!")}}catch{ie.error("Erro ao buscar endereo")}d(!1)},()=>{ie.error("Permisso de localizao negada"),d(!1)},{enableHighAccuracy:!0,timeout:1e4})},C=async P=>{if(j({...w,postalCode:P}),P.replace(/\D/g,"").length===8){p(!0);const I=await I_(P);I?(j(F=>({...F,...I})),ie.success("CEP encontrado!")):ie.error("CEP no encontrado"),p(!1)}},N=async()=>{if(!y()){ie.error("Endereo incompleto. Verifique rua e nmero.");return}b(!0),await new Promise(I=>setTimeout(I,800)),b(!1);const P={id:`addr_${Date.now()}`,label:w.label||"outro",street:w.street||"",number:w.number||"",complement:w.complement,neighborhood:w.neighborhood||"",city:w.city||"",state:w.state||"",postalCode:w.postalCode||"",reference:w.reference,coords:w.coords};s?.(P),i(P),u(!1),o(!1),ie.success("Endereo validado e salvo!")},R={casa:n.jsx(Wh,{className:"w-4 h-4"}),trabalho:n.jsx(Yx,{className:"w-4 h-4"}),outro:n.jsx(Un,{className:"w-4 h-4"})};return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>o(!0),className:"w-full flex items-center gap-3 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 hover:bg-white/10 transition-colors",children:[n.jsx(Un,{className:"w-5 h-5 text-primary shrink-0"}),n.jsx("div",{className:"flex-1 text-left",children:t?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm font-bold text-white truncate",children:[t.street,", ",t.number]}),n.jsxs("p",{className:"text-xs text-white/40 truncate",children:[t.neighborhood,"  ",t.city]})]}):n.jsx("p",{className:"text-sm font-medium text-white/50",children:"Selecione um endereo"})}),n.jsx(jl,{className:"w-5 h-5 text-white/40"})]}),n.jsx(Ye,{children:a&&n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>o(!1),children:n.jsxs(K.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},onClick:P=>P.stopPropagation(),className:"w-full max-w-lg bg-[#121212] border border-white/10 rounded-3xl overflow-hidden max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/5",children:[n.jsx("h3",{className:"font-black text-lg",children:c?"Novo Endereo":"Onde voc est?"}),n.jsx("button",{onClick:()=>{c?u(!1):o(!1)},className:"p-2 hover:bg-white/5 rounded-full",children:n.jsx(Ht,{className:"w-5 h-5"})})]}),c?n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"flex gap-2",children:["casa","trabalho","outro"].map(P=>n.jsxs("button",{onClick:()=>j({...w,label:P}),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl border text-sm font-bold transition-all ${w.label===P?"bg-primary/20 border-primary text-primary":"border-white/10 text-white/50 hover:bg-white/5"}`,children:[R[P],n.jsx("span",{className:"capitalize",children:P})]},P))}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"CEP"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:w.postalCode,onChange:P=>C(P.target.value),placeholder:"00000-000",maxLength:9,className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"}),f&&n.jsx(Ee,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary animate-spin"})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"Rua"}),n.jsx("input",{type:"text",value:w.street,onChange:P=>j({...w,street:P.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"N"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:w.number,onChange:P=>j({...w,number:P.target.value}),className:`w-full bg-black/50 border rounded-xl px-4 py-3 text-white focus:outline-none transition-colors ${w.number?"border-white/10 focus:border-primary":"border-red-500/50"}`}),!w.number&&n.jsx(ji,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-red-500"})]}),!w.number&&n.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Obrigatrio"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"Complemento"}),n.jsx("input",{type:"text",value:w.complement,onChange:P=>j({...w,complement:P.target.value}),placeholder:"Apto, Bloco...",className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"Bairro"}),n.jsx("input",{type:"text",value:w.neighborhood,onChange:P=>j({...w,neighborhood:P.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"Ponto de Referncia"}),n.jsx("input",{type:"text",value:w.reference,onChange:P=>j({...w,reference:P.target.value}),placeholder:"Prximo ao mercado...",className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"})]}),n.jsx("button",{onClick:N,disabled:x,className:"w-full py-4 bg-primary hover:bg-orange-600 rounded-2xl font-black uppercase tracking-wider text-sm transition-colors flex items-center justify-center gap-2",children:x?n.jsxs(n.Fragment,{children:[n.jsx(Ee,{className:"animate-spin w-4 h-4"})," Validando..."]}):"Confirmar Endereo"})]}):n.jsxs("div",{className:"p-4 space-y-2",children:[n.jsxs("button",{onClick:S,disabled:h,className:"w-full flex items-center gap-3 p-4 bg-primary/10 border border-primary/30 rounded-2xl hover:bg-primary/20 transition-colors disabled:opacity-50",children:[h?n.jsx(Ee,{className:"w-5 h-5 text-primary animate-spin"}):n.jsx(Wr,{className:"w-5 h-5 text-primary"}),n.jsx("span",{className:"font-bold text-primary",children:h?"Buscando localizao...":"Usar minha localizao"})]}),e.map(P=>n.jsxs("button",{onClick:()=>{i(P),o(!1)},className:`w-full flex items-center gap-3 p-4 rounded-2xl border transition-colors ${t?.id===P.id?"bg-white/10 border-primary":"border-white/10 hover:bg-white/5"}`,children:[R[P.label],n.jsxs("div",{className:"flex-1 text-left",children:[n.jsxs("p",{className:"text-sm font-bold text-white",children:[P.street,", ",P.number]}),n.jsxs("p",{className:"text-xs text-white/40",children:[P.neighborhood,"  ",P.city]})]}),t?.id===P.id&&n.jsx(Nt,{className:"w-5 h-5 text-primary"})]},P.id)),n.jsxs("button",{onClick:()=>u(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-white/10 rounded-2xl text-white/50 hover:text-white hover:border-white/20 transition-colors",children:[n.jsx(yn,{className:"w-5 h-5"}),n.jsx("span",{className:"font-bold",children:"Adicionar novo endereo"})]})]})]})})})]})}function M_(){const{user:e}=Ke(),t=e?.uid.slice(0,6).toUpperCase()||"EMPRATA",i=`https://emprata.ai/r/${t}`,s=()=>{navigator.clipboard.writeText(t),ie.success("Cdigo copiado! Mande para um amigo.")},a=async()=>{const o={title:" Pea comida e ganhe R$ 10,00!",text:`Use meu cdigo ${t} no EmprataAI e ganhe R$ 10,00 no primeiro pedido!`,url:i};if(navigator.share)try{await navigator.share(o),ie.success("Link compartilhado!")}catch{}else navigator.clipboard.writeText(`${o.text}
${o.url}`),ie.success("Link copiado para a rea de transferncia!")};return e?n.jsxs("div",{className:"bg-gradient-to-r from-purple-900/80 to-blue-900/80 p-6 rounded-2xl relative overflow-hidden border border-white/10 mt-6 backdrop-blur-sm",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-400",children:[n.jsx(Ar,{className:"animate-bounce",size:20}),n.jsx("h3",{className:"font-black uppercase text-sm tracking-wider",children:"Coma de Graa"})]}),n.jsxs("p",{className:"text-white text-sm font-bold mb-4 w-3/4 leading-relaxed",children:["Convide um amigo. Ele ganha ",n.jsx("span",{className:"text-green-400",children:"R$ 10,00"})," e voc ganha ",n.jsx("span",{className:"text-green-400",children:"R$ 10,00"})," no prximo pedido."]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"bg-black/40 border border-white/20 rounded-xl px-4 py-3 font-mono text-xl tracking-widest text-white flex-1 text-center select-all",children:t}),n.jsx("button",{onClick:s,className:"bg-white/10 text-white font-bold px-4 rounded-xl hover:bg-white/20 transition-colors border border-white/10",title:"Copiar cdigo",children:n.jsx(ha,{size:20})}),n.jsx("button",{onClick:a,className:"bg-green-600 text-white font-bold px-4 rounded-xl hover:bg-green-700 transition-colors",title:"Compartilhar",children:n.jsx(ma,{size:20})})]}),n.jsx("p",{className:"text-[10px] text-white/30 mt-3 text-center",children:"Quanto mais amigos voc indicar, mais prmios voc ganha! "})]}),n.jsx("div",{className:"absolute -right-6 -bottom-6 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),n.jsx("div",{className:"absolute -left-10 -top-10 w-40 h-40 bg-purple-500/10 rounded-full blur-3xl"})]}):null}function As(e){return e*(Math.PI/180)}function L_(e,t,i,s){const o=As(i-e),c=As(s-t),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(As(e))*Math.cos(As(i))*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function O_(e){return e<1?`${Math.round(e*1e3)}m`:`${e.toFixed(1)}km`}const D_=({store:e,id:t,distance:i})=>n.jsx(it,{to:`/menu/${t}`,children:n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},className:`bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 hover:border-primary/50 transition-all group ${e.isOpen?"":"opacity-60 grayscale"}`,children:[n.jsxs("div",{className:"h-32 relative overflow-hidden bg-gray-800",children:[e.bannerUrl?n.jsx("img",{src:e.bannerUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",loading:"lazy"}):n.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/10 text-4xl font-black",children:e.displayName?.[0]||"?"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1a1a1a] to-transparent"}),n.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-[10px] font-black uppercase ${e.isOpen?"bg-green-500 text-black":"bg-red-500 text-white"}`,children:e.isOpen?"Aberto":"Fechado"}),i!==void 0&&i<9999&&n.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-lg text-[10px] font-black bg-black/80 text-white flex items-center gap-1",children:[n.jsx(Wr,{size:10}),O_(i)]})]}),n.jsxs("div",{className:"p-4 relative",children:[n.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-[#1a1a1a] bg-black absolute -top-6 left-4 overflow-hidden",children:e.logoUrl?n.jsx("img",{src:e.logoUrl,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-white/10"})}),n.jsxs("div",{className:"mt-4 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-white text-lg leading-none mb-1",children:e.displayName}),n.jsxs("p",{className:"text-white/40 text-xs",children:[e.cuisineType,"  ",e.minTime,"-",e.maxTime," min"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-yellow-400 font-bold text-sm flex items-center gap-1",children:[n.jsx(Gr,{size:10,fill:"currentColor"})," ",e.rating||"New"]})})]}),n.jsx("div",{className:"flex gap-2 mt-3 overflow-hidden text-xs",children:n.jsxs("span",{className:`px-2 py-0.5 rounded font-bold flex items-center gap-1 ${e.deliveryFee===0?"bg-green-500/20 text-green-400":"bg-white/5 text-white/60"}`,children:[n.jsx(In,{size:10}),e.deliveryFee===0?"Grtis":`R$ ${e.deliveryFee?.toFixed(2)||"0.00"}`]})})]})]})});function Wd(){const[e,t]=T.useState([]),[i,s]=T.useState(!0),[a,o]=T.useState(""),[c,u]=T.useState(!1),[h,d]=T.useState(null),[f,p]=T.useState(null),[x,b]=T.useState(!0),[y,w]=T.useState(!1);T.useEffect(()=>{b(!0),navigator.geolocation.getCurrentPosition(S=>{p({lat:S.coords.latitude,lng:S.coords.longitude}),b(!1)},S=>{console.log("GPS permission denied or unavailable"),w(!0),b(!1)},{enableHighAccuracy:!0,timeout:1e4})},[]),T.useEffect(()=>{x||(async()=>{try{const C=tt($e(he,"users"),Oe("marketplace.isActive","==",!0));let R=(await Zt(C)).docs.map(P=>({id:P.id,data:P.data().marketplace}));f&&(R=R.map(P=>{const I=P.data.location,F=I?L_(f.lat,f.lng,I.lat,I.lng):9999;return{...P,distance:F}})),R.sort((P,I)=>I.data.isOpen!==P.data.isOpen?I.data.isOpen?1:-1:P.distance!==void 0&&I.distance!==void 0?P.distance-I.distance:0),t(R)}catch(C){console.error("Error loading stores",C)}finally{s(!1)}})()},[f,x]);const j=e.filter(S=>S.data.displayName?.toLowerCase().includes(a.toLowerCase())||S.data.cuisineType?.toLowerCase().includes(a.toLowerCase()));return n.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white pb-24",children:[n.jsxs("div",{className:"sticky top-0 z-30 bg-[#0a0a0a]/90 backdrop-blur-md border-b border-white/5 px-4 py-3",children:[n.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 text-white mb-3 w-full hover:bg-white/5 p-2 rounded-xl transition-colors",children:[n.jsx("div",{className:"bg-primary/20 p-2 rounded-full text-primary",children:n.jsx(Un,{size:16})}),n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"text-[10px] text-white/40 font-bold uppercase",children:"Entregar em"}),n.jsxs("p",{className:"text-sm font-bold flex items-center gap-1",children:[h?`${h.street}, ${h.number}`:f?"Usando sua localizao":"Selecionar Endereo",n.jsx(jl,{size:14,className:"text-white/40"})]})]}),f&&!h&&n.jsxs("div",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-lg text-[10px] font-bold flex items-center gap-1",children:[n.jsx(Wr,{size:10})," GPS"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ln,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30 w-4 h-4"}),n.jsx("input",{value:a,onChange:S=>o(S.target.value),placeholder:"Prato, mercado ou loja...",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm focus:border-primary outline-none text-white placeholder-white/20"})]}),n.jsx("button",{className:"bg-[#1a1a1a] p-2.5 rounded-xl border border-white/10 text-white/60 hover:text-primary hover:border-primary transition-colors",children:n.jsx(Xx,{size:20})})]})]}),n.jsx(Ye,{children:c&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end md:items-center justify-center p-4",children:n.jsxs(K.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"bg-[#121212] w-full max-w-md rounded-3xl p-6 border border-white/10",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-lg",children:"Onde voc est?"}),n.jsx("button",{onClick:()=>u(!1),className:"text-white/40",children:"Fechar"})]}),n.jsx(R_,{onSelect:S=>{d(S),S.coords&&p({lat:S.coords.lat,lng:S.coords.lng}),u(!1)}})]})})}),n.jsxs("div",{className:"p-4 space-y-8",children:[!a&&n.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-blue-900/40 border border-white/10 rounded-2xl p-4 flex items-center justify-between relative overflow-hidden",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("h2",{className:"font-black text-lg text-white mb-1 flex items-center gap-2",children:[n.jsx(at,{className:"text-yellow-400",size:18})," Taste Match"]}),n.jsx("p",{className:"text-xs text-white/60 max-w-[200px]",children:f?"Lojas ordenadas pela menor distncia!":"Ative o GPS para ver lojas prximas"})]}),n.jsx("div",{className:"text-6xl absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:""})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[f?"Lojas Prximas":"Lojas Disponveis",n.jsx("span",{className:"text-xs bg-white/10 px-2 py-0.5 rounded text-white/40",children:j.length})]}),i||x?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-3",children:[n.jsx(Ee,{className:"w-8 h-8 text-primary animate-spin"}),n.jsx("p",{className:"text-white/40 text-sm",children:x?"Buscando sua localizao...":"Carregando lojas..."})]}):j.length===0?n.jsx("div",{className:"text-center py-10 text-white/30",children:n.jsxs("p",{children:["Nenhuma loja encontrada ",a&&`para "${a}"`]})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(S=>n.jsx(D_,{store:S.data,id:S.id,distance:S.distance},S.id))})]}),n.jsx(M_,{})]})]})}function z_(e){const t=e.replace(/[^\d]+/g,"");if(t.length!==11||t.match(/(\d)\1{10}/))return!1;const i=t.split("").map(Number),s=a=>i.slice(0,a-12).reduce((o,c,u)=>o+c*(a-u),0)*10%11%10;return s(10)===i[9]&&s(11)===i[10]}const F_=e=>e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),B_=e=>e.replace(/\D/g,"").replace(/^(\d{2})(\d)/g,"($1) $2").replace(/(\d)(\d{4})$/,"$1-$2"),U_=e=>{const t=e.replace(/\D/g,"");return t.length>=10&&t.length<=11};var Bs={exports:{}};function V_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Us={exports:{}};const H_={},q_=Object.freeze(Object.defineProperty({__proto__:null,default:H_},Symbol.toStringTag,{value:"Module"})),$_=pg(q_);var G_=Us.exports,Zd;function ei(){return Zd||(Zd=1,(function(e,t){(function(i,s){e.exports=s()})(G_,function(){var i=i||(function(s,a){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof io<"u"&&io.crypto&&(o=io.crypto),!o&&typeof V_=="function")try{o=$_}catch{}var c=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},u=Object.create||(function(){function C(){}return function(N){var R;return C.prototype=N,R=new C,C.prototype=null,R}})(),h={},d=h.lib={},f=d.Base=(function(){return{extend:function(C){var N=u(this);return C&&N.mixIn(C),(!N.hasOwnProperty("init")||this.init===N.init)&&(N.init=function(){N.$super.init.apply(this,arguments)}),N.init.prototype=N,N.$super=this,N},create:function(){var C=this.extend();return C.init.apply(C,arguments),C},init:function(){},mixIn:function(C){for(var N in C)C.hasOwnProperty(N)&&(this[N]=C[N]);C.hasOwnProperty("toString")&&(this.toString=C.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),p=d.WordArray=f.extend({init:function(C,N){C=this.words=C||[],N!=a?this.sigBytes=N:this.sigBytes=C.length*4},toString:function(C){return(C||b).stringify(this)},concat:function(C){var N=this.words,R=C.words,P=this.sigBytes,I=C.sigBytes;if(this.clamp(),P%4)for(var F=0;F<I;F++){var $=R[F>>>2]>>>24-F%4*8&255;N[P+F>>>2]|=$<<24-(P+F)%4*8}else for(var ne=0;ne<I;ne+=4)N[P+ne>>>2]=R[ne>>>2];return this.sigBytes+=I,this},clamp:function(){var C=this.words,N=this.sigBytes;C[N>>>2]&=4294967295<<32-N%4*8,C.length=s.ceil(N/4)},clone:function(){var C=f.clone.call(this);return C.words=this.words.slice(0),C},random:function(C){for(var N=[],R=0;R<C;R+=4)N.push(c());return new p.init(N,C)}}),x=h.enc={},b=x.Hex={stringify:function(C){for(var N=C.words,R=C.sigBytes,P=[],I=0;I<R;I++){var F=N[I>>>2]>>>24-I%4*8&255;P.push((F>>>4).toString(16)),P.push((F&15).toString(16))}return P.join("")},parse:function(C){for(var N=C.length,R=[],P=0;P<N;P+=2)R[P>>>3]|=parseInt(C.substr(P,2),16)<<24-P%8*4;return new p.init(R,N/2)}},y=x.Latin1={stringify:function(C){for(var N=C.words,R=C.sigBytes,P=[],I=0;I<R;I++){var F=N[I>>>2]>>>24-I%4*8&255;P.push(String.fromCharCode(F))}return P.join("")},parse:function(C){for(var N=C.length,R=[],P=0;P<N;P++)R[P>>>2]|=(C.charCodeAt(P)&255)<<24-P%4*8;return new p.init(R,N)}},w=x.Utf8={stringify:function(C){try{return decodeURIComponent(escape(y.stringify(C)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(C){return y.parse(unescape(encodeURIComponent(C)))}},j=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(C){typeof C=="string"&&(C=w.parse(C)),this._data.concat(C),this._nDataBytes+=C.sigBytes},_process:function(C){var N,R=this._data,P=R.words,I=R.sigBytes,F=this.blockSize,$=F*4,ne=I/$;C?ne=s.ceil(ne):ne=s.max((ne|0)-this._minBufferSize,0);var O=ne*F,D=s.min(O*4,I);if(O){for(var M=0;M<O;M+=F)this._doProcessBlock(P,M);N=P.splice(0,O),R.sigBytes-=D}return new p.init(N,D)},clone:function(){var C=f.clone.call(this);return C._data=this._data.clone(),C},_minBufferSize:0});d.Hasher=j.extend({cfg:f.extend(),init:function(C){this.cfg=this.cfg.extend(C),this.reset()},reset:function(){j.reset.call(this),this._doReset()},update:function(C){return this._append(C),this._process(),this},finalize:function(C){C&&this._append(C);var N=this._doFinalize();return N},blockSize:16,_createHelper:function(C){return function(N,R){return new C.init(R).finalize(N)}},_createHmacHelper:function(C){return function(N,R){return new S.HMAC.init(C,R).finalize(N)}}});var S=h.algo={};return h})(Math);return i})})(Us)),Us.exports}var Vs={exports:{}},W_=Vs.exports,Kd;function Z_(){return Kd||(Kd=1,(function(e,t){(function(i,s){e.exports=s(ei())})(W_,function(i){return(function(){var s=i,a=s.lib,o=a.WordArray,c=s.enc;c.Base64={stringify:function(h){var d=h.words,f=h.sigBytes,p=this._map;h.clamp();for(var x=[],b=0;b<f;b+=3)for(var y=d[b>>>2]>>>24-b%4*8&255,w=d[b+1>>>2]>>>24-(b+1)%4*8&255,j=d[b+2>>>2]>>>24-(b+2)%4*8&255,S=y<<16|w<<8|j,C=0;C<4&&b+C*.75<f;C++)x.push(p.charAt(S>>>6*(3-C)&63));var N=p.charAt(64);if(N)for(;x.length%4;)x.push(N);return x.join("")},parse:function(h){var d=h.length,f=this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var x=0;x<f.length;x++)p[f.charCodeAt(x)]=x}var b=f.charAt(64);if(b){var y=h.indexOf(b);y!==-1&&(d=y)}return u(h,d,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function u(h,d,f){for(var p=[],x=0,b=0;b<d;b++)if(b%4){var y=f[h.charCodeAt(b-1)]<<b%4*2,w=f[h.charCodeAt(b)]>>>6-b%4*2,j=y|w;p[x>>>2]|=j<<24-x%4*8,x++}return o.create(p,x)}})(),i.enc.Base64})})(Vs)),Vs.exports}var Hs={exports:{}},K_=Hs.exports,Yd;function Y_(){return Yd||(Yd=1,(function(e,t){(function(i,s){e.exports=s(ei())})(K_,function(i){return(function(s){var a=i,o=a.lib,c=o.WordArray,u=o.Hasher,h=a.algo,d=[];(function(){for(var w=0;w<64;w++)d[w]=s.abs(s.sin(w+1))*4294967296|0})();var f=h.MD5=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,j){for(var S=0;S<16;S++){var C=j+S,N=w[C];w[C]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}var R=this._hash.words,P=w[j+0],I=w[j+1],F=w[j+2],$=w[j+3],ne=w[j+4],O=w[j+5],D=w[j+6],M=w[j+7],q=w[j+8],Z=w[j+9],W=w[j+10],ee=w[j+11],ce=w[j+12],se=w[j+13],ve=w[j+14],_=w[j+15],A=R[0],H=R[1],k=R[2],B=R[3];A=p(A,H,k,B,P,7,d[0]),B=p(B,A,H,k,I,12,d[1]),k=p(k,B,A,H,F,17,d[2]),H=p(H,k,B,A,$,22,d[3]),A=p(A,H,k,B,ne,7,d[4]),B=p(B,A,H,k,O,12,d[5]),k=p(k,B,A,H,D,17,d[6]),H=p(H,k,B,A,M,22,d[7]),A=p(A,H,k,B,q,7,d[8]),B=p(B,A,H,k,Z,12,d[9]),k=p(k,B,A,H,W,17,d[10]),H=p(H,k,B,A,ee,22,d[11]),A=p(A,H,k,B,ce,7,d[12]),B=p(B,A,H,k,se,12,d[13]),k=p(k,B,A,H,ve,17,d[14]),H=p(H,k,B,A,_,22,d[15]),A=x(A,H,k,B,I,5,d[16]),B=x(B,A,H,k,D,9,d[17]),k=x(k,B,A,H,ee,14,d[18]),H=x(H,k,B,A,P,20,d[19]),A=x(A,H,k,B,O,5,d[20]),B=x(B,A,H,k,W,9,d[21]),k=x(k,B,A,H,_,14,d[22]),H=x(H,k,B,A,ne,20,d[23]),A=x(A,H,k,B,Z,5,d[24]),B=x(B,A,H,k,ve,9,d[25]),k=x(k,B,A,H,$,14,d[26]),H=x(H,k,B,A,q,20,d[27]),A=x(A,H,k,B,se,5,d[28]),B=x(B,A,H,k,F,9,d[29]),k=x(k,B,A,H,M,14,d[30]),H=x(H,k,B,A,ce,20,d[31]),A=b(A,H,k,B,O,4,d[32]),B=b(B,A,H,k,q,11,d[33]),k=b(k,B,A,H,ee,16,d[34]),H=b(H,k,B,A,ve,23,d[35]),A=b(A,H,k,B,I,4,d[36]),B=b(B,A,H,k,ne,11,d[37]),k=b(k,B,A,H,M,16,d[38]),H=b(H,k,B,A,W,23,d[39]),A=b(A,H,k,B,se,4,d[40]),B=b(B,A,H,k,P,11,d[41]),k=b(k,B,A,H,$,16,d[42]),H=b(H,k,B,A,D,23,d[43]),A=b(A,H,k,B,Z,4,d[44]),B=b(B,A,H,k,ce,11,d[45]),k=b(k,B,A,H,_,16,d[46]),H=b(H,k,B,A,F,23,d[47]),A=y(A,H,k,B,P,6,d[48]),B=y(B,A,H,k,M,10,d[49]),k=y(k,B,A,H,ve,15,d[50]),H=y(H,k,B,A,O,21,d[51]),A=y(A,H,k,B,ce,6,d[52]),B=y(B,A,H,k,$,10,d[53]),k=y(k,B,A,H,W,15,d[54]),H=y(H,k,B,A,I,21,d[55]),A=y(A,H,k,B,q,6,d[56]),B=y(B,A,H,k,_,10,d[57]),k=y(k,B,A,H,D,15,d[58]),H=y(H,k,B,A,se,21,d[59]),A=y(A,H,k,B,ne,6,d[60]),B=y(B,A,H,k,ee,10,d[61]),k=y(k,B,A,H,F,15,d[62]),H=y(H,k,B,A,Z,21,d[63]),R[0]=R[0]+A|0,R[1]=R[1]+H|0,R[2]=R[2]+k|0,R[3]=R[3]+B|0},_doFinalize:function(){var w=this._data,j=w.words,S=this._nDataBytes*8,C=w.sigBytes*8;j[C>>>5]|=128<<24-C%32;var N=s.floor(S/4294967296),R=S;j[(C+64>>>9<<4)+15]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,j[(C+64>>>9<<4)+14]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,w.sigBytes=(j.length+1)*4,this._process();for(var P=this._hash,I=P.words,F=0;F<4;F++){var $=I[F];I[F]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return P},clone:function(){var w=u.clone.call(this);return w._hash=this._hash.clone(),w}});function p(w,j,S,C,N,R,P){var I=w+(j&S|~j&C)+N+P;return(I<<R|I>>>32-R)+j}function x(w,j,S,C,N,R,P){var I=w+(j&C|S&~C)+N+P;return(I<<R|I>>>32-R)+j}function b(w,j,S,C,N,R,P){var I=w+(j^S^C)+N+P;return(I<<R|I>>>32-R)+j}function y(w,j,S,C,N,R,P){var I=w+(S^(j|~C))+N+P;return(I<<R|I>>>32-R)+j}a.MD5=u._createHelper(f),a.HmacMD5=u._createHmacHelper(f)})(Math),i.MD5})})(Hs)),Hs.exports}var qs={exports:{}},$s={exports:{}},X_=$s.exports,Xd;function Q_(){return Xd||(Xd=1,(function(e,t){(function(i,s){e.exports=s(ei())})(X_,function(i){return(function(){var s=i,a=s.lib,o=a.WordArray,c=a.Hasher,u=s.algo,h=[],d=u.SHA1=c.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,p){for(var x=this._hash.words,b=x[0],y=x[1],w=x[2],j=x[3],S=x[4],C=0;C<80;C++){if(C<16)h[C]=f[p+C]|0;else{var N=h[C-3]^h[C-8]^h[C-14]^h[C-16];h[C]=N<<1|N>>>31}var R=(b<<5|b>>>27)+S+h[C];C<20?R+=(y&w|~y&j)+1518500249:C<40?R+=(y^w^j)+1859775393:C<60?R+=(y&w|y&j|w&j)-1894007588:R+=(y^w^j)-899497514,S=j,j=w,w=y<<30|y>>>2,y=b,b=R}x[0]=x[0]+b|0,x[1]=x[1]+y|0,x[2]=x[2]+w|0,x[3]=x[3]+j|0,x[4]=x[4]+S|0},_doFinalize:function(){var f=this._data,p=f.words,x=this._nDataBytes*8,b=f.sigBytes*8;return p[b>>>5]|=128<<24-b%32,p[(b+64>>>9<<4)+14]=Math.floor(x/4294967296),p[(b+64>>>9<<4)+15]=x,f.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var f=c.clone.call(this);return f._hash=this._hash.clone(),f}});s.SHA1=c._createHelper(d),s.HmacSHA1=c._createHmacHelper(d)})(),i.SHA1})})($s)),$s.exports}var Gs={exports:{}},J_=Gs.exports,Qd;function ej(){return Qd||(Qd=1,(function(e,t){(function(i,s){e.exports=s(ei())})(J_,function(i){(function(){var s=i,a=s.lib,o=a.Base,c=s.enc,u=c.Utf8,h=s.algo;h.HMAC=o.extend({init:function(d,f){d=this._hasher=new d.init,typeof f=="string"&&(f=u.parse(f));var p=d.blockSize,x=p*4;f.sigBytes>x&&(f=d.finalize(f)),f.clamp();for(var b=this._oKey=f.clone(),y=this._iKey=f.clone(),w=b.words,j=y.words,S=0;S<p;S++)w[S]^=1549556828,j[S]^=909522486;b.sigBytes=y.sigBytes=x,this.reset()},reset:function(){var d=this._hasher;d.reset(),d.update(this._iKey)},update:function(d){return this._hasher.update(d),this},finalize:function(d){var f=this._hasher,p=f.finalize(d);f.reset();var x=f.finalize(this._oKey.clone().concat(p));return x}})})()})})(Gs)),Gs.exports}var tj=qs.exports,Jd;function Lm(){return Jd||(Jd=1,(function(e,t){(function(i,s,a){e.exports=s(ei(),Q_(),ej())})(tj,function(i){return(function(){var s=i,a=s.lib,o=a.Base,c=a.WordArray,u=s.algo,h=u.MD5,d=u.EvpKDF=o.extend({cfg:o.extend({keySize:128/32,hasher:h,iterations:1}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,p){for(var x,b=this.cfg,y=b.hasher.create(),w=c.create(),j=w.words,S=b.keySize,C=b.iterations;j.length<S;){x&&y.update(x),x=y.update(f).finalize(p),y.reset();for(var N=1;N<C;N++)x=y.finalize(x),y.reset();w.concat(x)}return w.sigBytes=S*4,w}});s.EvpKDF=function(f,p,x){return d.create(x).compute(f,p)}})(),i.EvpKDF})})(qs)),qs.exports}var Ws={exports:{}},nj=Ws.exports,eh;function ij(){return eh||(eh=1,(function(e,t){(function(i,s,a){e.exports=s(ei(),Lm())})(nj,function(i){i.lib.Cipher||(function(s){var a=i,o=a.lib,c=o.Base,u=o.WordArray,h=o.BufferedBlockAlgorithm,d=a.enc;d.Utf8;var f=d.Base64,p=a.algo,x=p.EvpKDF,b=o.Cipher=h.extend({cfg:c.extend(),createEncryptor:function(O,D){return this.create(this._ENC_XFORM_MODE,O,D)},createDecryptor:function(O,D){return this.create(this._DEC_XFORM_MODE,O,D)},init:function(O,D,M){this.cfg=this.cfg.extend(M),this._xformMode=O,this._key=D,this.reset()},reset:function(){h.reset.call(this),this._doReset()},process:function(O){return this._append(O),this._process()},finalize:function(O){O&&this._append(O);var D=this._doFinalize();return D},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function O(D){return typeof D=="string"?ne:I}return function(D){return{encrypt:function(M,q,Z){return O(q).encrypt(D,M,q,Z)},decrypt:function(M,q,Z){return O(q).decrypt(D,M,q,Z)}}}})()});o.StreamCipher=b.extend({_doFinalize:function(){var O=this._process(!0);return O},blockSize:1});var y=a.mode={},w=o.BlockCipherMode=c.extend({createEncryptor:function(O,D){return this.Encryptor.create(O,D)},createDecryptor:function(O,D){return this.Decryptor.create(O,D)},init:function(O,D){this._cipher=O,this._iv=D}}),j=y.CBC=(function(){var O=w.extend();O.Encryptor=O.extend({processBlock:function(M,q){var Z=this._cipher,W=Z.blockSize;D.call(this,M,q,W),Z.encryptBlock(M,q),this._prevBlock=M.slice(q,q+W)}}),O.Decryptor=O.extend({processBlock:function(M,q){var Z=this._cipher,W=Z.blockSize,ee=M.slice(q,q+W);Z.decryptBlock(M,q),D.call(this,M,q,W),this._prevBlock=ee}});function D(M,q,Z){var W,ee=this._iv;ee?(W=ee,this._iv=s):W=this._prevBlock;for(var ce=0;ce<Z;ce++)M[q+ce]^=W[ce]}return O})(),S=a.pad={},C=S.Pkcs7={pad:function(O,D){for(var M=D*4,q=M-O.sigBytes%M,Z=q<<24|q<<16|q<<8|q,W=[],ee=0;ee<q;ee+=4)W.push(Z);var ce=u.create(W,q);O.concat(ce)},unpad:function(O){var D=O.words[O.sigBytes-1>>>2]&255;O.sigBytes-=D}};o.BlockCipher=b.extend({cfg:b.cfg.extend({mode:j,padding:C}),reset:function(){var O;b.reset.call(this);var D=this.cfg,M=D.iv,q=D.mode;this._xformMode==this._ENC_XFORM_MODE?O=q.createEncryptor:(O=q.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==O?this._mode.init(this,M&&M.words):(this._mode=O.call(q,this,M&&M.words),this._mode.__creator=O)},_doProcessBlock:function(O,D){this._mode.processBlock(O,D)},_doFinalize:function(){var O,D=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(D.pad(this._data,this.blockSize),O=this._process(!0)):(O=this._process(!0),D.unpad(O)),O},blockSize:128/32});var N=o.CipherParams=c.extend({init:function(O){this.mixIn(O)},toString:function(O){return(O||this.formatter).stringify(this)}}),R=a.format={},P=R.OpenSSL={stringify:function(O){var D,M=O.ciphertext,q=O.salt;return q?D=u.create([1398893684,1701076831]).concat(q).concat(M):D=M,D.toString(f)},parse:function(O){var D,M=f.parse(O),q=M.words;return q[0]==1398893684&&q[1]==1701076831&&(D=u.create(q.slice(2,4)),q.splice(0,4),M.sigBytes-=16),N.create({ciphertext:M,salt:D})}},I=o.SerializableCipher=c.extend({cfg:c.extend({format:P}),encrypt:function(O,D,M,q){q=this.cfg.extend(q);var Z=O.createEncryptor(M,q),W=Z.finalize(D),ee=Z.cfg;return N.create({ciphertext:W,key:M,iv:ee.iv,algorithm:O,mode:ee.mode,padding:ee.padding,blockSize:O.blockSize,formatter:q.format})},decrypt:function(O,D,M,q){q=this.cfg.extend(q),D=this._parse(D,q.format);var Z=O.createDecryptor(M,q).finalize(D.ciphertext);return Z},_parse:function(O,D){return typeof O=="string"?D.parse(O,this):O}}),F=a.kdf={},$=F.OpenSSL={execute:function(O,D,M,q,Z){if(q||(q=u.random(64/8)),Z)var W=x.create({keySize:D+M,hasher:Z}).compute(O,q);else var W=x.create({keySize:D+M}).compute(O,q);var ee=u.create(W.words.slice(D),M*4);return W.sigBytes=D*4,N.create({key:W,iv:ee,salt:q})}},ne=o.PasswordBasedCipher=I.extend({cfg:I.cfg.extend({kdf:$}),encrypt:function(O,D,M,q){q=this.cfg.extend(q);var Z=q.kdf.execute(M,O.keySize,O.ivSize,q.salt,q.hasher);q.iv=Z.iv;var W=I.encrypt.call(this,O,D,Z.key,q);return W.mixIn(Z),W},decrypt:function(O,D,M,q){q=this.cfg.extend(q),D=this._parse(D,q.format);var Z=q.kdf.execute(M,O.keySize,O.ivSize,D.salt,q.hasher);q.iv=Z.iv;var W=I.decrypt.call(this,O,D,Z.key,q);return W}})})()})})(Ws)),Ws.exports}var rj=Bs.exports,th;function sj(){return th||(th=1,(function(e,t){(function(i,s,a){e.exports=s(ei(),Z_(),Y_(),Lm(),ij())})(rj,function(i){return(function(){var s=i,a=s.lib,o=a.BlockCipher,c=s.algo,u=[],h=[],d=[],f=[],p=[],x=[],b=[],y=[],w=[],j=[];(function(){for(var N=[],R=0;R<256;R++)R<128?N[R]=R<<1:N[R]=R<<1^283;for(var P=0,I=0,R=0;R<256;R++){var F=I^I<<1^I<<2^I<<3^I<<4;F=F>>>8^F&255^99,u[P]=F,h[F]=P;var $=N[P],ne=N[$],O=N[ne],D=N[F]*257^F*16843008;d[P]=D<<24|D>>>8,f[P]=D<<16|D>>>16,p[P]=D<<8|D>>>24,x[P]=D;var D=O*16843009^ne*65537^$*257^P*16843008;b[F]=D<<24|D>>>8,y[F]=D<<16|D>>>16,w[F]=D<<8|D>>>24,j[F]=D,P?(P=$^N[N[N[O^$]]],I^=N[N[I]]):P=I=1}})();var S=[0,1,2,4,8,16,32,64,128,27,54],C=c.AES=o.extend({_doReset:function(){var N;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var R=this._keyPriorReset=this._key,P=R.words,I=R.sigBytes/4,F=this._nRounds=I+6,$=(F+1)*4,ne=this._keySchedule=[],O=0;O<$;O++)O<I?ne[O]=P[O]:(N=ne[O-1],O%I?I>6&&O%I==4&&(N=u[N>>>24]<<24|u[N>>>16&255]<<16|u[N>>>8&255]<<8|u[N&255]):(N=N<<8|N>>>24,N=u[N>>>24]<<24|u[N>>>16&255]<<16|u[N>>>8&255]<<8|u[N&255],N^=S[O/I|0]<<24),ne[O]=ne[O-I]^N);for(var D=this._invKeySchedule=[],M=0;M<$;M++){var O=$-M;if(M%4)var N=ne[O];else var N=ne[O-4];M<4||O<=4?D[M]=N:D[M]=b[u[N>>>24]]^y[u[N>>>16&255]]^w[u[N>>>8&255]]^j[u[N&255]]}}},encryptBlock:function(N,R){this._doCryptBlock(N,R,this._keySchedule,d,f,p,x,u)},decryptBlock:function(N,R){var P=N[R+1];N[R+1]=N[R+3],N[R+3]=P,this._doCryptBlock(N,R,this._invKeySchedule,b,y,w,j,h);var P=N[R+1];N[R+1]=N[R+3],N[R+3]=P},_doCryptBlock:function(N,R,P,I,F,$,ne,O){for(var D=this._nRounds,M=N[R]^P[0],q=N[R+1]^P[1],Z=N[R+2]^P[2],W=N[R+3]^P[3],ee=4,ce=1;ce<D;ce++){var se=I[M>>>24]^F[q>>>16&255]^$[Z>>>8&255]^ne[W&255]^P[ee++],ve=I[q>>>24]^F[Z>>>16&255]^$[W>>>8&255]^ne[M&255]^P[ee++],_=I[Z>>>24]^F[W>>>16&255]^$[M>>>8&255]^ne[q&255]^P[ee++],A=I[W>>>24]^F[M>>>16&255]^$[q>>>8&255]^ne[Z&255]^P[ee++];M=se,q=ve,Z=_,W=A}var se=(O[M>>>24]<<24|O[q>>>16&255]<<16|O[Z>>>8&255]<<8|O[W&255])^P[ee++],ve=(O[q>>>24]<<24|O[Z>>>16&255]<<16|O[W>>>8&255]<<8|O[M&255])^P[ee++],_=(O[Z>>>24]<<24|O[W>>>16&255]<<16|O[M>>>8&255]<<8|O[q&255])^P[ee++],A=(O[W>>>24]<<24|O[M>>>16&255]<<16|O[q>>>8&255]<<8|O[Z&255])^P[ee++];N[R]=se,N[R+1]=ve,N[R+2]=_,N[R+3]=A},keySize:256/32});s.AES=o._createHelper(C)})(),i.AES})})(Bs)),Bs.exports}var aj=sj();const nh=pn(aj);var Zs={exports:{}},oj=Zs.exports,ih;function lj(){return ih||(ih=1,(function(e,t){(function(i,s){e.exports=s(ei())})(oj,function(i){return i.enc.Utf8})})(Zs)),Zs.exports}var cj=lj();const uj=pn(cj),rh="emprata_dev_key_change_me_now_32c",qi={encrypt:e=>{if(!e)return"";try{return nh.encrypt(e,rh).toString()}catch(t){return console.error("[CryptoService] Encrypt error:",t),""}},decrypt:e=>{if(!e)return"";try{return nh.decrypt(e,rh).toString(uj)}catch(t){return console.error("[CryptoService] Decrypt error:",t),""}},maskSensitive:(e,t=4)=>{if(!e||e.length<=t)return e;const i=e.slice(-t);return"*".repeat(e.length-t)+i},isEncrypted:e=>e?e.startsWith("U2FsdGVkX1"):!1};function sh(){const{user:e,signOut:t}=Ke(),i=_t(),[s,a]=T.useState([]),[o,c]=T.useState([]),[u,h]=T.useState(!0),[d,f]=T.useState({}),[p,x]=T.useState({cpf:""}),[b,y]=T.useState(!1),[w,j]=T.useState(!1);T.useEffect(()=>{if(!e){i("/auth");return}(async()=>{try{const I=(await hn(ze(he,"users",e.uid))).data()||{displayName:e.displayName,phone:""};I.phone&&qi.isEncrypted(I.phone)&&(I.phone=qi.decrypt(I.phone)),f(I);const F=await hn(ze(he,`users/${e.uid}/private_data`,"sensitive"));if(F.exists()){const $=F.data();$.cpf&&qi.isEncrypted($.cpf)&&($.cpf=qi.decrypt($.cpf)),x($)}}catch(P){console.error("[ConsumerProfile] Erro ao carregar perfil:",P)}})();const N=tt($e(he,"orders"),Oe("customer.uid","==",e.uid),Ni("createdAt","desc")),R=Ot(N,P=>{const I=[],F=[];P.docs.forEach($=>{const ne={id:$.id,...$.data()};["PENDING","PREPARING","READY","DISPATCHED"].includes(ne.status?.toUpperCase())?I.push(ne):F.push(ne)}),a(I),c(F),h(!1)});return()=>R()},[e,i]);const S=async()=>{if(rt.currentUser){if(p.cpf&&!z_(p.cpf))return ie.error("CPF Invlido. Verifique os nmeros digitados.");if(d.phone&&!U_(d.phone))return ie.error("Telefone Invlido. Use formato (XX) XXXXX-XXXX");y(!0);try{const C=d.phone?qi.encrypt(d.phone):"",N=p.cpf?qi.encrypt(p.cpf):"";await di(ze(he,"users",rt.currentUser.uid),{displayName:d.displayName,phone:C,updatedAt:new Date},{merge:!0}),await di(ze(he,`users/${rt.currentUser.uid}/private_data`,"sensitive"),{cpf:N,updatedAt:new Date},{merge:!0}),ie.success(" Dados criptografados e salvos com segurana militar!"),j(!1)}catch(C){console.error("[ConsumerProfile] Erro ao salvar:",C),ie.error("Erro ao salvar. Verifique sua conexo.")}finally{y(!1)}}};return e?u?n.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center",children:n.jsx(Ee,{className:"w-8 h-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white pb-24",children:[n.jsxs("div",{className:"bg-[#121212] p-6 pt-12 border-b border-white/5",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary to-orange-600 flex items-center justify-center text-black font-black text-2xl",children:e.displayName?.[0]||n.jsx(Tn,{})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold",children:d.displayName||e.displayName||"Cliente"}),n.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-xs font-bold bg-green-500/10 px-2 py-1 rounded-full w-fit mt-1",children:[n.jsx(Pn,{size:12})," Conta Verificada"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-white/5 p-3 rounded-xl text-left",children:[n.jsx("p",{className:"text-white/40 text-xs uppercase font-bold",children:"E-mail"}),n.jsx("p",{className:"text-sm truncate",children:e.email})]}),n.jsxs("button",{onClick:t,className:"bg-red-500/10 p-3 rounded-xl text-left hover:bg-red-500/20 text-red-400 transition-colors flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase font-bold opacity-70",children:"Sair"}),n.jsx("p",{className:"font-bold text-sm",children:"Logout"})]}),n.jsx(qr,{size:16})]})]})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-sm font-bold text-white/40 uppercase tracking-wider flex items-center gap-2",children:[n.jsx(Tn,{size:16,className:"text-primary"})," Meu Perfil Blindado"]}),n.jsx("button",{onClick:()=>j(!w),className:"text-xs text-primary font-bold",children:w?"Cancelar":"Editar"})]}),w?n.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-white/40 font-bold block mb-1",children:"Nome Pblico"}),n.jsx("input",{value:d.displayName||"",onChange:C=>f({...d,displayName:C.target.value}),className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl p-3 text-white focus:border-primary/50 outline-none transition-colors",placeholder:"Seu nome"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-white/40 font-bold block mb-1",children:"Celular (Validado)"}),n.jsx("input",{value:d.phone||"",onChange:C=>f({...d,phone:B_(C.target.value)}),className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl p-3 text-white focus:border-primary/50 outline-none transition-colors",placeholder:"(00) 00000-0000",maxLength:15})]}),n.jsxs("div",{className:"bg-green-900/10 border border-green-500/20 p-4 rounded-xl mt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 text-green-400",children:[n.jsx(Pn,{size:18}),n.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:"rea Segura (Criptografada)"})]}),n.jsx("label",{className:"text-xs text-white/40 font-bold block mb-1",children:"CPF"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{value:p.cpf||"",onChange:C=>x({...p,cpf:F_(C.target.value)}),className:"w-full bg-black border border-green-500/30 rounded-xl p-3 pl-10 text-white font-mono tracking-widest focus:border-green-500/60 outline-none transition-colors",placeholder:"000.000.000-00",maxLength:14}),n.jsx(Gt,{className:"absolute left-3 top-3.5 text-white/20",size:16})]}),n.jsx("p",{className:"text-[10px] text-white/30 mt-2",children:"Seu CPF  armazenado em uma coleo separada com regras de segurana estritas. Nem outros usurios nem lojas podem v-lo."})]}),n.jsx("button",{onClick:S,disabled:b,className:"w-full py-4 bg-primary text-black font-black rounded-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary/90 transition-colors",children:b?n.jsx(Ee,{className:"w-5 h-5 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Il,{size:18}),"SALVAR DADOS"]})})]}):n.jsxs("div",{className:"bg-[#121212] border border-white/5 p-4 rounded-xl space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-white/40 text-sm",children:"Nome:"}),n.jsx("span",{className:"font-medium",children:d.displayName||"No informado"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-white/40 text-sm",children:"Telefone:"}),n.jsx("span",{className:"font-medium",children:d.phone||"No informado"})]}),p.cpf&&n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/5",children:[n.jsxs("span",{className:"text-green-400/60 text-sm flex items-center gap-1",children:[n.jsx(Gt,{size:12})," CPF:"]}),n.jsxs("span",{className:"font-mono text-green-400",children:["***.***.***-",p.cpf.slice(-2)]})]})]})]}),n.jsx("div",{className:"px-6",children:n.jsxs("button",{onClick:()=>{localStorage.setItem("activeRole","OWNER"),window.location.href="/dashboard"},className:"w-full bg-gradient-to-r from-gray-800 to-black border border-white/20 p-4 rounded-2xl flex items-center justify-between group hover:border-primary/50 transition-all",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-white/10 p-2 rounded-lg group-hover:bg-primary group-hover:text-black transition-colors",children:n.jsx(Tn,{size:24})}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"font-bold text-sm",children:"Gerenciar Restaurante"}),n.jsx("p",{className:"text-xs text-white/40",children:"Acessar painel administrativo"})]})]}),n.jsx(Mr,{size:16,className:"text-white/40 group-hover:text-white"})]})}),n.jsxs("div",{className:"p-6 space-y-8",children:[s.length>0&&n.jsxs("section",{children:[n.jsxs("h2",{className:"text-sm font-bold text-white/40 uppercase tracking-wider mb-4 flex items-center gap-2",children:[n.jsx(xi,{size:16,className:"text-primary"})," Em Andamento"]}),n.jsx("div",{className:"space-y-4",children:s.map(C=>n.jsxs(it,{to:`/track/${C.id}`,className:"block bg-gradient-to-r from-[#1a1a1a] to-[#121212] border border-primary/30 p-5 rounded-2xl relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 right-0 bg-primary text-black text-[10px] font-black px-3 py-1 rounded-bl-xl uppercase",children:"Rastrear Agora"}),n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-lg",children:C.restaurant?.name||"Emprata Delivery"}),n.jsxs("p",{className:"text-xs text-white/60",children:["Pedido #",C.id.slice(-4).toUpperCase()]})]})}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),dj(C.status)]})]},C.id))})]}),n.jsxs("section",{children:[n.jsxs("h2",{className:"text-sm font-bold text-white/40 uppercase tracking-wider mb-4 flex items-center gap-2",children:[n.jsx(tp,{size:16})," Histrico de Pedidos"]}),o.length===0&&s.length===0?n.jsxs("div",{className:"text-center py-12 bg-white/5 rounded-2xl",children:[n.jsx(ui,{size:48,className:"mx-auto mb-4 text-white/20"}),n.jsx("p",{className:"text-white/40",children:"Nenhum pedido ainda"}),n.jsx("p",{className:"text-xs text-white/20 mt-1",children:"Faa seu primeiro pedido!"})]}):n.jsx("div",{className:"space-y-3",children:o.map(C=>n.jsxs("div",{className:"bg-[#121212] border border-white/5 p-4 rounded-xl flex justify-between items-center opacity-70 hover:opacity-100 transition-opacity",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-white/5 p-2 rounded-lg",children:n.jsx(ui,{size:20,className:"text-white/40"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-sm",children:C.restaurant?.name||"Pedido Finalizado"}),n.jsx("p",{className:"text-xs text-white/40",children:C.createdAt?.toDate?new Date(C.createdAt.toDate()).toLocaleDateString("pt-BR"):"Data indisponvel"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-bold text-sm",children:dn(C.total||C.financials?.total||0)}),n.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded ${C.status?.toUpperCase()==="CANCELLED"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:C.status?.toUpperCase()==="CANCELLED"?"Cancelado":"Concludo"})]})]},C.id))})]})]})]}):null}function dj(e){return{PENDING:"Aguardando Confirmao",PREPARING:"Em Preparo na Cozinha",READY:"Pronto para Entrega",DISPATCHED:"Saiu para Entrega (Acompanhe)",DELIVERED:"Entregue"}[e?.toUpperCase()]||e}const hj=new _a.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/684/684908.png",iconSize:[40,40]}),pj=new _a.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/3063/3063823.png",iconSize:[45,45]});function mj({center:e}){return bw().setView(e),null}const ah=[{key:"PENDING",label:"Pedido Recebido",icon:ui},{key:"PREPARING",label:"Em Preparo",icon:gt},{key:"READY",label:"Pronto para Entrega",icon:gi},{key:"DISPATCHED",label:"Saindo para Entrega",icon:In}];function fj(){const{orderId:e}=ap(),[t,i]=T.useState(null),[s,a]=T.useState(null);if(T.useEffect(()=>{if(!e)return;const h=Ot(ze(he,"orders",e),d=>{if(d.exists()){const f=d.data();i({id:d.id,...f}),f.delivery?.driverLocation&&a(f.delivery.driverLocation)}});return()=>h()},[e]),!t)return n.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(In,{className:"w-12 h-12 mx-auto mb-4 animate-bounce text-primary"}),n.jsx("p",{className:"text-white/60",children:"Carregando rastreamento..."})]})});const o=t.deliveryAddress?.coordinates?[t.deliveryAddress.coordinates.lat,t.deliveryAddress.coordinates.lng]:[-23.5505,-46.6333],c=s?[s.lat,s.lng]:null,u=ah.findIndex(h=>h.key===t.status?.toUpperCase());return n.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col",children:[n.jsxs("div",{className:"h-[50vh] w-full relative z-0",children:[n.jsxs(Xp,{center:o,zoom:15,style:{height:"100%",width:"100%"},children:[n.jsx(Qp,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.jsx(ol,{position:o,icon:hj,children:n.jsx(ll,{children:"Voc est aqui"})}),c&&n.jsxs(n.Fragment,{children:[n.jsx(ol,{position:c,icon:pj,children:n.jsx(ll,{children:"Seu pedido"})}),n.jsx(mj,{center:c})]})]}),!c&&t.status?.toUpperCase()==="DISPATCHED"&&n.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/80 text-white p-3 rounded-xl text-center z-[1000] border border-white/10",children:" Aguardando sinal de GPS do motoboy..."})]}),n.jsxs("div",{className:"flex-1 bg-[#121212] rounded-t-3xl -mt-6 relative z-10 p-6",children:[n.jsx("div",{className:"w-12 h-1 bg-white/10 rounded-full mx-auto mb-6"}),n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-white",children:t.status?.toUpperCase()==="DISPATCHED"?"A Caminho!":t.status?.toUpperCase()==="READY"?"Pronto!":"Preparando..."}),n.jsxs("p",{className:"text-white/40 text-sm flex items-center gap-1",children:[n.jsx(xi,{size:14})," Previso: 15-25 min"]})]}),n.jsx("div",{className:"w-14 h-14 bg-green-500/20 rounded-full flex items-center justify-center text-3xl",children:t.status?.toUpperCase()==="DISPATCHED"?"":t.status?.toUpperCase()==="READY"?"":""})]}),n.jsx("div",{className:"space-y-4 mb-6",children:ah.map((h,d)=>{const f=h.icon,p=d<=u;return n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${p?"bg-green-500 border-green-500 text-black":"border-white/20 text-white/30"}`,children:n.jsx(f,{size:18})}),n.jsx("span",{className:`font-medium ${p?"text-white":"text-white/30"}`,children:h.label})]},h.key)})}),t.deliveryPin&&n.jsxs("div",{className:"mt-6 p-4 bg-white/5 rounded-2xl text-center border border-white/10",children:[n.jsx("p",{className:"text-xs text-white/40 uppercase mb-1",children:"Cdigo de Entrega"}),n.jsx("p",{className:"text-3xl font-black text-white tracking-widest",children:t.deliveryPin})]})]})]})}function xj(){const[e,t]=T.useState(null),[i,s]=T.useState(!1),[a,o]=T.useState(!1),[c,u]=T.useState(null),[h,d]=T.useState(0),[f,p]=T.useState(""),[x,b]=T.useState(!1);T.useEffect(()=>{const j=localStorage.getItem("emprata_staff_token");if(j)try{t(JSON.parse(j))}catch{console.error("Invalid staff token")}},[]),T.useEffect(()=>{if(!e?.id)return;(async()=>{try{const S=ze(he,"drivers",e.id),C=await hn(S);C.exists()&&C.data().currentStatus!=="offline"&&s(!0)}catch{console.log("Initial status check failed")}})()},[e]);const y=async()=>{if(!e?.id){ie.error("Sesso invlida. Faa login novamente.");return}o(!0);try{if(i)await Et(ze(he,"drivers",e.id),{currentStatus:"offline",lastUpdate:Lt()}),s(!1),ie("Voc est OFFLINE."),o(!1);else{if(!navigator.geolocation)throw new Error("GPS no suportado neste dispositivo.");navigator.geolocation.getCurrentPosition(async j=>{const{latitude:S,longitude:C}=j.coords;await di(ze(he,"drivers",e.id),{name:e.name||"Motorista",restaurantId:e.restaurantId,location:{lat:S,lng:C},currentStatus:"available",lastUpdate:Lt()},{merge:!0}),s(!0),ie.success("Voc est ONLINE! Aguardando chamados."),o(!1)},j=>{console.error(j),ie.error("Erro de GPS. Permita a localizao e tente novamente."),o(!1)},{enableHighAccuracy:!0,timeout:1e4})}}catch(j){console.error(j),ie.error("Erro de conexo."),o(!1)}};T.useEffect(()=>{if(!i||!e?.id)return;const j=navigator.geolocation.watchPosition(S=>{Et(ze(he,"drivers",e.id),{location:{lat:S.coords.latitude,lng:S.coords.longitude},lastUpdate:Lt()}).catch(()=>{})},S=>console.log("GPS Error",S),{enableHighAccuracy:!0,maximumAge:1e4});return()=>navigator.geolocation.clearWatch(j)},[i,e]),T.useEffect(()=>{if(!e?.id)return;const j=tt($e(he,"orders"),Oe("driverId","==",e.id),Oe("status","in",["dispatched","DISPATCHED","out_for_delivery"])),S=Ot(j,C=>{if(C.empty)u(null);else{const N=C.docs[0].data();u({id:C.docs[0].id,...N})}});return()=>S()},[e]);const w=async()=>{if(!(!c||!e?.id)){if(c.deliveryPin&&f!==c.deliveryPin){ie.error("PIN Incorreto!"),p("");return}o(!0);try{await Et(ze(he,"orders",c.id),{status:"DELIVERED",deliveredAt:Lt()}),await Et(ze(he,"drivers",e.id),{currentStatus:"available"}),d(j=>j+(c.deliveryFee||5)),ie.success("Entrega finalizada!"),b(!1),p("")}catch{ie.error("Erro ao finalizar.")}finally{o(!1)}}};return n.jsxs("div",{className:"min-h-screen bg-black text-white font-sans flex flex-col relative overflow-hidden selection:bg-green-500 selection:text-black",children:[n.jsxs("div",{className:`p-6 flex justify-between items-center transition-all duration-500 z-20 ${i?"bg-[#121212] border-b border-white/5":"bg-transparent"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all ${i?"bg-green-500 text-black shadow-green-500/20":"bg-white/10 text-white/20"}`,children:n.jsx(In,{size:24})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-bold text-lg leading-none",children:e?.name?.split(" ")[0]||"Motorista"}),n.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mt-1 ${i?"text-green-500":"text-white/30"}`,children:i?" Online":" Offline"})]})]}),i&&n.jsxs("div",{className:"bg-[#1a1a1a] border border-white/10 px-4 py-2 rounded-xl text-right",children:[n.jsx("p",{className:"text-[9px] text-white/40 uppercase font-bold",children:"Saldo"}),n.jsxs("p",{className:"text-xl font-mono font-black text-green-400",children:["R$ ",h.toFixed(2)]})]})]}),n.jsx("div",{className:"flex-1 p-6 relative z-10 flex flex-col justify-center",children:i?c?n.jsxs(K.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},className:"bg-[#121212] rounded-[2.5rem] border border-white/10 overflow-hidden shadow-2xl relative",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-white/5",children:n.jsx(K.div,{initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,repeat:1/0},className:"h-full bg-blue-500 shadow-[0_0_10px_#3b82f6]"})}),n.jsx("div",{className:"bg-white/5 p-8 border-b border-white/5",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-wider",children:"Em Rota"})}),n.jsx("h2",{className:"text-3xl font-black text-white",children:c.customer?.name||"Cliente"})]}),c.customer?.phone&&n.jsx("a",{href:`tel:${c.customer.phone}`,className:"w-12 h-12 bg-green-500 text-black rounded-2xl flex items-center justify-center hover:scale-110 transition-transform shadow-lg shadow-green-500/20",children:n.jsx(Xh,{size:24})})]})}),n.jsxs("div",{className:"p-8 space-y-8",children:[n.jsxs("div",{className:"flex flex-col gap-6 relative",children:[n.jsx("div",{className:"absolute left-[11px] top-3 bottom-8 w-0.5 bg-white/10"}),n.jsxs("div",{className:"flex gap-4 relative z-10",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-[#121212] border-2 border-white/20 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-white/40 font-bold uppercase tracking-wider mb-1",children:"Coleta"}),n.jsx("p",{className:"font-bold text-white",children:"Restaurante"})]})]}),n.jsxs("div",{className:"flex gap-4 relative z-10",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)] shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-green-500 font-bold uppercase tracking-wider mb-1",children:"Entrega"}),n.jsx("p",{className:"text-xl font-bold leading-tight",children:c.customer?.address||c.deliveryAddress?.street||"Endereo"}),c.deliveryAddress?.neighborhood&&n.jsx("p",{className:"text-sm text-white/50",children:c.deliveryAddress.neighborhood})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[n.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c.customer?.address||c.deliveryAddress?.street||"")}`,target:"_blank",className:"py-4 bg-[#1a1a1a] rounded-2xl font-bold flex items-center justify-center gap-2 border border-white/10 hover:bg-white/5 active:scale-95 transition-all text-sm",children:[n.jsx(Wr,{size:18,className:"text-blue-400"})," Navegar"]}),n.jsxs("button",{onClick:()=>b(!0),className:"py-4 bg-white text-black rounded-2xl font-black flex items-center justify-center gap-2 hover:scale-[1.02] active:scale-95 transition-all text-sm shadow-xl",children:[n.jsx(gi,{size:18})," FINALIZAR"]})]})]})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center opacity-40",children:[n.jsx("div",{className:"w-32 h-32 rounded-full border border-dashed border-white/20 flex items-center justify-center mb-6 animate-[spin_10s_linear_infinite]",children:n.jsx(In,{size:32,className:"text-white"})}),n.jsx("h3",{className:"text-lg font-bold",children:"Procurando corridas..."}),n.jsx("p",{className:"text-xs mt-2 text-white/50",children:"Mantenha o app aberto."})]}):n.jsxs("div",{className:"text-center space-y-8",children:[n.jsxs("div",{className:"relative mx-auto w-56 h-56 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-green-500/10 rounded-full animate-ping opacity-20"}),n.jsx("div",{className:"absolute inset-4 bg-green-500/5 rounded-full animate-pulse opacity-40"}),n.jsx("button",{onClick:y,disabled:a,className:"relative w-48 h-48 bg-[#121212] rounded-full border-4 border-white/5 flex flex-col items-center justify-center hover:scale-105 active:scale-95 hover:border-green-500 transition-all shadow-2xl group z-10",children:a?n.jsx(Ee,{size:48,className:"text-green-500 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(np,{size:48,className:"text-white/20 group-hover:text-green-500 transition-colors mb-2"}),n.jsx("span",{className:"text-xs font-black uppercase text-white/40 group-hover:text-white tracking-widest",children:"INICIAR"})]})})]}),n.jsx("p",{className:"text-white/30 max-w-[200px] mx-auto text-xs font-medium",children:"Toque para se conectar ao sistema de despacho EmprataAI."})]})}),i&&!c&&n.jsx("div",{className:"p-6",children:n.jsx("button",{onClick:y,className:"w-full py-4 rounded-2xl border border-red-500/20 text-red-500/60 font-bold text-xs uppercase tracking-widest hover:bg-red-500/10 hover:text-red-500 transition-all",children:"Encerrar Turno"})}),n.jsx(Ye,{children:x&&n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-xl flex items-end md:items-center justify-center p-4",children:n.jsxs(K.div,{initial:{y:100},animate:{y:0},className:"bg-[#121212] w-full max-w-sm rounded-[2.5rem] border border-white/10 p-8 text-center shadow-2xl",children:[n.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6 border border-white/10",children:n.jsx(Gt,{className:"text-white",size:28})}),n.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Confirmao"}),n.jsxs("p",{className:"text-sm text-white/50 mb-8",children:["Pea o cdigo de ",n.jsx("strong",{children:"4 dgitos"})," para o cliente."]}),n.jsx("div",{className:"flex justify-center gap-3 mb-8",children:[0,1,2,3].map(j=>n.jsx("div",{className:`w-12 h-14 rounded-xl border flex items-center justify-center text-2xl font-black transition-all ${j<f.length?"bg-white text-black border-white scale-110":"bg-[#0a0a0a] border-white/10 text-white/20"}`,children:f[j]||""},j))}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[[1,2,3,4,5,6,7,8,9].map(j=>n.jsx("button",{onClick:()=>f.length<4&&p(S=>S+j),className:"py-4 bg-[#1a1a1a] rounded-xl font-bold text-xl hover:bg-white/10 active:scale-95 transition-all",children:j},j)),n.jsx("div",{}),n.jsx("button",{onClick:()=>f.length<4&&p(j=>j+"0"),className:"py-4 bg-[#1a1a1a] rounded-xl font-bold text-xl hover:bg-white/10 active:scale-95 transition-all",children:"0"}),n.jsx("button",{onClick:()=>p(j=>j.slice(0,-1)),className:"py-4 bg-red-500/10 text-red-400 rounded-xl flex items-center justify-center active:scale-95 transition-all",children:n.jsx(Ht,{size:20})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:w,disabled:f.length<4||a,className:"w-full py-4 bg-white text-black font-black rounded-xl text-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:a?n.jsx(Ee,{className:"animate-spin mx-auto"}):"VALIDAR ENTREGA"}),n.jsx("button",{onClick:()=>{b(!1),p("")},className:"w-full py-3 text-xs font-bold text-white/40 hover:text-white",children:"CANCELAR"})]})]})})})]})}const Ca="staff";async function gj(e,t){const i=tt($e(he,Ca),Oe("restaurantId","==",e),Oe("code","==",t),Oe("active","==",!0)),s=await Zt(i);return s.empty?null:s.docs[0].data()}async function bj(e){const t=ze(he,Ca,e),i=await hn(t);return i.exists()?i.data():null}async function Ks(e,t){await Et(ze(he,Ca,e),{isOnline:t,lastActiveAt:wn.now(),updatedAt:wn.now()})}async function vj(e,t){const i=await bj(e);if(!i)return;const s=i.performance.totalOrders+1,a=i.performance.totalSales+t,o=a/s;await Et(ze(he,Ca,e),{"performance.totalOrders":s,"performance.totalSales":a,"performance.averageTicket":o,"performance.todayOrders":i.performance.todayOrders+1,"performance.todaySales":i.performance.todaySales+t,lastActiveAt:wn.now(),updatedAt:wn.now()})}function Ys(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function yj({onSelect:e,occupiedTables:t}){const i=Array.from({length:30},(s,a)=>a+1);return n.jsx("div",{className:"grid grid-cols-5 gap-3 p-4",children:i.map(s=>n.jsx("button",{onClick:()=>e(s),className:`
            aspect-square rounded-2xl font-black text-2xl flex items-center justify-center
            transition-all active:scale-95
            ${t.includes(s)?"bg-primary/20 text-primary border-2 border-primary":"bg-white/5 text-white/60 hover:bg-white/10 border border-white/10"}
          `,children:s},s))})}function wj({item:e,quantity:t,onAdd:i,onRemove:s}){return n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-bold text-white truncate",children:e.title}),n.jsx("p",{className:"text-sm text-primary font-bold",children:Ys(e.price)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[t>0&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:s,className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center active:scale-95",children:n.jsx(Tl,{className:"w-4 h-4"})}),n.jsx("span",{className:"w-8 text-center font-black text-lg",children:t})]}),n.jsx("button",{onClick:i,className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center active:scale-95",children:n.jsx(yn,{className:"w-4 h-4"})})]})]})}function _j(){const e=_t(),[t,i]=T.useState(null),[s,a]=T.useState(!0),[o,c]=T.useState("tables"),[u,h]=T.useState(null),[d,f]=T.useState(""),[p,x]=T.useState([]),[b,y]=T.useState([]),[w,j]=T.useState([]),[S,C]=T.useState(!1);T.useEffect(()=>{const M=sessionStorage.getItem("waiterSession");if(M){const q=JSON.parse(M);i(q),Ks(q.waiterId,!0)}else e("/waiter-login");return a(!1),()=>{if(M){const q=JSON.parse(M);Ks(q.waiterId,!1)}}},[e]),T.useEffect(()=>{async function M(){if(t)try{const q=tt($e(he,"menus"),Oe("ownerId","==",t.ownerId)),Z=await Zt(q);if(!Z.empty){const ee=Z.docs[0].data().categories?.flatMap(ce=>ce.items)||[];x(ee)}}catch(q){console.error("Error loading menu:",q)}}M()},[t]);const N=M=>{h(M),c("menu"),w.includes(M)||j(q=>[...q,M])},R=M=>{y(q=>{if(q.find(ee=>ee.menuItemId===M.id))return q.map(ee=>ee.menuItemId===M.id?{...ee,quantity:ee.quantity+1}:ee);const W={id:M.id,menuItemId:M.id,name:M.title,price:Number(M.price),quantity:1,cartId:crypto.randomUUID(),notes:"",imageUrl:M.imageUrl||""};return[...q,W]}),ie.success(`${M.title} adicionado!`)},P=M=>{y(q=>{const Z=q.find(W=>W.menuItemId===M);return Z&&Z.quantity>1?q.map(W=>W.menuItemId===M?{...W,quantity:W.quantity-1}:W):q.filter(W=>W.menuItemId!==M)})},I=M=>b.find(q=>q.menuItemId===M)?.quantity||0,F=b.reduce((M,q)=>M+q.price*q.quantity,0),$=b.reduce((M,q)=>M+q.quantity,0),ne=async()=>{if(!(!t||!u||b.length===0)){C(!0);try{const M=b.map(Z=>({id:crypto.randomUUID(),menuItemId:Z.menuItemId,name:Z.name,quantity:Z.quantity,unitPrice:Z.price,totalPrice:Z.price*Z.quantity,imageUrl:Z.imageUrl,status:"pending"})),q={restaurantId:t.restaurantId,ownerId:t.ownerId,customer:{name:`Mesa ${u}`,cpf:"",table:u.toString()},items:M,subtotal:F,deliveryFee:0,total:F,status:"pending",orderNumber:Math.floor(Math.random()*999)+1,isPaid:!1,waiterId:t.waiterId,waiterName:t.waiterName,tableNumber:u,isOrderBumpAccepted:!1,deliveryType:"dine_in",createdAt:wn.now(),updatedAt:wn.now()};await fa($e(he,"orders"),q),await vj(t.waiterId,F),ie.success("Pedido enviado para a cozinha! "),y([]),c("tables"),h(null)}catch(M){ie.error(M.message||"Erro ao enviar pedido")}finally{C(!1)}}},O=()=>{t&&Ks(t.waiterId,!1),sessionStorage.removeItem("waiterSession"),e("/")},D=p.filter(M=>M.title.toLowerCase().includes(d.toLowerCase()));return s?n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsx(Ee,{className:"w-8 h-8 text-primary animate-spin"})}):t?n.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[n.jsxs("header",{className:"h-16 border-b border-white/10 flex items-center justify-between px-4 bg-black sticky top-0 z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center",children:n.jsx(gt,{className:"w-5 h-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-sm",children:t.waiterName}),n.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider",children:"Modo Garom"})]})]}),u&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary/20 rounded-full",children:[n.jsx(vn,{className:"w-4 h-4 text-primary"}),n.jsxs("span",{className:"font-black text-primary",children:["Mesa ",u]})]}),n.jsx("button",{onClick:O,className:"p-2 text-white/40 hover:text-red-400 transition-colors",children:n.jsx(qr,{className:"w-5 h-5"})})]}),n.jsx("main",{className:"flex-1 overflow-y-auto pb-24",children:n.jsxs(Ye,{mode:"wait",children:[o==="tables"&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[n.jsx("div",{className:"p-4",children:n.jsx("h2",{className:"text-lg font-black uppercase tracking-tight mb-4",children:"Selecione a Mesa"})}),n.jsx(yj,{onSelect:N,occupiedTables:w})]},"tables"),o==="menu"&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/30"}),n.jsx("input",{type:"text",value:d,onChange:M=>f(M.target.value),placeholder:"Buscar prato...",className:"w-full bg-white/5 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white placeholder-white/30 focus:border-primary focus:outline-none",autoFocus:!0})]}),n.jsxs("div",{className:"space-y-2",children:[D.map(M=>n.jsx(wj,{item:M,quantity:I(M.id),onAdd:()=>R(M),onRemove:()=>P(M.id)},M.id)),D.length===0&&n.jsxs("div",{className:"text-center py-12 text-white/30",children:[n.jsx(gt,{className:"w-12 h-12 mx-auto mb-2"}),n.jsx("p",{children:"Nenhum item encontrado"})]})]})]},"menu"),o==="cart"&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-4",children:[n.jsx("h2",{className:"text-lg font-black uppercase tracking-tight",children:"Resumo do Pedido"}),b.length===0?n.jsxs("div",{className:"text-center py-12 text-white/30",children:[n.jsx(Qs,{className:"w-12 h-12 mx-auto mb-2"}),n.jsx("p",{children:"Carrinho vazio"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"space-y-2",children:b.map(M=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"font-bold",children:[M.quantity,"x ",M.name]}),n.jsxs("p",{className:"text-sm text-white/40",children:[Ys(M.price)," cada"]})]}),n.jsx("p",{className:"font-black text-primary",children:Ys(M.price*M.quantity)})]},M.menuItemId))}),n.jsxs("div",{className:"p-4 bg-primary/20 rounded-2xl flex items-center justify-between",children:[n.jsx("span",{className:"font-black uppercase",children:"Total"}),n.jsx("span",{className:"text-2xl font-black text-primary",children:Ys(F)})]}),n.jsx("button",{onClick:ne,disabled:S,className:"w-full py-4 bg-green-500 hover:bg-green-600 rounded-2xl font-black text-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:S?n.jsx(Ee,{className:"w-5 h-5 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(ip,{className:"w-5 h-5"}),"Disparar para Cozinha"]})})]})]},"cart"),o==="my-tables"&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-4",children:[n.jsx("h2",{className:"text-lg font-black uppercase tracking-tight",children:"Minhas Mesas"}),w.length===0?n.jsxs("div",{className:"text-center py-12 text-white/30",children:[n.jsx(vn,{className:"w-12 h-12 mx-auto mb-2"}),n.jsx("p",{children:"Nenhuma mesa atendida ainda"})]}):n.jsx("div",{className:"grid grid-cols-3 gap-3",children:w.map(M=>n.jsx("button",{onClick:()=>N(M),className:"aspect-square rounded-2xl bg-primary/20 text-primary font-black text-3xl flex items-center justify-center border-2 border-primary active:scale-95",children:M},M))})]},"my-tables")]})}),n.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 h-20 bg-black/95 backdrop-blur-xl border-t border-white/10 flex items-center justify-around px-4 z-50",children:[n.jsxs("button",{onClick:()=>c("tables"),className:`flex flex-col items-center gap-1 ${o==="tables"?"text-primary":"text-white/40"}`,children:[n.jsx(Qx,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Mesas"})]}),n.jsxs("button",{onClick:()=>c("my-tables"),className:`flex flex-col items-center gap-1 ${o==="my-tables"?"text-primary":"text-white/40"}`,children:[n.jsx(vn,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Minhas"})]}),n.jsxs("button",{onClick:()=>c("cart"),className:"relative -mt-6 w-16 h-16 bg-primary rounded-full flex items-center justify-center shadow-lg shadow-primary/30",children:[n.jsx(Qs,{className:"w-7 h-7"}),$>0&&n.jsx("span",{className:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full text-xs font-black flex items-center justify-center",children:$})]}),n.jsxs("button",{onClick:()=>o==="menu"?c("tables"):h(null),className:`flex flex-col items-center gap-1 ${o==="menu"?"text-primary":"text-white/40"}`,children:[n.jsx(Jx,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Pedidos"})]}),n.jsxs("button",{onClick:()=>ie.info("Em breve: Fechar conta"),className:"flex flex-col items-center gap-1 text-white/40",children:[n.jsx(pi,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Conta"})]})]})]}):null}function jj(){const e=_t(),[t,i]=T.useState(""),[s,a]=T.useState(""),[o,c]=T.useState(!1),[u,h]=T.useState(""),d=async()=>{if(!t.trim()||!s.trim()){h("Preencha o cdigo do restaurante e seu PIN");return}c(!0),h("");try{const p=await gj(t.trim(),s);if(!p){h("Cdigo ou PIN invlido"),c(!1);return}const x={waiterId:p.id,waiterName:p.name,restaurantId:p.restaurantId,ownerId:p.ownerId,loginAt:new Date,currentTables:[]};sessionStorage.setItem("waiterSession",JSON.stringify(x)),await Ks(p.id,!0),ie.success(`Bem-vindo, ${p.name}!`),e("/waiter-mode")}catch(p){h(p.message||"Erro ao fazer login")}finally{c(!1)}},f=p=>{const x=p.replace(/\D/g,"").slice(0,6);a(x),h("")};return n.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[n.jsx("header",{className:"p-6",children:n.jsxs(it,{to:"/",className:"flex items-center gap-2 text-white/40 hover:text-white transition-colors",children:[n.jsx(_i,{className:"w-5 h-5"}),n.jsx("span",{className:"font-bold",children:"Voltar"})]})}),n.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-6",children:n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(gt,{className:"w-10 h-10 text-primary"})}),n.jsx("h1",{className:"text-3xl font-black italic tracking-tight",children:"Modo Garom"}),n.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Digite seu cdigo de acesso"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-white/40 block mb-2",children:"Cdigo do Restaurante"}),n.jsx("input",{type:"text",value:t,onChange:p=>{i(p.target.value),h("")},placeholder:"ID do restaurante",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-white text-center font-mono placeholder-white/20 focus:border-primary focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-white/40 block mb-2",children:"Seu PIN"}),n.jsx("input",{type:"text",inputMode:"numeric",value:s,onChange:p=>f(p.target.value),placeholder:"   ",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-white text-center text-3xl font-black tracking-[0.5em] placeholder-white/20 focus:border-primary focus:outline-none",maxLength:6})]}),u&&n.jsxs(K.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 bg-red-500/20 border border-red-500/30 rounded-xl text-red-400 text-sm",children:[n.jsx(ji,{className:"w-4 h-4 flex-shrink-0"}),n.jsx("span",{children:u})]}),n.jsx("button",{onClick:d,disabled:o||!s||!t,className:"w-full py-4 bg-primary hover:bg-orange-600 rounded-xl font-black text-lg uppercase tracking-wider transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:o?n.jsx(Ee,{className:"w-5 h-5 animate-spin"}):"Entrar"})]}),n.jsx("p",{className:"text-center text-xs text-white/30",children:"Pea o cdigo do restaurante e seu PIN pessoal ao gerente."})]})})]})}function Nj(){const[e,t]=T.useState(""),[i,s]=T.useState(!1),a=_t(),o=T.useRef(null);T.useEffect(()=>{o.current?.focus()},[]);const c=async()=>{if(e.length<6)return ie.error("Digite os 6 dgitos do seu PIN.");s(!0);try{const h=tt($e(he,"staff"),Oe("pin","==",e),Oe("active","==",!0)),d=await Zt(h);if(d.empty){ie.error("PIN incorreto ou no encontrado."),t(""),s(!1);return}const f=d.docs[0].data();localStorage.setItem("emprata_staff_token",JSON.stringify({id:d.docs[0].id,role:f.role,name:f.name,restaurantId:f.restaurantId})),ie.success(`Bem-vindo, ${f.name.split(" ")[0]}!`),f.role==="DRIVER"?a("/driver"):f.role==="WAITER"?a("/waiter"):f.role==="KITCHEN"?a("/kitchen-mode"):a("/dashboard")}catch{ie.error("Erro de conexo.")}finally{s(!1)}},u=h=>{e.length<6&&t(d=>d+h)};return n.jsxs("div",{className:"min-h-screen bg-[#050505] flex flex-col items-center justify-center p-6 relative overflow-hidden text-white font-sans",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"}),n.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[n.jsxs("div",{className:"mb-10 text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-[#121212] rounded-3xl border border-white/10 flex items-center justify-center mb-4 mx-auto shadow-[0_0_30px_rgba(255,255,255,0.05)]",children:n.jsx(Pn,{className:"text-primary w-10 h-10"})}),n.jsxs("h1",{className:"text-2xl font-black italic tracking-tighter",children:["Acesso ",n.jsx("span",{className:"text-primary",children:"Staff"})]}),n.jsx("p",{className:"text-xs text-white/40 font-bold uppercase tracking-widest mt-2",children:"rea Restrita"})]}),n.jsx("div",{className:"mb-8 flex gap-3",children:[...Array(6)].map((h,d)=>n.jsx("div",{className:`w-10 h-14 rounded-xl border flex items-center justify-center text-2xl font-black transition-all ${d<e.length?"bg-primary text-black border-primary scale-110 shadow-lg":"bg-white/5 border-white/10 text-white/10"}`,children:d<e.length?"":""},d))}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full px-4 mb-8",children:[[1,2,3,4,5,6,7,8,9].map(h=>n.jsx("button",{onClick:()=>u(h.toString()),className:"h-20 bg-[#121212] rounded-2xl border border-white/5 text-2xl font-bold hover:bg-white/10 active:scale-95 transition-all",children:h},h)),n.jsx("div",{className:"h-20"})," ",n.jsx("button",{onClick:()=>u("0"),className:"h-20 bg-[#121212] rounded-2xl border border-white/5 text-2xl font-bold hover:bg-white/10 active:scale-95 transition-all",children:"0"}),n.jsx("button",{onClick:()=>t(h=>h.slice(0,-1)),className:"h-20 bg-red-500/10 rounded-2xl border border-red-500/20 text-red-400 flex items-center justify-center hover:bg-red-500/20 active:scale-95 transition-all",children:n.jsx(eg,{size:24})})]}),n.jsx("button",{onClick:c,disabled:i||e.length<6,className:"w-full py-5 bg-white text-black font-black text-lg rounded-2xl shadow-xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:scale-100 active:scale-95 transition-all",children:i?n.jsx(Ee,{className:"animate-spin"}):n.jsxs(n.Fragment,{children:["ACESSAR ",n.jsx(Rn,{size:20})]})})]})]})}function kj(){return n.jsxs("div",{className:"min-h-screen bg-[#050505] text-white font-sans p-6 md:p-12",children:[n.jsxs("div",{className:"max-w-5xl mx-auto flex flex-col md:flex-row justify-between items-center mb-16 gap-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter",children:["Emprata",n.jsx("span",{className:"text-primary",children:".ai"})," ",n.jsx("span",{className:"text-white/40",children:"Workforce"})]}),n.jsx("p",{className:"text-white/60 mt-2 text-lg",children:"Central de Download e Acesso para Colaboradores."})]}),n.jsxs(it,{to:"/staff-login",className:"bg-white text-black px-8 py-4 rounded-xl font-black flex items-center gap-2 hover:scale-105 transition-transform",children:[n.jsx(Pn,{size:20})," LOGIN WEB"]})]}),n.jsxs("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-8",children:[n.jsxs(K.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},className:"bg-[#121212] border border-white/10 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-green-500/50 transition-colors",children:[n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-green-500/10 blur-[100px] rounded-full pointer-events-none"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-2xl flex items-center justify-center text-black mb-6 shadow-[0_0_20px_rgba(34,197,94,0.4)]",children:n.jsx(In,{size:32})}),n.jsx("h2",{className:"text-3xl font-black mb-2",children:"Driver App"}),n.jsx("p",{className:"text-white/50 mb-8 h-12",children:"Para entregadores. GPS em tempo real, rota inteligente e carteira digital."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("a",{href:"#",className:"flex-1 bg-white text-black py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[n.jsx(li,{size:18})," Android"]}),n.jsxs("a",{href:"#",className:"flex-1 bg-[#1a1a1a] border border-white/10 py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-white/5 transition-colors",children:[n.jsx(li,{size:18})," iOS"]})]}),n.jsxs("div",{className:"mt-6 flex items-center gap-4 bg-black/40 p-4 rounded-xl border border-white/5",children:[n.jsx("div",{className:"bg-white p-2 rounded-lg",children:n.jsx(pu,{size:32,className:"text-black"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-[10px] font-bold uppercase text-white/40",children:"Acesso Web (PWA)"}),n.jsx("p",{className:"text-sm font-bold text-green-400",children:"emprata.ai/driver"})]}),n.jsx(it,{to:"/driver",className:"p-3 bg-green-500/10 rounded-xl text-green-400 hover:bg-green-500/20",children:n.jsx(Or,{size:18})})]})]})]}),n.jsxs(K.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},className:"bg-[#121212] border border-white/10 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-blue-500/50 transition-colors",children:[n.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 blur-[100px] rounded-full pointer-events-none"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center text-black mb-6 shadow-[0_0_20px_rgba(59,130,246,0.4)]",children:n.jsx(gt,{size:32})}),n.jsx("h2",{className:"text-3xl font-black mb-2",children:"Waiter Pad"}),n.jsx("p",{className:"text-white/50 mb-8 h-12",children:"Para salo. Mapa de mesas, envio para cozinha e fechamento de conta."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("a",{href:"#",className:"flex-1 bg-white text-black py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[n.jsx(li,{size:18})," Android"]}),n.jsxs("a",{href:"#",className:"flex-1 bg-[#1a1a1a] border border-white/10 py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-white/5 transition-colors",children:[n.jsx(li,{size:18})," iOS"]})]}),n.jsxs("div",{className:"mt-6 flex items-center gap-4 bg-black/40 p-4 rounded-xl border border-white/5",children:[n.jsx("div",{className:"bg-white p-2 rounded-lg",children:n.jsx(pu,{size:32,className:"text-black"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-[10px] font-bold uppercase text-white/40",children:"Acesso Web (PWA)"}),n.jsx("p",{className:"text-sm font-bold text-blue-400",children:"emprata.ai/waiter"})]}),n.jsx(it,{to:"/waiter",className:"p-3 bg-blue-500/10 rounded-xl text-blue-400 hover:bg-blue-500/20",children:n.jsx(Or,{size:18})})]})]})]})]}),n.jsx("div",{className:"max-w-5xl mx-auto mt-8",children:n.jsxs(K.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-[#121212] border border-white/10 rounded-[2rem] p-6 flex flex-col md:flex-row items-center gap-6 hover:border-orange-500/50 transition-colors",children:[n.jsx("div",{className:"w-14 h-14 bg-orange-500/20 rounded-2xl flex items-center justify-center text-orange-400 shrink-0",children:n.jsx(mi,{size:28})}),n.jsxs("div",{className:"flex-1 text-center md:text-left",children:[n.jsx("h3",{className:"text-xl font-black mb-1",children:"Kitchen Display (KDS)"}),n.jsx("p",{className:"text-white/50 text-sm",children:"Painel de pedidos para a cozinha. Use em tablet fixo na rea de produo."})]}),n.jsxs(it,{to:"/kitchen-mode",className:"bg-orange-500 text-black px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:brightness-110 transition-all shrink-0",children:["Abrir KDS ",n.jsx(Rn,{size:18})]})]})}),n.jsx("p",{className:"text-center text-white/20 mt-16 text-sm",children:" 2024 EmprataAI Enterprise Solutions. Distribuio restrita para colaboradores."})]})}function Cj(){const{user:e}=Ke(),[t,i]=T.useState({salesToday:0,ordersToday:0,avgTicket:0,growth:0,salesYesterday:0}),[s,a]=T.useState([]),[o,c]=T.useState(!0),[u,h]=T.useState(null);return T.useEffect(()=>{if(!e){c(!1);return}console.log(" [useRealtimeOwner] Subscribing to orders for:",e.uid);const d=new Date;yi(d);const f=sl(d,1),p=yi(f),x=tt($e(he,"orders"),Oe("restaurantId","==",e.uid),Oe("createdAt",">=",wn.fromDate(p)),Ni("createdAt","desc")),b=Ot(x,y=>{let w=0,j=0,S=0;y.docs.forEach(I=>{const F=I.data();let $;if(F.createdAt?.toDate?$=F.createdAt.toDate():F.createdAt instanceof Date?$=F.createdAt:$=new Date,["DELIVERED","delivered","PAID","paid"].includes(F.status)||F.isPaid===!0){const O=Number(F.total)||0;xd($,d)?(w+=O,j+=1):xd($,f)&&(S+=O)}});const C=S>0?(w-S)/S*100:w>0?100:0,N=j>0?w/j:0,R={salesToday:w,ordersToday:j,avgTicket:N,growth:C,salesYesterday:S};i(R);const P=[];w>500&&w<1e3?P.push({id:"goal-500",type:"SUCCESS",title:"Meta de R$ 500 atingida! ",desc:`Voc j vendeu ${Ts(w)} hoje. Continue assim!`}):w>=1e3&&P.push({id:"goal-1000",type:"SUCCESS",title:"Dia Excelente! ",desc:`Faturamento de ${Ts(w)} - acima da meta de R$ 1.000!`}),C>=20?P.push({id:"growth-positive",type:"OPPORTUNITY",title:"Crescimento Expressivo",desc:`Vendas +${C.toFixed(0)}% em relao a ontem. Algo est funcionando!`}):C<=-20&&S>0&&P.push({id:"growth-negative",type:"URGENT",title:"Queda nas Vendas",desc:`Vendas ${C.toFixed(0)}% abaixo de ontem. Considere uma promoo.`}),N>0&&N<30?P.push({id:"low-ticket",type:"INFO",title:"Ticket Mdio Baixo",desc:`Mdia de ${Ts(N)} por pedido. Considere combos ou sugestes.`}):N>=80&&P.push({id:"high-ticket",type:"SUCCESS",title:"Ticket Mdio Alto",desc:`Excelente! Mdia de ${Ts(N)} por pedido.`}),j===0&&new Date().getHours()>=11&&P.push({id:"no-sales",type:"URGENT",title:"Sem Vendas Hoje",desc:"Ainda no houve pedidos confirmados hoje. Verifique se o cardpio est ativo."}),a(P),c(!1),h(null),console.log(" [useRealtimeOwner] Stats updated:",R)},y=>{console.error(" [useRealtimeOwner] Error:",y),h(y.message),c(!1)});return()=>{console.log(" [useRealtimeOwner] Unsubscribing..."),b()}},[e]),{stats:t,insights:s,loading:o,error:u,hasData:t.ordersToday>0||t.salesYesterday>0}}function Ts(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}async function Ej(e){try{const t=await hn(ze(he,"brain_synapses",e));if(!t.exists())return" Ainda estou aprendendo... Continue vendendo para eu criar padres!";const i=t.data(),s=new Date,a=s.getHours(),o=`${oh(s.getDay())}-${a+1}`,c=`${oh(s.getDay())}-${a}`,u=i.hourlyPatterns?.[o]||0,h=i.hourlyPatterns?.[c]||0,d=Sj(i.correlations||{},5),f=`
Voc  um consultor de negcios especialista em restaurantes. Analise estes dados REAIS:

 DADOS DO RESTAURANTE:
- Total de pedidos registrados: ${i.totalOrders||0}
- Pedidos histricos NESTA hora (${c}): ${h}
- Pedidos histricos na PRXIMA hora (${o}): ${u}
- Top correlaes de produtos: ${JSON.stringify(d)}

 SUA MISSO:
Surpreenda o dono com UM insight prtico e acionvel de no mximo 2 frases.

Exemplos do tipo de insight esperado:
- " Alerta: Historicamente, a demanda TRIPLICA na prxima hora. Prepare a equipe agora!"
- " Dica: Quem pede Hambrguer costuma pedir Milkshake. Oferea combo com desconto!"
- " Padro detectado: Sexta s 20h  seu pico. Hoje  sexta, prepare-se!"
- " Oportunidade: X-Bacon tem alta correlao com Batata. Crie um combo agora!"

Responda APENAS com o insight, sem explicaes adicionais.`;return(await ya.generateContent(f)).response.text().trim()||" Analisando padres de venda..."}catch(t){return console.error("[DeepLearning] Insight error:",t)," Otimizando sinapses comerciais..."}}function oh(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}function Sj(e,t){const i=[];for(const s of Object.keys(e))for(const a of Object.keys(e[s]||{}))i.push({pair:`${s}  ${a}`,count:e[s][a]});return i.sort((s,a)=>a.count-s.count).slice(0,t).map(s=>`${s.pair} (${s.count}x)`)}function Aj({insight:e,index:t}){const i={URGENT:{icon:ji,color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/20"},OPPORTUNITY:{icon:Wt,color:"text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/20"},INFO:{icon:Qh,color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"},SUCCESS:{icon:Wi,color:"text-green-400",bg:"bg-green-500/10",border:"border-green-500/20"}},s=i[e.type]||i.INFO,a=s.icon;return n.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.1},className:`p-5 rounded-2xl border flex gap-4 ${s.bg} ${s.border}`,children:[n.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 bg-black/20 ${s.color}`,children:n.jsx(a,{size:24})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-white",children:e.title}),n.jsx("p",{className:"text-sm text-white/60 leading-tight mt-1",children:e.desc})]}),e.action&&n.jsx("button",{onClick:e.action,className:"self-center bg-white/5 p-2 rounded-full text-white/40 hover:text-white hover:bg-white/10 transition-colors",children:n.jsx(Rn,{size:16})})]})}function Tj(){const{stats:e,insights:t,loading:i,error:s,hasData:a}=Cj(),{user:o}=Ke(),[c,u]=T.useState(""),[h,d]=T.useState(!0);T.useEffect(()=>{o?.uid&&(d(!0),Ej(o.uid).then(u).finally(()=>d(!1)))},[o?.uid]);const f=()=>{ie.success(" Modo Chuva ativado! Taxa de entrega +R$3")},p=()=>{ie.success(" Prazo estendido em +15min para novos pedidos")};return i?n.jsx("div",{className:"h-64 flex items-center justify-center",children:n.jsx(Ee,{className:"w-8 h-8 animate-spin text-white/20"})}):s?n.jsxs("div",{className:"p-6 bg-red-500/10 border border-red-500/20 rounded-2xl text-center",children:[n.jsx(ji,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),n.jsx("p",{className:"text-red-400 font-bold",children:"Erro ao carregar dados"}),n.jsx("p",{className:"text-sm text-white/40 mt-1",children:s})]}):n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-900/80 to-black p-6 rounded-[2rem] border border-purple-500/30 relative overflow-hidden shadow-2xl",children:[n.jsx("div",{className:"absolute -right-10 -top-10 text-purple-500/10",children:n.jsx(tg,{size:150})}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsxs("span",{className:"bg-purple-500/20 text-purple-300 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border border-purple-500/20 flex items-center gap-2",children:[n.jsx(at,{size:10})," Emprata Brain 2.0"]})}),n.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white leading-relaxed min-h-[60px]",children:h?n.jsxs("span",{className:"flex items-center gap-2 text-white/60",children:[n.jsx(Ee,{className:"w-5 h-5 animate-spin"}),"Analisando sinapses comerciais..."]}):`"${c}"`}),n.jsx("p",{className:"text-white/40 text-xs mt-4 font-medium",children:"*Aprendizado baseado nos seus dados histricos reais."})]})]}),n.jsxs("div",{className:"bg-[#1a1a1a] rounded-[2rem] p-6 border border-white/5 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-primary/5 blur-[60px] rounded-full pointer-events-none"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"text-white/40 text-xs font-bold uppercase tracking-widest",children:"Vendas Hoje"}),n.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-[10px] text-green-400 font-bold uppercase",children:"Live"})]}),n.jsxs("div",{className:"flex items-end gap-3",children:[n.jsx("h2",{className:"text-5xl font-black text-white",children:dn(e.salesToday)}),e.salesYesterday>0&&n.jsxs("span",{className:`text-sm font-bold mb-2 flex items-center ${e.growth>=0?"text-green-400":"text-red-400"}`,children:[e.growth>=0?n.jsx(nr,{size:14,className:"mr-1"}):n.jsx(ng,{size:14,className:"mr-1"}),e.growth>=0?"+":"",e.growth.toFixed(0),"%"]})]}),n.jsxs("div",{className:"mt-4 flex gap-4 text-xs font-bold text-white/50",children:[n.jsxs("span",{children:[" ",e.ordersToday," Pedidos"]}),n.jsxs("span",{children:[" ",dn(e.avgTicket)," Mdio"]}),e.salesYesterday>0&&n.jsxs("span",{className:"text-white/30",children:[" Ontem: ",dn(e.salesYesterday)]})]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-bold text-white/40 uppercase mb-4 ml-2 flex items-center gap-2",children:[n.jsx(Zh,{size:14}),"Insights da Operao"]}),t.length===0?n.jsxs("div",{className:"p-6 border border-white/5 rounded-2xl text-center bg-[#121212]",children:[n.jsx(Wi,{size:32,className:"mx-auto mb-2 text-green-400/50"}),n.jsx("p",{className:"text-white/40 text-sm font-medium",children:"Tudo funcionando bem"}),n.jsx("p",{className:"text-white/20 text-xs mt-1",children:"Nenhum alerta operacional no momento"})]}):n.jsx("div",{className:"space-y-3",children:t.map((x,b)=>n.jsx(Aj,{insight:x,index:b},x.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-white/40 uppercase mb-4 ml-2",children:"Controle Operacional"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:f,className:"bg-[#121212] border border-white/10 p-4 rounded-2xl flex flex-col items-center gap-2 hover:border-blue-500/50 transition-colors group active:scale-95",children:[n.jsx(ig,{size:24,className:"text-blue-400 group-hover:scale-110 transition-transform"}),n.jsx("span",{className:"text-xs font-bold",children:"Modo Chuva"})]}),n.jsxs("button",{onClick:p,className:"bg-[#121212] border border-white/10 p-4 rounded-2xl flex flex-col items-center gap-2 hover:border-orange-500/50 transition-colors group active:scale-95",children:[n.jsx(xi,{size:24,className:"text-orange-400 group-hover:scale-110 transition-transform"}),n.jsx("span",{className:"text-xs font-bold",children:"+15min Prazo"})]})]})]}),!a&&!i&&n.jsxs("div",{className:"p-6 bg-white/5 border border-white/10 rounded-2xl text-center",children:[n.jsx(vn,{size:32,className:"mx-auto mb-2 text-white/20"}),n.jsx("p",{className:"text-white/60 font-bold",children:"Nenhum pedido ainda"}),n.jsx("p",{className:"text-white/30 text-sm mt-1",children:"Os dados aparecero aqui assim que voc receber pedidos confirmados"})]})]})}function Pj(){const{user:e}=Ke(),[t,i]=T.useState([]),[s,a]=T.useState(!0),[o,c]=T.useState("");T.useEffect(()=>{if(!e)return;const p=tt($e(he,"products"),Oe("restaurantId","==",e.uid)),x=Ot(p,b=>{i(b.docs.map(y=>({id:y.id,...y.data()}))),a(!1)},b=>{console.error("[OwnerMenu] Error fetching products:",b),a(!1)});return()=>x()},[e]);const u=async(p,x)=>{try{await Et(ze(he,"products",p),{available:!x}),ie.success(x?" Produto Pausado":" Produto Ativado")}catch(b){console.error("[OwnerMenu] Error updating product:",b),ie.error("Erro ao atualizar")}},h=async p=>{if(confirm("Tem certeza que deseja remover este item?"))try{await cp(ze(he,"products",p)),ie.success(" Item removido")}catch(x){console.error("[OwnerMenu] Error deleting product:",x),ie.error("Erro ao remover")}},d=async()=>{const p=`https://emprata.ai/menu/${e?.uid}`,x={title:"Pea no meu Delivery Oficial ",text:"Fugimos das taxas altas! Pea por aqui e ganhe entrega grtis no primeiro pedido.",url:p};if(navigator.share)try{await navigator.share(x),ie.success("Link compartilhado! ")}catch{}else navigator.clipboard.writeText(p),ie.success("Link copiado para a rea de transferncia!")},f=t.filter(p=>p.name.toLowerCase().includes(o.toLowerCase()));return s?n.jsx("div",{className:"flex justify-center items-center p-10",children:n.jsx(Ee,{className:"animate-spin text-primary",size:32})}):n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6",children:[n.jsxs("button",{onClick:d,className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white font-black py-4 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-green-500/30 hover:from-green-500 hover:to-green-600 transition-all active:scale-[0.98]",children:[n.jsx(ma,{size:20}),"DIVULGAR NO WHATSAPP"]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-black text-white",children:"Gerenciar Cardpio"}),n.jsxs("button",{onClick:()=>window.location.href="/menu-builder",className:"bg-primary text-black px-4 py-2 rounded-xl font-bold flex items-center gap-2 hover:bg-primary/90 transition-colors",children:[n.jsx(yn,{size:18})," Novo"]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/40",size:18}),n.jsx("input",{value:o,onChange:p=>c(p.target.value),placeholder:"Buscar produto...",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white focus:border-primary outline-none transition-colors"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"flex-1 bg-[#121212] rounded-xl p-3 border border-white/5",children:[n.jsx("p",{className:"text-white/40 text-xs",children:"Total Itens"}),n.jsx("p",{className:"text-xl font-bold text-white",children:t.length})]}),n.jsxs("div",{className:"flex-1 bg-[#121212] rounded-xl p-3 border border-white/5",children:[n.jsx("p",{className:"text-white/40 text-xs",children:"Disponveis"}),n.jsx("p",{className:"text-xl font-bold text-green-400",children:t.filter(p=>p.available).length})]}),n.jsxs("div",{className:"flex-1 bg-[#121212] rounded-xl p-3 border border-white/5",children:[n.jsx("p",{className:"text-white/40 text-xs",children:"Esgotados"}),n.jsx("p",{className:"text-xl font-bold text-red-400",children:t.filter(p=>!p.available).length})]})]}),n.jsx("div",{className:"space-y-3",children:f.length===0?n.jsxs("div",{className:"text-center py-8 text-white/40",children:[n.jsx(ea,{size:32,className:"mx-auto mb-2"}),n.jsx("p",{children:t.length===0?"Nenhum produto cadastrado.":"Nenhum produto encontrado."}),t.length===0&&n.jsx("button",{onClick:()=>window.location.href="/menu-builder",className:"mt-4 text-primary underline",children:"Adicionar primeiro produto"})]}):f.map((p,x)=>n.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.05},className:`bg-[#121212] p-4 rounded-xl border flex justify-between items-center ${p.available?"border-white/10":"border-red-500/20 bg-red-900/5"}`,children:[n.jsxs("div",{className:"flex items-center gap-4",children:[p.imageUrl?n.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-12 h-12 rounded-lg object-cover"}):n.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-lg flex items-center justify-center",children:n.jsx(ea,{size:16,className:"text-white/20"})}),n.jsxs("div",{children:[n.jsx("h4",{className:`font-bold ${p.available?"text-white":"text-white/50 line-through"}`,children:p.name}),n.jsxs("p",{className:"text-sm text-white/50",children:["R$ ",parseFloat(String(p.price)).toFixed(2).replace(".",",")]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>u(p.id,p.available),className:`p-2 rounded-lg border transition-colors ${p.available?"border-green-500/20 text-green-500 hover:bg-green-500/10":"border-red-500/20 text-red-500 hover:bg-red-500/10"}`,children:p.available?n.jsx(rg,{size:18}):n.jsx(sg,{size:18})}),n.jsx("button",{onClick:()=>h(p.id),className:"p-2 rounded-lg border border-white/5 text-white/40 hover:text-red-400 hover:border-red-500/20 transition-colors",children:n.jsx(Lr,{size:18})})]})]},p.id))})]})}function Ij(){const{user:e}=Ke(),[t,i]=T.useState("month"),[s,a]=T.useState(!0),[o,c]=T.useState({revenue:0,orders:0,avgTicket:0}),[u,h]=T.useState([]);T.useEffect(()=>{if(!e)return;(async()=>{a(!0);try{const p=new Date;let x;switch(t){case"today":x=new Date(p.getFullYear(),p.getMonth(),p.getDate());break;case"week":x=new Date(p.getTime()-10080*60*1e3);break;default:x=new Date(p.getFullYear(),p.getMonth(),1)}const b=tt($e(he,"orders"),Oe("restaurantId","==",e.uid),Oe("status","in",["DELIVERED","PAID","delivered","paid","COMPLETED","completed"]),Oe("createdAt",">=",wn.fromDate(x))),y=await Zt(b);let w=0;const j=[];y.forEach(N=>{const R=N.data(),P=Number(R.total)||0;if(w+=P,j.length<5){const I=R.createdAt?.toDate?.()||new Date,F=Math.floor((p.getTime()-I.getTime())/(1e3*60));let $=`${F}min`;F>=60&&($=`${Math.floor(F/60)}h`),F>=1440&&($=`${Math.floor(F/1440)}d`),j.push({id:N.id,type:"income",desc:`Pedido #${N.id.slice(-4).toUpperCase()}`,amount:P,time:$})}});const S=y.size,C=S>0?w/S:0;c({revenue:w,orders:S,avgTicket:C}),h(j)}catch(p){console.error("[OwnerFinance] Error loading data:",p)}finally{a(!1)}})()},[e,t]);const d=()=>{ie.success(" Saque solicitado! Processando...")};return s?n.jsx("div",{className:"flex justify-center items-center p-10",children:n.jsx(Ee,{className:"animate-spin text-primary",size:32})}):n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6",children:[n.jsx("div",{className:"flex gap-2 p-1 bg-[#121212] rounded-xl border border-white/5",children:["today","week","month"].map(f=>n.jsx("button",{onClick:()=>i(f),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${t===f?"bg-primary text-black":"text-white/40 hover:text-white"}`,children:f==="today"?"Hoje":f==="week"?"Semana":"Ms"},f))}),n.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-[#1a1a1a] rounded-[2rem] p-6 border border-green-500/20 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 blur-[60px] rounded-full pointer-events-none"}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jh,{size:20,className:"text-green-400"}),n.jsx("span",{className:"text-green-400 text-sm font-bold",children:"Faturamento"})]}),n.jsxs("span",{className:"text-sm font-bold flex items-center gap-1 text-green-400",children:[n.jsx(nr,{size:14}),"Dados Reais"]})]}),n.jsxs("h2",{className:"text-4xl font-black text-white mb-4",children:["R$ ",o.revenue.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-white/40 text-xs",children:"Pedidos"}),n.jsx("p",{className:"text-lg font-bold text-white",children:o.orders})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white/40 text-xs",children:"Ticket Mdio"}),n.jsxs("p",{className:"text-lg font-bold text-white",children:["R$ ",o.avgTicket.toFixed(2).replace(".",",")]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:d,className:"bg-[#121212] border border-green-500/20 p-4 rounded-2xl flex items-center gap-3 hover:border-green-500/50 transition-colors group active:scale-95",children:[n.jsx("div",{className:"w-10 h-10 bg-green-500/10 rounded-xl flex items-center justify-center",children:n.jsx(Al,{size:20,className:"text-green-400"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-xs text-white/40",children:"Disponvel"}),n.jsx("p",{className:"text-sm font-bold text-white",children:"Solicitar Saque"})]})]}),n.jsxs("button",{className:"bg-[#121212] border border-white/10 p-4 rounded-2xl flex items-center gap-3 hover:border-primary/50 transition-colors group active:scale-95",children:[n.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center",children:n.jsx(ag,{size:20,className:"text-primary"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-xs text-white/40",children:"Relatrio"}),n.jsx("p",{className:"text-sm font-bold text-white",children:"Ver Detalhes"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-white/40 uppercase mb-4 ml-2",children:"ltimas Movimentaes"}),n.jsx("div",{className:"space-y-2",children:u.length===0?n.jsxs("div",{className:"text-center py-8 text-white/40",children:[n.jsx(Yn,{size:32,className:"mx-auto mb-2"}),n.jsx("p",{children:"Nenhuma transao no perodo."})]}):u.map((f,p)=>n.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:p*.05},className:"bg-[#121212] p-4 rounded-xl border border-white/5 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${f.type==="income"?"bg-green-500/10":"bg-red-500/10"}`,children:f.type==="income"?n.jsx(ep,{size:16,className:"text-green-400"}):n.jsx(Yn,{size:16,className:"text-red-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-white",children:f.desc}),n.jsxs("p",{className:"text-xs text-white/40 flex items-center gap-1",children:[n.jsx(Rl,{size:10})," ",f.time," atrs"]})]})]}),n.jsxs("span",{className:`font-mono font-bold ${f.amount>0?"text-green-400":"text-red-400"}`,children:[f.amount>0?"+":"","R$ ",Math.abs(f.amount).toFixed(2).replace(".",",")]})]},f.id))})]})]})}function Rj(e,t){const i={};return(e[e.length-1]===""?[...e,""]:e).join((i.padRight?" ":"")+","+(i.padLeft===!1?"":" ")).trim()}const Mj=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Lj=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Oj={};function lh(e,t){return(Oj.jsx?Lj:Mj).test(e)}const Dj=/[ \t\n\f\r]/g;function zj(e){return typeof e=="object"?e.type==="text"?ch(e.value):!1:ch(e)}function ch(e){return e.replace(Dj,"")===""}class Xr{constructor(t,i,s){this.normal=i,this.property=t,s&&(this.space=s)}}Xr.prototype.normal={};Xr.prototype.property={};Xr.prototype.space=void 0;function Om(e,t){const i={},s={};for(const a of e)Object.assign(i,a.property),Object.assign(s,a.normal);return new Xr(i,s,t)}function pl(e){return e.toLowerCase()}class Kt{constructor(t,i){this.attribute=i,this.property=t}}Kt.prototype.attribute="";Kt.prototype.booleanish=!1;Kt.prototype.boolean=!1;Kt.prototype.commaOrSpaceSeparated=!1;Kt.prototype.commaSeparated=!1;Kt.prototype.defined=!1;Kt.prototype.mustUseProperty=!1;Kt.prototype.number=!1;Kt.prototype.overloadedBoolean=!1;Kt.prototype.property="";Kt.prototype.spaceSeparated=!1;Kt.prototype.space=void 0;let Fj=0;const Ie=Ci(),xt=Ci(),ml=Ci(),le=Ci(),Je=Ci(),Qi=Ci(),en=Ci();function Ci(){return 2**++Fj}const fl=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ie,booleanish:xt,commaOrSpaceSeparated:en,commaSeparated:Qi,number:le,overloadedBoolean:ml,spaceSeparated:Je},Symbol.toStringTag,{value:"Module"})),Ro=Object.keys(fl);class ec extends Kt{constructor(t,i,s,a){let o=-1;if(super(t,i),uh(this,"space",a),typeof s=="number")for(;++o<Ro.length;){const c=Ro[o];uh(this,Ro[o],(s&fl[c])===fl[c])}}}ec.prototype.defined=!0;function uh(e,t,i){i&&(e[t]=i)}function rr(e){const t={},i={};for(const[s,a]of Object.entries(e.properties)){const o=new ec(s,e.transform(e.attributes||{},s),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(o.mustUseProperty=!0),t[s]=o,i[pl(s)]=s,i[pl(o.attribute)]=s}return new Xr(t,i,e.space)}const Dm=rr({properties:{ariaActiveDescendant:null,ariaAtomic:xt,ariaAutoComplete:null,ariaBusy:xt,ariaChecked:xt,ariaColCount:le,ariaColIndex:le,ariaColSpan:le,ariaControls:Je,ariaCurrent:null,ariaDescribedBy:Je,ariaDetails:null,ariaDisabled:xt,ariaDropEffect:Je,ariaErrorMessage:null,ariaExpanded:xt,ariaFlowTo:Je,ariaGrabbed:xt,ariaHasPopup:null,ariaHidden:xt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Je,ariaLevel:le,ariaLive:null,ariaModal:xt,ariaMultiLine:xt,ariaMultiSelectable:xt,ariaOrientation:null,ariaOwns:Je,ariaPlaceholder:null,ariaPosInSet:le,ariaPressed:xt,ariaReadOnly:xt,ariaRelevant:null,ariaRequired:xt,ariaRoleDescription:Je,ariaRowCount:le,ariaRowIndex:le,ariaRowSpan:le,ariaSelected:xt,ariaSetSize:le,ariaSort:null,ariaValueMax:le,ariaValueMin:le,ariaValueNow:le,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function zm(e,t){return t in e?e[t]:t}function Fm(e,t){return zm(e,t.toLowerCase())}const Bj=rr({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qi,acceptCharset:Je,accessKey:Je,action:null,allow:null,allowFullScreen:Ie,allowPaymentRequest:Ie,allowUserMedia:Ie,alt:null,as:null,async:Ie,autoCapitalize:null,autoComplete:Je,autoFocus:Ie,autoPlay:Ie,blocking:Je,capture:null,charSet:null,checked:Ie,cite:null,className:Je,cols:le,colSpan:null,content:null,contentEditable:xt,controls:Ie,controlsList:Je,coords:le|Qi,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ie,defer:Ie,dir:null,dirName:null,disabled:Ie,download:ml,draggable:xt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ie,formTarget:null,headers:Je,height:le,hidden:ml,high:le,href:null,hrefLang:null,htmlFor:Je,httpEquiv:Je,id:null,imageSizes:null,imageSrcSet:null,inert:Ie,inputMode:null,integrity:null,is:null,isMap:Ie,itemId:null,itemProp:Je,itemRef:Je,itemScope:Ie,itemType:Je,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ie,low:le,manifest:null,max:null,maxLength:le,media:null,method:null,min:null,minLength:le,multiple:Ie,muted:Ie,name:null,nonce:null,noModule:Ie,noValidate:Ie,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ie,optimum:le,pattern:null,ping:Je,placeholder:null,playsInline:Ie,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ie,referrerPolicy:null,rel:Je,required:Ie,reversed:Ie,rows:le,rowSpan:le,sandbox:Je,scope:null,scoped:Ie,seamless:Ie,selected:Ie,shadowRootClonable:Ie,shadowRootDelegatesFocus:Ie,shadowRootMode:null,shape:null,size:le,sizes:null,slot:null,span:le,spellCheck:xt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:le,step:null,style:null,tabIndex:le,target:null,title:null,translate:null,type:null,typeMustMatch:Ie,useMap:null,value:xt,width:le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Je,axis:null,background:null,bgColor:null,border:le,borderColor:null,bottomMargin:le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ie,declare:Ie,event:null,face:null,frame:null,frameBorder:null,hSpace:le,leftMargin:le,link:null,longDesc:null,lowSrc:null,marginHeight:le,marginWidth:le,noResize:Ie,noHref:Ie,noShade:Ie,noWrap:Ie,object:null,profile:null,prompt:null,rev:null,rightMargin:le,rules:null,scheme:null,scrolling:xt,standby:null,summary:null,text:null,topMargin:le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ie,disableRemotePlayback:Ie,prefix:null,property:null,results:le,security:null,unselectable:null},space:"html",transform:Fm}),Uj=rr({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:en,accentHeight:le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:le,amplitude:le,arabicForm:null,ascent:le,attributeName:null,attributeType:null,azimuth:le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:le,by:null,calcMode:null,capHeight:le,className:Je,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:le,diffuseConstant:le,direction:null,display:null,dur:null,divisor:le,dominantBaseline:null,download:Ie,dx:null,dy:null,edgeMode:null,editable:null,elevation:le,enableBackground:null,end:null,event:null,exponent:le,externalResourcesRequired:null,fill:null,fillOpacity:le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qi,g2:Qi,glyphName:Qi,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:le,horizOriginX:le,horizOriginY:le,id:null,ideographic:le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:le,k:le,k1:le,k2:le,k3:le,k4:le,kernelMatrix:en,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:le,overlineThickness:le,paintOrder:null,panose1:null,path:null,pathLength:le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Je,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:le,pointsAtY:le,pointsAtZ:le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:en,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:en,rev:en,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:en,requiredFeatures:en,requiredFonts:en,requiredFormats:en,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:le,specularExponent:le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:le,strikethroughThickness:le,string:null,stroke:null,strokeDashArray:en,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:le,strokeOpacity:le,strokeWidth:null,style:null,surfaceScale:le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:en,tabIndex:le,tableValues:null,target:null,targetX:le,targetY:le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:en,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:le,underlineThickness:le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:le,values:null,vAlphabetic:le,vMathematical:le,vectorEffect:null,vHanging:le,vIdeographic:le,version:null,vertAdvY:le,vertOriginX:le,vertOriginY:le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:zm}),Bm=rr({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Um=rr({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Fm}),Vm=rr({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Vj={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Hj=/[A-Z]/g,dh=/-[a-z]/g,qj=/^data[-\w.:]+$/i;function $j(e,t){const i=pl(t);let s=t,a=Kt;if(i in e.normal)return e.property[e.normal[i]];if(i.length>4&&i.slice(0,4)==="data"&&qj.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(dh,Wj);s="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!dh.test(o)){let c=o.replace(Hj,Gj);c.charAt(0)!=="-"&&(c="-"+c),t="data"+c}}a=ec}return new a(s,t)}function Gj(e){return"-"+e.toLowerCase()}function Wj(e){return e.charAt(1).toUpperCase()}const Zj=Om([Dm,Bj,Bm,Um,Vm],"html"),tc=Om([Dm,Uj,Bm,Um,Vm],"svg");function Kj(e){return e.join(" ").trim()}var $i={},Mo,hh;function Yj(){if(hh)return Mo;hh=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,i=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,u=/^\s+|\s+$/g,h=`
`,d="/",f="*",p="",x="comment",b="declaration";function y(j,S){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];S=S||{};var C=1,N=1;function R(Z){var W=Z.match(t);W&&(C+=W.length);var ee=Z.lastIndexOf(h);N=~ee?Z.length-ee:N+Z.length}function P(){var Z={line:C,column:N};return function(W){return W.position=new I(Z),ne(),W}}function I(Z){this.start=Z,this.end={line:C,column:N},this.source=S.source}I.prototype.content=j;function F(Z){var W=new Error(S.source+":"+C+":"+N+": "+Z);if(W.reason=Z,W.filename=S.source,W.line=C,W.column=N,W.source=j,!S.silent)throw W}function $(Z){var W=Z.exec(j);if(W){var ee=W[0];return R(ee),j=j.slice(ee.length),W}}function ne(){$(i)}function O(Z){var W;for(Z=Z||[];W=D();)W!==!1&&Z.push(W);return Z}function D(){var Z=P();if(!(d!=j.charAt(0)||f!=j.charAt(1))){for(var W=2;p!=j.charAt(W)&&(f!=j.charAt(W)||d!=j.charAt(W+1));)++W;if(W+=2,p===j.charAt(W-1))return F("End of comment missing");var ee=j.slice(2,W-2);return N+=2,R(ee),j=j.slice(W),N+=2,Z({type:x,comment:ee})}}function M(){var Z=P(),W=$(s);if(W){if(D(),!$(a))return F("property missing ':'");var ee=$(o),ce=Z({type:b,property:w(W[0].replace(e,p)),value:ee?w(ee[0].replace(e,p)):p});return $(c),ce}}function q(){var Z=[];O(Z);for(var W;W=M();)W!==!1&&(Z.push(W),O(Z));return Z}return ne(),q()}function w(j){return j?j.replace(u,p):p}return Mo=y,Mo}var ph;function Xj(){if(ph)return $i;ph=1;var e=$i&&$i.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty($i,"__esModule",{value:!0}),$i.default=i;const t=e(Yj());function i(s,a){let o=null;if(!s||typeof s!="string")return o;const c=(0,t.default)(s),u=typeof a=="function";return c.forEach(h=>{if(h.type!=="declaration")return;const{property:d,value:f}=h;u?a(d,f,h):f&&(o=o||{},o[d]=f)}),o}return $i}var Nr={},mh;function Qj(){if(mh)return Nr;mh=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,i=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(d){return!d||i.test(d)||e.test(d)},c=function(d,f){return f.toUpperCase()},u=function(d,f){return"".concat(f,"-")},h=function(d,f){return f===void 0&&(f={}),o(d)?d:(d=d.toLowerCase(),f.reactCompat?d=d.replace(a,u):d=d.replace(s,u),d.replace(t,c))};return Nr.camelCase=h,Nr}var kr,fh;function Jj(){if(fh)return kr;fh=1;var e=kr&&kr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(Xj()),i=Qj();function s(a,o){var c={};return!a||typeof a!="string"||(0,t.default)(a,function(u,h){u&&h&&(c[(0,i.camelCase)(u,o)]=h)}),c}return s.default=s,kr=s,kr}var eN=Jj();const tN=pn(eN),Hm=qm("end"),nc=qm("start");function qm(e){return t;function t(i){const s=i&&i.position&&i.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function nN(e){const t=nc(e),i=Hm(e);if(t&&i)return{start:t,end:i}}function Pr(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?xh(e.position):"start"in e||"end"in e?xh(e):"line"in e||"column"in e?xl(e):""}function xl(e){return gh(e&&e.line)+":"+gh(e&&e.column)}function xh(e){return xl(e&&e.start)+"-"+xl(e&&e.end)}function gh(e){return e&&typeof e=="number"?e:1}class Tt extends Error{constructor(t,i,s){super(),typeof i=="string"&&(s=i,i=void 0);let a="",o={},c=!1;if(i&&("line"in i&&"column"in i?o={place:i}:"start"in i&&"end"in i?o={place:i}:"type"in i?o={ancestors:[i],place:i.position}:o={...i}),typeof t=="string"?a=t:!o.cause&&t&&(c=!0,a=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof s=="string"){const h=s.indexOf(":");h===-1?o.ruleId=s:(o.source=s.slice(0,h),o.ruleId=s.slice(h+1))}if(!o.place&&o.ancestors&&o.ancestors){const h=o.ancestors[o.ancestors.length-1];h&&(o.place=h.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=u?u.line:void 0,this.name=Pr(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=c&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Tt.prototype.file="";Tt.prototype.name="";Tt.prototype.reason="";Tt.prototype.message="";Tt.prototype.stack="";Tt.prototype.column=void 0;Tt.prototype.line=void 0;Tt.prototype.ancestors=void 0;Tt.prototype.cause=void 0;Tt.prototype.fatal=void 0;Tt.prototype.place=void 0;Tt.prototype.ruleId=void 0;Tt.prototype.source=void 0;const ic={}.hasOwnProperty,iN=new Map,rN=/[A-Z]/g,sN=new Set(["table","tbody","thead","tfoot","tr"]),aN=new Set(["td","th"]),$m="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function oN(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const i=t.filePath||void 0;let s;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=fN(i,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=mN(i,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:i,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?tc:Zj,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=Gm(a,e,void 0);return o&&typeof o!="string"?o:a.create(e,a.Fragment,{children:o||void 0},void 0)}function Gm(e,t,i){if(t.type==="element")return lN(e,t,i);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return cN(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return dN(e,t,i);if(t.type==="mdxjsEsm")return uN(e,t);if(t.type==="root")return hN(e,t,i);if(t.type==="text")return pN(e,t)}function lN(e,t,i){const s=e.schema;let a=s;t.tagName.toLowerCase()==="svg"&&s.space==="html"&&(a=tc,e.schema=a),e.ancestors.push(t);const o=Zm(e,t.tagName,!1),c=xN(e,t);let u=sc(e,t);return sN.has(t.tagName)&&(u=u.filter(function(h){return typeof h=="string"?!zj(h):!0})),Wm(e,c,o,t),rc(c,u),e.ancestors.pop(),e.schema=s,e.create(t,o,c,i)}function cN(e,t){if(t.data&&t.data.estree&&e.evaluater){const s=t.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}Hr(e,t.position)}function uN(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Hr(e,t.position)}function dN(e,t,i){const s=e.schema;let a=s;t.name==="svg"&&s.space==="html"&&(a=tc,e.schema=a),e.ancestors.push(t);const o=t.name===null?e.Fragment:Zm(e,t.name,!0),c=gN(e,t),u=sc(e,t);return Wm(e,c,o,t),rc(c,u),e.ancestors.pop(),e.schema=s,e.create(t,o,c,i)}function hN(e,t,i){const s={};return rc(s,sc(e,t)),e.create(t,e.Fragment,s,i)}function pN(e,t){return t.value}function Wm(e,t,i,s){typeof i!="string"&&i!==e.Fragment&&e.passNode&&(t.node=s)}function rc(e,t){if(t.length>0){const i=t.length>1?t:t[0];i&&(e.children=i)}}function mN(e,t,i){return s;function s(a,o,c,u){const d=Array.isArray(c.children)?i:t;return u?d(o,c,u):d(o,c)}}function fN(e,t){return i;function i(s,a,o,c){const u=Array.isArray(o.children),h=nc(s);return t(a,o,c,u,{columnNumber:h?h.column-1:void 0,fileName:e,lineNumber:h?h.line:void 0},void 0)}}function xN(e,t){const i={};let s,a;for(a in t.properties)if(a!=="children"&&ic.call(t.properties,a)){const o=bN(e,a,t.properties[a]);if(o){const[c,u]=o;e.tableCellAlignToStyle&&c==="align"&&typeof u=="string"&&aN.has(t.tagName)?s=u:i[c]=u}}if(s){const o=i.style||(i.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return i}function gN(e,t){const i={};for(const s of t.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const o=s.data.estree.body[0];o.type;const c=o.expression;c.type;const u=c.properties[0];u.type,Object.assign(i,e.evaluater.evaluateExpression(u.argument))}else Hr(e,t.position);else{const a=s.name;let o;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const u=s.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else Hr(e,t.position);else o=s.value===null?!0:s.value;i[a]=o}return i}function sc(e,t){const i=[];let s=-1;const a=e.passKeys?new Map:iN;for(;++s<t.children.length;){const o=t.children[s];let c;if(e.passKeys){const h=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(h){const d=a.get(h)||0;c=h+"-"+d,a.set(h,d+1)}}const u=Gm(e,o,c);u!==void 0&&i.push(u)}return i}function bN(e,t,i){const s=$j(e.schema,t);if(!(i==null||typeof i=="number"&&Number.isNaN(i))){if(Array.isArray(i)&&(i=s.commaSeparated?Rj(i):Kj(i)),s.property==="style"){let a=typeof i=="object"?i:vN(e,String(i));return e.stylePropertyNameCase==="css"&&(a=yN(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&s.space?Vj[s.property]||s.property:s.attribute,i]}}function vN(e,t){try{return tN(t,{reactCompat:!0})}catch(i){if(e.ignoreInvalidStyle)return{};const s=i,a=new Tt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=$m+"#cannot-parse-style-attribute",a}}function Zm(e,t,i){let s;if(!i)s={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let o=-1,c;for(;++o<a.length;){const u=lh(a[o])?{type:"Identifier",name:a[o]}:{type:"Literal",value:a[o]};c=c?{type:"MemberExpression",object:c,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}s=c}else s=lh(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(s.type==="Literal"){const a=s.value;return ic.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(s);Hr(e)}function Hr(e,t){const i=new Tt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=$m+"#cannot-handle-mdx-estrees-without-createevaluater",i}function yN(e){const t={};let i;for(i in e)ic.call(e,i)&&(t[wN(i)]=e[i]);return t}function wN(e){let t=e.replace(rN,_N);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function _N(e){return"-"+e.toLowerCase()}const Lo={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},jN={};function NN(e,t){const i=jN,s=typeof i.includeImageAlt=="boolean"?i.includeImageAlt:!0,a=typeof i.includeHtml=="boolean"?i.includeHtml:!0;return Km(e,s,a)}function Km(e,t,i){if(kN(e)){if("value"in e)return e.type==="html"&&!i?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return bh(e.children,t,i)}return Array.isArray(e)?bh(e,t,i):""}function bh(e,t,i){const s=[];let a=-1;for(;++a<e.length;)s[a]=Km(e[a],t,i);return s.join("")}function kN(e){return!!(e&&typeof e=="object")}const vh=document.createElement("i");function ac(e){const t="&"+e+";";vh.innerHTML=t;const i=vh.textContent;return i.charCodeAt(i.length-1)===59&&e!=="semi"||i===t?!1:i}function Mn(e,t,i,s){const a=e.length;let o=0,c;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,i=i>0?i:0,s.length<1e4)c=Array.from(s),c.unshift(t,i),e.splice(...c);else for(i&&e.splice(t,i);o<s.length;)c=s.slice(o,o+1e4),c.unshift(t,0),e.splice(...c),o+=1e4,t+=1e4}function un(e,t){return e.length>0?(Mn(e,e.length,0,t),e):t}const yh={}.hasOwnProperty;function CN(e){const t={};let i=-1;for(;++i<e.length;)EN(t,e[i]);return t}function EN(e,t){let i;for(i in t){const a=(yh.call(e,i)?e[i]:void 0)||(e[i]={}),o=t[i];let c;if(o)for(c in o){yh.call(a,c)||(a[c]=[]);const u=o[c];SN(a[c],Array.isArray(u)?u:u?[u]:[])}}}function SN(e,t){let i=-1;const s=[];for(;++i<t.length;)(t[i].add==="after"?e:s).push(t[i]);Mn(e,0,0,s)}function Ym(e,t){const i=Number.parseInt(e,t);return i<9||i===11||i>13&&i<32||i>126&&i<160||i>55295&&i<57344||i>64975&&i<65008||(i&65535)===65535||(i&65535)===65534||i>1114111?"":String.fromCodePoint(i)}function Ji(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Sn=ti(/[A-Za-z]/),nn=ti(/[\dA-Za-z]/),AN=ti(/[#-'*+\--9=?A-Z^-~]/);function gl(e){return e!==null&&(e<32||e===127)}const bl=ti(/\d/),TN=ti(/[\dA-Fa-f]/),PN=ti(/[!-/:-@[-`{-~]/);function je(e){return e!==null&&e<-2}function $t(e){return e!==null&&(e<0||e===32)}function Ge(e){return e===-2||e===-1||e===32}const IN=ti(/\p{P}|\p{S}/u),RN=ti(/\s/);function ti(e){return t;function t(i){return i!==null&&i>-1&&e.test(String.fromCharCode(i))}}function sr(e){const t=[];let i=-1,s=0,a=0;for(;++i<e.length;){const o=e.charCodeAt(i);let c="";if(o===37&&nn(e.charCodeAt(i+1))&&nn(e.charCodeAt(i+2)))a=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(c=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(i+1);o<56320&&u>56319&&u<57344?(c=String.fromCharCode(o,u),a=1):c=""}else c=String.fromCharCode(o);c&&(t.push(e.slice(s,i),encodeURIComponent(c)),s=i+a+1,c=""),a&&(i+=a,a=0)}return t.join("")+e.slice(s)}function et(e,t,i,s){const a=s?s-1:Number.POSITIVE_INFINITY;let o=0;return c;function c(h){return Ge(h)?(e.enter(i),u(h)):t(h)}function u(h){return Ge(h)&&o++<a?(e.consume(h),u):(e.exit(i),t(h))}}const MN={tokenize:LN};function LN(e){const t=e.attempt(this.parser.constructs.contentInitial,s,a);let i;return t;function s(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),et(e,t,"linePrefix")}function a(u){return e.enter("paragraph"),o(u)}function o(u){const h=e.enter("chunkText",{contentType:"text",previous:i});return i&&(i.next=h),i=h,c(u)}function c(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return je(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),c)}}const ON={tokenize:DN},wh={tokenize:zN};function DN(e){const t=this,i=[];let s=0,a,o,c;return u;function u(N){if(s<i.length){const R=i[s];return t.containerState=R[1],e.attempt(R[0].continuation,h,d)(N)}return d(N)}function h(N){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&C();const R=t.events.length;let P=R,I;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){I=t.events[P][1].end;break}S(s);let F=R;for(;F<t.events.length;)t.events[F][1].end={...I},F++;return Mn(t.events,P+1,0,t.events.slice(R)),t.events.length=F,d(N)}return u(N)}function d(N){if(s===i.length){if(!a)return x(N);if(a.currentConstruct&&a.currentConstruct.concrete)return y(N);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(wh,f,p)(N)}function f(N){return a&&C(),S(s),x(N)}function p(N){return t.parser.lazy[t.now().line]=s!==i.length,c=t.now().offset,y(N)}function x(N){return t.containerState={},e.attempt(wh,b,y)(N)}function b(N){return s++,i.push([t.currentConstruct,t.containerState]),x(N)}function y(N){if(N===null){a&&C(),S(0),e.consume(N);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:o}),w(N)}function w(N){if(N===null){j(e.exit("chunkFlow"),!0),S(0),e.consume(N);return}return je(N)?(e.consume(N),j(e.exit("chunkFlow")),s=0,t.interrupt=void 0,u):(e.consume(N),w)}function j(N,R){const P=t.sliceStream(N);if(R&&P.push(null),N.previous=o,o&&(o.next=N),o=N,a.defineSkip(N.start),a.write(P),t.parser.lazy[N.start.line]){let I=a.events.length;for(;I--;)if(a.events[I][1].start.offset<c&&(!a.events[I][1].end||a.events[I][1].end.offset>c))return;const F=t.events.length;let $=F,ne,O;for(;$--;)if(t.events[$][0]==="exit"&&t.events[$][1].type==="chunkFlow"){if(ne){O=t.events[$][1].end;break}ne=!0}for(S(s),I=F;I<t.events.length;)t.events[I][1].end={...O},I++;Mn(t.events,$+1,0,t.events.slice(F)),t.events.length=I}}function S(N){let R=i.length;for(;R-- >N;){const P=i[R];t.containerState=P[1],P[0].exit.call(t,e)}i.length=N}function C(){a.write([null]),o=void 0,a=void 0,t.containerState._closeFlow=void 0}}function zN(e,t,i){return et(e,e.attempt(this.parser.constructs.document,t,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _h(e){if(e===null||$t(e)||RN(e))return 1;if(IN(e))return 2}function oc(e,t,i){const s=[];let a=-1;for(;++a<e.length;){const o=e[a].resolveAll;o&&!s.includes(o)&&(t=o(t,i),s.push(o))}return t}const vl={name:"attention",resolveAll:FN,tokenize:BN};function FN(e,t){let i=-1,s,a,o,c,u,h,d,f;for(;++i<e.length;)if(e[i][0]==="enter"&&e[i][1].type==="attentionSequence"&&e[i][1]._close){for(s=i;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[i][1]).charCodeAt(0)){if((e[s][1]._close||e[i][1]._open)&&(e[i][1].end.offset-e[i][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[i][1].end.offset-e[i][1].start.offset)%3))continue;h=e[s][1].end.offset-e[s][1].start.offset>1&&e[i][1].end.offset-e[i][1].start.offset>1?2:1;const p={...e[s][1].end},x={...e[i][1].start};jh(p,-h),jh(x,h),c={type:h>1?"strongSequence":"emphasisSequence",start:p,end:{...e[s][1].end}},u={type:h>1?"strongSequence":"emphasisSequence",start:{...e[i][1].start},end:x},o={type:h>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[i][1].start}},a={type:h>1?"strong":"emphasis",start:{...c.start},end:{...u.end}},e[s][1].end={...c.start},e[i][1].start={...u.end},d=[],e[s][1].end.offset-e[s][1].start.offset&&(d=un(d,[["enter",e[s][1],t],["exit",e[s][1],t]])),d=un(d,[["enter",a,t],["enter",c,t],["exit",c,t],["enter",o,t]]),d=un(d,oc(t.parser.constructs.insideSpan.null,e.slice(s+1,i),t)),d=un(d,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",a,t]]),e[i][1].end.offset-e[i][1].start.offset?(f=2,d=un(d,[["enter",e[i][1],t],["exit",e[i][1],t]])):f=0,Mn(e,s-1,i-s+3,d),i=s+d.length-f-2;break}}for(i=-1;++i<e.length;)e[i][1].type==="attentionSequence"&&(e[i][1].type="data");return e}function BN(e,t){const i=this.parser.constructs.attentionMarkers.null,s=this.previous,a=_h(s);let o;return c;function c(h){return o=h,e.enter("attentionSequence"),u(h)}function u(h){if(h===o)return e.consume(h),u;const d=e.exit("attentionSequence"),f=_h(h),p=!f||f===2&&a||i.includes(h),x=!a||a===2&&f||i.includes(s);return d._open=!!(o===42?p:p&&(a||!x)),d._close=!!(o===42?x:x&&(f||!p)),t(h)}}function jh(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const UN={name:"autolink",tokenize:VN};function VN(e,t,i){let s=0;return a;function a(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(b){return Sn(b)?(e.consume(b),c):b===64?i(b):d(b)}function c(b){return b===43||b===45||b===46||nn(b)?(s=1,u(b)):d(b)}function u(b){return b===58?(e.consume(b),s=0,h):(b===43||b===45||b===46||nn(b))&&s++<32?(e.consume(b),u):(s=0,d(b))}function h(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||gl(b)?i(b):(e.consume(b),h)}function d(b){return b===64?(e.consume(b),f):AN(b)?(e.consume(b),d):i(b)}function f(b){return nn(b)?p(b):i(b)}function p(b){return b===46?(e.consume(b),s=0,f):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):x(b)}function x(b){if((b===45||nn(b))&&s++<63){const y=b===45?x:p;return e.consume(b),y}return i(b)}}const Ea={partial:!0,tokenize:HN};function HN(e,t,i){return s;function s(o){return Ge(o)?et(e,a,"linePrefix")(o):a(o)}function a(o){return o===null||je(o)?t(o):i(o)}}const Xm={continuation:{tokenize:$N},exit:GN,name:"blockQuote",tokenize:qN};function qN(e,t,i){const s=this;return a;function a(c){if(c===62){const u=s.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(c),e.exit("blockQuoteMarker"),o}return i(c)}function o(c){return Ge(c)?(e.enter("blockQuotePrefixWhitespace"),e.consume(c),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(c))}}function $N(e,t,i){const s=this;return a;function a(c){return Ge(c)?et(e,o,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):o(c)}function o(c){return e.attempt(Xm,t,i)(c)}}function GN(e){e.exit("blockQuote")}const Qm={name:"characterEscape",tokenize:WN};function WN(e,t,i){return s;function s(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),a}function a(o){return PN(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):i(o)}}const Jm={name:"characterReference",tokenize:ZN};function ZN(e,t,i){const s=this;let a=0,o,c;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),h}function h(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),o=31,c=nn,f(p))}function d(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,c=TN,f):(e.enter("characterReferenceValue"),o=7,c=bl,f(p))}function f(p){if(p===59&&a){const x=e.exit("characterReferenceValue");return c===nn&&!ac(s.sliceSerialize(x))?i(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return c(p)&&a++<o?(e.consume(p),f):i(p)}}const Nh={partial:!0,tokenize:YN},kh={concrete:!0,name:"codeFenced",tokenize:KN};function KN(e,t,i){const s=this,a={partial:!0,tokenize:P};let o=0,c=0,u;return h;function h(I){return d(I)}function d(I){const F=s.events[s.events.length-1];return o=F&&F[1].type==="linePrefix"?F[2].sliceSerialize(F[1],!0).length:0,u=I,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(I)}function f(I){return I===u?(c++,e.consume(I),f):c<3?i(I):(e.exit("codeFencedFenceSequence"),Ge(I)?et(e,p,"whitespace")(I):p(I))}function p(I){return I===null||je(I)?(e.exit("codeFencedFence"),s.interrupt?t(I):e.check(Nh,w,R)(I)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),x(I))}function x(I){return I===null||je(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(I)):Ge(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),et(e,b,"whitespace")(I)):I===96&&I===u?i(I):(e.consume(I),x)}function b(I){return I===null||je(I)?p(I):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(I))}function y(I){return I===null||je(I)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(I)):I===96&&I===u?i(I):(e.consume(I),y)}function w(I){return e.attempt(a,R,j)(I)}function j(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),S}function S(I){return o>0&&Ge(I)?et(e,C,"linePrefix",o+1)(I):C(I)}function C(I){return I===null||je(I)?e.check(Nh,w,R)(I):(e.enter("codeFlowValue"),N(I))}function N(I){return I===null||je(I)?(e.exit("codeFlowValue"),C(I)):(e.consume(I),N)}function R(I){return e.exit("codeFenced"),t(I)}function P(I,F,$){let ne=0;return O;function O(W){return I.enter("lineEnding"),I.consume(W),I.exit("lineEnding"),D}function D(W){return I.enter("codeFencedFence"),Ge(W)?et(I,M,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):M(W)}function M(W){return W===u?(I.enter("codeFencedFenceSequence"),q(W)):$(W)}function q(W){return W===u?(ne++,I.consume(W),q):ne>=c?(I.exit("codeFencedFenceSequence"),Ge(W)?et(I,Z,"whitespace")(W):Z(W)):$(W)}function Z(W){return W===null||je(W)?(I.exit("codeFencedFence"),F(W)):$(W)}}}function YN(e,t,i){const s=this;return a;function a(c){return c===null?i(c):(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),o)}function o(c){return s.parser.lazy[s.now().line]?i(c):t(c)}}const Oo={name:"codeIndented",tokenize:QN},XN={partial:!0,tokenize:JN};function QN(e,t,i){const s=this;return a;function a(d){return e.enter("codeIndented"),et(e,o,"linePrefix",5)(d)}function o(d){const f=s.events[s.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?c(d):i(d)}function c(d){return d===null?h(d):je(d)?e.attempt(XN,c,h)(d):(e.enter("codeFlowValue"),u(d))}function u(d){return d===null||je(d)?(e.exit("codeFlowValue"),c(d)):(e.consume(d),u)}function h(d){return e.exit("codeIndented"),t(d)}}function JN(e,t,i){const s=this;return a;function a(c){return s.parser.lazy[s.now().line]?i(c):je(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),a):et(e,o,"linePrefix",5)(c)}function o(c){const u=s.events[s.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(c):je(c)?a(c):i(c)}}const e2={name:"codeText",previous:n2,resolve:t2,tokenize:i2};function t2(e){let t=e.length-4,i=3,s,a;if((e[i][1].type==="lineEnding"||e[i][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=i;++s<t;)if(e[s][1].type==="codeTextData"){e[i][1].type="codeTextPadding",e[t][1].type="codeTextPadding",i+=2,t-=2;break}}for(s=i-1,t++;++s<=t;)a===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(a=s):(s===t||e[s][1].type==="lineEnding")&&(e[a][1].type="codeTextData",s!==a+2&&(e[a][1].end=e[s-1][1].end,e.splice(a+2,s-a-2),t-=s-a-2,s=a+2),a=void 0);return e}function n2(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function i2(e,t,i){let s=0,a,o;return c;function c(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),s++,u):(e.exit("codeTextSequence"),h(p))}function h(p){return p===null?i(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),h):p===96?(o=e.enter("codeTextSequence"),a=0,f(p)):je(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),h):(e.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||je(p)?(e.exit("codeTextData"),h(p)):(e.consume(p),d)}function f(p){return p===96?(e.consume(p),a++,f):a===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",d(p))}}class r2{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,i){const s=i??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(t,s):t>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(t,i,s){const a=i||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return s&&Cr(this.left,s),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Cr(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Cr(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const i=this.left.splice(t,Number.POSITIVE_INFINITY);Cr(this.right,i.reverse())}else{const i=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Cr(this.left,i.reverse())}}}function Cr(e,t){let i=0;if(t.length<1e4)e.push(...t);else for(;i<t.length;)e.push(...t.slice(i,i+1e4)),i+=1e4}function ef(e){const t={};let i=-1,s,a,o,c,u,h,d;const f=new r2(e);for(;++i<f.length;){for(;i in t;)i=t[i];if(s=f.get(i),i&&s[1].type==="chunkFlow"&&f.get(i-1)[1].type==="listItemPrefix"&&(h=s[1]._tokenizer.events,o=0,o<h.length&&h[o][1].type==="lineEndingBlank"&&(o+=2),o<h.length&&h[o][1].type==="content"))for(;++o<h.length&&h[o][1].type!=="content";)h[o][1].type==="chunkText"&&(h[o][1]._isInFirstContentOfListItem=!0,o++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,s2(f,i)),i=t[i],d=!0);else if(s[1]._container){for(o=i,a=void 0;o--;)if(c=f.get(o),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),c[1].type="lineEnding",a=o);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;a&&(s[1].end={...f.get(a)[1].start},u=f.slice(a,i),u.unshift(s),f.splice(a,i-a+1,u))}}return Mn(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!d}function s2(e,t){const i=e.get(t)[1],s=e.get(t)[2];let a=t-1;const o=[];let c=i._tokenizer;c||(c=s.parser[i.contentType](i.start),i._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const u=c.events,h=[],d={};let f,p,x=-1,b=i,y=0,w=0;const j=[w];for(;b;){for(;e.get(++a)[1]!==b;);o.push(a),b._tokenizer||(f=s.sliceStream(b),b.next||f.push(null),p&&c.defineSkip(b.start),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(f),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),p=b,b=b.next}for(b=i;++x<u.length;)u[x][0]==="exit"&&u[x-1][0]==="enter"&&u[x][1].type===u[x-1][1].type&&u[x][1].start.line!==u[x][1].end.line&&(w=x+1,j.push(w),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(c.events=[],b?(b._tokenizer=void 0,b.previous=void 0):j.pop(),x=j.length;x--;){const S=u.slice(j[x],j[x+1]),C=o.pop();h.push([C,C+S.length-1]),e.splice(C,2,S)}for(h.reverse(),x=-1;++x<h.length;)d[y+h[x][0]]=y+h[x][1],y+=h[x][1]-h[x][0]-1;return d}const a2={resolve:l2,tokenize:c2},o2={partial:!0,tokenize:u2};function l2(e){return ef(e),e}function c2(e,t){let i;return s;function s(u){return e.enter("content"),i=e.enter("chunkContent",{contentType:"content"}),a(u)}function a(u){return u===null?o(u):je(u)?e.check(o2,c,o)(u):(e.consume(u),a)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function c(u){return e.consume(u),e.exit("chunkContent"),i.next=e.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,a}}function u2(e,t,i){const s=this;return a;function a(c){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),et(e,o,"linePrefix")}function o(c){if(c===null||je(c))return i(c);const u=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(c):e.interrupt(s.parser.constructs.flow,i,t)(c)}}function tf(e,t,i,s,a,o,c,u,h){const d=h||Number.POSITIVE_INFINITY;let f=0;return p;function p(S){return S===60?(e.enter(s),e.enter(a),e.enter(o),e.consume(S),e.exit(o),x):S===null||S===32||S===41||gl(S)?i(S):(e.enter(s),e.enter(c),e.enter(u),e.enter("chunkString",{contentType:"string"}),w(S))}function x(S){return S===62?(e.enter(o),e.consume(S),e.exit(o),e.exit(a),e.exit(s),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),b(S))}function b(S){return S===62?(e.exit("chunkString"),e.exit(u),x(S)):S===null||S===60||je(S)?i(S):(e.consume(S),S===92?y:b)}function y(S){return S===60||S===62||S===92?(e.consume(S),b):b(S)}function w(S){return!f&&(S===null||S===41||$t(S))?(e.exit("chunkString"),e.exit(u),e.exit(c),e.exit(s),t(S)):f<d&&S===40?(e.consume(S),f++,w):S===41?(e.consume(S),f--,w):S===null||S===32||S===40||gl(S)?i(S):(e.consume(S),S===92?j:w)}function j(S){return S===40||S===41||S===92?(e.consume(S),w):w(S)}}function nf(e,t,i,s,a,o){const c=this;let u=0,h;return d;function d(b){return e.enter(s),e.enter(a),e.consume(b),e.exit(a),e.enter(o),f}function f(b){return u>999||b===null||b===91||b===93&&!h||b===94&&!u&&"_hiddenFootnoteSupport"in c.parser.constructs?i(b):b===93?(e.exit(o),e.enter(a),e.consume(b),e.exit(a),e.exit(s),t):je(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===null||b===91||b===93||je(b)||u++>999?(e.exit("chunkString"),f(b)):(e.consume(b),h||(h=!Ge(b)),b===92?x:p)}function x(b){return b===91||b===92||b===93?(e.consume(b),u++,p):p(b)}}function rf(e,t,i,s,a,o){let c;return u;function u(x){return x===34||x===39||x===40?(e.enter(s),e.enter(a),e.consume(x),e.exit(a),c=x===40?41:x,h):i(x)}function h(x){return x===c?(e.enter(a),e.consume(x),e.exit(a),e.exit(s),t):(e.enter(o),d(x))}function d(x){return x===c?(e.exit(o),h(c)):x===null?i(x):je(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),et(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===c||x===null||je(x)?(e.exit("chunkString"),d(x)):(e.consume(x),x===92?p:f)}function p(x){return x===c||x===92?(e.consume(x),f):f(x)}}function Ir(e,t){let i;return s;function s(a){return je(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i=!0,s):Ge(a)?et(e,s,i?"linePrefix":"lineSuffix")(a):t(a)}}const d2={name:"definition",tokenize:p2},h2={partial:!0,tokenize:m2};function p2(e,t,i){const s=this;let a;return o;function o(b){return e.enter("definition"),c(b)}function c(b){return nf.call(s,e,u,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function u(b){return a=Ji(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),h):i(b)}function h(b){return $t(b)?Ir(e,d)(b):d(b)}function d(b){return tf(e,f,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function f(b){return e.attempt(h2,p,p)(b)}function p(b){return Ge(b)?et(e,x,"whitespace")(b):x(b)}function x(b){return b===null||je(b)?(e.exit("definition"),s.parser.defined.push(a),t(b)):i(b)}}function m2(e,t,i){return s;function s(u){return $t(u)?Ir(e,a)(u):i(u)}function a(u){return rf(e,o,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return Ge(u)?et(e,c,"whitespace")(u):c(u)}function c(u){return u===null||je(u)?t(u):i(u)}}const f2={name:"hardBreakEscape",tokenize:x2};function x2(e,t,i){return s;function s(o){return e.enter("hardBreakEscape"),e.consume(o),a}function a(o){return je(o)?(e.exit("hardBreakEscape"),t(o)):i(o)}}const g2={name:"headingAtx",resolve:b2,tokenize:v2};function b2(e,t){let i=e.length-2,s=3,a,o;return e[s][1].type==="whitespace"&&(s+=2),i-2>s&&e[i][1].type==="whitespace"&&(i-=2),e[i][1].type==="atxHeadingSequence"&&(s===i-1||i-4>s&&e[i-2][1].type==="whitespace")&&(i-=s+1===i?2:4),i>s&&(a={type:"atxHeadingText",start:e[s][1].start,end:e[i][1].end},o={type:"chunkText",start:e[s][1].start,end:e[i][1].end,contentType:"text"},Mn(e,s,i-s+1,[["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t]])),e}function v2(e,t,i){let s=0;return a;function a(f){return e.enter("atxHeading"),o(f)}function o(f){return e.enter("atxHeadingSequence"),c(f)}function c(f){return f===35&&s++<6?(e.consume(f),c):f===null||$t(f)?(e.exit("atxHeadingSequence"),u(f)):i(f)}function u(f){return f===35?(e.enter("atxHeadingSequence"),h(f)):f===null||je(f)?(e.exit("atxHeading"),t(f)):Ge(f)?et(e,u,"whitespace")(f):(e.enter("atxHeadingText"),d(f))}function h(f){return f===35?(e.consume(f),h):(e.exit("atxHeadingSequence"),u(f))}function d(f){return f===null||f===35||$t(f)?(e.exit("atxHeadingText"),u(f)):(e.consume(f),d)}}const y2=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ch=["pre","script","style","textarea"],w2={concrete:!0,name:"htmlFlow",resolveTo:N2,tokenize:k2},_2={partial:!0,tokenize:E2},j2={partial:!0,tokenize:C2};function N2(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function k2(e,t,i){const s=this;let a,o,c,u,h;return d;function d(k){return f(k)}function f(k){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(k),p}function p(k){return k===33?(e.consume(k),x):k===47?(e.consume(k),o=!0,w):k===63?(e.consume(k),a=3,s.interrupt?t:_):Sn(k)?(e.consume(k),c=String.fromCharCode(k),j):i(k)}function x(k){return k===45?(e.consume(k),a=2,b):k===91?(e.consume(k),a=5,u=0,y):Sn(k)?(e.consume(k),a=4,s.interrupt?t:_):i(k)}function b(k){return k===45?(e.consume(k),s.interrupt?t:_):i(k)}function y(k){const B="CDATA[";return k===B.charCodeAt(u++)?(e.consume(k),u===B.length?s.interrupt?t:M:y):i(k)}function w(k){return Sn(k)?(e.consume(k),c=String.fromCharCode(k),j):i(k)}function j(k){if(k===null||k===47||k===62||$t(k)){const B=k===47,U=c.toLowerCase();return!B&&!o&&Ch.includes(U)?(a=1,s.interrupt?t(k):M(k)):y2.includes(c.toLowerCase())?(a=6,B?(e.consume(k),S):s.interrupt?t(k):M(k)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?i(k):o?C(k):N(k))}return k===45||nn(k)?(e.consume(k),c+=String.fromCharCode(k),j):i(k)}function S(k){return k===62?(e.consume(k),s.interrupt?t:M):i(k)}function C(k){return Ge(k)?(e.consume(k),C):O(k)}function N(k){return k===47?(e.consume(k),O):k===58||k===95||Sn(k)?(e.consume(k),R):Ge(k)?(e.consume(k),N):O(k)}function R(k){return k===45||k===46||k===58||k===95||nn(k)?(e.consume(k),R):P(k)}function P(k){return k===61?(e.consume(k),I):Ge(k)?(e.consume(k),P):N(k)}function I(k){return k===null||k===60||k===61||k===62||k===96?i(k):k===34||k===39?(e.consume(k),h=k,F):Ge(k)?(e.consume(k),I):$(k)}function F(k){return k===h?(e.consume(k),h=null,ne):k===null||je(k)?i(k):(e.consume(k),F)}function $(k){return k===null||k===34||k===39||k===47||k===60||k===61||k===62||k===96||$t(k)?P(k):(e.consume(k),$)}function ne(k){return k===47||k===62||Ge(k)?N(k):i(k)}function O(k){return k===62?(e.consume(k),D):i(k)}function D(k){return k===null||je(k)?M(k):Ge(k)?(e.consume(k),D):i(k)}function M(k){return k===45&&a===2?(e.consume(k),ee):k===60&&a===1?(e.consume(k),ce):k===62&&a===4?(e.consume(k),A):k===63&&a===3?(e.consume(k),_):k===93&&a===5?(e.consume(k),ve):je(k)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(_2,H,q)(k)):k===null||je(k)?(e.exit("htmlFlowData"),q(k)):(e.consume(k),M)}function q(k){return e.check(j2,Z,H)(k)}function Z(k){return e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),W}function W(k){return k===null||je(k)?q(k):(e.enter("htmlFlowData"),M(k))}function ee(k){return k===45?(e.consume(k),_):M(k)}function ce(k){return k===47?(e.consume(k),c="",se):M(k)}function se(k){if(k===62){const B=c.toLowerCase();return Ch.includes(B)?(e.consume(k),A):M(k)}return Sn(k)&&c.length<8?(e.consume(k),c+=String.fromCharCode(k),se):M(k)}function ve(k){return k===93?(e.consume(k),_):M(k)}function _(k){return k===62?(e.consume(k),A):k===45&&a===2?(e.consume(k),_):M(k)}function A(k){return k===null||je(k)?(e.exit("htmlFlowData"),H(k)):(e.consume(k),A)}function H(k){return e.exit("htmlFlow"),t(k)}}function C2(e,t,i){const s=this;return a;function a(c){return je(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),o):i(c)}function o(c){return s.parser.lazy[s.now().line]?i(c):t(c)}}function E2(e,t,i){return s;function s(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Ea,t,i)}}const S2={name:"htmlText",tokenize:A2};function A2(e,t,i){const s=this;let a,o,c;return u;function u(_){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(_),h}function h(_){return _===33?(e.consume(_),d):_===47?(e.consume(_),P):_===63?(e.consume(_),N):Sn(_)?(e.consume(_),$):i(_)}function d(_){return _===45?(e.consume(_),f):_===91?(e.consume(_),o=0,y):Sn(_)?(e.consume(_),C):i(_)}function f(_){return _===45?(e.consume(_),b):i(_)}function p(_){return _===null?i(_):_===45?(e.consume(_),x):je(_)?(c=p,ce(_)):(e.consume(_),p)}function x(_){return _===45?(e.consume(_),b):p(_)}function b(_){return _===62?ee(_):_===45?x(_):p(_)}function y(_){const A="CDATA[";return _===A.charCodeAt(o++)?(e.consume(_),o===A.length?w:y):i(_)}function w(_){return _===null?i(_):_===93?(e.consume(_),j):je(_)?(c=w,ce(_)):(e.consume(_),w)}function j(_){return _===93?(e.consume(_),S):w(_)}function S(_){return _===62?ee(_):_===93?(e.consume(_),S):w(_)}function C(_){return _===null||_===62?ee(_):je(_)?(c=C,ce(_)):(e.consume(_),C)}function N(_){return _===null?i(_):_===63?(e.consume(_),R):je(_)?(c=N,ce(_)):(e.consume(_),N)}function R(_){return _===62?ee(_):N(_)}function P(_){return Sn(_)?(e.consume(_),I):i(_)}function I(_){return _===45||nn(_)?(e.consume(_),I):F(_)}function F(_){return je(_)?(c=F,ce(_)):Ge(_)?(e.consume(_),F):ee(_)}function $(_){return _===45||nn(_)?(e.consume(_),$):_===47||_===62||$t(_)?ne(_):i(_)}function ne(_){return _===47?(e.consume(_),ee):_===58||_===95||Sn(_)?(e.consume(_),O):je(_)?(c=ne,ce(_)):Ge(_)?(e.consume(_),ne):ee(_)}function O(_){return _===45||_===46||_===58||_===95||nn(_)?(e.consume(_),O):D(_)}function D(_){return _===61?(e.consume(_),M):je(_)?(c=D,ce(_)):Ge(_)?(e.consume(_),D):ne(_)}function M(_){return _===null||_===60||_===61||_===62||_===96?i(_):_===34||_===39?(e.consume(_),a=_,q):je(_)?(c=M,ce(_)):Ge(_)?(e.consume(_),M):(e.consume(_),Z)}function q(_){return _===a?(e.consume(_),a=void 0,W):_===null?i(_):je(_)?(c=q,ce(_)):(e.consume(_),q)}function Z(_){return _===null||_===34||_===39||_===60||_===61||_===96?i(_):_===47||_===62||$t(_)?ne(_):(e.consume(_),Z)}function W(_){return _===47||_===62||$t(_)?ne(_):i(_)}function ee(_){return _===62?(e.consume(_),e.exit("htmlTextData"),e.exit("htmlText"),t):i(_)}function ce(_){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),se}function se(_){return Ge(_)?et(e,ve,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):ve(_)}function ve(_){return e.enter("htmlTextData"),c(_)}}const lc={name:"labelEnd",resolveAll:R2,resolveTo:M2,tokenize:L2},T2={tokenize:O2},P2={tokenize:D2},I2={tokenize:z2};function R2(e){let t=-1;const i=[];for(;++t<e.length;){const s=e[t][1];if(i.push(e[t]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const a=s.type==="labelImage"?4:2;s.type="data",t+=a}}return e.length!==i.length&&Mn(e,0,e.length,i),e}function M2(e,t){let i=e.length,s=0,a,o,c,u;for(;i--;)if(a=e[i][1],o){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[i][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(c){if(e[i][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(o=i,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(c=i);const h={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[o][1].start},end:{...e[c][1].end}},f={type:"labelText",start:{...e[o+s+2][1].end},end:{...e[c-2][1].start}};return u=[["enter",h,t],["enter",d,t]],u=un(u,e.slice(o+1,o+s+3)),u=un(u,[["enter",f,t]]),u=un(u,oc(t.parser.constructs.insideSpan.null,e.slice(o+s+4,c-3),t)),u=un(u,[["exit",f,t],e[c-2],e[c-1],["exit",d,t]]),u=un(u,e.slice(c+1)),u=un(u,[["exit",h,t]]),Mn(e,o,e.length,u),e}function L2(e,t,i){const s=this;let a=s.events.length,o,c;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){o=s.events[a][1];break}return u;function u(x){return o?o._inactive?p(x):(c=s.parser.defined.includes(Ji(s.sliceSerialize({start:o.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(x),e.exit("labelMarker"),e.exit("labelEnd"),h):i(x)}function h(x){return x===40?e.attempt(T2,f,c?f:p)(x):x===91?e.attempt(P2,f,c?d:p)(x):c?f(x):p(x)}function d(x){return e.attempt(I2,f,p)(x)}function f(x){return t(x)}function p(x){return o._balanced=!0,i(x)}}function O2(e,t,i){return s;function s(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),a}function a(p){return $t(p)?Ir(e,o)(p):o(p)}function o(p){return p===41?f(p):tf(e,c,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function c(p){return $t(p)?Ir(e,h)(p):f(p)}function u(p){return i(p)}function h(p){return p===34||p===39||p===40?rf(e,d,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function d(p){return $t(p)?Ir(e,f)(p):f(p)}function f(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):i(p)}}function D2(e,t,i){const s=this;return a;function a(u){return nf.call(s,e,o,c,"reference","referenceMarker","referenceString")(u)}function o(u){return s.parser.defined.includes(Ji(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(u):i(u)}function c(u){return i(u)}}function z2(e,t,i){return s;function s(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),a}function a(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):i(o)}}const F2={name:"labelStartImage",resolveAll:lc.resolveAll,tokenize:B2};function B2(e,t,i){const s=this;return a;function a(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),c):i(u)}function c(u){return u===94&&"_hiddenFootnoteSupport"in s.parser.constructs?i(u):t(u)}}const U2={name:"labelStartLink",resolveAll:lc.resolveAll,tokenize:V2};function V2(e,t,i){const s=this;return a;function a(c){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelLink"),o}function o(c){return c===94&&"_hiddenFootnoteSupport"in s.parser.constructs?i(c):t(c)}}const Do={name:"lineEnding",tokenize:H2};function H2(e,t){return i;function i(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),et(e,t,"linePrefix")}}const Xs={name:"thematicBreak",tokenize:q2};function q2(e,t,i){let s=0,a;return o;function o(d){return e.enter("thematicBreak"),c(d)}function c(d){return a=d,u(d)}function u(d){return d===a?(e.enter("thematicBreakSequence"),h(d)):s>=3&&(d===null||je(d))?(e.exit("thematicBreak"),t(d)):i(d)}function h(d){return d===a?(e.consume(d),s++,h):(e.exit("thematicBreakSequence"),Ge(d)?et(e,u,"whitespace")(d):u(d))}}const Bt={continuation:{tokenize:Z2},exit:Y2,name:"list",tokenize:W2},$2={partial:!0,tokenize:X2},G2={partial:!0,tokenize:K2};function W2(e,t,i){const s=this,a=s.events[s.events.length-1];let o=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,c=0;return u;function u(b){const y=s.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!s.containerState.marker||b===s.containerState.marker:bl(b)){if(s.containerState.type||(s.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(Xs,i,d)(b):d(b);if(!s.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),h(b)}return i(b)}function h(b){return bl(b)&&++c<10?(e.consume(b),h):(!s.interrupt||c<2)&&(s.containerState.marker?b===s.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),d(b)):i(b)}function d(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||b,e.check(Ea,s.interrupt?i:f,e.attempt($2,x,p))}function f(b){return s.containerState.initialBlankLine=!0,o++,x(b)}function p(b){return Ge(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),x):i(b)}function x(b){return s.containerState.size=o+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function Z2(e,t,i){const s=this;return s.containerState._closeFlow=void 0,e.check(Ea,a,o);function a(u){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,et(e,t,"listItemIndent",s.containerState.size+1)(u)}function o(u){return s.containerState.furtherBlankLines||!Ge(u)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,c(u)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(G2,t,c)(u))}function c(u){return s.containerState._closeFlow=!0,s.interrupt=void 0,et(e,e.attempt(Bt,t,i),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function K2(e,t,i){const s=this;return et(e,a,"listItemIndent",s.containerState.size+1);function a(o){const c=s.events[s.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===s.containerState.size?t(o):i(o)}}function Y2(e){e.exit(this.containerState.type)}function X2(e,t,i){const s=this;return et(e,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(o){const c=s.events[s.events.length-1];return!Ge(o)&&c&&c[1].type==="listItemPrefixWhitespace"?t(o):i(o)}}const Eh={name:"setextUnderline",resolveTo:Q2,tokenize:J2};function Q2(e,t){let i=e.length,s,a,o;for(;i--;)if(e[i][0]==="enter"){if(e[i][1].type==="content"){s=i;break}e[i][1].type==="paragraph"&&(a=i)}else e[i][1].type==="content"&&e.splice(i,1),!o&&e[i][1].type==="definition"&&(o=i);const c={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",o?(e.splice(a,0,["enter",c,t]),e.splice(o+1,0,["exit",e[s][1],t]),e[s][1].end={...e[o][1].end}):e[s][1]=c,e.push(["exit",c,t]),e}function J2(e,t,i){const s=this;let a;return o;function o(d){let f=s.events.length,p;for(;f--;)if(s.events[f][1].type!=="lineEnding"&&s.events[f][1].type!=="linePrefix"&&s.events[f][1].type!=="content"){p=s.events[f][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||p)?(e.enter("setextHeadingLine"),a=d,c(d)):i(d)}function c(d){return e.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===a?(e.consume(d),u):(e.exit("setextHeadingLineSequence"),Ge(d)?et(e,h,"lineSuffix")(d):h(d))}function h(d){return d===null||je(d)?(e.exit("setextHeadingLine"),t(d)):i(d)}}const ek={tokenize:tk};function tk(e){const t=this,i=e.attempt(Ea,s,e.attempt(this.parser.constructs.flowInitial,a,et(e,e.attempt(this.parser.constructs.flow,a,e.attempt(a2,a)),"linePrefix")));return i;function s(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,i}function a(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,i}}const nk={resolveAll:af()},ik=sf("string"),rk=sf("text");function sf(e){return{resolveAll:af(e==="text"?sk:void 0),tokenize:t};function t(i){const s=this,a=this.parser.constructs[e],o=i.attempt(a,c,u);return c;function c(f){return d(f)?o(f):u(f)}function u(f){if(f===null){i.consume(f);return}return i.enter("data"),i.consume(f),h}function h(f){return d(f)?(i.exit("data"),o(f)):(i.consume(f),h)}function d(f){if(f===null)return!0;const p=a[f];let x=-1;if(p)for(;++x<p.length;){const b=p[x];if(!b.previous||b.previous.call(s,s.previous))return!0}return!1}}}function af(e){return t;function t(i,s){let a=-1,o;for(;++a<=i.length;)o===void 0?i[a]&&i[a][1].type==="data"&&(o=a,a++):(!i[a]||i[a][1].type!=="data")&&(a!==o+2&&(i[o][1].end=i[a-1][1].end,i.splice(o+2,a-o-2),a=o+2),o=void 0);return e?e(i,s):i}}function sk(e,t){let i=0;for(;++i<=e.length;)if((i===e.length||e[i][1].type==="lineEnding")&&e[i-1][1].type==="data"){const s=e[i-1][1],a=t.sliceStream(s);let o=a.length,c=-1,u=0,h;for(;o--;){const d=a[o];if(typeof d=="string"){for(c=d.length;d.charCodeAt(c-1)===32;)u++,c--;if(c)break;c=-1}else if(d===-2)h=!0,u++;else if(d!==-1){o++;break}}if(t._contentTypeTextTrailing&&i===e.length&&(u=0),u){const d={type:i===e.length||h||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?c:s.start._bufferIndex+c,_index:s.start._index+o,line:s.end.line,column:s.end.column-u,offset:s.end.offset-u},end:{...s.end}};s.end={...d.start},s.start.offset===s.end.offset?Object.assign(s,d):(e.splice(i,0,["enter",d,t],["exit",d,t]),i+=2)}i++}return e}const ak={42:Bt,43:Bt,45:Bt,48:Bt,49:Bt,50:Bt,51:Bt,52:Bt,53:Bt,54:Bt,55:Bt,56:Bt,57:Bt,62:Xm},ok={91:d2},lk={[-2]:Oo,[-1]:Oo,32:Oo},ck={35:g2,42:Xs,45:[Eh,Xs],60:w2,61:Eh,95:Xs,96:kh,126:kh},uk={38:Jm,92:Qm},dk={[-5]:Do,[-4]:Do,[-3]:Do,33:F2,38:Jm,42:vl,60:[UN,S2],91:U2,92:[f2,Qm],93:lc,95:vl,96:e2},hk={null:[vl,nk]},pk={null:[42,95]},mk={null:[]},fk=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:pk,contentInitial:ok,disable:mk,document:ak,flow:ck,flowInitial:lk,insideSpan:hk,string:uk,text:dk},Symbol.toStringTag,{value:"Module"}));function xk(e,t,i){let s={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0};const a={},o=[];let c=[],u=[];const h={attempt:F(P),check:F(I),consume:C,enter:N,exit:R,interrupt:F(I,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:y,parser:e,previous:null,sliceSerialize:x,sliceStream:b,write:p};let f=t.tokenize.call(d,h);return t.resolveAll&&o.push(t),d;function p(D){return c=un(c,D),j(),c[c.length-1]!==null?[]:($(t,0),d.events=oc(o,d.events,d),d.events)}function x(D,M){return bk(b(D),M)}function b(D){return gk(c,D)}function y(){const{_bufferIndex:D,_index:M,line:q,column:Z,offset:W}=s;return{_bufferIndex:D,_index:M,line:q,column:Z,offset:W}}function w(D){a[D.line]=D.column,O()}function j(){let D;for(;s._index<c.length;){const M=c[s._index];if(typeof M=="string")for(D=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===D&&s._bufferIndex<M.length;)S(M.charCodeAt(s._bufferIndex));else S(M)}}function S(D){f=f(D)}function C(D){je(D)?(s.line++,s.column=1,s.offset+=D===-3?2:1,O()):D!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===c[s._index].length&&(s._bufferIndex=-1,s._index++)),d.previous=D}function N(D,M){const q=M||{};return q.type=D,q.start=y(),d.events.push(["enter",q,d]),u.push(q),q}function R(D){const M=u.pop();return M.end=y(),d.events.push(["exit",M,d]),M}function P(D,M){$(D,M.from)}function I(D,M){M.restore()}function F(D,M){return q;function q(Z,W,ee){let ce,se,ve,_;return Array.isArray(Z)?H(Z):"tokenize"in Z?H([Z]):A(Z);function A(V){return Q;function Q(J){const de=J!==null&&V[J],me=J!==null&&V.null,ye=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(me)?me:me?[me]:[]];return H(ye)(J)}}function H(V){return ce=V,se=0,V.length===0?ee:k(V[se])}function k(V){return Q;function Q(J){return _=ne(),ve=V,V.partial||(d.currentConstruct=V),V.name&&d.parser.constructs.disable.null.includes(V.name)?U():V.tokenize.call(M?Object.assign(Object.create(d),M):d,h,B,U)(J)}}function B(V){return D(ve,_),W}function U(V){return _.restore(),++se<ce.length?k(ce[se]):ee}}}function $(D,M){D.resolveAll&&!o.includes(D)&&o.push(D),D.resolve&&Mn(d.events,M,d.events.length-M,D.resolve(d.events.slice(M),d)),D.resolveTo&&(d.events=D.resolveTo(d.events,d))}function ne(){const D=y(),M=d.previous,q=d.currentConstruct,Z=d.events.length,W=Array.from(u);return{from:Z,restore:ee};function ee(){s=D,d.previous=M,d.currentConstruct=q,d.events.length=Z,u=W,O()}}function O(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function gk(e,t){const i=t.start._index,s=t.start._bufferIndex,a=t.end._index,o=t.end._bufferIndex;let c;if(i===a)c=[e[i].slice(s,o)];else{if(c=e.slice(i,a),s>-1){const u=c[0];typeof u=="string"?c[0]=u.slice(s):c.shift()}o>0&&c.push(e[a].slice(0,o))}return c}function bk(e,t){let i=-1;const s=[];let a;for(;++i<e.length;){const o=e[i];let c;if(typeof o=="string")c=o;else switch(o){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=t?" ":"	";break}case-1:{if(!t&&a)continue;c=" ";break}default:c=String.fromCharCode(o)}a=o===-2,s.push(c)}return s.join("")}function vk(e){const s={constructs:CN([fk,...(e||{}).extensions||[]]),content:a(MN),defined:[],document:a(ON),flow:a(ek),lazy:{},string:a(ik),text:a(rk)};return s;function a(o){return c;function c(u){return xk(s,o,u)}}}function yk(e){for(;!ef(e););return e}const Sh=/[\0\t\n\r]/g;function wk(){let e=1,t="",i=!0,s;return a;function a(o,c,u){const h=[];let d,f,p,x,b;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(c||void 0).decode(o)),p=0,t="",i&&(o.charCodeAt(0)===65279&&p++,i=void 0);p<o.length;){if(Sh.lastIndex=p,d=Sh.exec(o),x=d&&d.index!==void 0?d.index:o.length,b=o.charCodeAt(x),!d){t=o.slice(p);break}if(b===10&&p===x&&s)h.push(-3),s=void 0;else switch(s&&(h.push(-5),s=void 0),p<x&&(h.push(o.slice(p,x)),e+=x-p),b){case 0:{h.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,h.push(-2);e++<f;)h.push(-1);break}case 10:{h.push(-4),e=1;break}default:s=!0,e=1}p=x+1}return u&&(s&&h.push(-5),t&&h.push(t),h.push(null)),h}}const _k=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jk(e){return e.replace(_k,Nk)}function Nk(e,t,i){if(t)return t;if(i.charCodeAt(0)===35){const a=i.charCodeAt(1),o=a===120||a===88;return Ym(i.slice(o?2:1),o?16:10)}return ac(i)||e}const of={}.hasOwnProperty;function kk(e,t,i){return typeof t!="string"&&(i=t,t=void 0),Ck(i)(yk(vk(i).document().write(wk()(e,t,!0))))}function Ck(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(st),autolinkProtocol:ne,autolinkEmail:ne,atxHeading:o(We),blockQuote:o(me),characterEscape:ne,characterReference:ne,codeFenced:o(ye),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:o(ye,c),codeText:o(Ne,c),codeTextData:ne,data:ne,codeFlowValue:ne,definition:o(He),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:o(ke),hardBreakEscape:o(ot),hardBreakTrailing:o(ot),htmlFlow:o(Xe,c),htmlFlowData:ne,htmlText:o(Xe,c),htmlTextData:ne,image:o(nt),label:c,link:o(st),listItem:o(be),listItemValue:x,listOrdered:o(ae,p),listUnordered:o(ae),paragraph:o(we),reference:k,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:o(We),strong:o(Pe),thematicBreak:o(Pt)},exit:{atxHeading:h(),atxHeadingSequence:P,autolink:h(),autolinkEmail:de,autolinkProtocol:J,blockQuote:h(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:V,characterReference:Q,codeFenced:h(j),codeFencedFence:w,codeFencedFenceInfo:b,codeFencedFenceMeta:y,codeFlowValue:O,codeIndented:h(S),codeText:h(W),codeTextData:O,data:O,definition:h(),definitionDestinationString:R,definitionLabelString:C,definitionTitleString:N,emphasis:h(),hardBreakEscape:h(M),hardBreakTrailing:h(M),htmlFlow:h(q),htmlFlowData:O,htmlText:h(Z),htmlTextData:O,image:h(ce),label:ve,labelText:se,lineEnding:D,link:h(ee),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:B,resourceDestinationString:_,resourceTitleString:A,resource:H,setextHeading:h($),setextHeadingLineSequence:F,setextHeadingText:I,strong:h(),thematicBreak:h()}};lf(t,(e||{}).mdastExtensions||[]);const i={};return s;function s(X){let oe={type:"root",children:[]};const ge={stack:[oe],tokenStack:[],config:t,enter:u,exit:d,buffer:c,resume:f,data:i},Se=[];let Re=-1;for(;++Re<X.length;)if(X[Re][1].type==="listOrdered"||X[Re][1].type==="listUnordered")if(X[Re][0]==="enter")Se.push(Re);else{const ut=Se.pop();Re=a(X,ut,Re)}for(Re=-1;++Re<X.length;){const ut=t[X[Re][0]];of.call(ut,X[Re][1].type)&&ut[X[Re][1].type].call(Object.assign({sliceSerialize:X[Re][2].sliceSerialize},ge),X[Re][1])}if(ge.tokenStack.length>0){const ut=ge.tokenStack[ge.tokenStack.length-1];(ut[1]||Ah).call(ge,void 0,ut[0])}for(oe.position={start:Wn(X.length>0?X[0][1].start:{line:1,column:1,offset:0}),end:Wn(X.length>0?X[X.length-2][1].end:{line:1,column:1,offset:0})},Re=-1;++Re<t.transforms.length;)oe=t.transforms[Re](oe)||oe;return oe}function a(X,oe,ge){let Se=oe-1,Re=-1,ut=!1,bt,kt,mn,fn;for(;++Se<=ge;){const vt=X[Se];switch(vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{vt[0]==="enter"?Re++:Re--,fn=void 0;break}case"lineEndingBlank":{vt[0]==="enter"&&(bt&&!fn&&!Re&&!mn&&(mn=Se),fn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fn=void 0}if(!Re&&vt[0]==="enter"&&vt[1].type==="listItemPrefix"||Re===-1&&vt[0]==="exit"&&(vt[1].type==="listUnordered"||vt[1].type==="listOrdered")){if(bt){let Dt=Se;for(kt=void 0;Dt--;){const It=X[Dt];if(It[1].type==="lineEnding"||It[1].type==="lineEndingBlank"){if(It[0]==="exit")continue;kt&&(X[kt][1].type="lineEndingBlank",ut=!0),It[1].type="lineEnding",kt=Dt}else if(!(It[1].type==="linePrefix"||It[1].type==="blockQuotePrefix"||It[1].type==="blockQuotePrefixWhitespace"||It[1].type==="blockQuoteMarker"||It[1].type==="listItemIndent"))break}mn&&(!kt||mn<kt)&&(bt._spread=!0),bt.end=Object.assign({},kt?X[kt][1].start:vt[1].end),X.splice(kt||Se,0,["exit",bt,vt[2]]),Se++,ge++}if(vt[1].type==="listItemPrefix"){const Dt={type:"listItem",_spread:!1,start:Object.assign({},vt[1].start),end:void 0};bt=Dt,X.splice(Se,0,["enter",Dt,vt[2]]),Se++,ge++,mn=void 0,fn=!0}}}return X[oe][1]._spread=ut,ge}function o(X,oe){return ge;function ge(Se){u.call(this,X(Se),Se),oe&&oe.call(this,Se)}}function c(){this.stack.push({type:"fragment",children:[]})}function u(X,oe,ge){this.stack[this.stack.length-1].children.push(X),this.stack.push(X),this.tokenStack.push([oe,ge||void 0]),X.position={start:Wn(oe.start),end:void 0}}function h(X){return oe;function oe(ge){X&&X.call(this,ge),d.call(this,ge)}}function d(X,oe){const ge=this.stack.pop(),Se=this.tokenStack.pop();if(Se)Se[0].type!==X.type&&(oe?oe.call(this,X,Se[0]):(Se[1]||Ah).call(this,X,Se[0]));else throw new Error("Cannot close `"+X.type+"` ("+Pr({start:X.start,end:X.end})+"): its not open");ge.position.end=Wn(X.end)}function f(){return NN(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function x(X){if(this.data.expectingFirstListItemValue){const oe=this.stack[this.stack.length-2];oe.start=Number.parseInt(this.sliceSerialize(X),10),this.data.expectingFirstListItemValue=void 0}}function b(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.lang=X}function y(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.meta=X}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function j(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.value=X.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.value=X.replace(/(\r?\n|\r)$/g,"")}function C(X){const oe=this.resume(),ge=this.stack[this.stack.length-1];ge.label=oe,ge.identifier=Ji(this.sliceSerialize(X)).toLowerCase()}function N(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.title=X}function R(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.url=X}function P(X){const oe=this.stack[this.stack.length-1];if(!oe.depth){const ge=this.sliceSerialize(X).length;oe.depth=ge}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function F(X){const oe=this.stack[this.stack.length-1];oe.depth=this.sliceSerialize(X).codePointAt(0)===61?1:2}function $(){this.data.setextHeadingSlurpLineEnding=void 0}function ne(X){const ge=this.stack[this.stack.length-1].children;let Se=ge[ge.length-1];(!Se||Se.type!=="text")&&(Se=Ue(),Se.position={start:Wn(X.start),end:void 0},ge.push(Se)),this.stack.push(Se)}function O(X){const oe=this.stack.pop();oe.value+=this.sliceSerialize(X),oe.position.end=Wn(X.end)}function D(X){const oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ge=oe.children[oe.children.length-1];ge.position.end=Wn(X.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(oe.type)&&(ne.call(this,X),O.call(this,X))}function M(){this.data.atHardBreak=!0}function q(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.value=X}function Z(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.value=X}function W(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.value=X}function ee(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=oe,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function ce(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=oe,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function se(X){const oe=this.sliceSerialize(X),ge=this.stack[this.stack.length-2];ge.label=jk(oe),ge.identifier=Ji(oe).toLowerCase()}function ve(){const X=this.stack[this.stack.length-1],oe=this.resume(),ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,ge.type==="link"){const Se=X.children;ge.children=Se}else ge.alt=oe}function _(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.url=X}function A(){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.title=X}function H(){this.data.inReference=void 0}function k(){this.data.referenceType="collapsed"}function B(X){const oe=this.resume(),ge=this.stack[this.stack.length-1];ge.label=oe,ge.identifier=Ji(this.sliceSerialize(X)).toLowerCase(),this.data.referenceType="full"}function U(X){this.data.characterReferenceType=X.type}function V(X){const oe=this.sliceSerialize(X),ge=this.data.characterReferenceType;let Se;ge?(Se=Ym(oe,ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Se=ac(oe);const Re=this.stack[this.stack.length-1];Re.value+=Se}function Q(X){const oe=this.stack.pop();oe.position.end=Wn(X.end)}function J(X){O.call(this,X);const oe=this.stack[this.stack.length-1];oe.url=this.sliceSerialize(X)}function de(X){O.call(this,X);const oe=this.stack[this.stack.length-1];oe.url="mailto:"+this.sliceSerialize(X)}function me(){return{type:"blockquote",children:[]}}function ye(){return{type:"code",lang:null,meta:null,value:""}}function Ne(){return{type:"inlineCode",value:""}}function He(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ke(){return{type:"emphasis",children:[]}}function We(){return{type:"heading",depth:0,children:[]}}function ot(){return{type:"break"}}function Xe(){return{type:"html",value:""}}function nt(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function ae(X){return{type:"list",ordered:X.type==="listOrdered",start:null,spread:X._spread,children:[]}}function be(X){return{type:"listItem",spread:X._spread,checked:null,children:[]}}function we(){return{type:"paragraph",children:[]}}function Pe(){return{type:"strong",children:[]}}function Ue(){return{type:"text",value:""}}function Pt(){return{type:"thematicBreak"}}}function Wn(e){return{line:e.line,column:e.column,offset:e.offset}}function lf(e,t){let i=-1;for(;++i<t.length;){const s=t[i];Array.isArray(s)?lf(e,s):Ek(e,s)}}function Ek(e,t){let i;for(i in t)if(of.call(t,i))switch(i){case"canContainEols":{const s=t[i];s&&e[i].push(...s);break}case"transforms":{const s=t[i];s&&e[i].push(...s);break}case"enter":case"exit":{const s=t[i];s&&Object.assign(e[i],s);break}}}function Ah(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Pr({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Pr({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Pr({start:t.start,end:t.end})+") is still open")}function Sk(e){const t=this;t.parser=i;function i(s){return kk(s,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Ak(e,t){const i={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,i),e.applyData(t,i)}function Tk(e,t){const i={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,i),[e.applyData(t,i),{type:"text",value:`
`}]}function Pk(e,t){const i=t.value?t.value+`
`:"",s={},a=t.lang?t.lang.split(/\s+/):[];a.length>0&&(s.className=["language-"+a[0]]);let o={type:"element",tagName:"code",properties:s,children:[{type:"text",value:i}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function Ik(e,t){const i={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Rk(e,t){const i={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Mk(e,t){const i=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),a=sr(s.toLowerCase()),o=e.footnoteOrder.indexOf(s);let c,u=e.footnoteCounts.get(s);u===void 0?(u=0,e.footnoteOrder.push(s),c=e.footnoteOrder.length):c=o+1,u+=1,e.footnoteCounts.set(s,u);const h={type:"element",tagName:"a",properties:{href:"#"+i+"fn-"+a,id:i+"fnref-"+a+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};e.patch(t,h);const d={type:"element",tagName:"sup",properties:{},children:[h]};return e.patch(t,d),e.applyData(t,d)}function Lk(e,t){const i={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Ok(e,t){if(e.options.allowDangerousHtml){const i={type:"raw",value:t.value};return e.patch(t,i),e.applyData(t,i)}}function cf(e,t){const i=t.referenceType;let s="]";if(i==="collapsed"?s+="[]":i==="full"&&(s+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+s}];const a=e.all(t),o=a[0];o&&o.type==="text"?o.value="["+o.value:a.unshift({type:"text",value:"["});const c=a[a.length-1];return c&&c.type==="text"?c.value+=s:a.push({type:"text",value:s}),a}function Dk(e,t){const i=String(t.identifier).toUpperCase(),s=e.definitionById.get(i);if(!s)return cf(e,t);const a={src:sr(s.url||""),alt:t.alt};s.title!==null&&s.title!==void 0&&(a.title=s.title);const o={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,o),e.applyData(t,o)}function zk(e,t){const i={src:sr(t.url)};t.alt!==null&&t.alt!==void 0&&(i.alt=t.alt),t.title!==null&&t.title!==void 0&&(i.title=t.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Fk(e,t){const i={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,i);const s={type:"element",tagName:"code",properties:{},children:[i]};return e.patch(t,s),e.applyData(t,s)}function Bk(e,t){const i=String(t.identifier).toUpperCase(),s=e.definitionById.get(i);if(!s)return cf(e,t);const a={href:sr(s.url||"")};s.title!==null&&s.title!==void 0&&(a.title=s.title);const o={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function Uk(e,t){const i={href:sr(t.url)};t.title!==null&&t.title!==void 0&&(i.title=t.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Vk(e,t,i){const s=e.all(t),a=i?Hk(i):uf(t),o={},c=[];if(typeof t.checked=="boolean"){const f=s[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},s.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<s.length;){const f=s[u];(a||u!==0||f.type!=="element"||f.tagName!=="p")&&c.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?c.push(...f.children):c.push(f)}const h=s[s.length-1];h&&(a||h.type!=="element"||h.tagName!=="p")&&c.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:o,children:c};return e.patch(t,d),e.applyData(t,d)}function Hk(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const i=e.children;let s=-1;for(;!t&&++s<i.length;)t=uf(i[s])}return t}function uf(e){const t=e.spread;return t??e.children.length>1}function qk(e,t){const i={},s=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(i.start=t.start);++a<s.length;){const c=s[a];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){i.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:i,children:e.wrap(s,!0)};return e.patch(t,o),e.applyData(t,o)}function $k(e,t){const i={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Gk(e,t){const i={type:"root",children:e.wrap(e.all(t))};return e.patch(t,i),e.applyData(t,i)}function Wk(e,t){const i={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Zk(e,t){const i=e.all(t),s=i.shift(),a=[];if(s){const c={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],c),a.push(c)}if(i.length>0){const c={type:"element",tagName:"tbody",properties:{},children:e.wrap(i,!0)},u=nc(t.children[1]),h=Hm(t.children[t.children.length-1]);u&&h&&(c.position={start:u,end:h}),a.push(c)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,o),e.applyData(t,o)}function Kk(e,t,i){const s=i?i.children:void 0,o=(s?s.indexOf(t):1)===0?"th":"td",c=i&&i.type==="table"?i.align:void 0,u=c?c.length:t.children.length;let h=-1;const d=[];for(;++h<u;){const p=t.children[h],x={},b=c?c[h]:void 0;b&&(x.align=b);let y={type:"element",tagName:o,properties:x,children:[]};p&&(y.children=e.all(p),e.patch(p,y),y=e.applyData(p,y)),d.push(y)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,f),e.applyData(t,f)}function Yk(e,t){const i={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}const Th=9,Ph=32;function Xk(e){const t=String(e),i=/\r?\n|\r/g;let s=i.exec(t),a=0;const o=[];for(;s;)o.push(Ih(t.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=i.exec(t);return o.push(Ih(t.slice(a),a>0,!1)),o.join("")}function Ih(e,t,i){let s=0,a=e.length;if(t){let o=e.codePointAt(s);for(;o===Th||o===Ph;)s++,o=e.codePointAt(s)}if(i){let o=e.codePointAt(a-1);for(;o===Th||o===Ph;)a--,o=e.codePointAt(a-1)}return a>s?e.slice(s,a):""}function Qk(e,t){const i={type:"text",value:Xk(String(t.value))};return e.patch(t,i),e.applyData(t,i)}function Jk(e,t){const i={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,i),e.applyData(t,i)}const eC={blockquote:Ak,break:Tk,code:Pk,delete:Ik,emphasis:Rk,footnoteReference:Mk,heading:Lk,html:Ok,imageReference:Dk,image:zk,inlineCode:Fk,linkReference:Bk,link:Uk,listItem:Vk,list:qk,paragraph:$k,root:Gk,strong:Wk,table:Zk,tableCell:Yk,tableRow:Kk,text:Qk,thematicBreak:Jk,toml:Ps,yaml:Ps,definition:Ps,footnoteDefinition:Ps};function Ps(){}const df=-1,Sa=0,Rr=1,ua=2,cc=3,uc=4,dc=5,hc=6,hf=7,pf=8,Rh=typeof self=="object"?self:globalThis,tC=(e,t)=>{const i=(a,o)=>(e.set(o,a),a),s=a=>{if(e.has(a))return e.get(a);const[o,c]=t[a];switch(o){case Sa:case df:return i(c,a);case Rr:{const u=i([],a);for(const h of c)u.push(s(h));return u}case ua:{const u=i({},a);for(const[h,d]of c)u[s(h)]=s(d);return u}case cc:return i(new Date(c),a);case uc:{const{source:u,flags:h}=c;return i(new RegExp(u,h),a)}case dc:{const u=i(new Map,a);for(const[h,d]of c)u.set(s(h),s(d));return u}case hc:{const u=i(new Set,a);for(const h of c)u.add(s(h));return u}case hf:{const{name:u,message:h}=c;return i(new Rh[u](h),a)}case pf:return i(BigInt(c),a);case"BigInt":return i(Object(BigInt(c)),a);case"ArrayBuffer":return i(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:u}=new Uint8Array(c);return i(new DataView(u),c)}}return i(new Rh[o](c),a)};return s},Mh=e=>tC(new Map,e)(0),Gi="",{toString:nC}={},{keys:iC}=Object,Er=e=>{const t=typeof e;if(t!=="object"||!e)return[Sa,t];const i=nC.call(e).slice(8,-1);switch(i){case"Array":return[Rr,Gi];case"Object":return[ua,Gi];case"Date":return[cc,Gi];case"RegExp":return[uc,Gi];case"Map":return[dc,Gi];case"Set":return[hc,Gi];case"DataView":return[Rr,i]}return i.includes("Array")?[Rr,i]:i.includes("Error")?[hf,i]:[ua,i]},Is=([e,t])=>e===Sa&&(t==="function"||t==="symbol"),rC=(e,t,i,s)=>{const a=(c,u)=>{const h=s.push(c)-1;return i.set(u,h),h},o=c=>{if(i.has(c))return i.get(c);let[u,h]=Er(c);switch(u){case Sa:{let f=c;switch(h){case"bigint":u=pf,f=c.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+h);f=null;break;case"undefined":return a([df],c)}return a([u,f],c)}case Rr:{if(h){let x=c;return h==="DataView"?x=new Uint8Array(c.buffer):h==="ArrayBuffer"&&(x=new Uint8Array(c)),a([h,[...x]],c)}const f=[],p=a([u,f],c);for(const x of c)f.push(o(x));return p}case ua:{if(h)switch(h){case"BigInt":return a([h,c.toString()],c);case"Boolean":case"Number":case"String":return a([h,c.valueOf()],c)}if(t&&"toJSON"in c)return o(c.toJSON());const f=[],p=a([u,f],c);for(const x of iC(c))(e||!Is(Er(c[x])))&&f.push([o(x),o(c[x])]);return p}case cc:return a([u,c.toISOString()],c);case uc:{const{source:f,flags:p}=c;return a([u,{source:f,flags:p}],c)}case dc:{const f=[],p=a([u,f],c);for(const[x,b]of c)(e||!(Is(Er(x))||Is(Er(b))))&&f.push([o(x),o(b)]);return p}case hc:{const f=[],p=a([u,f],c);for(const x of c)(e||!Is(Er(x)))&&f.push(o(x));return p}}const{message:d}=c;return a([u,{name:h,message:d}],c)};return o},Lh=(e,{json:t,lossy:i}={})=>{const s=[];return rC(!(t||i),!!t,new Map,s)(e),s},da=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Mh(Lh(e,t)):structuredClone(e):(e,t)=>Mh(Lh(e,t));function sC(e,t){const i=[{type:"text",value:""}];return t>1&&i.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),i}function aC(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function oC(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=e.options.footnoteBackContent||sC,s=e.options.footnoteBackLabel||aC,a=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",c=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let h=-1;for(;++h<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[h]);if(!d)continue;const f=e.all(d),p=String(d.identifier).toUpperCase(),x=sr(p.toLowerCase());let b=0;const y=[],w=e.footnoteCounts.get(p);for(;w!==void 0&&++b<=w;){y.length>0&&y.push({type:"text",value:" "});let C=typeof i=="string"?i:i(h,b);typeof C=="string"&&(C={type:"text",value:C}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+x+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(h,b),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const j=f[f.length-1];if(j&&j.type==="element"&&j.tagName==="p"){const C=j.children[j.children.length-1];C&&C.type==="text"?C.value+=" ":j.children.push({type:"text",value:" "}),j.children.push(...y)}else f.push(...y);const S={type:"element",tagName:"li",properties:{id:t+"fn-"+x},children:e.wrap(f,!0)};e.patch(d,S),u.push(S)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...da(c),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const mf=(function(e){if(e==null)return dC;if(typeof e=="function")return Aa(e);if(typeof e=="object")return Array.isArray(e)?lC(e):cC(e);if(typeof e=="string")return uC(e);throw new Error("Expected function, string, or object as test")});function lC(e){const t=[];let i=-1;for(;++i<e.length;)t[i]=mf(e[i]);return Aa(s);function s(...a){let o=-1;for(;++o<t.length;)if(t[o].apply(this,a))return!0;return!1}}function cC(e){const t=e;return Aa(i);function i(s){const a=s;let o;for(o in e)if(a[o]!==t[o])return!1;return!0}}function uC(e){return Aa(t);function t(i){return i&&i.type===e}}function Aa(e){return t;function t(i,s,a){return!!(hC(i)&&e.call(this,i,typeof s=="number"?s:void 0,a||void 0))}}function dC(){return!0}function hC(e){return e!==null&&typeof e=="object"&&"type"in e}const ff=[],pC=!0,Oh=!1,mC="skip";function fC(e,t,i,s){let a;typeof t=="function"&&typeof i!="function"?(s=i,i=t):a=t;const o=mf(a),c=s?-1:1;u(e,void 0,[])();function u(h,d,f){const p=h&&typeof h=="object"?h:{};if(typeof p.type=="string"){const b=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(h.type+(b?"<"+b+">":""))+")"})}return x;function x(){let b=ff,y,w,j;if((!t||o(h,d,f[f.length-1]||void 0))&&(b=xC(i(h,f)),b[0]===Oh))return b;if("children"in h&&h.children){const S=h;if(S.children&&b[0]!==mC)for(w=(s?S.children.length:-1)+c,j=f.concat(S);w>-1&&w<S.children.length;){const C=S.children[w];if(y=u(C,w,j)(),y[0]===Oh)return y;w=typeof y[1]=="number"?y[1]:w+c}}return b}}}function xC(e){return Array.isArray(e)?e:typeof e=="number"?[pC,e]:e==null?ff:[e]}function xf(e,t,i,s){let a,o,c;typeof t=="function"&&typeof i!="function"?(o=void 0,c=t,a=i):(o=t,c=i,a=s),fC(e,o,u,a);function u(h,d){const f=d[d.length-1],p=f?f.children.indexOf(h):void 0;return c(h,p,f)}}const yl={}.hasOwnProperty,gC={};function bC(e,t){const i=t||gC,s=new Map,a=new Map,o=new Map,c={...eC,...i.handlers},u={all:d,applyData:yC,definitionById:s,footnoteById:a,footnoteCounts:o,footnoteOrder:[],handlers:c,one:h,options:i,patch:vC,wrap:_C};return xf(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?s:a,x=String(f.identifier).toUpperCase();p.has(x)||p.set(x,f)}}),u;function h(f,p){const x=f.type,b=u.handlers[x];if(yl.call(u.handlers,x)&&b)return b(u,f,p);if(u.options.passThrough&&u.options.passThrough.includes(x)){if("children"in f){const{children:w,...j}=f,S=da(j);return S.children=u.all(f),S}return da(f)}return(u.options.unknownHandler||wC)(u,f,p)}function d(f){const p=[];if("children"in f){const x=f.children;let b=-1;for(;++b<x.length;){const y=u.one(x[b],f);if(y){if(b&&x[b-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=Dh(y.value)),!Array.isArray(y)&&y.type==="element")){const w=y.children[0];w&&w.type==="text"&&(w.value=Dh(w.value))}Array.isArray(y)?p.push(...y):p.push(y)}}}return p}}function vC(e,t){e.position&&(t.position=nN(e))}function yC(e,t){let i=t;if(e&&e.data){const s=e.data.hName,a=e.data.hChildren,o=e.data.hProperties;if(typeof s=="string")if(i.type==="element")i.tagName=s;else{const c="children"in i?i.children:[i];i={type:"element",tagName:s,properties:{},children:c}}i.type==="element"&&o&&Object.assign(i.properties,da(o)),"children"in i&&i.children&&a!==null&&a!==void 0&&(i.children=a)}return i}function wC(e,t){const i=t.data||{},s="value"in t&&!(yl.call(i,"hProperties")||yl.call(i,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function _C(e,t){const i=[];let s=-1;for(t&&i.push({type:"text",value:`
`});++s<e.length;)s&&i.push({type:"text",value:`
`}),i.push(e[s]);return t&&e.length>0&&i.push({type:"text",value:`
`}),i}function Dh(e){let t=0,i=e.charCodeAt(t);for(;i===9||i===32;)t++,i=e.charCodeAt(t);return e.slice(t)}function zh(e,t){const i=bC(e,t),s=i.one(e,void 0),a=oC(i),o=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&o.children.push({type:"text",value:`
`},a),o}function jC(e,t){return e&&"run"in e?async function(i,s){const a=zh(i,{file:s,...t});await e.run(a,s)}:function(i,s){return zh(i,{file:s,...e||t})}}function Fh(e){if(e)throw e}var zo,Bh;function NC(){if(Bh)return zo;Bh=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(d){return typeof Array.isArray=="function"?Array.isArray(d):t.call(d)==="[object Array]"},o=function(d){if(!d||t.call(d)!=="[object Object]")return!1;var f=e.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!f&&!p)return!1;var x;for(x in d);return typeof x>"u"||e.call(d,x)},c=function(d,f){i&&f.name==="__proto__"?i(d,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):d[f.name]=f.newValue},u=function(d,f){if(f==="__proto__")if(e.call(d,f)){if(s)return s(d,f).value}else return;return d[f]};return zo=function h(){var d,f,p,x,b,y,w=arguments[0],j=1,S=arguments.length,C=!1;for(typeof w=="boolean"&&(C=w,w=arguments[1]||{},j=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});j<S;++j)if(d=arguments[j],d!=null)for(f in d)p=u(w,f),x=u(d,f),w!==x&&(C&&x&&(o(x)||(b=a(x)))?(b?(b=!1,y=p&&a(p)?p:[]):y=p&&o(p)?p:{},c(w,{name:f,newValue:h(C,y,x)})):typeof x<"u"&&c(w,{name:f,newValue:x}));return w},zo}var kC=NC();const Fo=pn(kC);function wl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function CC(){const e=[],t={run:i,use:s};return t;function i(...a){let o=-1;const c=a.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);u(null,...a);function u(h,...d){const f=e[++o];let p=-1;if(h){c(h);return}for(;++p<a.length;)(d[p]===null||d[p]===void 0)&&(d[p]=a[p]);a=d,f?EC(f,u)(...d):c(null,...d)}}function s(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function EC(e,t){let i;return s;function s(...c){const u=e.length>c.length;let h;u&&c.push(a);try{h=e.apply(this,c)}catch(d){const f=d;if(u&&i)throw f;return a(f)}u||(h&&h.then&&typeof h.then=="function"?h.then(o,a):h instanceof Error?a(h):o(h))}function a(c,...u){i||(i=!0,t(c,...u))}function o(c){a(null,c)}}const En={basename:SC,dirname:AC,extname:TC,join:PC,sep:"/"};function SC(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Qr(e);let i=0,s=-1,a=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(o){i=a+1;break}}else s<0&&(o=!0,s=a+1);return s<0?"":e.slice(i,s)}if(t===e)return"";let c=-1,u=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(o){i=a+1;break}}else c<0&&(o=!0,c=a+1),u>-1&&(e.codePointAt(a)===t.codePointAt(u--)?u<0&&(s=a):(u=-1,s=c));return i===s?s=c:s<0&&(s=e.length),e.slice(i,s)}function AC(e){if(Qr(e),e.length===0)return".";let t=-1,i=e.length,s;for(;--i;)if(e.codePointAt(i)===47){if(s){t=i;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function TC(e){Qr(e);let t=e.length,i=-1,s=0,a=-1,o=0,c;for(;t--;){const u=e.codePointAt(t);if(u===47){if(c){s=t+1;break}continue}i<0&&(c=!0,i=t+1),u===46?a<0?a=t:o!==1&&(o=1):a>-1&&(o=-1)}return a<0||i<0||o===0||o===1&&a===i-1&&a===s+1?"":e.slice(a,i)}function PC(...e){let t=-1,i;for(;++t<e.length;)Qr(e[t]),e[t]&&(i=i===void 0?e[t]:i+"/"+e[t]);return i===void 0?".":IC(i)}function IC(e){Qr(e);const t=e.codePointAt(0)===47;let i=RC(e,!t);return i.length===0&&!t&&(i="."),i.length>0&&e.codePointAt(e.length-1)===47&&(i+="/"),t?"/"+i:i}function RC(e,t){let i="",s=0,a=-1,o=0,c=-1,u,h;for(;++c<=e.length;){if(c<e.length)u=e.codePointAt(c);else{if(u===47)break;u=47}if(u===47){if(!(a===c-1||o===1))if(a!==c-1&&o===2){if(i.length<2||s!==2||i.codePointAt(i.length-1)!==46||i.codePointAt(i.length-2)!==46){if(i.length>2){if(h=i.lastIndexOf("/"),h!==i.length-1){h<0?(i="",s=0):(i=i.slice(0,h),s=i.length-1-i.lastIndexOf("/")),a=c,o=0;continue}}else if(i.length>0){i="",s=0,a=c,o=0;continue}}t&&(i=i.length>0?i+"/..":"..",s=2)}else i.length>0?i+="/"+e.slice(a+1,c):i=e.slice(a+1,c),s=c-a-1;a=c,o=0}else u===46&&o>-1?o++:o=-1}return i}function Qr(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const MC={cwd:LC};function LC(){return"/"}function _l(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function OC(e){if(typeof e=="string")e=new URL(e);else if(!_l(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return DC(e)}function DC(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let i=-1;for(;++i<t.length;)if(t.codePointAt(i)===37&&t.codePointAt(i+1)===50){const s=t.codePointAt(i+2);if(s===70||s===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const Bo=["history","path","basename","stem","extname","dirname"];class gf{constructor(t){let i;t?_l(t)?i={path:t}:typeof t=="string"||zC(t)?i={value:t}:i=t:i={},this.cwd="cwd"in i?"":MC.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<Bo.length;){const o=Bo[s];o in i&&i[o]!==void 0&&i[o]!==null&&(this[o]=o==="history"?[...i[o]]:i[o])}let a;for(a in i)Bo.includes(a)||(this[a]=i[a])}get basename(){return typeof this.path=="string"?En.basename(this.path):void 0}set basename(t){Vo(t,"basename"),Uo(t,"basename"),this.path=En.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?En.dirname(this.path):void 0}set dirname(t){Uh(this.basename,"dirname"),this.path=En.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?En.extname(this.path):void 0}set extname(t){if(Uo(t,"extname"),Uh(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=En.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){_l(t)&&(t=OC(t)),Vo(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?En.basename(this.path,this.extname):void 0}set stem(t){Vo(t,"stem"),Uo(t,"stem"),this.path=En.join(this.dirname||"",t+(this.extname||""))}fail(t,i,s){const a=this.message(t,i,s);throw a.fatal=!0,a}info(t,i,s){const a=this.message(t,i,s);return a.fatal=void 0,a}message(t,i,s){const a=new Tt(t,i,s);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Uo(e,t){if(e&&e.includes(En.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+En.sep+"`")}function Vo(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Uh(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function zC(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const FC=(function(e){const s=this.constructor.prototype,a=s[e],o=function(){return a.apply(o,arguments)};return Object.setPrototypeOf(o,s),o}),BC={}.hasOwnProperty;class pc extends FC{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=CC()}copy(){const t=new pc;let i=-1;for(;++i<this.attachers.length;){const s=this.attachers[i];t.use(...s)}return t.data(Fo(!0,{},this.namespace)),t}data(t,i){return typeof t=="string"?arguments.length===2?($o("data",this.frozen),this.namespace[t]=i,this):BC.call(this.namespace,t)&&this.namespace[t]||void 0:t?($o("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[i,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const a=i.call(t,...s);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const i=Rs(t),s=this.parser||this.Parser;return Ho("parse",s),s(String(i),i)}process(t,i){const s=this;return this.freeze(),Ho("process",this.parser||this.Parser),qo("process",this.compiler||this.Compiler),i?a(void 0,i):new Promise(a);function a(o,c){const u=Rs(t),h=s.parse(u);s.run(h,u,function(f,p,x){if(f||!p||!x)return d(f);const b=p,y=s.stringify(b,x);HC(y)?x.value=y:x.result=y,d(f,x)});function d(f,p){f||!p?c(f):o?o(p):i(void 0,p)}}}processSync(t){let i=!1,s;return this.freeze(),Ho("processSync",this.parser||this.Parser),qo("processSync",this.compiler||this.Compiler),this.process(t,a),Hh("processSync","process",i),s;function a(o,c){i=!0,Fh(o),s=c}}run(t,i,s){Vh(t),this.freeze();const a=this.transformers;return!s&&typeof i=="function"&&(s=i,i=void 0),s?o(void 0,s):new Promise(o);function o(c,u){const h=Rs(i);a.run(t,h,d);function d(f,p,x){const b=p||t;f?u(f):c?c(b):s(void 0,b,x)}}}runSync(t,i){let s=!1,a;return this.run(t,i,o),Hh("runSync","run",s),a;function o(c,u){Fh(c),a=u,s=!0}}stringify(t,i){this.freeze();const s=Rs(i),a=this.compiler||this.Compiler;return qo("stringify",a),Vh(t),a(t,s)}use(t,...i){const s=this.attachers,a=this.namespace;if($o("use",this.frozen),t!=null)if(typeof t=="function")h(t,i);else if(typeof t=="object")Array.isArray(t)?u(t):c(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(d){if(typeof d=="function")h(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[f,...p]=d;h(f,p)}else c(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function c(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(a.settings=Fo(!0,a.settings,d.settings))}function u(d){let f=-1;if(d!=null)if(Array.isArray(d))for(;++f<d.length;){const p=d[f];o(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function h(d,f){let p=-1,x=-1;for(;++p<s.length;)if(s[p][0]===d){x=p;break}if(x===-1)s.push([d,...f]);else if(f.length>0){let[b,...y]=f;const w=s[x][1];wl(w)&&wl(b)&&(b=Fo(!0,w,b)),s[x]=[d,b,...y]}}}}const UC=new pc().freeze();function Ho(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function qo(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function $o(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Vh(e){if(!wl(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Hh(e,t,i){if(!i)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Rs(e){return VC(e)?e:new gf(e)}function VC(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function HC(e){return typeof e=="string"||qC(e)}function qC(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $C="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",qh=[],$h={allowDangerousHtml:!0},GC=/^(https?|ircs?|mailto|xmpp)$/i,WC=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ZC(e){const t=KC(e),i=YC(e);return XC(t.runSync(t.parse(i),i),e)}function KC(e){const t=e.rehypePlugins||qh,i=e.remarkPlugins||qh,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...$h}:$h;return UC().use(Sk).use(i).use(jC,s).use(t)}function YC(e){const t=e.children||"",i=new gf;return typeof t=="string"&&(i.value=t),i}function XC(e,t){const i=t.allowedElements,s=t.allowElement,a=t.components,o=t.disallowedElements,c=t.skipHtml,u=t.unwrapDisallowed,h=t.urlTransform||QC;for(const f of WC)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+$C+f.id,void 0);return xf(e,d),oN(e,{Fragment:n.Fragment,components:a,ignoreInvalidStyle:!0,jsx:n.jsx,jsxs:n.jsxs,passKeys:!0,passNode:!0});function d(f,p,x){if(f.type==="raw"&&x&&typeof p=="number")return c?x.children.splice(p,1):x.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let b;for(b in Lo)if(Object.hasOwn(Lo,b)&&Object.hasOwn(f.properties,b)){const y=f.properties[b],w=Lo[b];(w===null||w.includes(f.tagName))&&(f.properties[b]=h(String(y||""),b,f))}}if(f.type==="element"){let b=i?!i.includes(f.tagName):o?o.includes(f.tagName):!1;if(!b&&s&&typeof p=="number"&&(b=!s(f,p,x)),b&&x&&typeof p=="number")return u&&f.children?x.children.splice(p,1,...f.children):x.children.splice(p,1),p}}}function QC(e){const t=e.indexOf(":"),i=e.indexOf("?"),s=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||i!==-1&&t>i||s!==-1&&t>s||GC.test(e.slice(0,t))?e:""}async function bf(e){const t=Qv(new Date),i=sl(new Date,7),s=new Date;s.setHours(0,0,0,0);const a=tt($e(he,"orders"),Oe("restaurantId","==",e),Oe("createdAt",">=",wn.fromDate(sl(new Date,30)))),c=(await Zt(a)).docs.map(j=>j.data());let u=0,h=0,d=0,f=0,p=0,x=0;const b={};c.forEach(j=>{const S=j.createdAt?.toDate?.()||new Date(j.createdAt),C=["DELIVERED","PAID","DISPATCHED","delivered","paid","dispatched","completed"].includes(j.status?.toUpperCase?.()||j.status);j.items&&Array.isArray(j.items)&&j.items.forEach(N=>{const R=N.name||N.title||"Item Desconhecido",P=N.quantity||1;b[R]=(b[R]||0)+P}),S>=t&&C&&(u+=Number(j.total)||0,h++),S>=i&&C&&(d+=Number(j.total)||0),S>=s&&C&&(p+=Number(j.total)||0,x++),(j.status==="CANCELLED"||j.status==="cancelled")&&f++});const y=Object.entries(b).sort(([,j],[,S])=>S-j).slice(0,3).map(([j,S])=>`${j} (${S}x)`),w=c.length>0?(f/c.length*100).toFixed(1)+"%":"0%";return{revenueMonth:u,ordersMonth:h,revenueLast7Days:d,ticketAverage:h>0?u/h:0,cancelledRate:w,topProducts:y,todayRevenue:p,todayOrders:x}}function JC(e){return`
DADOS REAIS DO RESTAURANTE (ltimos 30 dias):
- Faturamento Ms Atual: R$ ${e.revenueMonth.toFixed(2)}
- Faturamento 7 Dias: R$ ${e.revenueLast7Days.toFixed(2)}
- Faturamento Hoje: R$ ${e.todayRevenue.toFixed(2)}
- Pedidos Hoje: ${e.todayOrders}
- Total Pedidos (Ms): ${e.ordersMonth}
- Ticket Mdio: R$ ${e.ticketAverage.toFixed(2)}
- Taxa de Cancelamento: ${e.cancelledRate}
- Top 3 Mais Vendidos: ${e.topProducts.length>0?e.topProducts.join(", "):"Nenhum dado"}
  `.trim()}typeof window<"u"&&(window.addEventListener("online",()=>{ie.success("Conexo restaurada!",{duration:3e3})}),window.addEventListener("offline",()=>{ie.error("Sem conexo com a internet",{description:"Usando dados offline quando disponvel",duration:5e3})}));async function eE(e,t,i={}){const{fallback:s,silent:a=!1,retries:o=2,retryDelay:c=1e3,successMessage:u}=i;if(!navigator.onLine&&s!==void 0)return a||ie.info("Modo Offline",{description:"Usando dados locais",duration:3e3}),s;let h;for(let d=0;d<=o;d++)try{const f=await e();return u&&ie.success(u,{duration:2e3}),f}catch(f){if(h=f,console.error(`[safeRequest] Attempt ${d+1}/${o+1} failed:`,f.message),nE(f))break;if(d<o){const p=c*Math.pow(2,d);console.log(`[safeRequest] Retrying in ${p}ms...`),await iE(p)}}if(console.error("[safeRequest] All retries exhausted:",t,h),!a){const d=tE(h);ie.error(d.title,{description:s!==void 0?"Ativando sistema de backup...":d.description,duration:5e3})}if(s!==void 0)return s;throw h}function tE(e){const t=e?.message?.toLowerCase()||"",i=e?.status||e?.response?.status;return i===429||t.includes("429")||t.includes("quota")?{title:"IA Ocupada",description:"Usando gerador local.",type:"quota"}:t.includes("network")||t.includes("fetch")||t.includes("cors")||!navigator.onLine?{title:"Sem Conexo",description:"Verifique sua internet.",type:"network"}:i===401||i===403||t.includes("unauthorized")||t.includes("forbidden")?{title:"Acesso Negado",description:"Faa login novamente.",type:"auth"}:i>=500||t.includes("internal")||t.includes("server")?{title:"Servidor Indisponvel",description:"Tente novamente em alguns minutos.",type:"server"}:{title:"Erro Inesperado",description:"Tente novamente mais tarde.",type:"unknown"}}function nE(e){const t=e?.status||e?.response?.status;return t>=400&&t<500&&t!==429}function iE(e){return new Promise(t=>setTimeout(t,e))}async function rE(e,t){const i=await bf(e),a=`
VOC  O EMPRATABRAIN, um analista de negcios snior especializado em restaurantes e delivery.

${JC(i)}

SUA MISSO:
Responda  pergunta do dono baseando-se ESTRITAMENTE nesses dados.
- Seja direto, curto e objetivo
- Use formatao Markdown (negrito para nmeros importantes, listas quando apropriado)
- D conselhos acionveis baseados nos dados
- Se o ticket mdio for baixo (< R$ 30), sugira combos
- Se o cancelamento for alto (> 5%), alerte sobre processos
- Se no houver dados suficientes, seja honesto e diga que precisa de mais vendas para anlise
- Responda sempre em portugus brasileiro

IMPORTANTE: No invente dados. Use apenas as informaes fornecidas acima.

PERGUNTA DO DONO: "${t}"
  `.trim();return await eE(async()=>(await ya.generateContent(a)).response.text(),"Erro ao consultar o EmprataBrain",{fallback:" No consegui analisar seus dados agora. O servio de IA est temporariamente indisponvel. Tente novamente em alguns instantes.",retries:2,retryDelay:1e3})}async function sE(e){try{const t=await bf(e),i=[];return t.ticketAverage>0&&t.ticketAverage<30&&i.push(" Como aumentar meu ticket mdio?"),parseFloat(t.cancelledRate)>5&&i.push(" Como reduzir cancelamentos?"),t.topProducts.length>0&&i.push(" Qual meu prato mais lucrativo?"),i.push(" Como esto minhas vendas hoje?"),i.push(" Que promoo voc sugere?"),i.slice(0,4)}catch{return[" Como esto minhas vendas hoje?"," Qual prato vende mais?"," Como diminuir cancelamentos?"," Me d uma ideia de promoo."]}}function aE(){const{user:e}=Ke(),[t,i]=T.useState([{id:"1",role:"assistant",content:`Ol${e?.displayName?`, ${e.displayName.split(" ")[0]}`:""}! Sou o **EmprataBrain**, seu consultor de negcios com IA. Acabei de analisar seus dados de vendas em tempo real. O que voc quer saber hoje? `,timestamp:new Date}]),[s,a]=T.useState(""),[o,c]=T.useState(!1),[u,h]=T.useState([]),d=T.useRef(null);T.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[t]),T.useEffect(()=>{e?.uid&&sE(e.uid).then(h)},[e?.uid]);const f=[{icon:nr,label:"Anlise de Vendas",prompt:"Como foram minhas vendas hoje comparadas a ontem?"},{icon:vn,label:"Clientes VIP",prompt:"Quais so meus 5 melhores clientes do ms?"},{icon:ui,label:"Top Produtos",prompt:"Quais so meus produtos mais vendidos?"},{icon:og,label:"Sugestes",prompt:"Que promoo voc sugere para aumentar vendas hoje?"}],p=async x=>{const b=x||s;if(!b.trim()||!e?.uid)return;const y={id:Date.now().toString(),role:"user",content:b,timestamp:new Date};i(w=>[...w,y]),a(""),c(!0);try{const w=await rE(e.uid,b),j={id:(Date.now()+1).toString(),role:"assistant",content:w,timestamp:new Date};i(S=>[...S,j])}catch{const j={id:(Date.now()+1).toString(),role:"assistant",content:"Desculpe, tive um problema de conexo neural. Tente novamente em alguns instantes. ",timestamp:new Date};i(S=>[...S,j])}finally{c(!1)}};return n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex flex-col h-[calc(100vh-200px)]",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-600 to-purple-900 flex items-center justify-center shadow-lg shadow-purple-500/20",children:n.jsx(fi,{size:24,className:"text-white"})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"font-bold text-white flex items-center gap-2",children:["EmprataBrain",n.jsx("span",{className:"text-[10px] bg-purple-600/30 text-purple-300 px-2 py-0.5 rounded uppercase",children:"Pro + RAG"})]}),n.jsx("p",{className:"text-xs text-white/40",children:"Inteligncia conectada aos seus dados reais"})]})]}),n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide",children:f.map((x,b)=>n.jsxs("button",{onClick:()=>p(x.prompt),disabled:o,className:"flex items-center gap-2 bg-[#1a1a1a] border border-white/10 rounded-full px-4 py-2 shrink-0 hover:border-purple-500/50 transition-colors disabled:opacity-50",children:[n.jsx(x.icon,{size:14,className:"text-purple-400"}),n.jsx("span",{className:"text-xs font-medium text-white/80",children:x.label})]},b))}),n.jsxs("div",{ref:d,className:"flex-1 overflow-y-auto space-y-4 mb-4 scroll-smooth",children:[t.map(x=>n.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex gap-3 ${x.role==="user"?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${x.role==="assistant"?"bg-purple-600/20 text-purple-400":"bg-white/10 text-white"}`,children:x.role==="assistant"?n.jsx(mu,{size:16}):n.jsx(Tn,{size:16})}),n.jsx("div",{className:`max-w-[85%] rounded-2xl p-4 ${x.role==="user"?"bg-primary text-black rounded-br-sm":"bg-[#1a1a1a] border border-white/5 text-white rounded-bl-sm"}`,children:x.role==="assistant"?n.jsx("div",{className:"text-sm prose prose-invert prose-sm max-w-none",children:n.jsx(ZC,{children:x.content})}):n.jsx("p",{className:"text-sm",children:x.content})})]},x.id)),o&&n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-600/20 flex items-center justify-center",children:n.jsx(mu,{size:16,className:"text-purple-400"})}),n.jsxs("div",{className:"bg-[#1a1a1a] border border-white/5 rounded-2xl rounded-bl-sm p-4 flex items-center gap-2",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),n.jsx("span",{className:"text-xs text-white/40 ml-2",children:"Analisando dados..."})]})]})]}),u.length>0&&t.length<4&&n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 -mx-4 px-4 scrollbar-hide",children:u.map((x,b)=>n.jsx("button",{onClick:()=>p(x),disabled:o,className:"whitespace-nowrap px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/5 rounded-full text-xs text-white/60 hover:text-white transition-colors disabled:opacity-50",children:x},b))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"w-12 h-12 bg-[#1a1a1a] border border-white/10 rounded-xl flex items-center justify-center text-white/40 hover:text-white hover:border-purple-500/50 transition-colors",children:n.jsx(lg,{size:20})}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("input",{value:s,onChange:x=>a(x.target.value),onKeyDown:x=>x.key==="Enter"&&!o&&p(),placeholder:"Pergunte sobre vendas, estoque ou estratgia...",disabled:o,className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl py-3 px-4 pr-12 text-white placeholder:text-white/30 focus:border-purple-500/50 outline-none transition-colors disabled:opacity-50"}),n.jsx("button",{onClick:()=>p(),disabled:!s.trim()||o,className:"absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-purple-500 transition-colors",children:o?n.jsx(Ee,{size:16,className:"animate-spin"}):n.jsx(ip,{size:16})})]})]}),n.jsx("p",{className:"text-center text-[10px] text-white/20 mt-3",children:"O EmprataBrain analisa dados reais do seu restaurante, mas pode cometer erros. Verifique informaes crticas."})]})}function oE(){const[e,t]=T.useState("HOME"),{user:i}=Ke(),[s,a]=T.useState(null);T.useEffect(()=>{if(!i)return;const c=Ot(ze(he,"users",i.uid),u=>{a(u.data()?.marketplace||{})});return()=>c()},[i]);const o=async()=>{if(!i)return;const c=!s?.isOpen;await Et(ze(he,"users",i.uid),{"marketplace.isOpen":c}),ie(c?" Loja ABERTA":" Loja FECHADA")};return n.jsxs("div",{className:"min-h-screen bg-[#050505] text-white font-sans flex flex-col pb-24",children:[n.jsxs("header",{className:"px-6 pt-12 pb-4 bg-gradient-to-b from-black/80 to-transparent sticky top-0 z-50 backdrop-blur-sm flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl font-black italic tracking-tighter",children:["Emprata",n.jsx("span",{className:"text-primary",children:".Admin"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:`w-2 h-2 rounded-full ${s?.isOpen?"bg-green-500 animate-pulse":"bg-red-500"}`}),n.jsx("span",{className:"text-xs font-bold text-white/60 uppercase",children:s?.isOpen?"Operao Online":"Loja Fechada"})]})]}),n.jsx("button",{onClick:o,className:`p-3 rounded-full border transition-all ${s?.isOpen?"bg-red-500/10 border-red-500/50 text-red-500":"bg-green-500/10 border-green-500/50 text-green-500"}`,children:n.jsx(np,{size:20})})]}),n.jsx("main",{className:"flex-1 px-4 relative",children:n.jsxs(Ye,{mode:"wait",children:[e==="HOME"&&n.jsx(Tj,{},"home"),e==="MENU"&&n.jsx(Pj,{},"menu"),e==="FINANCE"&&n.jsx(Ij,{},"finance"),e==="BRAIN"&&n.jsx(aE,{},"brain")]})}),n.jsxs("nav",{className:"fixed bottom-6 left-6 right-6 h-20 bg-[#121212]/90 backdrop-blur-xl border border-white/10 rounded-[2rem] shadow-[0_10px_40px_rgba(0,0,0,0.5)] flex justify-around items-center z-50 px-2",children:[n.jsx(Ms,{active:e==="HOME",onClick:()=>t("HOME"),icon:hi,label:"Loja"}),n.jsx(Ms,{active:e==="MENU",onClick:()=>t("MENU"),icon:Cl,label:"Cardpio"}),n.jsx("button",{onClick:()=>t("BRAIN"),className:`relative -top-6 w-16 h-16 rounded-full flex items-center justify-center border-4 border-[#050505] shadow-lg transition-all ${e==="BRAIN"?"bg-purple-600 scale-110":"bg-[#1a1a1a]"}`,children:n.jsx(fi,{size:28,className:e==="BRAIN"?"text-white":"text-purple-400"})}),n.jsx(Ms,{active:e==="FINANCE",onClick:()=>t("FINANCE"),icon:pi,label:"Caixa"}),n.jsx(Ms,{active:!1,onClick:()=>ie("Notificaes em breve"),icon:Nl,label:"Avisos"})]})]})}function Ms({active:e,onClick:t,icon:i,label:s}){return n.jsxs("button",{onClick:t,className:`flex flex-col items-center gap-1 transition-all ${e?"text-white scale-110":"text-white/30"}`,children:[n.jsx(i,{size:24,strokeWidth:e?2.5:2}),n.jsx("span",{className:"text-[9px] font-bold",children:s})]})}function lE(){const[e,t]=T.useState([]),[i,s]=T.useState([]),[a,o]=T.useState(""),[c,u]=T.useState(""),[h,d]=T.useState(!0),[f,p]=T.useState(!1),[x,b]=T.useState(null);T.useEffect(()=>{if(!rt.currentUser)return;const P=tt($e(he,"products"),Oe("restaurantId","==",rt.currentUser.uid)),I=Ot(P,F=>{const $=F.docs.map(ne=>({id:ne.id,...ne.data()}));t($),d(!1)});return()=>I()},[]);const y=[...new Set(e.map(P=>P.category||"Geral"))],w=e.filter(P=>{const I=P.name.toLowerCase().includes(a.toLowerCase()),F=!x||(P.category||"Geral")===x;return I&&F}),j=T.useCallback(P=>{if(P.trackStock&&P.stock!==void 0&&(i.find($=>$.id===P.id)?.quantity||0)>=P.stock){ie.error(`Estoque mximo: ${P.stock}`);return}s(I=>I.find($=>$.id===P.id)?I.map($=>$.id===P.id?{...$,quantity:$.quantity+1}:$):[...I,{...P,quantity:1}]),new Audio("/sounds/beep.mp3").play().catch(()=>{})},[i]),S=(P,I)=>{s(F=>F.map($=>{if($.id!==P)return $;const ne=$.quantity+I;return ne<=0?$:$.trackStock&&$.stock!==void 0&&ne>$.stock?(ie.error(`Estoque mximo: ${$.stock}`),$):{...$,quantity:ne}}).filter($=>$.quantity>0))},C=P=>{s(I=>I.filter(F=>F.id!==P))},N=i.reduce((P,I)=>P+I.price*I.quantity,0),R=async P=>{if(i.length===0){ie.error("Carrinho vazio");return}p(!0);try{const I={restaurantId:rt.currentUser?.uid,source:"POS",customer:{name:c||"Cliente Balco",uid:"walk-in"},items:i.map(F=>({id:F.id,name:F.name,price:F.price,quantity:F.quantity})),total:N,status:"PREPARING",paymentMethod:P,paymentStatus:"paid",isPaid:!0,createdAt:Lt(),deliveryPin:Math.floor(1e3+Math.random()*9e3).toString()};await fa($e(he,"orders"),I),ie.success(" Pedido enviado para cozinha!",{description:`Total: ${dn(N)}`}),s([]),u("")}catch(I){console.error("[POS] Order error:",I),ie.error("Erro ao criar pedido")}finally{p(!1)}};return T.useEffect(()=>{const P=I=>{I.key==="F2"&&document.getElementById("pos-search")?.focus(),I.key==="F4"&&i.length>0&&R("CARD"),I.key==="F5"&&i.length>0&&R("CASH")};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[i]),h?n.jsx("div",{className:"h-screen bg-[#121212] flex items-center justify-center",children:n.jsx(Ee,{className:"w-10 h-10 text-primary animate-spin"})}):n.jsxs("div",{className:"flex h-screen bg-[#121212] text-white overflow-hidden",children:[n.jsxs("div",{className:"flex-1 flex flex-col border-r border-white/10",children:[n.jsxs("div",{className:"p-4 bg-[#1a1a1a] border-b border-white/10",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ln,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/40",size:20}),n.jsx("input",{id:"pos-search",autoFocus:!0,value:a,onChange:P=>o(P.target.value),placeholder:"Buscar produto (F2)...",className:"w-full bg-[#0a0a0a] p-4 pl-12 rounded-xl text-lg font-bold border border-white/10 focus:border-primary outline-none transition-colors"})]}),n.jsxs("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1",children:[n.jsx("button",{onClick:()=>b(null),className:`px-4 py-2 rounded-full text-xs font-bold uppercase whitespace-nowrap transition-colors ${x?"bg-white/5 text-white/60 hover:bg-white/10":"bg-primary text-black"}`,children:"Todos"}),y.map(P=>n.jsx("button",{onClick:()=>b(P),className:`px-4 py-2 rounded-full text-xs font-bold uppercase whitespace-nowrap transition-colors ${x===P?"bg-primary text-black":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:P},P))]})]}),n.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[n.jsx("div",{className:"grid grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3",children:w.map(P=>{const I=P.trackStock&&P.stock!==void 0&&P.stock<5,F=P.trackStock&&P.stock===0;return n.jsxs(K.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>!F&&j(P),disabled:F,className:`bg-[#1a1a1a] p-4 rounded-xl border transition-all text-left group relative overflow-hidden ${F?"border-red-500/30 opacity-50 cursor-not-allowed":"border-white/5 hover:border-primary/50"}`,children:[P.imageUrl&&n.jsx("div",{className:"absolute inset-0 opacity-10",children:n.jsx("img",{src:P.imageUrl,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("h3",{className:"font-bold truncate text-sm",children:P.name}),n.jsx("p",{className:"text-primary font-mono font-bold mt-2 text-lg",children:dn(P.price)}),P.trackStock&&n.jsxs("div",{className:`flex items-center gap-1 mt-2 text-[10px] font-bold ${F?"text-red-400":I?"text-yellow-400":"text-white/30"}`,children:[n.jsx(ui,{size:10}),F?"ESGOTADO":`${P.stock} em estoque`]})]}),n.jsx("div",{className:"absolute top-2 right-2 bg-primary text-black p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(yn,{size:14})})]},P.id)})}),w.length===0&&n.jsxs("div",{className:"text-center py-20 text-white/30",children:[n.jsx(ui,{size:48,className:"mx-auto mb-4 opacity-30"}),n.jsx("p",{children:"Nenhum produto encontrado"})]})]})]}),n.jsxs("div",{className:"w-[420px] bg-[#0a0a0a] flex flex-col",children:[n.jsx("div",{className:"p-4 border-b border-white/10 bg-[#1a1a1a]",children:n.jsxs("div",{className:"relative",children:[n.jsx(Tn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30",size:18}),n.jsx("input",{value:c,onChange:P=>u(P.target.value),placeholder:"Nome do Cliente (Opcional)",className:"w-full bg-black/50 p-3 pl-10 rounded-lg border border-white/10 text-white outline-none focus:border-primary/50 transition-colors"})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsx(Ye,{mode:"popLayout",children:i.map(P=>n.jsxs(K.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},className:"flex justify-between items-center bg-white/5 p-3 rounded-xl border border-white/5",children:[n.jsxs("div",{className:"flex-1 min-w-0 mr-3",children:[n.jsx("p",{className:"font-bold text-sm truncate",children:P.name}),n.jsxs("p",{className:"text-xs text-white/40",children:[dn(P.price)," cada"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>S(P.id,-1),className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center hover:bg-white/20 transition-colors",children:n.jsx(Tl,{size:14})}),n.jsx("span",{className:"font-mono font-bold w-8 text-center",children:P.quantity}),n.jsx("button",{onClick:()=>S(P.id,1),className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center hover:bg-white/20 transition-colors",children:n.jsx(yn,{size:14})}),n.jsx("button",{onClick:()=>C(P.id),className:"w-8 h-8 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg flex items-center justify-center transition-colors",children:n.jsx(Lr,{size:14})})]})]},P.id))}),i.length===0&&n.jsxs("div",{className:"text-center py-16 text-white/20",children:[n.jsx(ui,{size:40,className:"mx-auto mb-3 opacity-30"}),n.jsx("p",{className:"text-sm",children:"Carrinho vazio"}),n.jsx("p",{className:"text-xs mt-1",children:"Clique nos produtos para adicionar"})]})]}),n.jsxs("div",{className:"p-4 bg-[#1a1a1a] border-t border-white/10",children:[n.jsxs("div",{className:"flex justify-between items-end mb-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-white/40 text-xs font-bold uppercase",children:"Total"}),n.jsxs("p",{className:"text-xs text-white/30",children:[i.length," ",i.length===1?"item":"itens"]})]}),n.jsx("span",{className:"text-4xl font-black text-green-400",children:dn(N)})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsxs("button",{onClick:()=>R("CARD"),disabled:f||i.length===0,className:"bg-blue-600 hover:bg-blue-500 disabled:opacity-30 disabled:cursor-not-allowed py-4 rounded-xl font-bold flex flex-col items-center justify-center gap-1 transition-colors",children:[n.jsx(Yn,{size:20}),n.jsx("span",{className:"text-xs",children:"Carto"}),n.jsx("span",{className:"text-[8px] text-white/50",children:"F4"})]}),n.jsxs("button",{onClick:()=>R("CASH"),disabled:f||i.length===0,className:"bg-green-600 hover:bg-green-500 disabled:opacity-30 disabled:cursor-not-allowed py-4 rounded-xl font-bold flex flex-col items-center justify-center gap-1 transition-colors",children:[n.jsx(Al,{size:20}),n.jsx("span",{className:"text-xs",children:"Dinheiro"}),n.jsx("span",{className:"text-[8px] text-white/50",children:"F5"})]}),n.jsxs("button",{onClick:()=>R("PIX"),disabled:f||i.length===0,className:"bg-purple-600 hover:bg-purple-500 disabled:opacity-30 disabled:cursor-not-allowed py-4 rounded-xl font-bold flex flex-col items-center justify-center gap-1 transition-colors",children:[n.jsx(mi,{size:20}),n.jsx("span",{className:"text-xs",children:"PIX"})]})]}),f&&n.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-50",children:n.jsx(Ee,{className:"w-10 h-10 animate-spin text-primary"})})]})]})]})}function Go({children:e}){const{user:t,loading:i}=Ke();return i?n.jsxs("div",{className:"fixed inset-0 h-screen w-screen bg-[#0a0a0a] flex items-center justify-center z-50",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("h1",{className:"text-4xl font-black italic tracking-tight",children:["Emprata",n.jsx("span",{className:"text-primary",children:".ai"})]})}),n.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[n.jsx("div",{className:"absolute inset-0 border-4 border-white/10 rounded-full"}),n.jsx("div",{className:"absolute inset-0 border-4 border-primary border-t-transparent rounded-full animate-spin"}),n.jsx("div",{className:"absolute inset-2 bg-primary/20 rounded-full blur-md animate-pulse"})]}),n.jsx("p",{className:"text-white/50 font-bold text-sm uppercase tracking-widest",children:"Carregando Emprata AI..."}),n.jsx("p",{className:"text-white/20 font-medium text-xs mt-4",children:"Conectando ao servidor"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-primary/5 via-transparent to-transparent pointer-events-none"})]}):t?n.jsx(n.Fragment,{children:e}):(console.log(" [ProtectedRoute] No user, redirecting to /auth"),n.jsx(Dr,{to:"/auth",replace:!0}))}function Gh({feature:e,children:t,redirectTo:i="/subscription"}){const{checkAccess:s,isLoading:a}=ir(),o=Ml(),c=T.useRef(!1),u=s(e);return T.useEffect(()=>{if(!u&&!a&&!c.current){const h=tr(e);ie.error("Acesso Negado",{description:`Este recurso requer o plano ${bi[h].label}`,duration:5e3}),c.current=!0}},[u,a,e]),T.useEffect(()=>{c.current=!1},[o.pathname]),a?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0a]",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):u?t:n.jsx(Dr,{to:i,state:{from:o},replace:!0})}function cE(){const{user:e,loading:t}=Ke(),i=localStorage.getItem("emprata_mode");return t?null:e?i==="OWNER"?n.jsx(Dr,{to:"/dashboard",replace:!0}):n.jsx(Dr,{to:"/delivery",replace:!0}):n.jsx(wb,{})}function uE(){return n.jsxs(mg,{children:[n.jsx(sb,{position:"top-center",richColors:!0,toastOptions:{style:{background:"#18181b",border:"1px solid rgba(255,255,255,0.1)",color:"#fff"}}}),n.jsxs(fg,{children:[n.jsx(Be,{path:"/",element:n.jsx(cE,{})}),n.jsx(Be,{path:"/auth",element:n.jsx(Cb,{})}),n.jsx(Be,{path:"/menu/:slug",element:n.jsx(pd,{})}),n.jsx(Be,{path:"/menu/:slug/table/:tableNum",element:n.jsx(pd,{})}),n.jsx(Be,{path:"/privacy",element:n.jsx(Bv,{})}),n.jsx(Be,{path:"/terms",element:n.jsx(Uv,{})}),n.jsx(Be,{path:"/track/:orderId",element:n.jsx(fj,{})}),n.jsx(Be,{path:"/kitchen-mode",element:n.jsx(jd,{})}),n.jsx(Be,{path:"/driver",element:n.jsx(xj,{})}),n.jsx(Be,{path:"/waiter",element:n.jsx(_j,{})}),n.jsx(Be,{path:"/waiter-login",element:n.jsx(jj,{})}),n.jsx(Be,{path:"/staff-login",element:n.jsx(Nj,{})}),n.jsx(Be,{path:"/apps",element:n.jsx(kj,{})}),n.jsx(Be,{path:"/owner",element:n.jsx(Go,{children:n.jsx(oE,{})})}),n.jsx(Be,{path:"/pos",element:n.jsx(Go,{children:n.jsx(lE,{})})}),n.jsxs(Be,{element:n.jsx(Go,{children:n.jsx(bb,{})}),children:[n.jsx(Be,{path:"/dashboard",element:n.jsx(iw,{})}),n.jsx(Be,{path:"/journey",element:n.jsx(P_,{})}),n.jsx(Be,{path:"/menu-builder",element:n.jsx(i1,{})}),n.jsx(Be,{path:"/kitchen-display",element:n.jsx(jd,{})}),n.jsx(Be,{path:"/staff",element:n.jsx(v1,{})}),n.jsx(Be,{path:"/store-settings",element:n.jsx(P1,{})}),n.jsx(Be,{path:"/profile",element:n.jsx(w1,{})}),n.jsx(Be,{path:"/studio",element:n.jsx(b1,{})}),n.jsx(Be,{path:"/subscription",element:n.jsx(T1,{})}),n.jsx(Be,{path:"/pricing",element:n.jsx(C1,{})}),n.jsx(Be,{path:"/qr-studio",element:n.jsx(S_,{})}),n.jsx(Be,{path:"/finance",element:n.jsx(j1,{})}),n.jsx(Be,{path:"/dispatch",element:n.jsx(Gh,{feature:"driver_app_access",children:n.jsx(jw,{})})}),n.jsx(Be,{path:"/intelligence",element:n.jsx(Gh,{feature:"ai_insights",children:n.jsx(A1,{})})})]}),n.jsxs(Be,{element:n.jsx(vb,{}),children:[n.jsx(Be,{path:"/delivery",element:n.jsx(Wd,{})}),n.jsx(Be,{path:"/search",element:n.jsx(Wd,{})}),n.jsx(Be,{path:"/me",element:n.jsx(sh,{})}),n.jsx(Be,{path:"/me/orders",element:n.jsx(sh,{})})]}),n.jsx(Be,{path:"*",element:n.jsx(Vv,{})})]})]})}function dE(){const[e,t]=T.useState(!0),[i,s]=T.useState(!1);T.useEffect(()=>{t(navigator.onLine),s(!navigator.onLine);const o=()=>{t(!0),setTimeout(()=>s(!1),3e3)},c=()=>{t(!1),s(!0)};return window.addEventListener("online",o),window.addEventListener("offline",c),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",c)}},[]);const a=()=>{window.location.reload()};return n.jsx(Ye,{children:i&&n.jsx(K.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:`fixed top-0 left-0 right-0 z-[100] px-4 py-3 ${e?"bg-green-500":"bg-red-500"}`,children:n.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-3",children:e?n.jsxs(n.Fragment,{children:[n.jsx(K.div,{initial:{scale:0},animate:{scale:1},className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center",children:""}),n.jsx("span",{className:"font-bold text-sm",children:"Conexo restaurada! "})]}):n.jsxs(n.Fragment,{children:[n.jsx(cg,{className:"w-5 h-5"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-bold text-sm block",children:"Voc est Offline"}),n.jsx("span",{className:"text-xs text-white/80",children:"Modo de Contingncia Ativado. Algumas funes podem no funcionar."})]})]})}),!e&&n.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold transition-colors",children:[n.jsx(Pl,{className:"w-4 h-4"}),"Tentar Novamente"]})]})})})}Dg.createRoot(document.getElementById("root")).render(n.jsx(te.StrictMode,{children:n.jsx(xp,{children:n.jsxs(lb,{children:[n.jsx(dE,{}),n.jsx(uE,{})]})})}));
