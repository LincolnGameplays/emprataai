import{j as e,C as qr,A as Be,m as Q,U as cs,S as Fs,L as Xi,a as Dt,b as kr,c as ts,B as $r,d as _s,e as Gr,f as Lh,g as es,h as ot,M as id,D as Us,i as qt,k as ad,l as dn,H as nd,n as Ja,o as js,Z as Bt,p as Ns,q as _i,r as Vs,s as Hs,T as Ji,X as Lt,t as ve,u as Ba,v as Wr,w as Zs,P as Oh,x as en,y as Dh,z as Bh,E as un,F as Cr,G as ct,I as hn,J as ks,Q as mn,K as Ds,N as Zr,O as Er,R as at,V as $t,W as qs,Y as rd,_ as Kr,$ as zh,a0 as Fh,a1 as Yr,a2 as Qr,a3 as Uh,a4 as Vh,a5 as Hh,a6 as ml,a7 as pl,a8 as Sr,a9 as Ar,aa as Tr,ab as pi,ac as od,ad as qh,ae as $i,af as tn,ag as sn,ah as Rs,ai as Vt,aj as fl,ak as ld,al as $h,am as Gh,an as Wh,ao as Xr,ap as Zh,aq as Jr,ar as cd,as as dd,at as Kh,au as Yh,av as ea,aw as Qh,ax as Xh,ay as Jh,az as Bs,aA as ud,aB as hd,aC as em,aD as tm,aE as sm,aF as xl,aG as im,aH as am,aI as nm,aJ as rm,aK as om,aL as lm,aM as cm,aN as dm,aO as um,aP as hm,aQ as mm}from"./vendor-ui-CzzzQCMj.js";import{b as pm,g as ms,a as k,R as K,c as fm,u as gt,d as eo,O as md,L as Ve,e as pd,f as fd,h as xm,r as xd,N as Gi,i as gm,j as Qn,B as vm,k as bm,l as Me}from"./vendor-react-BWPgFAjo.js";import{_ as wm,C as ym,r as gl,a as _m,g as jm,b as Nm,c as to,d as km,i as gd,p as Cm,u as Em,F as Sm,e as Am,f as Tm,h as Pm,q as We,l as so,o as Ks,w as Ie,j as ze,k as Et,G as Im,m as Mm,n as Te,s as Ot,t as xt,v as zs,x as Rm,y as Lm,z as Om,A as Dm,B as vl,D as Bm,E as Gt,H as pn,T as ds,I as ut,J as bl,K as vd}from"./vendor-firebase-Czky8gFj.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var Ca={},wl;function zm(){if(wl)return Ca;wl=1;var a=pm();return Ca.createRoot=a.createRoot,Ca.hydrateRoot=a.hydrateRoot,Ca}var Fm=zm();const Um=ms(Fm);var Xn,yl;function Vm(){if(yl)return Xn;yl=1;var a=typeof Element<"u",s=typeof Map=="function",i=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function o(c,d){if(c===d)return!0;if(c&&d&&typeof c=="object"&&typeof d=="object"){if(c.constructor!==d.constructor)return!1;var f,m,u;if(Array.isArray(c)){if(f=c.length,f!=d.length)return!1;for(m=f;m--!==0;)if(!o(c[m],d[m]))return!1;return!0}var x;if(s&&c instanceof Map&&d instanceof Map){if(c.size!==d.size)return!1;for(x=c.entries();!(m=x.next()).done;)if(!d.has(m.value[0]))return!1;for(x=c.entries();!(m=x.next()).done;)if(!o(m.value[1],d.get(m.value[0])))return!1;return!0}if(i&&c instanceof Set&&d instanceof Set){if(c.size!==d.size)return!1;for(x=c.entries();!(m=x.next()).done;)if(!d.has(m.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(c)&&ArrayBuffer.isView(d)){if(f=c.length,f!=d.length)return!1;for(m=f;m--!==0;)if(c[m]!==d[m])return!1;return!0}if(c.constructor===RegExp)return c.source===d.source&&c.flags===d.flags;if(c.valueOf!==Object.prototype.valueOf&&typeof c.valueOf=="function"&&typeof d.valueOf=="function")return c.valueOf()===d.valueOf();if(c.toString!==Object.prototype.toString&&typeof c.toString=="function"&&typeof d.toString=="function")return c.toString()===d.toString();if(u=Object.keys(c),f=u.length,f!==Object.keys(d).length)return!1;for(m=f;m--!==0;)if(!Object.prototype.hasOwnProperty.call(d,u[m]))return!1;if(a&&c instanceof Element)return!1;for(m=f;m--!==0;)if(!((u[m]==="_owner"||u[m]==="__v"||u[m]==="__o")&&c.$$typeof)&&!o(c[u[m]],d[u[m]]))return!1;return!0}return c!==c&&d!==d}return Xn=function(d,f){try{return o(d,f)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},Xn}var Hm=Vm();const qm=ms(Hm);var Jn,_l;function $m(){if(_l)return Jn;_l=1;var a=function(s,i,r,o,c,d,f,m){if(!s){var u;if(i===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[r,o,c,d,f,m],h=0;u=new Error(i.replace(/%s/g,function(){return x[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return Jn=a,Jn}var Gm=$m();const jl=ms(Gm);var er,Nl;function Wm(){return Nl||(Nl=1,er=function(s,i,r,o){var c=r?r.call(o,s,i):void 0;if(c!==void 0)return!!c;if(s===i)return!0;if(typeof s!="object"||!s||typeof i!="object"||!i)return!1;var d=Object.keys(s),f=Object.keys(i);if(d.length!==f.length)return!1;for(var m=Object.prototype.hasOwnProperty.bind(i),u=0;u<d.length;u++){var x=d[u];if(!m(x))return!1;var h=s[x],g=i[x];if(c=r?r.call(o,h,g,x):void 0,c===!1||c===void 0&&h!==g)return!1}return!0}),er}var Zm=Wm();const Km=ms(Zm);var bd=(a=>(a.BASE="base",a.BODY="body",a.HEAD="head",a.HTML="html",a.LINK="link",a.META="meta",a.NOSCRIPT="noscript",a.SCRIPT="script",a.STYLE="style",a.TITLE="title",a.FRAGMENT="Symbol(react.fragment)",a))(bd||{}),tr={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},kl=Object.values(bd),io={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ym=Object.entries(io).reduce((a,[s,i])=>(a[i]=s,a),{}),Ht="data-rh",xi={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},gi=(a,s)=>{for(let i=a.length-1;i>=0;i-=1){const r=a[i];if(Object.prototype.hasOwnProperty.call(r,s))return r[s]}return null},Qm=a=>{let s=gi(a,"title");const i=gi(a,xi.TITLE_TEMPLATE);if(Array.isArray(s)&&(s=s.join("")),i&&s)return i.replace(/%s/g,()=>s);const r=gi(a,xi.DEFAULT_TITLE);return s||r||void 0},Xm=a=>gi(a,xi.ON_CHANGE_CLIENT_STATE)||(()=>{}),sr=(a,s)=>s.filter(i=>typeof i[a]<"u").map(i=>i[a]).reduce((i,r)=>({...i,...r}),{}),Jm=(a,s)=>s.filter(i=>typeof i.base<"u").map(i=>i.base).reverse().reduce((i,r)=>{if(!i.length){const o=Object.keys(r);for(let c=0;c<o.length;c+=1){const f=o[c].toLowerCase();if(a.indexOf(f)!==-1&&r[f])return i.concat(r)}}return i},[]),ep=a=>console&&typeof console.warn=="function"&&console.warn(a),zi=(a,s,i)=>{const r={};return i.filter(o=>Array.isArray(o[a])?!0:(typeof o[a]<"u"&&ep(`Helmet: ${a} should be of type "Array". Instead found type "${typeof o[a]}"`),!1)).map(o=>o[a]).reverse().reduce((o,c)=>{const d={};c.filter(m=>{let u;const x=Object.keys(m);for(let g=0;g<x.length;g+=1){const b=x[g],w=b.toLowerCase();s.indexOf(w)!==-1&&!(u==="rel"&&m[u].toLowerCase()==="canonical")&&!(w==="rel"&&m[w].toLowerCase()==="stylesheet")&&(u=w),s.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(u=b)}if(!u||!m[u])return!1;const h=m[u].toLowerCase();return r[u]||(r[u]={}),d[u]||(d[u]={}),r[u][h]?!1:(d[u][h]=!0,!0)}).reverse().forEach(m=>o.push(m));const f=Object.keys(d);for(let m=0;m<f.length;m+=1){const u=f[m],x={...r[u],...d[u]};r[u]=x}return o},[]).reverse()},tp=(a,s)=>{if(Array.isArray(a)&&a.length){for(let i=0;i<a.length;i+=1)if(a[i][s])return!0}return!1},sp=a=>({baseTag:Jm(["href"],a),bodyAttributes:sr("bodyAttributes",a),defer:gi(a,xi.DEFER),encode:gi(a,xi.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:sr("htmlAttributes",a),linkTags:zi("link",["rel","href"],a),metaTags:zi("meta",["name","charset","http-equiv","property","itemprop"],a),noscriptTags:zi("noscript",["innerHTML"],a),onChangeClientState:Xm(a),scriptTags:zi("script",["src","innerHTML"],a),styleTags:zi("style",["cssText"],a),title:Qm(a),titleAttributes:sr("titleAttributes",a),prioritizeSeoTags:tp(a,xi.PRIORITIZE_SEO_TAGS)}),wd=a=>Array.isArray(a)?a.join(""):a,ip=(a,s)=>{const i=Object.keys(a);for(let r=0;r<i.length;r+=1)if(s[i[r]]&&s[i[r]].includes(a[i[r]]))return!0;return!1},ir=(a,s)=>Array.isArray(a)?a.reduce((i,r)=>(ip(r,s)?i.priority.push(r):i.default.push(r),i),{priority:[],default:[]}):{default:a,priority:[]},Cl=(a,s)=>({...a,[s]:void 0}),ap=["noscript","script","style"],Pr=(a,s=!0)=>s===!1?String(a):String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),yd=a=>Object.keys(a).reduce((s,i)=>{const r=typeof a[i]<"u"?`${i}="${a[i]}"`:`${i}`;return s?`${s} ${r}`:r},""),np=(a,s,i,r)=>{const o=yd(i),c=wd(s);return o?`<${a} ${Ht}="true" ${o}>${Pr(c,r)}</${a}>`:`<${a} ${Ht}="true">${Pr(c,r)}</${a}>`},rp=(a,s,i=!0)=>s.reduce((r,o)=>{const c=o,d=Object.keys(c).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,x)=>{const h=typeof c[x]>"u"?x:`${x}="${Pr(c[x],i)}"`;return u?`${u} ${h}`:h},""),f=c.innerHTML||c.cssText||"",m=ap.indexOf(a)===-1;return`${r}<${a} ${Ht}="true" ${d}${m?"/>":`>${f}</${a}>`}`},""),_d=(a,s={})=>Object.keys(a).reduce((i,r)=>{const o=io[r];return i[o||r]=a[r],i},s),op=(a,s,i)=>{const r={key:s,[Ht]:!0},o=_d(i,r);return[K.createElement("title",o,s)]},za=(a,s)=>s.map((i,r)=>{const o={key:r,[Ht]:!0};return Object.keys(i).forEach(c=>{const f=io[c]||c;if(f==="innerHTML"||f==="cssText"){const m=i.innerHTML||i.cssText;o.dangerouslySetInnerHTML={__html:m}}else o[f]=i[c]}),K.createElement(a,o)}),Mt=(a,s,i=!0)=>{switch(a){case"title":return{toComponent:()=>op(a,s.title,s.titleAttributes),toString:()=>np(a,s.title,s.titleAttributes,i)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>_d(s),toString:()=>yd(s)};default:return{toComponent:()=>za(a,s),toString:()=>rp(a,s,i)}}},lp=({metaTags:a,linkTags:s,scriptTags:i,encode:r})=>{const o=ir(a,tr.meta),c=ir(s,tr.link),d=ir(i,tr.script);return{priorityMethods:{toComponent:()=>[...za("meta",o.priority),...za("link",c.priority),...za("script",d.priority)],toString:()=>`${Mt("meta",o.priority,r)} ${Mt("link",c.priority,r)} ${Mt("script",d.priority,r)}`},metaTags:o.default,linkTags:c.default,scriptTags:d.default}},cp=a=>{const{baseTag:s,bodyAttributes:i,encode:r=!0,htmlAttributes:o,noscriptTags:c,styleTags:d,title:f="",titleAttributes:m,prioritizeSeoTags:u}=a;let{linkTags:x,metaTags:h,scriptTags:g}=a,b={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:b,linkTags:x,metaTags:h,scriptTags:g}=lp(a)),{priority:b,base:Mt("base",s,r),bodyAttributes:Mt("bodyAttributes",i,r),htmlAttributes:Mt("htmlAttributes",o,r),link:Mt("link",x,r),meta:Mt("meta",h,r),noscript:Mt("noscript",c,r),script:Mt("script",g,r),style:Mt("style",d,r),title:Mt("title",{title:f,titleAttributes:m},r)}},Ir=cp,Ea=[],jd=!!(typeof window<"u"&&window.document&&window.document.createElement),Mr=class{instances=[];canUseDOM=jd;context;value={setHelmet:a=>{this.context.helmet=a},helmetInstances:{get:()=>this.canUseDOM?Ea:this.instances,add:a=>{(this.canUseDOM?Ea:this.instances).push(a)},remove:a=>{const s=(this.canUseDOM?Ea:this.instances).indexOf(a);(this.canUseDOM?Ea:this.instances).splice(s,1)}}};constructor(a,s){this.context=a,this.canUseDOM=s||!1,s||(a.helmet=Ir({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},dp={},Nd=K.createContext(dp),kd=class Cd extends k.Component{static canUseDOM=jd;helmetData;constructor(s){super(s),this.helmetData=new Mr(this.props.context||{},Cd.canUseDOM)}render(){return K.createElement(Nd.Provider,{value:this.helmetData.value},this.props.children)}},ci=(a,s)=>{const i=document.head||document.querySelector("head"),r=i.querySelectorAll(`${a}[${Ht}]`),o=[].slice.call(r),c=[];let d;return s&&s.length&&s.forEach(f=>{const m=document.createElement(a);for(const u in f)if(Object.prototype.hasOwnProperty.call(f,u))if(u==="innerHTML")m.innerHTML=f.innerHTML;else if(u==="cssText")m.styleSheet?m.styleSheet.cssText=f.cssText:m.appendChild(document.createTextNode(f.cssText));else{const x=u,h=typeof f[x]>"u"?"":f[x];m.setAttribute(u,h)}m.setAttribute(Ht,"true"),o.some((u,x)=>(d=x,m.isEqualNode(u)))?o.splice(d,1):c.push(m)}),o.forEach(f=>f.parentNode?.removeChild(f)),c.forEach(f=>i.appendChild(f)),{oldTags:o,newTags:c}},Rr=(a,s)=>{const i=document.getElementsByTagName(a)[0];if(!i)return;const r=i.getAttribute(Ht),o=r?r.split(","):[],c=[...o],d=Object.keys(s);for(const f of d){const m=s[f]||"";i.getAttribute(f)!==m&&i.setAttribute(f,m),o.indexOf(f)===-1&&o.push(f);const u=c.indexOf(f);u!==-1&&c.splice(u,1)}for(let f=c.length-1;f>=0;f-=1)i.removeAttribute(c[f]);o.length===c.length?i.removeAttribute(Ht):i.getAttribute(Ht)!==d.join(",")&&i.setAttribute(Ht,d.join(","))},up=(a,s)=>{typeof a<"u"&&document.title!==a&&(document.title=wd(a)),Rr("title",s)},El=(a,s)=>{const{baseTag:i,bodyAttributes:r,htmlAttributes:o,linkTags:c,metaTags:d,noscriptTags:f,onChangeClientState:m,scriptTags:u,styleTags:x,title:h,titleAttributes:g}=a;Rr("body",r),Rr("html",o),up(h,g);const b={baseTag:ci("base",i),linkTags:ci("link",c),metaTags:ci("meta",d),noscriptTags:ci("noscript",f),scriptTags:ci("script",u),styleTags:ci("style",x)},w={},j={};Object.keys(b).forEach(C=>{const{newTags:A,oldTags:E}=b[C];A.length&&(w[C]=A),E.length&&(j[C]=b[C].oldTags)}),s&&s(),m(a,w,j)},Fi=null,hp=a=>{Fi&&cancelAnimationFrame(Fi),a.defer?Fi=requestAnimationFrame(()=>{El(a,()=>{Fi=null})}):(El(a),Fi=null)},mp=hp,Sl=class extends k.Component{rendered=!1;shouldComponentUpdate(a){return!Km(a,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:a}=this.props.context;a.remove(this),this.emitChange()}emitChange(){const{helmetInstances:a,setHelmet:s}=this.props.context;let i=null;const r=sp(a.get().map(o=>{const c={...o.props};return delete c.context,c}));kd.canUseDOM?mp(r):Ir&&(i=Ir(r)),s(i)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:a}=this.props.context;a.add(this),this.emitChange()}render(){return this.init(),null}},pp=class extends k.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(a){return!qm(Cl(this.props,"helmetData"),Cl(a,"helmetData"))}mapNestedChildrenToProps(a,s){if(!s)return null;switch(a.type){case"script":case"noscript":return{innerHTML:s};case"style":return{cssText:s};default:throw new Error(`<${a.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(a,s,i,r){return{...s,[a.type]:[...s[a.type]||[],{...i,...this.mapNestedChildrenToProps(a,r)}]}}mapObjectTypeChildren(a,s,i,r){switch(a.type){case"title":return{...s,[a.type]:r,titleAttributes:{...i}};case"body":return{...s,bodyAttributes:{...i}};case"html":return{...s,htmlAttributes:{...i}};default:return{...s,[a.type]:{...i}}}}mapArrayTypeChildrenToProps(a,s){let i={...s};return Object.keys(a).forEach(r=>{i={...i,[r]:a[r]}}),i}warnOnInvalidChildren(a,s){return jl(kl.some(i=>a.type===i),typeof a.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${kl.join(", ")} are allowed. Helmet does not support rendering <${a.type}> elements. Refer to our API for more information.`),jl(!s||typeof s=="string"||Array.isArray(s)&&!s.some(i=>typeof i!="string"),`Helmet expects a string as a child of <${a.type}>. Did you forget to wrap your children in braces? ( <${a.type}>{\`\`}</${a.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(a,s){let i={};return K.Children.forEach(a,r=>{if(!r||!r.props)return;const{children:o,...c}=r.props,d=Object.keys(c).reduce((m,u)=>(m[Ym[u]||u]=c[u],m),{});let{type:f}=r;switch(typeof f=="symbol"?f=f.toString():this.warnOnInvalidChildren(r,o),f){case"Symbol(react.fragment)":s=this.mapChildrenToProps(o,s);break;case"link":case"meta":case"noscript":case"script":case"style":i=this.flattenArrayTypeChildren(r,i,d,o);break;default:s=this.mapObjectTypeChildren(r,s,d,o);break}}),this.mapArrayTypeChildrenToProps(i,s)}render(){const{children:a,...s}=this.props;let i={...s},{helmetData:r}=s;if(a&&(i=this.mapChildrenToProps(a,i)),r&&!(r instanceof Mr)){const o=r;r=new Mr(o.context,!0),delete i.helmetData}return r?K.createElement(Sl,{...i,context:r.value}):K.createElement(Nd.Consumer,null,o=>K.createElement(Sl,{...i,context:o}))}};const fp="type.googleapis.com/google.protobuf.Int64Value",xp="type.googleapis.com/google.protobuf.UInt64Value";function Ed(a,s){const i={};for(const r in a)a.hasOwnProperty(r)&&(i[r]=s(a[r]));return i}function an(a){if(a==null)return null;if(a instanceof Number&&(a=a.valueOf()),typeof a=="number"&&isFinite(a)||a===!0||a===!1||Object.prototype.toString.call(a)==="[object String]")return a;if(a instanceof Date)return a.toISOString();if(Array.isArray(a))return a.map(s=>an(s));if(typeof a=="function"||typeof a=="object")return Ed(a,s=>an(s));throw new Error("Data cannot be encoded in JSON: "+a)}function wi(a){if(a==null)return a;if(a["@type"])switch(a["@type"]){case fp:case xp:{const s=Number(a.value);if(isNaN(s))throw new Error("Data cannot be decoded from JSON: "+a);return s}default:throw new Error("Data cannot be decoded from JSON: "+a)}return Array.isArray(a)?a.map(s=>wi(s)):typeof a=="function"||typeof a=="object"?Ed(a,s=>wi(s)):a}const ao="functions";const Al={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends Sm{constructor(s,i,r){super(`${ao}/${s}`,i||""),this.details=r,Object.setPrototypeOf(this,yt.prototype)}}function gp(a){if(a>=200&&a<300)return"ok";switch(a){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function nn(a,s){let i=gp(a),r=i,o;try{const c=s&&s.error;if(c){const d=c.status;if(typeof d=="string"){if(!Al[d])return new yt("internal","internal");i=Al[d],r=d}const f=c.message;typeof f=="string"&&(r=f),o=c.details,o!==void 0&&(o=wi(o))}}catch{}return i==="ok"?null:new yt(i,r,o)}class vp{constructor(s,i,r,o){this.app=s,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,_m(s)&&s.settings.appCheckToken&&(this.serverAppAppCheckToken=s.settings.appCheckToken),this.auth=i.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||i.get().then(c=>this.auth=c,()=>{}),this.messaging||r.get().then(c=>this.messaging=c,()=>{}),this.appCheck||o?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(s){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const i=s?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return i.error?null:i.token}return null}async getContext(s){const i=await this.getAuthToken(),r=await this.getMessagingToken(),o=await this.getAppCheckToken(s);return{authToken:i,messagingToken:r,appCheckToken:o}}}const Lr="us-central1",bp=/^data: (.*?)(?:\n|$)/;function wp(a){let s=null;return{promise:new Promise((i,r)=>{s=setTimeout(()=>{r(new yt("deadline-exceeded","deadline-exceeded"))},a)}),cancel:()=>{s&&clearTimeout(s)}}}class yp{constructor(s,i,r,o,c=Lr,d=(...f)=>fetch(...f)){this.app=s,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new vp(s,i,r,o),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(c);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=Lr}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(s){const i=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${i}/${this.region}/${s}`:this.customDomain!==null?`${this.customDomain}/${s}`:`https://${this.region}-${i}.cloudfunctions.net/${s}`}}function _p(a,s,i){const r=gd(s);a.emulatorOrigin=`http${r?"s":""}://${s}:${i}`,r&&(Cm(a.emulatorOrigin+"/backends"),Em("Functions",!0))}function jp(a,s,i){const r=o=>kp(a,s,o,{});return r.stream=(o,c)=>Ep(a,s,o,c),r}function Sd(a){return a.emulatorOrigin&&gd(a.emulatorOrigin)?"include":void 0}async function Np(a,s,i,r,o){i["Content-Type"]="application/json";let c;try{c=await r(a,{method:"POST",body:JSON.stringify(s),headers:i,credentials:Sd(o)})}catch{return{status:0,json:null}}let d=null;try{d=await c.json()}catch{}return{status:c.status,json:d}}async function Ad(a,s){const i={},r=await a.contextProvider.getContext(s.limitedUseAppCheckTokens);return r.authToken&&(i.Authorization="Bearer "+r.authToken),r.messagingToken&&(i["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=r.appCheckToken),i}function kp(a,s,i,r){const o=a._url(s);return Cp(a,o,i,r)}async function Cp(a,s,i,r){i=an(i);const o={data:i},c=await Ad(a,r),d=r.timeout||7e4,f=wp(d),m=await Promise.race([Np(s,o,c,a.fetchImpl,a),f.promise,a.cancelAllRequests]);if(f.cancel(),!m)throw new yt("cancelled","Firebase Functions instance was deleted.");const u=nn(m.status,m.json);if(u)throw u;if(!m.json)throw new yt("internal","Response is not valid JSON object.");let x=m.json.data;if(typeof x>"u"&&(x=m.json.result),typeof x>"u")throw new yt("internal","Response is missing data field.");return{data:wi(x)}}function Ep(a,s,i,r){const o=a._url(s);return Sp(a,o,i,r||{})}async function Sp(a,s,i,r){i=an(i);const o={data:i},c=await Ad(a,r);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await a.fetchImpl(s,{method:"POST",body:JSON.stringify(o),headers:c,signal:r?.signal,credentials:Sd(a)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const w=new yt("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}const b=nn(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let f,m;const u=new Promise((g,b)=>{f=g,m=b});r?.signal?.addEventListener("abort",()=>{const g=new yt("cancelled","Request was cancelled.");m(g)});const x=d.body.getReader(),h=Ap(x,f,m,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:b,done:w}=await g.read();return{value:b,done:w}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function Ap(a,s,i,r){const o=(d,f)=>{const m=d.match(bp);if(!m)return;const u=m[1];try{const x=JSON.parse(u);if("result"in x){s(wi(x.result));return}if("message"in x){f.enqueue(wi(x.message));return}if("error"in x){const h=nn(0,x);f.error(h),i(h);return}}catch(x){if(x instanceof yt){f.error(x),i(x);return}}},c=new TextDecoder;return new ReadableStream({start(d){let f="";return m();async function m(){if(r?.aborted){const u=new yt("cancelled","Request was cancelled");return d.error(u),i(u),Promise.resolve()}try{const{value:u,done:x}=await a.read();if(x){f.trim()&&o(f.trim(),d),d.close();return}if(r?.aborted){const g=new yt("cancelled","Request was cancelled");d.error(g),i(g),await a.cancel();return}f+=c.decode(u,{stream:!0});const h=f.split(`
`);f=h.pop()||"";for(const g of h)g.trim()&&o(g.trim(),d);return m()}catch(u){const x=u instanceof yt?u:nn(0,null);d.error(x),i(x)}}},cancel(){return a.cancel()}})}const Tl="@firebase/functions",Pl="0.13.1";const Tp="auth-internal",Pp="app-check-internal",Ip="messaging-internal";function Mp(a){const s=(i,{instanceIdentifier:r})=>{const o=i.getProvider("app").getImmediate(),c=i.getProvider(Tp),d=i.getProvider(Ip),f=i.getProvider(Pp);return new yp(o,c,d,f,r)};wm(new ym(ao,s,"PUBLIC").setMultipleInstances(!0)),gl(Tl,Pl,a),gl(Tl,Pl,"esm2020")}function Rp(a=jm(),s=Lr){const r=Nm(to(a),ao).getImmediate({identifier:s}),o=km("functions");return o&&Lp(r,...o),r}function Lp(a,s,i){_p(to(a),s,i)}function vi(a,s,i){return jp(to(a),s)}Mp();const Op={apiKey:"AIzaSyBS3uUgFUWmuT17ygx-ff2fUQhVpOXUUrU",authDomain:"emprataai.firebaseapp.com",projectId:"emprataai",storageBucket:"emprataai.firebasestorage.app",messagingSenderId:"648305596142",appId:"1:648305596142:web:aff6c1539823e12e8bc5ff"},no=Am(Op),He=Tm(no),le=Pm(no),bi=Rp(no,"southamerica-east1");function Dp(a){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",s.appendChild(i),i.styleSheet?i.styleSheet.cssText=a:i.appendChild(document.createTextNode(a))}const Bp=a=>{switch(a){case"success":return Up;case"info":return Hp;case"warning":return Vp;case"error":return qp;default:return null}},zp=Array(12).fill(0),Fp=({visible:a,className:s})=>K.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":a},K.createElement("div",{className:"sonner-spinner"},zp.map((i,r)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Up=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Vp=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Hp=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),qp=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$p=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Gp=()=>{const[a,s]=K.useState(document.hidden);return K.useEffect(()=>{const i=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),a};let Or=1;class Wp{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const i=this.subscribers.indexOf(s);this.subscribers.splice(i,1)}),this.publish=s=>{this.subscribers.forEach(i=>i(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var i;const{message:r,...o}=s,c=typeof s?.id=="number"||((i=s.id)==null?void 0:i.length)>0?s.id:Or++,d=this.toasts.find(m=>m.id===c),f=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),d?this.toasts=this.toasts.map(m=>m.id===c?(this.publish({...m,...s,id:c,title:r}),{...m,...s,id:c,dismissible:f,title:r}):m):this.addToast({title:r,...o,dismissible:f,id:c}),c},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(i=>i({id:s,dismiss:!0})))):this.toasts.forEach(i=>{this.subscribers.forEach(r=>r({id:i.id,dismiss:!0}))}),s),this.message=(s,i)=>this.create({...i,message:s}),this.error=(s,i)=>this.create({...i,message:s,type:"error"}),this.success=(s,i)=>this.create({...i,type:"success",message:s}),this.info=(s,i)=>this.create({...i,type:"info",message:s}),this.warning=(s,i)=>this.create({...i,type:"warning",message:s}),this.loading=(s,i)=>this.create({...i,type:"loading",message:s}),this.promise=(s,i)=>{if(!i)return;let r;i.loading!==void 0&&(r=this.create({...i,promise:s,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));const o=Promise.resolve(s instanceof Function?s():s);let c=r!==void 0,d;const f=o.then(async u=>{if(d=["resolve",u],K.isValidElement(u))c=!1,this.create({id:r,type:"default",message:u});else if(Kp(u)&&!u.ok){c=!1;const h=typeof i.error=="function"?await i.error(`HTTP error! status: ${u.status}`):i.error,g=typeof i.description=="function"?await i.description(`HTTP error! status: ${u.status}`):i.description,w=typeof h=="object"&&!K.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:g,...w})}else if(u instanceof Error){c=!1;const h=typeof i.error=="function"?await i.error(u):i.error,g=typeof i.description=="function"?await i.description(u):i.description,w=typeof h=="object"&&!K.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:g,...w})}else if(i.success!==void 0){c=!1;const h=typeof i.success=="function"?await i.success(u):i.success,g=typeof i.description=="function"?await i.description(u):i.description,w=typeof h=="object"&&!K.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:g,...w})}}).catch(async u=>{if(d=["reject",u],i.error!==void 0){c=!1;const x=typeof i.error=="function"?await i.error(u):i.error,h=typeof i.description=="function"?await i.description(u):i.description,b=typeof x=="object"&&!K.isValidElement(x)?x:{message:x};this.create({id:r,type:"error",description:h,...b})}}).finally(()=>{c&&(this.dismiss(r),r=void 0),i.finally==null||i.finally.call(i)}),m=()=>new Promise((u,x)=>f.then(()=>d[0]==="reject"?x(d[1]):u(d[1])).catch(x));return typeof r!="string"&&typeof r!="number"?{unwrap:m}:Object.assign(r,{unwrap:m})},this.custom=(s,i)=>{const r=i?.id||Or++;return this.create({jsx:s(r),id:r,...i}),r},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const wt=new Wp,Zp=(a,s)=>{const i=s?.id||Or++;return wt.addToast({title:a,...s,id:i}),i},Kp=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",Yp=Zp,Qp=()=>wt.toasts,Xp=()=>wt.getActiveToasts(),X=Object.assign(Yp,{success:wt.success,info:wt.info,warning:wt.warning,error:wt.error,custom:wt.custom,message:wt.message,promise:wt.promise,dismiss:wt.dismiss,loading:wt.loading},{getHistory:Qp,getToasts:Xp});Dp("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Sa(a){return a.label!==void 0}const Jp=3,ef="24px",tf="16px",Il=4e3,sf=356,af=14,nf=45,rf=200;function Xt(...a){return a.filter(Boolean).join(" ")}function of(a){const[s,i]=a.split("-"),r=[];return s&&r.push(s),i&&r.push(i),r}const lf=a=>{var s,i,r,o,c,d,f,m,u;const{invert:x,toast:h,unstyled:g,interacting:b,setHeights:w,visibleToasts:j,heights:C,index:A,toasts:E,expanded:_,removeToast:I,defaultRichColors:S,closeButton:R,style:$,cancelButtonStyle:W,actionButtonStyle:ae,className:M="",descriptionClassName:U="",duration:D,position:q,gap:J,expandByDefault:se,classNames:te,icons:ue,closeButtonAriaLabel:ne="Close toast"}=a,[Ce,P]=K.useState(null),[N,F]=K.useState(null),[O,B]=K.useState(!1),[z,V]=K.useState(!1),[Z,Y]=K.useState(!1),[ce,he]=K.useState(!1),[be,we]=K.useState(!1),[Oe,ye]=K.useState(0),[Fe,et]=K.useState(0),qe=K.useRef(h.duration||D||Il),$e=K.useRef(null),Ye=K.useRef(null),ie=A===0,pe=A+1<=j,xe=h.type,Ee=h.dismissible!==!1,Re=h.className||"",_t=h.descriptionClassName||"",Qe=K.useMemo(()=>C.findIndex(_e=>_e.toastId===h.id)||0,[C,h.id]),St=K.useMemo(()=>{var _e;return(_e=h.closeButton)!=null?_e:R},[h.closeButton,R]),ss=K.useMemo(()=>h.duration||D||Il,[h.duration,D]),ps=K.useRef(0),At=K.useRef(0),is=K.useRef(0),Wt=K.useRef(null),[Qs,ji]=q.split("-"),Ni=K.useMemo(()=>C.reduce((_e,tt,nt)=>nt>=Qe?_e:_e+tt.height,0),[C,Qe]),aa=Gp(),Es=h.invert||x,ki=xe==="loading";At.current=K.useMemo(()=>Qe*J+Ni,[Qe,Ni]),K.useEffect(()=>{qe.current=ss},[ss]),K.useEffect(()=>{B(!0)},[]),K.useEffect(()=>{const _e=Ye.current;if(_e){const tt=_e.getBoundingClientRect().height;return et(tt),w(nt=>[{toastId:h.id,height:tt,position:h.position},...nt]),()=>w(nt=>nt.filter(pt=>pt.toastId!==h.id))}},[w,h.id]),K.useLayoutEffect(()=>{if(!O)return;const _e=Ye.current,tt=_e.style.height;_e.style.height="auto";const nt=_e.getBoundingClientRect().height;_e.style.height=tt,et(nt),w(pt=>pt.find(Xe=>Xe.toastId===h.id)?pt.map(Xe=>Xe.toastId===h.id?{...Xe,height:nt}:Xe):[{toastId:h.id,height:nt,position:h.position},...pt])},[O,h.title,h.description,w,h.id,h.jsx,h.action,h.cancel]);const Zt=K.useCallback(()=>{V(!0),ye(At.current),w(_e=>_e.filter(tt=>tt.toastId!==h.id)),setTimeout(()=>{I(h)},rf)},[h,I,w,At]);K.useEffect(()=>{if(h.promise&&xe==="loading"||h.duration===1/0||h.type==="loading")return;let _e;return _||b||aa?(()=>{if(is.current<ps.current){const pt=new Date().getTime()-ps.current;qe.current=qe.current-pt}is.current=new Date().getTime()})():qe.current!==1/0&&(ps.current=new Date().getTime(),_e=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),Zt()},qe.current)),()=>clearTimeout(_e)},[_,b,h,xe,aa,Zt]),K.useEffect(()=>{h.delete&&(Zt(),h.onDismiss==null||h.onDismiss.call(h,h))},[Zt,h.delete]);function na(){var _e;if(ue?.loading){var tt;return K.createElement("div",{className:Xt(te?.loader,h==null||(tt=h.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":xe==="loading"},ue.loading)}return K.createElement(Fp,{className:Xt(te?.loader,h==null||(_e=h.classNames)==null?void 0:_e.loader),visible:xe==="loading"})}const ra=h.icon||ue?.[xe]||Bp(xe);var Ci,oa;return K.createElement("li",{tabIndex:0,ref:Ye,className:Xt(M,Re,te?.toast,h==null||(s=h.classNames)==null?void 0:s.toast,te?.default,te?.[xe],h==null||(i=h.classNames)==null?void 0:i[xe]),"data-sonner-toast":"","data-rich-colors":(Ci=h.richColors)!=null?Ci:S,"data-styled":!(h.jsx||h.unstyled||g),"data-mounted":O,"data-promise":!!h.promise,"data-swiped":be,"data-removed":z,"data-visible":pe,"data-y-position":Qs,"data-x-position":ji,"data-index":A,"data-front":ie,"data-swiping":Z,"data-dismissible":Ee,"data-type":xe,"data-invert":Es,"data-swipe-out":ce,"data-swipe-direction":N,"data-expanded":!!(_||se&&O),"data-testid":h.testId,style:{"--index":A,"--toasts-before":A,"--z-index":E.length-A,"--offset":`${z?Oe:At.current}px`,"--initial-height":se?"auto":`${Fe}px`,...$,...h.style},onDragEnd:()=>{Y(!1),P(null),Wt.current=null},onPointerDown:_e=>{_e.button!==2&&(ki||!Ee||($e.current=new Date,ye(At.current),_e.target.setPointerCapture(_e.pointerId),_e.target.tagName!=="BUTTON"&&(Y(!0),Wt.current={x:_e.clientX,y:_e.clientY})))},onPointerUp:()=>{var _e,tt,nt;if(ce||!Ee)return;Wt.current=null;const pt=Number(((_e=Ye.current)==null?void 0:_e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Xs=Number(((tt=Ye.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xe=new Date().getTime()-((nt=$e.current)==null?void 0:nt.getTime()),vt=Ce==="x"?pt:Xs,Js=Math.abs(vt)/Xe;if(Math.abs(vt)>=nf||Js>.11){ye(At.current),h.onDismiss==null||h.onDismiss.call(h,h),F(Ce==="x"?pt>0?"right":"left":Xs>0?"down":"up"),Zt(),he(!0);return}else{var jt,Nt;(jt=Ye.current)==null||jt.style.setProperty("--swipe-amount-x","0px"),(Nt=Ye.current)==null||Nt.style.setProperty("--swipe-amount-y","0px")}we(!1),Y(!1),P(null)},onPointerMove:_e=>{var tt,nt,pt;if(!Wt.current||!Ee||((tt=window.getSelection())==null?void 0:tt.toString().length)>0)return;const Xe=_e.clientY-Wt.current.y,vt=_e.clientX-Wt.current.x;var Js;const jt=(Js=a.swipeDirections)!=null?Js:of(q);!Ce&&(Math.abs(vt)>1||Math.abs(Xe)>1)&&P(Math.abs(vt)>Math.abs(Xe)?"x":"y");let Nt={x:0,y:0};const kt=oe=>1/(1.5+Math.abs(oe)/20);if(Ce==="y"){if(jt.includes("top")||jt.includes("bottom"))if(jt.includes("top")&&Xe<0||jt.includes("bottom")&&Xe>0)Nt.y=Xe;else{const oe=Xe*kt(Xe);Nt.y=Math.abs(oe)<Math.abs(Xe)?oe:Xe}}else if(Ce==="x"&&(jt.includes("left")||jt.includes("right")))if(jt.includes("left")&&vt<0||jt.includes("right")&&vt>0)Nt.x=vt;else{const oe=vt*kt(vt);Nt.x=Math.abs(oe)<Math.abs(vt)?oe:vt}(Math.abs(Nt.x)>0||Math.abs(Nt.y)>0)&&we(!0),(nt=Ye.current)==null||nt.style.setProperty("--swipe-amount-x",`${Nt.x}px`),(pt=Ye.current)==null||pt.style.setProperty("--swipe-amount-y",`${Nt.y}px`)}},St&&!h.jsx&&xe!=="loading"?K.createElement("button",{"aria-label":ne,"data-disabled":ki,"data-close-button":!0,onClick:ki||!Ee?()=>{}:()=>{Zt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Xt(te?.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(oa=ue?.close)!=null?oa:$p):null,(xe||h.icon||h.promise)&&h.icon!==null&&(ue?.[xe]!==null||h.icon)?K.createElement("div",{"data-icon":"",className:Xt(te?.icon,h==null||(o=h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||na():null,h.type!=="loading"?ra:null):null,K.createElement("div",{"data-content":"",className:Xt(te?.content,h==null||(c=h.classNames)==null?void 0:c.content)},K.createElement("div",{"data-title":"",className:Xt(te?.title,h==null||(d=h.classNames)==null?void 0:d.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?K.createElement("div",{"data-description":"",className:Xt(U,_t,te?.description,h==null||(f=h.classNames)==null?void 0:f.description)},typeof h.description=="function"?h.description():h.description):null),K.isValidElement(h.cancel)?h.cancel:h.cancel&&Sa(h.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||W,onClick:_e=>{Sa(h.cancel)&&Ee&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,_e),Zt())},className:Xt(te?.cancelButton,h==null||(m=h.classNames)==null?void 0:m.cancelButton)},h.cancel.label):null,K.isValidElement(h.action)?h.action:h.action&&Sa(h.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||ae,onClick:_e=>{Sa(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,_e),!_e.defaultPrevented&&Zt())},className:Xt(te?.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function Ml(){if(typeof window>"u"||typeof document>"u")return"ltr";const a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}function cf(a,s){const i={};return[a,s].forEach((r,o)=>{const c=o===1,d=c?"--mobile-offset":"--offset",f=c?tf:ef;function m(u){["top","right","bottom","left"].forEach(x=>{i[`${d}-${x}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?m(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?i[`${d}-${u}`]=f:i[`${d}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):m(f)}),i}const df=K.forwardRef(function(s,i){const{id:r,invert:o,position:c="bottom-right",hotkey:d=["altKey","KeyT"],expand:f,closeButton:m,className:u,offset:x,mobileOffset:h,theme:g="light",richColors:b,duration:w,style:j,visibleToasts:C=Jp,toastOptions:A,dir:E=Ml(),gap:_=af,icons:I,containerAriaLabel:S="Notifications"}=s,[R,$]=K.useState([]),W=K.useMemo(()=>r?R.filter(O=>O.toasterId===r):R.filter(O=>!O.toasterId),[R,r]),ae=K.useMemo(()=>Array.from(new Set([c].concat(W.filter(O=>O.position).map(O=>O.position)))),[W,c]),[M,U]=K.useState([]),[D,q]=K.useState(!1),[J,se]=K.useState(!1),[te,ue]=K.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=K.useRef(null),Ce=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=K.useRef(null),N=K.useRef(!1),F=K.useCallback(O=>{$(B=>{var z;return(z=B.find(V=>V.id===O.id))!=null&&z.delete||wt.dismiss(O.id),B.filter(({id:V})=>V!==O.id)})},[]);return K.useEffect(()=>wt.subscribe(O=>{if(O.dismiss){requestAnimationFrame(()=>{$(B=>B.map(z=>z.id===O.id?{...z,delete:!0}:z))});return}setTimeout(()=>{fm.flushSync(()=>{$(B=>{const z=B.findIndex(V=>V.id===O.id);return z!==-1?[...B.slice(0,z),{...B[z],...O},...B.slice(z+1)]:[O,...B]})})})}),[R]),K.useEffect(()=>{if(g!=="system"){ue(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:B})=>{ue(B?"dark":"light")})}catch{O.addListener(({matches:z})=>{try{ue(z?"dark":"light")}catch(V){console.error(V)}})}},[g]),K.useEffect(()=>{R.length<=1&&q(!1)},[R]),K.useEffect(()=>{const O=B=>{var z;if(d.every(Y=>B[Y]||B.code===Y)){var Z;q(!0),(Z=ne.current)==null||Z.focus()}B.code==="Escape"&&(document.activeElement===ne.current||(z=ne.current)!=null&&z.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[d]),K.useEffect(()=>{if(ne.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,N.current=!1)}},[ne.current]),K.createElement("section",{ref:i,"aria-label":`${S} ${Ce}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ae.map((O,B)=>{var z;const[V,Z]=O.split("-");return W.length?K.createElement("ol",{key:O,dir:E==="auto"?Ml():E,tabIndex:-1,ref:ne,className:u,"data-sonner-toaster":!0,"data-sonner-theme":te,"data-y-position":V,"data-x-position":Z,style:{"--front-toast-height":`${((z=M[0])==null?void 0:z.height)||0}px`,"--width":`${sf}px`,"--gap":`${_}px`,...j,...cf(x,h)},onBlur:Y=>{N.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(N.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||N.current||(N.current=!0,P.current=Y.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{J||q(!1)},onDragEnd:()=>q(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||se(!0)},onPointerUp:()=>se(!1)},W.filter(Y=>!Y.position&&B===0||Y.position===O).map((Y,ce)=>{var he,be;return K.createElement(lf,{key:Y.id,icons:I,index:ce,toast:Y,defaultRichColors:b,duration:(he=A?.duration)!=null?he:w,className:A?.className,descriptionClassName:A?.descriptionClassName,invert:o,visibleToasts:C,closeButton:(be=A?.closeButton)!=null?be:m,interacting:J,position:O,style:A?.style,unstyled:A?.unstyled,classNames:A?.classNames,cancelButtonStyle:A?.cancelButtonStyle,actionButtonStyle:A?.actionButtonStyle,closeButtonAriaLabel:A?.closeButtonAriaLabel,removeToast:F,toasts:W.filter(we=>we.position==Y.position),heights:M.filter(we=>we.position==Y.position),setHeights:U,expandByDefault:f,gap:_,expanded:D,swipeDirections:s.swipeDirections})})):null}))}),uf=k.createContext(null),Rl=()=>{try{const a=new(window.AudioContext||window.webkitAudioContext),s=a.createOscillator(),i=a.createGain();s.connect(i),i.connect(a.destination),s.frequency.value=880,s.type="sine",i.gain.setValueAtTime(.3,a.currentTime),i.gain.exponentialRampToValueAtTime(.01,a.currentTime+.3),s.start(a.currentTime),s.stop(a.currentTime+.3);const r=a.createOscillator(),o=a.createGain();r.connect(o),o.connect(a.destination),r.frequency.value=1320,r.type="sine",o.gain.setValueAtTime(0,a.currentTime),o.gain.setValueAtTime(.3,a.currentTime+.15),o.gain.exponentialRampToValueAtTime(.01,a.currentTime+.5),r.start(a.currentTime+.15),r.stop(a.currentTime+.5)}catch{console.log("Audio not available")}},hf=()=>{try{const a=new(window.AudioContext||window.webkitAudioContext);[523.25,659.25,783.99].forEach((s,i)=>{const r=a.createOscillator(),o=a.createGain();r.connect(o),o.connect(a.destination),r.frequency.value=s,r.type="sine";const c=a.currentTime+i*.1;o.gain.setValueAtTime(.2,c),o.gain.exponentialRampToValueAtTime(.01,c+.2),r.start(c),r.stop(c+.2)})}catch{console.log("Audio not available")}};function mf({children:a}){const[s,i]=k.useState("owner"),[r,o]=k.useState([]),[c,d]=k.useState(0),[f,m]=k.useState(0),[u,x]=k.useState(0),[h,g]=k.useState(!0),b=k.useRef(new Map),w=k.useRef(!1);k.useEffect(()=>{const E=()=>{w.current=!0};return window.addEventListener("click",E,{once:!0}),window.addEventListener("keydown",E,{once:!0}),window.addEventListener("touchstart",E,{once:!0}),()=>{window.removeEventListener("click",E),window.removeEventListener("keydown",E),window.removeEventListener("touchstart",E)}},[]),k.useEffect(()=>{const E=He.currentUser;if(!E)return;const _=We(ze(le,"orders"),Ie("restaurantId","==",E.uid),Ks("createdAt","desc"),so(50)),I=Et(_,S=>{let R=0,$=0,W=0;const ae=[];S.docs.forEach(M=>{const U={id:M.id,...M.data()},D=b.current.get(U.id);U.status==="pending"?R++:U.status==="preparing"?$++:U.status==="ready"&&W++,D&&D!==U.status&&U.status==="ready"&&(ae.push({type:"order_ready",order:U,timestamp:new Date}),s==="waiter"&&w.current&&(A(200),X.success(` Pedido Pronto! Mesa ${U.customer.table||"N/A"}`,{duration:5e3}),h&&hf())),!D&&U.status==="pending"&&(ae.push({type:"new_order",order:U,timestamp:new Date}),s==="owner"&&w.current&&(h&&Rl(),X.success(` Novo Pedido! R$ ${U.total?.toFixed(2)}`,{duration:4e3}))),b.current.set(U.id,U.status)}),d(R),m($),x(W),ae.length>0&&o(M=>[...ae,...M].slice(0,20))});return()=>I()},[s,h]);const j=k.useCallback(()=>{g(E=>!E)},[]),C=k.useCallback(()=>{w.current&&h&&Rl()},[h]),A=k.useCallback((E=200)=>{navigator.vibrate&&navigator.vibrate(E)},[]);return e.jsx(uf.Provider,{value:{userRole:s,setUserRole:i,recentEvents:r,pendingCount:c,preparingCount:f,readyCount:u,soundEnabled:h,toggleSound:j,playNotificationSound:C,vibrateDevice:A},children:a})}const Ll=a=>{let s;const i=new Set,r=(u,x)=>{const h=typeof u=="function"?u(s):u;if(!Object.is(h,s)){const g=s;s=x??(typeof h!="object"||h===null)?h:Object.assign({},s,h),i.forEach(b=>b(s,g))}},o=()=>s,f={setState:r,getState:o,getInitialState:()=>m,subscribe:u=>(i.add(u),()=>i.delete(u))},m=s=a(r,o,f);return f},pf=(a=>a?Ll(a):Ll),ff=a=>a;function xf(a,s=ff){const i=K.useSyncExternalStore(a.subscribe,K.useCallback(()=>s(a.getState()),[a,s]),K.useCallback(()=>s(a.getInitialState()),[a,s]));return K.useDebugValue(i),i}const Ol=a=>{const s=pf(a),i=r=>xf(s,r);return Object.assign(i,s),i},gf=(a=>a?Ol(a):Ol),vf=()=>{const a=localStorage.getItem("emprata_user_id");if(a)return a;const s=crypto.randomUUID();return localStorage.setItem("emprata_user_id",s),s},Ys=gf((a,s)=>({userId:vf(),plan:"FREE",credits:3,originalImage:null,originalFile:null,generatedImage:null,selectedVibe:"rustico",selectedPerspective:"diagonal",lightIntensity:50,isGenerating:!1,setUserId:i=>{localStorage.setItem("emprata_user_id",i),a({userId:i})},setPlan:i=>a({plan:i}),setCredits:i=>a({credits:i}),setOriginalImage:(i,r=null)=>a({originalImage:i,originalFile:r,generatedImage:null}),setGeneratedImage:i=>a({generatedImage:i}),setVibe:i=>a({selectedVibe:i}),setPerspective:i=>a({selectedPerspective:i}),setLightIntensity:i=>a({lightIntensity:i}),setIsGenerating:i=>a({isGenerating:i}),resetEditor:()=>a({originalImage:null,originalFile:null,generatedImage:null,selectedVibe:"rustico",selectedPerspective:"diagonal",lightIntensity:50,isGenerating:!1}),useCredit:()=>{const{credits:i,plan:r}=s();return r==="PRO"?!0:i>0?(a({credits:i-1}),!0):!1},decrementCredit:()=>{const{credits:i,plan:r}=s();r!=="PRO"&&i>0&&a({credits:i-1})},refundCredit:()=>a(i=>({credits:i.credits+1}))}));function Ze(){const[a,s]=k.useState(null),[i,r]=k.useState(null),[o,c]=k.useState(!0),[d,f]=k.useState(null),{setPlan:m,setCredits:u,setUserId:x}=Ys(),h=new Im;return h.setCustomParameters({prompt:"select_account"}),k.useEffect(()=>{console.log(" [useAuth] Setting up auth listener...");const E=Mm(He,async _=>{console.log(" [useAuth] Auth State Changed:",_?.email||"No user");try{if(s(_),_){console.log(" [useAuth] Fetching Firestore data for:",_.uid);const I=Te(le,"users",_.uid),S=await Ot(I);if(S.exists()){const R=S.data();console.log(" [useAuth] User data loaded:",R.plan,R.credits),r(R),m(R.plan||"FREE"),u(R.credits??3),x(_.uid)}else{console.warn(" [useAuth] User has no Firestore profile, creating one...");const R={uid:_.uid,email:_.email||"",name:_.displayName||"",plan:"FREE",credits:3,createdAt:xt()};await zs(I,R),r(R),m("FREE"),u(3),x(_.uid),console.log(" [useAuth] Created missing Firestore profile")}}else console.log(" [useAuth] No user, resetting to guest state"),r(null),m("FREE"),u(3),x("")}catch(I){console.error(" [useAuth] Critical error in auth listener:",I),f(I?.message||"Authentication error"),r(null),m("FREE"),u(3),x("")}finally{console.log(" [useAuth] Loading complete"),c(!1)}});return()=>{console.log(" [useAuth] Cleaning up auth listener"),E()}},[m,u,x]),{user:a,userData:i,loading:o,error:d,loginWithGoogle:async()=>{try{f(null),c(!0);const _=(await Dm(He,h)).user,I=Te(le,"users",_.uid),S=await Ot(I);if(S.exists()){const R=S.data();r(R),m(R.plan||"FREE"),u(R.credits??3),x(_.uid),console.log(" [useAuth] Existing Google user logged in:",_.uid)}else{const R={uid:_.uid,email:_.email||"",name:_.displayName||"",plan:"FREE",credits:3,createdAt:xt()};await zs(I,R),console.log(" [useAuth] New Google user created:",_.uid),r(R),m("FREE"),u(3),x(_.uid)}return _}catch(E){throw console.error(" [useAuth] Google Sign-In error:",E),f(E.message),E}finally{c(!1)}},signIn:async(E,_)=>{try{return f(null),c(!0),(await Om(He,E,_)).user}catch(I){throw f(I.message),I}finally{c(!1)}},signUp:async(E,_,I)=>{try{f(null),c(!0);const S=await Lm(He,E,_),R={uid:S.user.uid,email:S.user.email||"",name:I||"",plan:"FREE",credits:3,createdAt:xt()};return await zs(Te(le,"users",S.user.uid),R),console.log(" [useAuth] New email user created:",S.user.uid),S.user}catch(S){throw f(S.message),S}finally{c(!1)}},signOut:async()=>{try{f(null),await Rm(He),r(null),console.log(" [useAuth] User signed out")}catch(E){throw f(E.message),E}},refreshUser:async()=>{if(a)try{const E=Te(le,"users",a.uid),_=await Ot(E);if(_.exists()){const I=_.data();r(I),m(I.plan||"FREE"),u(I.credits??3),console.log(" [useAuth] User data refreshed:",I.plan,I.credits)}}catch(E){console.error(" [useAuth] Error refreshing user data:",E)}},switchRole:async E=>{a&&(localStorage.setItem("activeRole",E),E==="OWNER"?window.location.href="/dashboard":window.location.href="/delivery")},isAuthenticated:!!a,isPro:i?.plan?.toLowerCase()==="pro"||i?.plan?.toLowerCase()==="starter"}}function Td({}){const[a,s]=k.useState(!1),i=k.useRef(null),{user:r,userData:o,signOut:c}=Ze(),d=gt();k.useEffect(()=>{const x=h=>{i.current&&!i.current.contains(h.target)&&s(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const f=()=>{d("/profile"),s(!1)},m=async()=>{await c(),d("/"),s(!1)},u=()=>o?.name?o.name.charAt(0).toUpperCase():r?.email?r.email.charAt(0).toUpperCase():"U";return e.jsxs("div",{className:"relative",ref:i,children:[e.jsxs("button",{onClick:()=>s(!a),className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all group",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary to-orange-600 flex items-center justify-center text-sm font-black",children:r?.photoURL?e.jsx("img",{src:r.photoURL,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{children:u()})}),e.jsx("span",{className:"hidden md:block text-sm font-bold text-white/80 max-w-[120px] truncate",children:o?.name||"Usurio"}),e.jsx(qr,{className:`w-4 h-4 text-white/40 transition-transform ${a?"rotate-180":""}`})]}),e.jsx(Be,{children:a&&e.jsxs(Q.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 mt-2 w-56 bg-zinc-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 bg-white/5",children:[e.jsx("p",{className:"text-sm font-bold text-white truncate",children:o?.name||"Usurio"}),e.jsx("p",{className:"text-xs text-white/40 font-medium truncate",children:r?.email})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:f,className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-white/5 transition-colors text-left",children:[e.jsx(cs,{className:"w-4 h-4 text-white/60"}),e.jsx("span",{className:"text-sm font-bold text-white",children:"Meu Perfil"})]}),e.jsxs("button",{onClick:()=>{localStorage.setItem("activeRole","CUSTOMER"),window.location.href="/delivery"},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-white/5 transition-colors text-left",children:[e.jsx(Fs,{className:"w-4 h-4 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-bold text-white block",children:"Modo Cliente"}),e.jsx("span",{className:"text-[10px] text-white/40 block",children:"Fazer pedidos"})]})]}),e.jsxs("button",{onClick:m,className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-red-500/10 transition-colors text-left border-t border-white/5",children:[e.jsx(Xi,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm font-bold text-red-400",children:"Sair"})]})]})]})})]})}const Dl={STARTER:1,GROWTH:2,BLACK:3},ro={manage_menu:"STARTER",receive_orders:"STARTER",kitchen_screen:"STARTER",basic_payments:"STARTER",staff_management:"STARTER",link_bio:"STARTER",order_kanban:"STARTER",driver_app_access:"GROWTH",gps_tracking:"GROWTH",dispatch_console:"GROWTH",rain_mode:"GROWTH",table_qr_code:"GROWTH",pos_terminal:"GROWTH",financial_overview:"GROWTH",basic_reports:"GROWTH",ai_insights:"BLACK",emprata_brain:"BLACK",advanced_analytics:"BLACK",crm_automation:"BLACK",sales_forecasting:"BLACK",profit_guardian:"BLACK",demand_prediction:"BLACK",dre_reports:"BLACK",vip_support:"BLACK"},yi={STARTER:{label:"Starter",price:0,color:"text-gray-400",bgColor:"bg-gray-500",description:"Comece grtis",features:["Cardpio Digital","Gestor de Pedidos","Cozinha (KDS)","Pagamento Online","Gesto de Equipe"]},GROWTH:{label:"Growth",price:149.9,color:"text-green-400",bgColor:"bg-green-500",description:"Para crescer",badge:"Popular",features:["Tudo do Starter","App do Motorista (GPS)","Modo Chuva","QR Code de Mesa","Terminal PDV","Relatrios Financeiros"]},BLACK:{label:"Emprata Black",price:299.9,color:"text-purple-400",bgColor:"bg-purple-600",description:"Potncia mxima",badge:"AI Power",features:["Tudo do Growth","EmprataBrain (IA)","Previso de Demanda","Guardio de Lucro","CRM Automtico","Suporte VIP"]}};function bf(a,s){const i=Dl[a||"STARTER"],r=Dl[ro[s]];return i>=r}function Wi(a){return ro[a]}const wf=ro;function yf(a){if(!a)return"STARTER";const s=a.toUpperCase();return s==="BLACK"||s==="PRO"?"BLACK":s==="GROWTH"||s==="STARTER_PAID"?"GROWTH":"STARTER"}function fn(){const{userData:a,loading:s}=Ze(),i=yf(a?.plan),r=a?.subscription?.status||"inactive",o=i==="STARTER"||r==="active",c=k.useCallback(f=>o?bf(i,f):!1,[i,o]),d=k.useCallback(f=>{const m=c(f);if(!m){const u=Wi(f);X.error(`Recurso exclusivo do plano ${yi[u].label}`,{description:"Faa upgrade para desbloquear",action:{label:"Ver Planos",onClick:()=>window.location.href="/subscription"}})}return m},[c]);return{currentPlan:i,isPlanActive:o,planDetails:yi[i],checkAccess:c,checkAccessWithFeedback:d,getRequiredPlanFor:Wi,isGrowthOrHigher:i==="GROWTH"||i==="BLACK",isBlack:i==="BLACK",isLoading:s}}const _f=[{title:"Operao em Tempo Real",items:[{path:"/dashboard",label:"Viso Geral",icon:e.jsx(Lh,{size:20})},{path:"/dispatch",label:"Logstica & Entregas",icon:e.jsx(es,{size:20}),badge:"Ao Vivo",feature:"driver_app_access"},{path:"/kitchen-display",label:"KDS Cozinha",icon:e.jsx(ot,{size:20})}]},{title:"Gesto & Vendas",items:[{path:"/menu-builder",label:"Cardpio Digital",icon:e.jsx(id,{size:20})},{path:"/store-settings",label:"Vitrine do App",icon:e.jsx(Fs,{size:20}),highlight:!0},{path:"/finance",label:"Financeiro",icon:e.jsx(Us,{size:20}),feature:"financial_overview"},{path:"/staff",label:"Equipe & Acessos",icon:e.jsx(qt,{size:20})}]},{title:"Crescimento & IA",items:[{path:"/intelligence",label:"Business Intelligence",icon:e.jsx(ad,{size:20}),highlight:!0,feature:"ai_insights"},{path:"/studio",label:"Estdio Mgico IA",icon:e.jsx(dn,{size:20})}]}];function jf(){const[a,s]=k.useState(!0),i=eo(),r=gt(),{user:o}=Ze(),{checkAccess:c}=fn(),d=f=>{if(!f.feature){r(f.path);return}if(c(f.feature))r(f.path);else{const m=Wi(f.feature);X.error(`Recurso do plano ${yi[m].label}`,{description:"Faa upgrade para acessar este mdulo",action:{label:"Ver Planos",onClick:()=>r("/subscription")}}),r("/subscription")}};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex",children:[e.jsxs(Q.aside,{initial:{width:280},animate:{width:a?280:80},className:"fixed md:relative z-50 h-screen bg-[#121212] border-r border-white/5 flex flex-col transition-all duration-300",children:[e.jsxs("div",{className:"h-20 flex items-center px-6 border-b border-white/5",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center font-black text-black text-xl mr-3 shrink-0",children:"E."}),a&&e.jsxs(Q.span,{initial:{opacity:0},animate:{opacity:1},className:"font-black italic text-lg tracking-tighter",children:["Emprata",e.jsx("span",{className:"text-primary",children:"AI"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto py-6 px-3 space-y-8 custom-scrollbar",children:_f.map((f,m)=>e.jsxs("div",{children:[a&&e.jsx("h3",{className:"px-4 text-[10px] font-black uppercase tracking-widest text-white/30 mb-2",children:f.title}),e.jsx("div",{className:"space-y-1",children:f.items.map(u=>{const x=i.pathname===u.path,h=u.feature?c(u.feature):!0;return e.jsxs("button",{onClick:()=>d(u),className:`
                        w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl transition-all relative group text-left
                        ${x?"bg-primary text-black font-bold shadow-[0_0_20px_rgba(255,107,0,0.3)]":h?"text-white/60 hover:bg-white/5 hover:text-white":"text-white/30 hover:bg-white/5 cursor-not-allowed"}
                      `,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${x?"text-black":u.highlight&&h?"text-primary":""}`,children:u.icon}),a&&e.jsx("span",{className:"text-sm whitespace-nowrap",children:u.label})]}),a&&e.jsxs(e.Fragment,{children:[!h&&e.jsx(Dt,{size:14,className:"text-white/30"}),u.badge&&h&&e.jsx("span",{className:"bg-red-500 text-white text-[9px] font-black px-1.5 py-0.5 rounded uppercase animate-pulse",children:u.badge})]}),!a&&e.jsxs("div",{className:"absolute left-full ml-4 bg-white text-black px-3 py-1 rounded-lg text-xs font-bold opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 flex items-center gap-2",children:[u.label,!h&&e.jsx(Dt,{size:10})]})]},u.path)})})]},m))}),e.jsx("div",{className:"p-4 border-t border-white/5",children:e.jsx("button",{onClick:()=>s(!a),className:"w-full flex items-center justify-center p-2 text-white/20 hover:text-white transition-colors mb-4",children:a?e.jsx(kr,{className:"rotate-180"}):e.jsx(kr,{})})})]}),e.jsxs("main",{className:"flex-1 flex flex-col h-screen overflow-hidden bg-[#0a0a0a]",children:[e.jsxs("header",{className:"h-20 border-b border-white/5 bg-[#0a0a0a]/80 backdrop-blur-xl flex items-center justify-between px-8 sticky top-0 z-40",children:[e.jsxs("div",{className:"flex-1 max-w-xl relative",children:[e.jsx(ts,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/20 w-4 h-4"}),e.jsx("input",{placeholder:"Buscar pedido, cliente ou ferramenta...",className:"w-full bg-[#121212] border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white focus:border-primary outline-none transition-all focus:bg-[#1a1a1a]"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-1",children:[e.jsx("kbd",{className:"bg-white/10 px-1.5 rounded text-[10px] text-white/40 font-mono",children:""}),e.jsx("kbd",{className:"bg-white/10 px-1.5 rounded text-[10px] text-white/40 font-mono",children:"K"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 ml-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"relative p-2 text-white/40 hover:text-white transition-colors",children:[e.jsx($r,{size:20}),e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-primary rounded-full"})]}),e.jsx("div",{className:"h-8 w-px bg-white/10"}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm font-bold text-white leading-none",children:o?.displayName}),e.jsxs("span",{className:"text-[10px] text-primary font-bold uppercase tracking-wider flex items-center gap-1",children:[e.jsx(_s,{size:10})," Dono"]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-gray-700 to-black border border-white/20 overflow-hidden",children:o?.photoURL?e.jsx("img",{src:o.photoURL,className:"w-full h-full object-cover"}):e.jsx(Gr,{className:"p-2 text-white/50"})}),e.jsx(Td,{})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-6 md:p-8 scroll-smooth",children:e.jsx(md,{})})]})]})}function Nf(){const{user:a,signOut:s}=Ze(),i=eo(),[r,o]=k.useState(0);k.useEffect(()=>{if(!a)return;const d=We(ze(le,"orders"),Ie("customer.uid","==",a.uid),Ie("status","in",["PENDING","PREPARING","READY","DISPATCHED"])),f=Et(d,m=>o(m.size));return()=>f()},[a]);const c=d=>i.pathname===d;return e.jsxs("div",{className:"min-h-screen bg-[#050505] text-white font-sans flex flex-col",children:[e.jsxs("header",{className:"hidden md:flex items-center justify-between px-8 py-4 bg-[#121212]/90 border-b border-white/5 sticky top-0 z-50",children:[e.jsx(Ve,{to:"/delivery",className:"text-2xl font-black italic",children:"Emprata.ai"}),e.jsxs("div",{className:"flex gap-6 items-center",children:[e.jsx(Ve,{to:"/delivery",className:"hover:text-primary font-bold",children:"Incio"}),e.jsx(Ve,{to:"/search",className:"hover:text-primary font-bold",children:"Buscar"}),e.jsxs(Ve,{to:"/me",className:"flex items-center gap-2 bg-white/10 px-3 py-1.5 rounded-full hover:bg-white/20",children:[e.jsx(cs,{size:16})," ",e.jsx("span",{className:"text-sm font-bold",children:"Perfil"})]}),e.jsx("button",{onClick:s,title:"Sair",children:e.jsx(Xi,{size:18,className:"text-red-400"})})]})]}),e.jsx("main",{className:"flex-1 pb-24 md:pb-0 relative z-0",children:e.jsx(md,{})}),e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-[9999] bg-[#121212] border-t border-white/10 px-6 py-2 pb-safe shadow-[0_-10px_30px_rgba(0,0,0,0.8)]",children:e.jsxs("div",{className:"flex justify-between items-center max-w-md mx-auto",children:[e.jsxs(Ve,{to:"/delivery",className:`flex flex-col items-center gap-1 ${c("/delivery")?"text-primary":"text-white/40"}`,children:[e.jsx(nd,{size:24}),e.jsx("span",{className:"text-[10px] font-bold",children:"Incio"})]}),e.jsxs(Ve,{to:"/search",className:`flex flex-col items-center gap-1 ${c("/search")?"text-primary":"text-white/40"}`,children:[e.jsx(ts,{size:24}),e.jsx("span",{className:"text-[10px] font-bold",children:"Buscar"})]}),e.jsx(Ve,{to:"/me/orders",className:"relative -top-5",children:e.jsx("div",{className:"w-14 h-14 bg-primary rounded-full flex items-center justify-center border-4 border-[#121212] shadow-lg",children:e.jsx(Ja,{size:24,className:"text-black"})})}),e.jsxs(Ve,{to:"/restaurants",className:`flex flex-col items-center gap-1 ${c("/restaurants")?"text-primary":"text-white/40"}`,children:[e.jsx(js,{size:24}),e.jsx("span",{className:"text-[10px] font-bold",children:"Perto"})]}),e.jsxs(Ve,{to:"/me",className:`flex flex-col items-center gap-1 ${c("/me")?"text-primary":"text-white/40"}`,children:[e.jsx(cs,{size:24}),e.jsx("span",{className:"text-[10px] font-bold",children:"Perfil"})]})]})})]})}function kf(){const[a,s]=k.useState({restaurants:0,orders:0,isLoading:!0});return k.useEffect(()=>{(async()=>{try{const r=await vl(We(ze(le,"users"),Ie("role","==","OWNER"))),o=await vl(ze(le,"orders"));s({restaurants:r.data().count,orders:o.data().count,isLoading:!1})}catch(r){console.warn("Could not load platform stats:",r),s(o=>({...o,isLoading:!1}))}})()},[]),a}function Pd({title:a,description:s,image:i,path:r,type:o="website",priceRange:c,rating:d,reviewCount:f,cuisineType:m,address:u,phone:x,price:h,availability:g="InStock"}){const b=typeof window<"u"?window.location.origin:"https://emprata.ai",w=`${b}${r}`,j=`${b}/og-image.jpg`,C=i||j,E=o==="restaurant"?{"@context":"https://schema.org","@type":"Restaurant",name:a,image:C,url:w,priceRange:c||"$$",servesCuisine:m||"Delivery",address:u?{"@type":"PostalAddress",streetAddress:u}:void 0,telephone:x,aggregateRating:d?{"@type":"AggregateRating",ratingValue:d.toFixed(1),bestRating:"5",worstRating:"1",reviewCount:f||1}:void 0,potentialAction:{"@type":"OrderAction",target:{"@type":"EntryPoint",urlTemplate:w,actionPlatform:["http://schema.org/DesktopWebPlatform","http://schema.org/MobileWebPlatform"]},deliveryMethod:["http://purl.org/goodrelations/v1#DeliveryModeOwnFleet"]}}:o==="product"?{"@context":"https://schema.org","@type":"Product",name:a,description:s,image:C,offers:{"@type":"Offer",priceCurrency:"BRL",price:h?.toFixed(2)||"0.00",availability:`https://schema.org/${g}`,url:w},aggregateRating:d?{"@type":"AggregateRating",ratingValue:d.toFixed(1),reviewCount:f||1}:void 0}:{"@context":"https://schema.org","@type":"WebSite",name:"EmprataAI - Delivery Inteligente",url:b,potentialAction:{"@type":"SearchAction",target:`${b}/search?q={search_term_string}`,"query-input":"required name=search_term_string"}};return e.jsxs(pp,{children:[e.jsxs("title",{children:[a," | EmprataAI"]}),e.jsx("meta",{name:"description",content:s}),e.jsx("link",{rel:"canonical",href:w}),e.jsx("meta",{property:"og:type",content:o==="restaurant"?"restaurant.restaurant":"website"}),e.jsx("meta",{property:"og:url",content:w}),e.jsx("meta",{property:"og:title",content:a}),e.jsx("meta",{property:"og:description",content:s}),e.jsx("meta",{property:"og:image",content:C}),e.jsx("meta",{property:"og:image:width",content:"1200"}),e.jsx("meta",{property:"og:image:height",content:"630"}),e.jsx("meta",{property:"og:site_name",content:"EmprataAI"}),e.jsx("meta",{property:"og:locale",content:"pt_BR"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:a}),e.jsx("meta",{name:"twitter:description",content:s}),e.jsx("meta",{name:"twitter:image",content:C}),e.jsx("meta",{name:"theme-color",content:"#FF6B00"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(E)})]})}function Cf(){const[a,s]=k.useState("CONSUMER"),i=gt(),r=kf(),o=Math.max(50-r.restaurants,3),c=a==="CONSUMER"?{bgGradient:"from-green-600/20 via-black to-black",button:"bg-green-500 hover:bg-green-400",glow:"shadow-[0_0_40px_rgba(34,197,94,0.3)]"}:{bgGradient:"from-purple-900/20 via-black to-black",button:"bg-purple-600 hover:bg-purple-500",glow:"shadow-[0_0_40px_rgba(147,51,234,0.3)]"};return e.jsxs("div",{className:"min-h-screen bg-[#050505] text-white font-sans selection:bg-white selection:text-black overflow-x-hidden transition-colors duration-1000",children:[e.jsx(Pd,{title:a==="CONSUMER"?"Emprata | Delivery do Futuro":"Emprata | Sistema Operacional de Lucro",description:"O ecossistema que une Inteligncia Artificial e Gastronomia.",path:"/"}),e.jsx("nav",{className:"fixed top-6 left-0 right-0 z-50 flex justify-center px-4 pointer-events-none",children:e.jsxs("div",{className:"bg-black/80 backdrop-blur-xl border border-white/10 p-1.5 rounded-full flex items-center gap-2 shadow-2xl pointer-events-auto",children:[e.jsx(Bl,{active:a==="CONSUMER",onClick:()=>s("CONSUMER"),label:"Para Comer",activeColor:"bg-green-500 text-black"}),e.jsx(Bl,{active:a==="BUSINESS",onClick:()=>s("BUSINESS"),label:"Para Vender",activeColor:"bg-purple-600 text-white"})]})}),e.jsxs("main",{className:"relative min-h-screen flex flex-col items-center justify-center pt-20 px-6 overflow-hidden",children:[e.jsx(Be,{mode:"wait",children:e.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.5},className:`absolute inset-0 bg-gradient-to-b ${c.bgGradient} pointer-events-none`},a)}),e.jsx("div",{className:"max-w-6xl mx-auto text-center relative z-10",children:e.jsx(Be,{mode:"wait",children:e.jsxs(Q.div,{initial:{y:40,opacity:0,filter:"blur(10px)"},animate:{y:0,opacity:1,filter:"blur(0px)"},exit:{y:-40,opacity:0,filter:"blur(10px)"},transition:{duration:.8,ease:"easeOut"},children:[e.jsx("div",{className:"flex justify-center mb-6",children:a==="CONSUMER"?e.jsxs("span",{className:"flex items-center gap-2 px-4 py-1.5 rounded-full border border-green-500/30 bg-green-900/10 text-green-400 text-[10px] font-black uppercase tracking-[0.2em] animate-pulse",children:[e.jsx(Bt,{size:12})," Acesso Liberado: Beta Pblico"]}):e.jsxs("span",{className:"flex items-center gap-2 px-4 py-1.5 rounded-full border border-purple-500/30 bg-purple-900/10 text-purple-400 text-[10px] font-black uppercase tracking-[0.2em]",children:[e.jsx(Dt,{size:12})," Vagas Founder: Restam ",o]})}),e.jsx("h1",{className:"text-5xl md:text-8xl font-black tracking-tighter mb-6 leading-[0.95]",children:a==="CONSUMER"?e.jsxs(e.Fragment,{children:["Pare de comer ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-600",children:"O que o algoritmo manda."})]}):e.jsxs(e.Fragment,{children:["O iFood  seu scio? ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-indigo-600",children:"Demita as taxas altas."})]})}),e.jsx("p",{className:"text-lg md:text-2xl text-white/60 max-w-3xl mx-auto mb-12 leading-relaxed font-medium",children:a==="CONSUMER"?"A IA do Emprata no te d opes aleatrias. Ela decifra seu desejo. Cashbacks reais, entrega rastreada via satlite e cardpios em vdeo.":"No somos apenas um sistema. Somos sua independncia. Tenha seu prprio aplicativo, sua logstica e uma IA que prev seu lucro antes do ms acabar."}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-6",children:[e.jsxs("button",{onClick:()=>i(a==="CONSUMER"?"/delivery":"/auth"),className:`${c.button} ${a==="CONSUMER"?"text-black":"text-white"} px-10 py-5 rounded-2xl font-black text-xl flex items-center gap-3 hover:scale-105 active:scale-95 transition-all ${c.glow}`,children:[a==="CONSUMER"?"QUERO COMER AGORA":"CRIAR CONTA FOUNDER",e.jsx(Ns,{size:24})]}),e.jsxs("button",{onClick:()=>i("/apps"),className:"px-8 py-5 rounded-2xl font-bold text-white/60 hover:text-white hover:bg-white/5 transition-all flex items-center gap-2 border border-transparent hover:border-white/10",children:[e.jsx(_i,{size:20}),"Baixar App ",a==="CONSUMER"?"":"do Dono"]})]}),e.jsxs("div",{className:"mt-12 flex items-center justify-center gap-2 opacity-60",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/20"}),e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/40"}),e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/60"})]}),e.jsxs("p",{className:"text-xs font-bold text-white",children:["Junte-se a ",e.jsx("span",{className:"text-white underline decoration-dotted",children:r.orders>50?`+${r.orders}`:"dezenas de"})," pioneiros hoje."]})]})]},a)})}),e.jsxs(Q.div,{className:"absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 opacity-30",animate:{y:[0,10,0]},transition:{repeat:1/0,duration:2},children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Descubra"}),e.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-white to-transparent"})]})]}),e.jsx("section",{className:"py-32 px-6 relative z-10 bg-[#050505]",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("h2",{className:"text-center text-3xl font-black mb-16 uppercase tracking-tight text-white/20",children:a==="CONSUMER"?"Tecnologia para seu Estmago":"Arsenal de Guerra para Delivery"}),e.jsx(Be,{mode:"wait",children:a==="CONSUMER"?e.jsx(Ef,{},"consumer"):e.jsx(Sf,{},"business")})]})}),e.jsxs("section",{className:"py-32 px-6 relative overflow-hidden border-t border-white/5",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${c.bgGradient} opacity-50 pointer-events-none`}),e.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[e.jsxs("h2",{className:"text-4xl md:text-6xl font-black italic tracking-tighter mb-8",children:['"Daqui a um ano, voc vai desejar ',e.jsx("br",{}),'ter comeado hoje."']}),e.jsx("p",{className:"text-white/50 mb-10",children:a==="CONSUMER"?"Sua prxima refeio favorita est a um clique de distncia.":"A revoluo do mercado de delivery est acontecendo. Voc vai assistir ou liderar?"}),e.jsx("button",{onClick:()=>i(a==="CONSUMER"?"/delivery":"/auth"),className:"bg-white text-black px-12 py-6 rounded-full font-black text-xl hover:scale-105 transition-transform shadow-2xl",children:a==="CONSUMER"?"FAZER MEU PEDIDO":"COMEAR AGORA"})]})]}),e.jsx("footer",{className:"py-12 text-center text-white/20 text-xs font-bold uppercase tracking-widest border-t border-white/5",children:" 2026 Emprata.ai  Tecnologia Segura"})]})}function Bl({active:a,onClick:s,label:i,activeColor:r}){return e.jsx("button",{onClick:s,className:`px-8 py-3 rounded-full text-xs font-black uppercase tracking-widest transition-all duration-500 ${a?r:"text-white/40 hover:text-white"}`,children:i})}function Ef(){return e.jsxs(Q.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"grid md:grid-cols-3 gap-6",children:[e.jsx(bs,{icon:Vs,title:"IA Pessoal",desc:"O Emprata aprende o que voc gosta. Odeia coentro? Ama bacon? Nunca mais erramos uma sugesto.",color:"text-green-400",bg:"bg-green-500/5"}),e.jsx(bs,{icon:_i,title:"Food Porn 4K",desc:"Cardpios em vdeo de alta definio. Chega de fotos fakes. Veja a fumaa saindo antes de pedir.",color:"text-yellow-400",bg:"bg-yellow-500/5",large:!0}),e.jsx(bs,{icon:Hs,title:"Entrega Atmica",desc:"Algoritmo de rota militar. Acompanhe o motoboy no mapa sem delay de atualizao.",color:"text-blue-400",bg:"bg-blue-500/5"}),e.jsx(bs,{icon:Us,title:"Cashback Viral",desc:"A economia compartilhada real. Convide um amigo e ambos ganham dinheiro na carteira digital.",color:"text-purple-400",bg:"bg-purple-500/5",large:!0})]})}function Sf(){return e.jsxs(Q.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"grid md:grid-cols-3 gap-6",children:[e.jsx(bs,{icon:Ji,title:"Lucro Dinmico",desc:"Comeou a chover? A IA sugere ajustar a taxa de entrega. Loja vazia? Ela cria promoes relmpago.",color:"text-purple-400",bg:"bg-purple-500/5",large:!0}),e.jsx(bs,{icon:_s,title:"Anti-Calote",desc:"Checkout blindado. Identificamos o CPF e score do cliente antes mesmo de aceitar o pedido.",color:"text-green-400",bg:"bg-green-500/5"}),e.jsx(bs,{icon:ot,title:"KDS (Cozinha)",desc:"Tela de produo digital. Substitua a impressora barulhenta por organizao silenciosa e eficiente.",color:"text-orange-400",bg:"bg-orange-500/5"}),e.jsx(bs,{icon:Bt,title:"Omnichannel",desc:"Centralize pedidos do Balco, WhatsApp, Telefone e App em um nico painel de controle.",color:"text-blue-400",bg:"bg-blue-500/5",large:!0})]})}function bs({icon:a,title:s,desc:i,color:r,bg:o,large:c}){return e.jsxs("div",{className:`p-8 rounded-[2.5rem] border border-white/5 ${o} ${c?"md:col-span-2":""} hover:border-white/20 transition-all group cursor-default relative overflow-hidden`,children:[e.jsx("div",{className:`absolute top-0 right-0 p-24 ${o.replace("/5","/10")} blur-[50px] rounded-full pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity`}),e.jsx("div",{className:`w-14 h-14 rounded-2xl bg-black/50 border border-white/5 flex items-center justify-center mb-6 ${r} shadow-lg relative z-10`,children:e.jsx(a,{size:28})}),e.jsx("h3",{className:"text-2xl font-black mb-3 text-white relative z-10",children:s}),e.jsx("p",{className:"text-white/50 leading-relaxed font-medium relative z-10",children:i})]})}function Id({isOpen:a,onClose:s,onSuccess:i}){const{loginWithGoogle:r,signIn:o,signUp:c,error:d}=Ze(),[f,m]=k.useState("google"),[u,x]=k.useState(""),[h,g]=k.useState(""),[b,w]=k.useState(""),[j,C]=k.useState(null),[A,E]=k.useState(!1),_=async()=>{try{E(!0),C(null),await r(),i?.(),s()}catch(R){C(R.message||"Erro ao fazer login com Google")}finally{E(!1)}},I=async R=>{R.preventDefault();try{E(!0),C(null),await o(u,h),i?.(),s()}catch{C("Email ou senha incorretos")}finally{E(!1)}},S=async R=>{R.preventDefault();try{E(!0),C(null),await c(u,h,b),i?.(),s()}catch($){C($.message||"Erro ao criar conta")}finally{E(!1)}};return e.jsx(Be,{children:a&&e.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[e.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"absolute inset-0 bg-black/90 backdrop-blur-md"}),e.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md bg-zinc-900 border-2 border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors z-10",children:e.jsx(Lt,{className:"w-5 h-5 text-white/60"})}),e.jsxs("div",{className:"p-8 pt-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-primary/30",children:e.jsx("span",{className:"text-3xl",children:""})}),e.jsx("h2",{className:"text-3xl font-black text-white mb-2 italic uppercase",children:"Salve sua obra de arte"}),e.jsxs("p",{className:"text-white/60 font-medium",children:["Crie uma conta grtis para baixar sua imagem e ganhar ",e.jsx("span",{className:"text-primary font-bold",children:"+3 crditos"})]})]}),f==="google"&&e.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsx("button",{onClick:_,disabled:A,className:"w-full bg-white hover:bg-gray-100 text-gray-900 font-bold py-4 px-6 rounded-2xl flex items-center justify-center gap-3 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:A?e.jsx(ve,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-white/10"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-zinc-900 text-white/40 font-bold uppercase tracking-wider",children:"ou"})})]}),e.jsxs("button",{onClick:()=>m("email"),className:"w-full bg-white/5 hover:bg-white/10 text-white font-bold py-4 px-6 rounded-2xl flex items-center justify-center gap-3 transition-all border border-white/10",children:[e.jsx(Ba,{className:"w-5 h-5"}),"Entrar com Email"]})]}),f==="email"&&e.jsxs(Q.form,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ba,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"email",value:u,onChange:R=>x(R.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"seu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"password",value:h,onChange:R=>g(R.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:A,className:"w-full bg-primary hover:bg-orange-600 text-white font-black py-4 rounded-2xl transition-all shadow-lg shadow-primary/30 disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wider",children:A?e.jsx(ve,{className:"w-5 h-5 animate-spin mx-auto"}):"Entrar"}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"button",onClick:()=>m("signup"),className:"text-sm text-white/60 hover:text-white font-bold transition-colors",children:["No tem conta? ",e.jsx("span",{className:"text-primary",children:"Criar agora"})]})}),e.jsx("button",{type:"button",onClick:()=>m("google"),className:"w-full text-sm text-white/40 hover:text-white font-bold transition-colors",children:" Voltar"})]}),f==="signup"&&e.jsxs(Q.form,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Nome"}),e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",value:b,onChange:R=>w(R.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"Seu nome",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ba,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"email",value:u,onChange:R=>x(R.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"seu@email.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-white/60 mb-2 uppercase tracking-wider",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"password",value:h,onChange:R=>g(R.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-12 py-3 text-white focus:outline-none focus:border-primary/50 transition-colors",placeholder:"Mnimo 6 caracteres",required:!0,minLength:6})]})]}),e.jsx("button",{type:"submit",disabled:A,className:"w-full bg-primary hover:bg-orange-600 text-white font-black py-4 rounded-2xl transition-all shadow-lg shadow-primary/30 disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wider",children:A?e.jsx(ve,{className:"w-5 h-5 animate-spin mx-auto"}):"Criar Conta"}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"button",onClick:()=>m("email"),className:"text-sm text-white/60 hover:text-white font-bold transition-colors",children:["J tem conta? ",e.jsx("span",{className:"text-primary",children:"Entrar"})]})}),e.jsx("button",{type:"button",onClick:()=>m("google"),className:"w-full text-sm text-white/40 hover:text-white font-bold transition-colors",children:" Voltar"})]}),(j||d)&&e.jsxs(Q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 bg-red-500/20 border border-red-500/50 rounded-xl p-3 flex items-center gap-2",children:[e.jsx(Wr,{className:"w-4 h-4 text-red-400 shrink-0"}),e.jsx("p",{className:"text-sm text-red-300 font-bold",children:j||d})]}),e.jsx("p",{className:"text-center text-xs text-white/30 font-bold mt-6",children:"Ao continuar, voc concorda com nossos Termos de Uso"})]})]})]})})}const Af={starter:"STARTER",pro:"GROWTH"};function Tf(){const[a]=pd(),s=gt(),{user:i,userData:r,loading:o}=Ze(),c=a.get("role")==="consumer"?"consumer":"owner",[d,f]=k.useState(c),[m,u]=k.useState(!1),[x,h]=k.useState(!1),g=typeof window<"u"?sessionStorage.getItem("pending_plan"):null;k.useEffect(()=>{!o&&i&&b()},[i,o]);const b=async()=>{const j=sessionStorage.getItem("pending_plan");if(j){console.log(` [LoginPage] Resuming purchase for plan: ${j}`),h(!0);try{X.loading("Gerando seu pagamento seguro...");const E=(await vi(bi,"createSubscription")({plan:Af[j],billingType:"PIX"})).data;if(sessionStorage.removeItem("pending_plan"),sessionStorage.removeItem("purchase_intent_value"),E.success&&E.invoiceUrl)window.location.href=E.invoiceUrl;else throw new Error("Falha ao gerar assinatura")}catch(C){console.error("Error resuming purchase:",C),X.dismiss(),X.error("Erro ao gerar assinatura. Tente novamente."),h(!1),s("/dashboard",{replace:!0})}}else{const C=r?.role||d;C==="consumer"?s("/marketplace",{replace:!0}):C==="waiter"||C==="staff"?s("/waiter-mode",{replace:!0}):s("/dashboard",{replace:!0})}};if(o||x)return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(ve,{className:"w-12 h-12 text-primary animate-spin mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:x?"Preparando seu ambiente...":"Conectando..."}),x&&e.jsx("p",{className:"text-white/40 text-sm mt-2",children:"Estamos gerando sua assinatura Asaas."})]});const w=()=>{};return e.jsxs("div",{className:"min-h-screen bg-[#050505] text-white flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-primary/10 via-transparent to-transparent pointer-events-none"}),e.jsx("header",{className:"absolute top-6 left-6 z-10",children:e.jsxs("button",{onClick:()=>s("/"),className:"flex items-center gap-2 text-white/40 hover:text-white transition-colors group",children:[e.jsx(Zs,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"font-bold text-sm",children:"Voltar"})]})}),e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md z-10",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsxs("h1",{className:"text-4xl font-black italic tracking-tighter mb-2",children:["Emprata",e.jsx("span",{className:"text-primary",children:".ai"})]}),e.jsx("p",{className:"text-white/40 font-medium",children:g?"Complete seu login para ativar o plano":d==="consumer"?"O melhor da gastronomia na sua porta.":"O Sistema Operacional do seu Delivery."})]}),g&&e.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"mb-8 p-4 bg-primary/10 border border-primary/30 rounded-2xl text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Bt,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-primary text-xs font-black uppercase tracking-wider",children:"Quase l!"})]}),e.jsxs("p",{className:"text-white/80 text-sm font-medium",children:["Faa login para concluir a assinatura do plano"," ",e.jsx("span",{className:"text-white font-black",children:g.toUpperCase()})]})]}),!g&&e.jsxs("div",{className:"bg-white/5 p-1 rounded-2xl flex mb-8 border border-white/10",children:[e.jsxs("button",{onClick:()=>f("owner"),className:`flex-1 py-3 rounded-xl text-xs font-bold uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${d==="owner"?"bg-primary text-white shadow-lg":"text-white/40 hover:text-white"}`,children:[e.jsx(ot,{className:"w-4 h-4"})," Restaurante"]}),e.jsxs("button",{onClick:()=>f("consumer"),className:`flex-1 py-3 rounded-xl text-xs font-bold uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${d==="consumer"?"bg-white text-black shadow-lg":"text-white/40 hover:text-white"}`,children:[e.jsx(Ja,{className:"w-4 h-4"})," Cliente"]})]}),e.jsxs("div",{className:"bg-[#121212] border border-white/10 rounded-3xl p-8 shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-32 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-primary/10 transition-all duration-1000"}),e.jsx("h2",{className:"text-2xl font-bold mb-2 relative z-10",children:g?"Login Rpido":d==="consumer"?"Fome de qu?":"Gerencie seu Negcio"}),e.jsx("p",{className:"text-white/40 text-sm mb-8 relative z-10 leading-relaxed",children:g?"Aps o login, voc ser redirecionado automaticamente para o pagamento.":d==="consumer"?"Entre para acompanhar seus pedidos, salvar endereos e descobrir novos sabores.":"Acesse sua dashboard, KDS e ferramentas de gesto com inteligncia artificial."}),e.jsxs("button",{onClick:()=>u(!0),className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-3 transition-all transform active:scale-95 ${g||d==="owner"?"bg-primary text-white hover:bg-orange-600":"bg-white text-black hover:bg-gray-200"}`,children:[g?"Entrar e Assinar":d==="consumer"?"Entrar / Cadastrar":"Acessar Painel",e.jsx(Ns,{className:"w-4 h-4"})]}),d==="owner"&&!g&&e.jsx(Ve,{to:"/waiter-login",className:"block text-center mt-4 text-xs font-bold text-white/30 hover:text-white transition-colors",children:"Sou Garom / Staff"}),d==="consumer"&&!g&&e.jsx("button",{onClick:async()=>{try{await Bm(He),s("/marketplace"),X.success("Modo Visitante Ativado! ")}catch{X.error("Erro ao entrar como visitante")}},className:"block w-full text-center mt-4 text-sm text-white/40 hover:text-white transition-colors underline underline-offset-4",children:"S estou dando uma olhadinha (Entrar sem cadastro)"})]}),e.jsx("div",{className:"text-center mt-8 text-[10px] font-bold text-white/20 uppercase tracking-widest",children:"Emprata Inc.  2025"})]}),e.jsx(Id,{isOpen:m,onClose:()=>u(!1),onSuccess:w})]})}const Pf="modulepreload",If=function(a){return"/"+a},zl={},Mf=function(s,i,r){let o=Promise.resolve();if(i&&i.length>0){let m=function(u){return Promise.all(u.map(x=>Promise.resolve(x).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");o=m(i.map(u=>{if(u=If(u),u in zl)return;zl[u]=!0;const x=u.endsWith(".css"),h=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=x?"stylesheet":Pf,x||(g.as="script"),g.crossOrigin="",g.href=u,f&&g.setAttribute("nonce",f),document.head.appendChild(g),x)return new Promise((b,w)=>{g.addEventListener("load",b),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function c(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return o.then(d=>{for(const f of d||[])f.status==="rejected"&&c(f.reason);return s().catch(c)})},Fl=["Acendendo o fogo...","Contratando o fotgrafo...","Arrumando a mesa...","Passando um pano...","Temperando a lente...","Finalizando o empratamento..."],Ul=[Oh,en,Dh,ot],Rf=()=>{const[a,s]=k.useState(0),[i,r]=k.useState(0);k.useEffect(()=>{const c=setInterval(()=>{s(f=>(f+1)%Fl.length)},800),d=setInterval(()=>{r(f=>(f+1)%Ul.length)},1500);return()=>{clearInterval(c),clearInterval(d)}},[]);const o=Ul[i];return e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-primary z-50 flex flex-col items-center justify-center text-white p-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Q.div,{animate:{scale:[1,1.2,1],opacity:[.5,.8,.5]},transition:{repeat:1/0,duration:2},className:"absolute inset-0 bg-white/20 rounded-full blur-3xl"}),e.jsx(Q.div,{animate:{rotate:360},transition:{repeat:1/0,duration:8,ease:"linear"},className:"w-32 h-32 border-4 border-dashed border-white/50 rounded-full flex items-center justify-center",children:e.jsx(Q.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},className:"w-16 h-16 bg-white text-primary rounded-full flex items-center justify-center shadow-xl",children:e.jsx(o,{className:"w-8 h-8"})},i)})]}),e.jsxs("div",{className:"mt-12 h-20 flex flex-col items-center",children:[e.jsx("h2",{className:"text-3xl font-extrabold mb-4 uppercase tracking-tighter italic",children:"Chef Mode"}),e.jsx(Be,{mode:"wait",children:e.jsx(Q.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-xl font-bold text-white/90 text-center",children:Fl[a]},a)})]}),e.jsx("div",{className:"mt-8 w-48 h-2 bg-white/20 rounded-full overflow-hidden",children:e.jsx(Q.div,{animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"w-full h-full bg-white"})}),e.jsx("div",{className:"absolute bottom-12 text-center opacity-60",children:e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"A inteligncia est cozinhando..."})})]})};function ws(a){return typeof a=="string"||a instanceof String}function Vl(a){var s;return typeof a=="object"&&a!=null&&(a==null||(s=a.constructor)==null?void 0:s.name)==="Object"}function Md(a,s){return Array.isArray(s)?Md(a,(i,r)=>s.includes(r)):Object.entries(a).reduce((i,r)=>{let[o,c]=r;return s(c,o)&&(i[o]=c),i},{})}const me={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function Lf(a){switch(a){case me.LEFT:return me.FORCE_LEFT;case me.RIGHT:return me.FORCE_RIGHT;default:return a}}function ar(a){return a.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function rn(a,s){if(s===a)return!0;const i=Array.isArray(s),r=Array.isArray(a);let o;if(i&&r){if(s.length!=a.length)return!1;for(o=0;o<s.length;o++)if(!rn(s[o],a[o]))return!1;return!0}if(i!=r)return!1;if(s&&a&&typeof s=="object"&&typeof a=="object"){const c=s instanceof Date,d=a instanceof Date;if(c&&d)return s.getTime()==a.getTime();if(c!=d)return!1;const f=s instanceof RegExp,m=a instanceof RegExp;if(f&&m)return s.toString()==a.toString();if(f!=m)return!1;const u=Object.keys(s);for(o=0;o<u.length;o++)if(!Object.prototype.hasOwnProperty.call(a,u[o]))return!1;for(o=0;o<u.length;o++)if(!rn(a[u[o]],s[u[o]]))return!1;return!0}else if(s&&a&&typeof s=="function"&&typeof a=="function")return s.toString()===a.toString();return!1}class Of{constructor(s){for(Object.assign(this,s);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?me.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?me.RIGHT:me.LEFT}}function ge(a,s){return new ge.InputMask(a,s)}function Rd(a){if(a==null)throw new Error("mask property should be defined");return a instanceof RegExp?ge.MaskedRegExp:ws(a)?ge.MaskedPattern:a===Date?ge.MaskedDate:a===Number?ge.MaskedNumber:Array.isArray(a)||a===Array?ge.MaskedDynamic:ge.Masked&&a.prototype instanceof ge.Masked?a:ge.Masked&&a instanceof ge.Masked?a.constructor:a instanceof Function?ge.MaskedFunction:(console.warn("Mask not found for mask",a),ge.Masked)}function Zi(a){if(!a)throw new Error("Options in not defined");if(ge.Masked){if(a.prototype instanceof ge.Masked)return{mask:a};const{mask:s=void 0,...i}=a instanceof ge.Masked?{mask:a}:Vl(a)&&a.mask instanceof ge.Masked?a:{};if(s){const r=s.mask;return{...Md(s,(o,c)=>!c.startsWith("_")),mask:s.constructor,_mask:r,...i}}}return Vl(a)?{...a}:{mask:a}}function us(a){if(ge.Masked&&a instanceof ge.Masked)return a;const s=Zi(a),i=Rd(s.mask);if(!i)throw new Error("Masked class is not found for provided mask "+s.mask+", appropriate module needs to be imported manually before creating mask.");return s.mask===i&&delete s.mask,s._mask&&(s.mask=s._mask,delete s._mask),new i(s)}ge.createMask=us;class oo{get selectionStart(){let s;try{s=this._unsafeSelectionStart}catch{}return s??this.value.length}get selectionEnd(){let s;try{s=this._unsafeSelectionEnd}catch{}return s??this.value.length}select(s,i){if(!(s==null||i==null||s===this.selectionStart&&i===this.selectionEnd))try{this._unsafeSelect(s,i)}catch{}}get isActive(){return!1}}ge.MaskElement=oo;const Hl=90,Df=89;class xn extends oo{constructor(s){super(),this.input=s,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var s,i,r;return(s=(i=(r=this.input).getRootNode)==null?void 0:i.call(r))!=null?s:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(s){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",s.drop),this.input.addEventListener("click",s.click),this.input.addEventListener("focus",s.focus),this.input.addEventListener("blur",s.commit),this._handlers=s}_onKeydown(s){if(this._handlers.redo&&(s.keyCode===Hl&&s.shiftKey&&(s.metaKey||s.ctrlKey)||s.keyCode===Df&&s.ctrlKey))return s.preventDefault(),this._handlers.redo(s);if(this._handlers.undo&&s.keyCode===Hl&&(s.metaKey||s.ctrlKey))return s.preventDefault(),this._handlers.undo(s);s.isComposing||this._handlers.selectionChange(s)}_onBeforeinput(s){if(s.inputType==="historyUndo"&&this._handlers.undo)return s.preventDefault(),this._handlers.undo(s);if(s.inputType==="historyRedo"&&this._handlers.redo)return s.preventDefault(),this._handlers.redo(s)}_onCompositionEnd(s){this._handlers.input(s)}_onInput(s){s.isComposing||this._handlers.input(s)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}ge.HTMLMaskElement=xn;class Bf extends xn{constructor(s){super(s),this.input=s}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(s,i){this.input.setSelectionRange(s,i)}get value(){return this.input.value}set value(s){this.input.value=s}}ge.HTMLMaskElement=xn;class Ld extends xn{get _unsafeSelectionStart(){const s=this.rootElement,i=s.getSelection&&s.getSelection(),r=i&&i.anchorOffset,o=i&&i.focusOffset;return o==null||r==null||r<o?r:o}get _unsafeSelectionEnd(){const s=this.rootElement,i=s.getSelection&&s.getSelection(),r=i&&i.anchorOffset,o=i&&i.focusOffset;return o==null||r==null||r>o?r:o}_unsafeSelect(s,i){if(!this.rootElement.createRange)return;const r=this.rootElement.createRange();r.setStart(this.input.firstChild||this.input,s),r.setEnd(this.input.lastChild||this.input,i);const o=this.rootElement,c=o.getSelection&&o.getSelection();c&&(c.removeAllRanges(),c.addRange(r))}get value(){return this.input.textContent||""}set value(s){this.input.textContent=s}}ge.HTMLContenteditableMaskElement=Ld;class gn{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(s){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(s),this.states.length>gn.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(s){return this.currentIndex=Math.min(Math.max(this.currentIndex+s,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}gn.MAX_LENGTH=100;class zf{constructor(s,i){this.el=s instanceof oo?s:s.isContentEditable&&s.tagName!=="INPUT"&&s.tagName!=="TEXTAREA"?new Ld(s):new Bf(s),this.masked=us(i),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new gn,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(s){var i;return s==null||((i=this.masked)==null?void 0:i.maskEquals(s))}get mask(){return this.masked.mask}set mask(s){if(this.maskEquals(s))return;if(!(s instanceof ge.Masked)&&this.masked.constructor===Rd(s)){this.masked.updateOptions({mask:s});return}const i=s instanceof ge.Masked?s:us({mask:s});i.unmaskedValue=this.masked.unmaskedValue,this.masked=i}get value(){return this._value}set value(s){this.value!==s&&(this.masked.value=s,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(s){this.unmaskedValue!==s&&(this.masked.unmaskedValue=s,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(s){this.rawInputValue!==s&&(this.masked.rawInputValue=s,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(s){this.masked.typedValueEquals(s)||(this.masked.typedValue=s,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(s,i){const r=this._listeners[s];r&&r.forEach(o=>o(i))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(s){!this.el||!this.el.isActive||(this.el.select(s,s),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(s){const i=this.masked.unmaskedValue,r=this.masked.value,o=this.masked.rawInputValue,c=this.displayValue,d=this.unmaskedValue!==i||this.value!==r||this._rawInputValue!==o;this._unmaskedValue=i,this._value=r,this._rawInputValue=o,this.el.value!==c&&(this.el.value=c),s==="auto"?this.alignCursor():s!=null&&(this.cursorPos=s),d&&this._fireChangeEvents(),!this._historyChanging&&(d||this.history.isEmpty)&&this.history.push({unmaskedValue:i,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(s){const{mask:i,...r}=s,o=!this.maskEquals(i),c=this.masked.optionsIsChanged(r);o&&(this.mask=i),c&&this.masked.updateOptions(r),(o||c)&&this.updateControl()}updateCursor(s){s!=null&&(this.cursorPos=s,this._delayUpdateCursor(s))}_delayUpdateCursor(s){this._abortUpdateCursor(),this._changingCursorPos=s,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,me.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(s,i){return this._listeners[s]||(this._listeners[s]=[]),this._listeners[s].push(i),this}off(s,i){if(!this._listeners[s])return this;if(!i)return delete this._listeners[s],this;const r=this._listeners[s].indexOf(i);return r>=0&&this._listeners[s].splice(r,1),this}_onInput(s){this._inputEvent=s,this._abortUpdateCursor();const i=new Of({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),r=this.masked.rawInputValue,o=this.masked.splice(i.startChangePos,i.removed.length,i.inserted,i.removeDirection,{input:!0,raw:!0}).offset,c=r===this.masked.rawInputValue?i.removeDirection:me.NONE;let d=this.masked.nearestInputPos(i.startChangePos+o,c);c!==me.NONE&&(d=this.masked.nearestInputPos(d,me.NONE)),this.updateControl(d),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(s){s.preventDefault(),s.stopPropagation()}_onFocus(s){this.alignCursorFriendly()}_onClick(s){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(s){s&&(this._historyChanging=!0,this.unmaskedValue=s.unmaskedValue,this.el.select(s.selection.start,s.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}}ge.InputMask=zf;class ke{static normalize(s){return Array.isArray(s)?s:[s,new ke]}constructor(s){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},s)}aggregate(s){return this.inserted+=s.inserted,this.rawInserted+=s.rawInserted,this.tailShift+=s.tailShift,this.skip=this.skip||s.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return!!this.rawInserted||this.skip}equals(s){return this.inserted===s.inserted&&this.tailShift===s.tailShift&&this.rawInserted===s.rawInserted&&this.skip===s.skip}}ge.ChangeDetails=ke;class Jt{constructor(s,i,r){s===void 0&&(s=""),i===void 0&&(i=0),this.value=s,this.from=i,this.stop=r}toString(){return this.value}extend(s){this.value+=String(s)}appendTo(s){return s.append(this.toString(),{tail:!0}).aggregate(s._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(s){Object.assign(this,s)}unshift(s){if(!this.value.length||s!=null&&this.from>=s)return"";const i=this.value[0];return this.value=this.value.slice(1),i}shift(){if(!this.value.length)return"";const s=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),s}}class ht{constructor(s){this._value="",this._update({...ht.DEFAULTS,...s}),this._initialized=!0}updateOptions(s){this.optionsIsChanged(s)&&this.withValueRefresh(this._update.bind(this,s))}_update(s){Object.assign(this,s)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(s){this._value=s._value}reset(){this._value=""}get value(){return this._value}set value(s){this.resolve(s,{input:!0})}resolve(s,i){i===void 0&&(i={input:!0}),this.reset(),this.append(s,i,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(s){this.resolve(s,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(s){this.format?this.value=this.format(s,this):this.unmaskedValue=String(s)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(s){this.resolve(s,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(s,i){return s}totalInputPositions(s,i){return s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),Math.min(this.displayValue.length,i-s)}extractInput(s,i,r){return s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),this.displayValue.slice(s,i)}extractTail(s,i){return s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),new Jt(this.extractInput(s,i),s)}appendTail(s){return ws(s)&&(s=new Jt(String(s))),s.appendTo(this)}_appendCharRaw(s,i){return s?(this._value+=s,new ke({inserted:s,rawInserted:s})):new ke}_appendChar(s,i,r){i===void 0&&(i={});const o=this.state;let c;if([s,c]=this.doPrepareChar(s,i),s&&(c=c.aggregate(this._appendCharRaw(s,i)),!c.rawInserted&&this.autofix==="pad")){const d=this.state;this.state=o;let f=this.pad(i);const m=this._appendCharRaw(s,i);f=f.aggregate(m),m.rawInserted||f.equals(c)?c=f:this.state=d}if(c.inserted){let d,f=this.doValidate(i)!==!1;if(f&&r!=null){const m=this.state;if(this.overwrite===!0){d=r.state;for(let x=0;x<c.rawInserted.length;++x)r.unshift(this.displayValue.length-c.tailShift)}let u=this.appendTail(r);if(f=u.rawInserted.length===r.toString().length,!(f&&u.inserted)&&this.overwrite==="shift"){this.state=m,d=r.state;for(let x=0;x<c.rawInserted.length;++x)r.shift();u=this.appendTail(r),f=u.rawInserted.length===r.toString().length}f&&u.inserted&&(this.state=m)}f||(c=new ke,this.state=o,r&&d&&(r.state=d))}return c}_appendPlaceholder(){return new ke}_appendEager(){return new ke}append(s,i,r){if(!ws(s))throw new Error("value should be string");const o=ws(r)?new Jt(String(r)):r;i!=null&&i.tail&&(i._beforeTailState=this.state);let c;[s,c]=this.doPrepare(s,i);for(let d=0;d<s.length;++d){const f=this._appendChar(s[d],i,o);if(!f.rawInserted&&!this.doSkipInvalid(s[d],i,o))break;c.aggregate(f)}return(this.eager===!0||this.eager==="append")&&i!=null&&i.input&&s&&c.aggregate(this._appendEager()),o!=null&&(c.tailShift+=this.appendTail(o).tailShift),c}remove(s,i){return s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),this._value=this.displayValue.slice(0,s)+this.displayValue.slice(i),new ke}withValueRefresh(s){if(this._refreshing||!this._initialized)return s();this._refreshing=!0;const i=this.rawInputValue,r=this.value,o=s();return this.rawInputValue=i,this.value&&this.value!==r&&r.indexOf(this.value)===0&&(this.append(r.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,o}runIsolated(s){if(this._isolated||!this._initialized)return s(this);this._isolated=!0;const i=this.state,r=s(this);return this.state=i,delete this._isolated,r}doSkipInvalid(s,i,r){return!!this.skipInvalid}doPrepare(s,i){return i===void 0&&(i={}),ke.normalize(this.prepare?this.prepare(s,this,i):s)}doPrepareChar(s,i){return i===void 0&&(i={}),ke.normalize(this.prepareChar?this.prepareChar(s,this,i):s)}doValidate(s){return(!this.validate||this.validate(this.value,this,s))&&(!this.parent||this.parent.doValidate(s))}doCommit(){this.commit&&this.commit(this.value,this)}splice(s,i,r,o,c){r===void 0&&(r=""),o===void 0&&(o=me.NONE),c===void 0&&(c={input:!0});const d=s+i,f=this.extractTail(d),m=this.eager===!0||this.eager==="remove";let u;m&&(o=Lf(o),u=this.extractInput(0,d,{raw:!0}));let x=s;const h=new ke;if(o!==me.NONE&&(x=this.nearestInputPos(s,i>1&&s!==0&&!m?me.NONE:o),h.tailShift=x-s),h.aggregate(this.remove(x)),m&&o!==me.NONE&&u===this.rawInputValue)if(o===me.FORCE_LEFT){let g;for(;u===this.rawInputValue&&(g=this.displayValue.length);)h.aggregate(new ke({tailShift:-1})).aggregate(this.remove(g-1))}else o===me.FORCE_RIGHT&&f.unshift();return h.aggregate(this.append(r,c,f))}maskEquals(s){return this.mask===s}optionsIsChanged(s){return!rn(this,s)}typedValueEquals(s){const i=this.typedValue;return s===i||ht.EMPTY_VALUES.includes(s)&&ht.EMPTY_VALUES.includes(i)||(this.format?this.format(s,this)===this.format(this.typedValue,this):!1)}pad(s){return new ke}}ht.DEFAULTS={skipInvalid:!0};ht.EMPTY_VALUES=[void 0,null,""];ge.Masked=ht;class Ls{constructor(s,i){s===void 0&&(s=[]),i===void 0&&(i=0),this.chunks=s,this.from=i}toString(){return this.chunks.map(String).join("")}extend(s){if(!String(s))return;s=ws(s)?new Jt(String(s)):s;const i=this.chunks[this.chunks.length-1],r=i&&(i.stop===s.stop||s.stop==null)&&s.from===i.from+i.toString().length;if(s instanceof Jt)r?i.extend(s.toString()):this.chunks.push(s);else if(s instanceof Ls){if(s.stop==null){let o;for(;s.chunks.length&&s.chunks[0].stop==null;)o=s.chunks.shift(),o.from+=s.from,this.extend(o)}s.toString()&&(s.stop=s.blockIndex,this.chunks.push(s))}}appendTo(s){if(!(s instanceof ge.MaskedPattern))return new Jt(this.toString()).appendTo(s);const i=new ke;for(let r=0;r<this.chunks.length;++r){const o=this.chunks[r],c=s._mapPosToBlock(s.displayValue.length),d=o.stop;let f;if(d!=null&&(!c||c.index<=d)&&((o instanceof Ls||s._stops.indexOf(d)>=0)&&i.aggregate(s._appendPlaceholder(d)),f=o instanceof Ls&&s._blocks[d]),f){const m=f.appendTail(o);i.aggregate(m);const u=o.toString().slice(m.rawInserted.length);u&&i.aggregate(s.append(u,{tail:!0}))}else i.aggregate(s.append(o.toString(),{tail:!0}))}return i}get state(){return{chunks:this.chunks.map(s=>s.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(s){const{chunks:i,...r}=s;Object.assign(this,r),this.chunks=i.map(o=>{const c="chunks"in o?new Ls:new Jt;return c.state=o,c})}unshift(s){if(!this.chunks.length||s!=null&&this.from>=s)return"";const i=s!=null?s-this.from:s;let r=0;for(;r<this.chunks.length;){const o=this.chunks[r],c=o.unshift(i);if(o.toString()){if(!c)break;++r}else this.chunks.splice(r,1);if(c)return c}return""}shift(){if(!this.chunks.length)return"";let s=this.chunks.length-1;for(;0<=s;){const i=this.chunks[s],r=i.shift();if(i.toString()){if(!r)break;--s}else this.chunks.splice(s,1);if(r)return r}return""}}class Ff{constructor(s,i){this.masked=s,this._log=[];const{offset:r,index:o}=s._mapPosToBlock(i)||(i<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=r,this.index=o,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(s){Object.assign(this,s)}pushState(){this._log.push(this.state)}popState(){const s=this._log.pop();return s&&(this.state=s),s}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(s){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((i=this.block)==null?void 0:i.displayValue.length)||0){var i;if(s())return this.ok=!0}return this.ok=!1}_pushRight(s){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(s())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,me.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,me.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,me.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,me.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,me.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,me.NONE),!0})}}class Od{constructor(s){Object.assign(this,s),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(s,i){return s===void 0&&(s=0),i===void 0&&(i=this._value.length),this._value=this._value.slice(0,s)+this._value.slice(i),this._value||(this._isRawInput=!1),new ke}nearestInputPos(s,i){i===void 0&&(i=me.NONE);const r=0,o=this._value.length;switch(i){case me.LEFT:case me.FORCE_LEFT:return r;case me.NONE:case me.RIGHT:case me.FORCE_RIGHT:default:return o}}totalInputPositions(s,i){return s===void 0&&(s=0),i===void 0&&(i=this._value.length),this._isRawInput?i-s:0}extractInput(s,i,r){return s===void 0&&(s=0),i===void 0&&(i=this._value.length),r===void 0&&(r={}),r.raw&&this._isRawInput&&this._value.slice(s,i)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(s,i){if(i===void 0&&(i={}),this.isFilled)return new ke;const r=this.eager===!0||this.eager==="append",c=this.char===s&&(this.isUnmasking||i.input||i.raw)&&(!i.raw||!r)&&!i.tail,d=new ke({inserted:this.char,rawInserted:c?this.char:""});return this._value=this.char,this._isRawInput=c&&(i.raw||i.input),d}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const s=new ke;return this.isFilled||(this._value=s.inserted=this.char),s}extractTail(){return new Jt("")}appendTail(s){return ws(s)&&(s=new Jt(String(s))),s.appendTo(this)}append(s,i,r){const o=this._appendChar(s[0],i);return r!=null&&(o.tailShift+=this.appendTail(r).tailShift),o}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(s){this._value=s._value,this._isRawInput=!!s._rawInputValue}pad(s){return this._appendPlaceholder()}}class on{constructor(s){const{parent:i,isOptional:r,placeholderChar:o,displayChar:c,lazy:d,eager:f,...m}=s;this.masked=us(m),Object.assign(this,{parent:i,isOptional:r,placeholderChar:o,displayChar:c,lazy:d,eager:f})}reset(){this.isFilled=!1,this.masked.reset()}remove(s,i){return s===void 0&&(s=0),i===void 0&&(i=this.value.length),s===0&&i>=1?(this.isFilled=!1,this.masked.remove(s,i)):new ke}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(s,i){if(i===void 0&&(i={}),this.isFilled)return new ke;const r=this.masked.state;let o=this.masked._appendChar(s,this.currentMaskFlags(i));return o.inserted&&this.doValidate(i)===!1&&(o=new ke,this.masked.state=r),!o.inserted&&!this.isOptional&&!this.lazy&&!i.input&&(o.inserted=this.placeholderChar),o.skip=!o.inserted&&!this.isOptional,this.isFilled=!!o.inserted,o}append(s,i,r){return this.masked.append(s,this.currentMaskFlags(i),r)}_appendPlaceholder(){return this.isFilled||this.isOptional?new ke:(this.isFilled=!0,new ke({inserted:this.placeholderChar}))}_appendEager(){return new ke}extractTail(s,i){return this.masked.extractTail(s,i)}appendTail(s){return this.masked.appendTail(s)}extractInput(s,i,r){return s===void 0&&(s=0),i===void 0&&(i=this.value.length),this.masked.extractInput(s,i,r)}nearestInputPos(s,i){i===void 0&&(i=me.NONE);const r=0,o=this.value.length,c=Math.min(Math.max(s,r),o);switch(i){case me.LEFT:case me.FORCE_LEFT:return this.isComplete?c:r;case me.RIGHT:case me.FORCE_RIGHT:return this.isComplete?c:o;case me.NONE:default:return c}}totalInputPositions(s,i){return s===void 0&&(s=0),i===void 0&&(i=this.value.length),this.value.slice(s,i).length}doValidate(s){return this.masked.doValidate(this.currentMaskFlags(s))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(s)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(s){this.masked.state=s.masked,this.isFilled=s.isFilled}currentMaskFlags(s){var i;return{...s,_beforeTailState:(s==null||(i=s._beforeTailState)==null?void 0:i.masked)||s?._beforeTailState}}pad(s){return new ke}}on.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class Uf extends ht{updateOptions(s){super.updateOptions(s)}_update(s){const i=s.mask;i&&(s.validate=r=>r.search(i)>=0),super._update(s)}}ge.MaskedRegExp=Uf;class mt extends ht{constructor(s){super({...mt.DEFAULTS,...s,definitions:Object.assign({},on.DEFAULT_DEFINITIONS,s?.definitions)})}updateOptions(s){super.updateOptions(s)}_update(s){s.definitions=Object.assign({},this.definitions,s.definitions),super._update(s),this._rebuildMask()}_rebuildMask(){const s=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const i=this.mask;if(!i||!s)return;let r=!1,o=!1;for(let c=0;c<i.length;++c){if(this.blocks){const u=i.slice(c),x=Object.keys(this.blocks).filter(g=>u.indexOf(g)===0);x.sort((g,b)=>b.length-g.length);const h=x[0];if(h){const{expose:g,repeat:b,...w}=Zi(this.blocks[h]),j={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...w,repeat:b,parent:this},C=b!=null?new ge.RepeatBlock(j):us(j);C&&(this._blocks.push(C),g&&(this.exposeBlock=C),this._maskedBlocks[h]||(this._maskedBlocks[h]=[]),this._maskedBlocks[h].push(this._blocks.length-1)),c+=h.length-1;continue}}let d=i[c],f=d in s;if(d===mt.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(d==="{"||d==="}"){r=!r;continue}if(d==="["||d==="]"){o=!o;continue}if(d===mt.ESCAPE_CHAR){if(++c,d=i[c],!d)break;f=!1}const m=f?new on({isOptional:o,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...Zi(s[d]),parent:this}):new Od({char:d,eager:this.eager,isUnmasking:r});this._blocks.push(m)}}get state(){return{...super.state,_blocks:this._blocks.map(s=>s.state)}}set state(s){if(!s){this.reset();return}const{_blocks:i,...r}=s;this._blocks.forEach((o,c)=>o.state=i[c]),super.state=r}reset(){super.reset(),this._blocks.forEach(s=>s.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(s=>s.isComplete)}get isFilled(){return this._blocks.every(s=>s.isFilled)}get isFixed(){return this._blocks.every(s=>s.isFixed)}get isOptional(){return this._blocks.every(s=>s.isOptional)}doCommit(){this._blocks.forEach(s=>s.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((s,i)=>s+=i.unmaskedValue,"")}set unmaskedValue(s){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=s,this.appendTail(i),this.doCommit()}else super.unmaskedValue=s}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((s,i)=>s+=i.value,"")}set value(s){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=s,this.appendTail(i),this.doCommit()}else super.value=s}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(s){if(this.exposeBlock){const i=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=s,this.appendTail(i),this.doCommit()}else super.typedValue=s}get displayValue(){return this._blocks.reduce((s,i)=>s+=i.displayValue,"")}appendTail(s){return super.appendTail(s).aggregate(this._appendPlaceholder())}_appendEager(){var s;const i=new ke;let r=(s=this._mapPosToBlock(this.displayValue.length))==null?void 0:s.index;if(r==null)return i;this._blocks[r].isFilled&&++r;for(let o=r;o<this._blocks.length;++o){const c=this._blocks[o]._appendEager();if(!c.inserted)break;i.aggregate(c)}return i}_appendCharRaw(s,i){i===void 0&&(i={});const r=this._mapPosToBlock(this.displayValue.length),o=new ke;if(!r)return o;for(let d=r.index,f;f=this._blocks[d];++d){var c;const m=f._appendChar(s,{...i,_beforeTailState:(c=i._beforeTailState)==null||(c=c._blocks)==null?void 0:c[d]});if(o.aggregate(m),m.consumed)break}return o}extractTail(s,i){s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length);const r=new Ls;return s===i||this._forEachBlocksInRange(s,i,(o,c,d,f)=>{const m=o.extractTail(d,f);m.stop=this._findStopBefore(c),m.from=this._blockStartPos(c),m instanceof Ls&&(m.blockIndex=c),r.extend(m)}),r}extractInput(s,i,r){if(s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),r===void 0&&(r={}),s===i)return"";let o="";return this._forEachBlocksInRange(s,i,(c,d,f,m)=>{o+=c.extractInput(f,m,r)}),o}_findStopBefore(s){let i;for(let r=0;r<this._stops.length;++r){const o=this._stops[r];if(o<=s)i=o;else break}return i}_appendPlaceholder(s){const i=new ke;if(this.lazy&&s==null)return i;const r=this._mapPosToBlock(this.displayValue.length);if(!r)return i;const o=r.index,c=s??this._blocks.length;return this._blocks.slice(o,c).forEach(d=>{if(!d.lazy||s!=null){var f;i.aggregate(d._appendPlaceholder((f=d._blocks)==null?void 0:f.length))}}),i}_mapPosToBlock(s){let i="";for(let r=0;r<this._blocks.length;++r){const o=this._blocks[r],c=i.length;if(i+=o.displayValue,s<=i.length)return{index:r,offset:s-c}}}_blockStartPos(s){return this._blocks.slice(0,s).reduce((i,r)=>i+=r.displayValue.length,0)}_forEachBlocksInRange(s,i,r){i===void 0&&(i=this.displayValue.length);const o=this._mapPosToBlock(s);if(o){const c=this._mapPosToBlock(i),d=c&&o.index===c.index,f=o.offset,m=c&&d?c.offset:this._blocks[o.index].displayValue.length;if(r(this._blocks[o.index],o.index,f,m),c&&!d){for(let u=o.index+1;u<c.index;++u)r(this._blocks[u],u,0,this._blocks[u].displayValue.length);r(this._blocks[c.index],c.index,0,c.offset)}}}remove(s,i){s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length);const r=super.remove(s,i);return this._forEachBlocksInRange(s,i,(o,c,d,f)=>{r.aggregate(o.remove(d,f))}),r}nearestInputPos(s,i){if(i===void 0&&(i=me.NONE),!this._blocks.length)return 0;const r=new Ff(this,s);if(i===me.NONE)return r.pushRightBeforeInput()||(r.popState(),r.pushLeftBeforeInput())?r.pos:this.displayValue.length;if(i===me.LEFT||i===me.FORCE_LEFT){if(i===me.LEFT){if(r.pushRightBeforeFilled(),r.ok&&r.pos===s)return s;r.popState()}if(r.pushLeftBeforeInput(),r.pushLeftBeforeRequired(),r.pushLeftBeforeFilled(),i===me.LEFT){if(r.pushRightBeforeInput(),r.pushRightBeforeRequired(),r.ok&&r.pos<=s||(r.popState(),r.ok&&r.pos<=s))return r.pos;r.popState()}return r.ok?r.pos:i===me.FORCE_LEFT?0:(r.popState(),r.ok||(r.popState(),r.ok)?r.pos:0)}return i===me.RIGHT||i===me.FORCE_RIGHT?(r.pushRightBeforeInput(),r.pushRightBeforeRequired(),r.pushRightBeforeFilled()?r.pos:i===me.FORCE_RIGHT?this.displayValue.length:(r.popState(),r.ok||(r.popState(),r.ok)?r.pos:this.nearestInputPos(s,me.LEFT))):s}totalInputPositions(s,i){s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length);let r=0;return this._forEachBlocksInRange(s,i,(o,c,d,f)=>{r+=o.totalInputPositions(d,f)}),r}maskedBlock(s){return this.maskedBlocks(s)[0]}maskedBlocks(s){const i=this._maskedBlocks[s];return i?i.map(r=>this._blocks[r]):[]}pad(s){const i=new ke;return this._forEachBlocksInRange(0,this.displayValue.length,r=>i.aggregate(r.pad(s))),i}}mt.DEFAULTS={...ht.DEFAULTS,lazy:!0,placeholderChar:"_"};mt.STOP_CHAR="`";mt.ESCAPE_CHAR="\\";mt.InputDefinition=on;mt.FixedDefinition=Od;ge.MaskedPattern=mt;class Fa extends mt{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(s){super(s)}updateOptions(s){super.updateOptions(s)}_update(s){const{to:i=this.to||0,from:r=this.from||0,maxLength:o=this.maxLength||0,autofix:c=this.autofix,...d}=s;this.to=i,this.from=r,this.maxLength=Math.max(String(i).length,o),this.autofix=c;const f=String(this.from).padStart(this.maxLength,"0"),m=String(this.to).padStart(this.maxLength,"0");let u=0;for(;u<m.length&&m[u]===f[u];)++u;d.mask=m.slice(0,u).replace(/0/g,"\\0")+"0".repeat(this.maxLength-u),super._update(d)}get isComplete(){return super.isComplete&&!!this.value}boundaries(s){let i="",r="";const[,o,c]=s.match(/^(\D*)(\d*)(\D*)/)||[];return c&&(i="0".repeat(o.length)+c,r="9".repeat(o.length)+c),i=i.padEnd(this.maxLength,"0"),r=r.padEnd(this.maxLength,"9"),[i,r]}doPrepareChar(s,i){i===void 0&&(i={});let r;return[s,r]=super.doPrepareChar(s.replace(/\D/g,""),i),s||(r.skip=!this.isComplete),[s,r]}_appendCharRaw(s,i){if(i===void 0&&(i={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(s,i);const r=String(this.from).padStart(this.maxLength,"0"),o=String(this.to).padStart(this.maxLength,"0"),[c,d]=this.boundaries(this.value+s);return Number(d)<this.from?super._appendCharRaw(r[this.value.length],i):Number(c)>this.to?!i.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength?super._appendCharRaw(r[this.value.length],i).aggregate(this._appendCharRaw(s,i)):super._appendCharRaw(o[this.value.length],i):super._appendCharRaw(s,i)}doValidate(s){const i=this.value;if(i.search(/[^0]/)===-1&&i.length<=this._matchFrom)return!0;const[o,c]=this.boundaries(i);return this.from<=Number(c)&&Number(o)<=this.to&&super.doValidate(s)}pad(s){const i=new ke;if(this.value.length===this.maxLength)return i;const r=this.value,o=this.maxLength-this.value.length;if(o){this.reset();for(let c=0;c<o;++c)i.aggregate(super._appendCharRaw("0",s));r.split("").forEach(c=>this._appendCharRaw(c))}return i}}ge.MaskedRange=Fa;const Vf="d{.}`m{.}`Y";class ls extends mt{static extractPatternOptions(s){const{mask:i,pattern:r,...o}=s;return{...o,mask:ws(i)?i:r}}constructor(s){super(ls.extractPatternOptions({...ls.DEFAULTS,...s}))}updateOptions(s){super.updateOptions(s)}_update(s){const{mask:i,pattern:r,blocks:o,...c}={...ls.DEFAULTS,...s},d=Object.assign({},ls.GET_DEFAULT_BLOCKS());s.min&&(d.Y.from=s.min.getFullYear()),s.max&&(d.Y.to=s.max.getFullYear()),s.min&&s.max&&d.Y.from===d.Y.to&&(d.m.from=s.min.getMonth()+1,d.m.to=s.max.getMonth()+1,d.m.from===d.m.to&&(d.d.from=s.min.getDate(),d.d.to=s.max.getDate())),Object.assign(d,this.blocks,o),super._update({...c,mask:ws(i)?i:r,blocks:d})}doValidate(s){const i=this.date;return super.doValidate(s)&&(!this.isComplete||this.isDateExist(this.value)&&i!=null&&(this.min==null||this.min<=i)&&(this.max==null||i<=this.max))}isDateExist(s){return this.format(this.parse(s,this),this).indexOf(s)>=0}get date(){return this.typedValue}set date(s){this.typedValue=s}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(s){super.typedValue=s}maskEquals(s){return s===Date||super.maskEquals(s)}optionsIsChanged(s){return super.optionsIsChanged(ls.extractPatternOptions(s))}}ls.GET_DEFAULT_BLOCKS=()=>({d:{mask:Fa,from:1,to:31,maxLength:2},m:{mask:Fa,from:1,to:12,maxLength:2},Y:{mask:Fa,from:1900,to:9999}});ls.DEFAULTS={...mt.DEFAULTS,mask:Date,pattern:Vf,format:(a,s)=>{if(!a)return"";const i=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),o=a.getFullYear();return[i,r,o].join(".")},parse:(a,s)=>{const[i,r,o]=a.split(".").map(Number);return new Date(o,r-1,i)}};ge.MaskedDate=ls;class vn extends ht{constructor(s){super({...vn.DEFAULTS,...s}),this.currentMask=void 0}updateOptions(s){super.updateOptions(s)}_update(s){super._update(s),"mask"in s&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(s.mask)?s.mask.map(i=>{const{expose:r,...o}=Zi(i),c=us({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...o});return r&&(this.exposeMask=c),c}):[])}_appendCharRaw(s,i){i===void 0&&(i={});const r=this._applyDispatch(s,i);return this.currentMask&&r.aggregate(this.currentMask._appendChar(s,this.currentMaskFlags(i))),r}_applyDispatch(s,i,r){s===void 0&&(s=""),i===void 0&&(i={}),r===void 0&&(r="");const o=i.tail&&i._beforeTailState!=null?i._beforeTailState._value:this.value,c=this.rawInputValue,d=i.tail&&i._beforeTailState!=null?i._beforeTailState._rawInputValue:c,f=c.slice(d.length),m=this.currentMask,u=new ke,x=m?.state;return this.currentMask=this.doDispatch(s,{...i},r),this.currentMask&&(this.currentMask!==m?(this.currentMask.reset(),d&&(this.currentMask.append(d,{raw:!0}),u.tailShift=this.currentMask.value.length-o.length),f&&(u.tailShift+=this.currentMask.append(f,{raw:!0,tail:!0}).tailShift)):x&&(this.currentMask.state=x)),u}_appendPlaceholder(){const s=this._applyDispatch();return this.currentMask&&s.aggregate(this.currentMask._appendPlaceholder()),s}_appendEager(){const s=this._applyDispatch();return this.currentMask&&s.aggregate(this.currentMask._appendEager()),s}appendTail(s){const i=new ke;return s&&i.aggregate(this._applyDispatch("",{},s)),i.aggregate(this.currentMask?this.currentMask.appendTail(s):super.appendTail(s))}currentMaskFlags(s){var i,r;return{...s,_beforeTailState:((i=s._beforeTailState)==null?void 0:i.currentMaskRef)===this.currentMask&&((r=s._beforeTailState)==null?void 0:r.currentMask)||s._beforeTailState}}doDispatch(s,i,r){return i===void 0&&(i={}),r===void 0&&(r=""),this.dispatch(s,this,i,r)}doValidate(s){return super.doValidate(s)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(s)))}doPrepare(s,i){i===void 0&&(i={});let[r,o]=super.doPrepare(s,i);if(this.currentMask){let c;[r,c]=super.doPrepare(r,this.currentMaskFlags(i)),o=o.aggregate(c)}return[r,o]}doPrepareChar(s,i){i===void 0&&(i={});let[r,o]=super.doPrepareChar(s,i);if(this.currentMask){let c;[r,c]=super.doPrepareChar(r,this.currentMaskFlags(i)),o=o.aggregate(c)}return[r,o]}reset(){var s;(s=this.currentMask)==null||s.reset(),this.compiledMasks.forEach(i=>i.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(s){this.exposeMask?(this.exposeMask.value=s,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=s}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(s){this.exposeMask?(this.exposeMask.unmaskedValue=s,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=s}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(s){if(this.exposeMask){this.exposeMask.typedValue=s,this.currentMask=this.exposeMask,this._applyDispatch();return}let i=String(s);this.currentMask&&(this.currentMask.typedValue=s,i=this.currentMask.unmaskedValue),this.unmaskedValue=i}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var s;return!!((s=this.currentMask)!=null&&s.isComplete)}get isFilled(){var s;return!!((s=this.currentMask)!=null&&s.isFilled)}remove(s,i){const r=new ke;return this.currentMask&&r.aggregate(this.currentMask.remove(s,i)).aggregate(this._applyDispatch()),r}get state(){var s;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(i=>i.state),currentMaskRef:this.currentMask,currentMask:(s=this.currentMask)==null?void 0:s.state}}set state(s){const{compiledMasks:i,currentMaskRef:r,currentMask:o,...c}=s;i&&this.compiledMasks.forEach((d,f)=>d.state=i[f]),r!=null&&(this.currentMask=r,this.currentMask.state=o),super.state=c}extractInput(s,i,r){return this.currentMask?this.currentMask.extractInput(s,i,r):""}extractTail(s,i){return this.currentMask?this.currentMask.extractTail(s,i):super.extractTail(s,i)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(s,i){return this.currentMask?this.currentMask.nearestInputPos(s,i):super.nearestInputPos(s,i)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(s){this._overwrite=s}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(s){this._eager=s}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(s){this._skipInvalid=s}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(s){this._autofix=s}maskEquals(s){return Array.isArray(s)?this.compiledMasks.every((i,r)=>{if(!s[r])return;const{mask:o,...c}=s[r];return rn(i,c)&&i.maskEquals(o)}):super.maskEquals(s)}typedValueEquals(s){var i;return!!((i=this.currentMask)!=null&&i.typedValueEquals(s))}}vn.DEFAULTS={...ht.DEFAULTS,dispatch:(a,s,i,r)=>{if(!s.compiledMasks.length)return;const o=s.rawInputValue,c=s.compiledMasks.map((d,f)=>{const m=s.currentMask===d,u=m?d.displayValue.length:d.nearestInputPos(d.displayValue.length,me.FORCE_LEFT);return d.rawInputValue!==o?(d.reset(),d.append(o,{raw:!0})):m||d.remove(u),d.append(a,s.currentMaskFlags(i)),d.appendTail(r),{index:f,weight:d.rawInputValue.length,totalInputPositions:d.totalInputPositions(0,Math.max(u,d.nearestInputPos(d.displayValue.length,me.FORCE_LEFT)))}});return c.sort((d,f)=>f.weight-d.weight||f.totalInputPositions-d.totalInputPositions),s.compiledMasks[c[0].index]}};ge.MaskedDynamic=vn;class bn extends mt{constructor(s){super({...bn.DEFAULTS,...s})}updateOptions(s){super.updateOptions(s)}_update(s){const{enum:i,...r}=s;if(i){const o=i.map(f=>f.length),c=Math.min(...o),d=Math.max(...o)-c;r.mask="*".repeat(c),d&&(r.mask+="["+"*".repeat(d)+"]"),this.enum=i}super._update(r)}_appendCharRaw(s,i){i===void 0&&(i={});const r=Math.min(this.nearestInputPos(0,me.FORCE_RIGHT),this.value.length),o=this.enum.filter(c=>this.matchValue(c,this.unmaskedValue+s,r));if(o.length){o.length===1&&this._forEachBlocksInRange(0,this.value.length,(d,f)=>{const m=o[0][f];f>=this.value.length||m===d.value||(d.reset(),d._appendChar(m,i))});const c=super._appendCharRaw(o[0][this.value.length],i);return o.length===1&&o[0].slice(this.unmaskedValue.length).split("").forEach(d=>c.aggregate(super._appendCharRaw(d))),c}return new ke({skip:!this.isComplete})}extractTail(s,i){return s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),new Jt("",s)}remove(s,i){if(s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),s===i)return new ke;const r=Math.min(super.nearestInputPos(0,me.FORCE_RIGHT),this.value.length);let o;for(o=s;o>=0&&!(this.enum.filter(f=>this.matchValue(f,this.value.slice(r,o),r)).length>1);--o);const c=super.remove(o,i);return c.tailShift+=o-s,c}get isComplete(){return this.enum.indexOf(this.value)>=0}}bn.DEFAULTS={...mt.DEFAULTS,matchValue:(a,s,i)=>a.indexOf(s,i)===i};ge.MaskedEnum=bn;class Hf extends ht{updateOptions(s){super.updateOptions(s)}_update(s){super._update({...s,validate:s.mask})}}ge.MaskedFunction=Hf;var Dd;class Ct extends ht{constructor(s){super({...Ct.DEFAULTS,...s})}updateOptions(s){super.updateOptions(s)}_update(s){super._update(s),this._updateRegExps()}_updateRegExps(){const s="^"+(this.allowNegative?"[+|\\-]?":""),i="\\d*",r=(this.scale?"("+ar(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(s+i+r),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(ar).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(ar(this.thousandsSeparator),"g")}_removeThousandsSeparators(s){return s.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(s){const i=s.split(this.radix);return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),i.join(this.radix)}doPrepareChar(s,i){i===void 0&&(i={});const[r,o]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(i.input&&i.raw||!i.input&&!i.raw)?s.replace(this._mapToRadixRegExp,this.radix):s),i);return s&&!r&&(o.skip=!0),r&&!this.allowPositive&&!this.value&&r!=="-"&&o.aggregate(this._appendChar("-")),[r,o]}_separatorsCount(s,i){i===void 0&&(i=!1);let r=0;for(let o=0;o<s;++o)this._value.indexOf(this.thousandsSeparator,o)===o&&(++r,i&&(s+=this.thousandsSeparator.length));return r}_separatorsCountFromSlice(s){return s===void 0&&(s=this._value),this._separatorsCount(this._removeThousandsSeparators(s).length,!0)}extractInput(s,i,r){return s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),[s,i]=this._adjustRangeWithSeparators(s,i),this._removeThousandsSeparators(super.extractInput(s,i,r))}_appendCharRaw(s,i){i===void 0&&(i={});const r=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,o=this._separatorsCountFromSlice(r);this._value=this._removeThousandsSeparators(this.value);const c=this._value;this._value+=s;const d=this.number;let f=!isNaN(d),m=!1;if(f){let g;this.min!=null&&this.min<0&&this.number<this.min&&(g=this.min),this.max!=null&&this.max>0&&this.number>this.max&&(g=this.max),g!=null&&(this.autofix?(this._value=this.format(g,this).replace(Ct.UNMASKED_RADIX,this.radix),m||(m=c===this._value&&!i.tail)):f=!1),f&&(f=!!this._value.match(this._numberRegExp))}let u;f?u=new ke({inserted:this._value.slice(c.length),rawInserted:m?"":s,skip:m}):(this._value=c,u=new ke),this._value=this._insertThousandsSeparators(this._value);const x=i.tail&&i._beforeTailState?i._beforeTailState._value:this._value,h=this._separatorsCountFromSlice(x);return u.tailShift+=(h-o)*this.thousandsSeparator.length,u}_findSeparatorAround(s){if(this.thousandsSeparator){const i=s-this.thousandsSeparator.length+1,r=this.value.indexOf(this.thousandsSeparator,i);if(r<=s)return r}return-1}_adjustRangeWithSeparators(s,i){const r=this._findSeparatorAround(s);r>=0&&(s=r);const o=this._findSeparatorAround(i);return o>=0&&(i=o+this.thousandsSeparator.length),[s,i]}remove(s,i){s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length),[s,i]=this._adjustRangeWithSeparators(s,i);const r=this.value.slice(0,s),o=this.value.slice(i),c=this._separatorsCount(r.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(r+o));const d=this._separatorsCountFromSlice(r);return new ke({tailShift:(d-c)*this.thousandsSeparator.length})}nearestInputPos(s,i){if(!this.thousandsSeparator)return s;switch(i){case me.NONE:case me.LEFT:case me.FORCE_LEFT:{const r=this._findSeparatorAround(s-1);if(r>=0){const o=r+this.thousandsSeparator.length;if(s<o||this.value.length<=o||i===me.FORCE_LEFT)return r}break}case me.RIGHT:case me.FORCE_RIGHT:{const r=this._findSeparatorAround(s);if(r>=0)return r+this.thousandsSeparator.length}}return s}doCommit(){if(this.value){const s=this.number;let i=s;this.min!=null&&(i=Math.max(i,this.min)),this.max!=null&&(i=Math.min(i,this.max)),i!==s&&(this.unmaskedValue=this.format(i,this));let r=this.value;this.normalizeZeros&&(r=this._normalizeZeros(r)),this.padFractionalZeros&&this.scale>0&&(r=this._padFractionalZeros(r)),this._value=r}super.doCommit()}_normalizeZeros(s){const i=this._removeThousandsSeparators(s).split(this.radix);return i[0]=i[0].replace(/^(\D*)(0*)(\d*)/,(r,o,c,d)=>o+d),s.length&&!/\d$/.test(i[0])&&(i[0]=i[0]+"0"),i.length>1&&(i[1]=i[1].replace(/0*$/,""),i[1].length||(i.length=1)),this._insertThousandsSeparators(i.join(this.radix))}_padFractionalZeros(s){if(!s)return s;const i=s.split(this.radix);return i.length<2&&i.push(""),i[1]=i[1].padEnd(this.scale,"0"),i.join(this.radix)}doSkipInvalid(s,i,r){i===void 0&&(i={});const o=this.scale===0&&s!==this.thousandsSeparator&&(s===this.radix||s===Ct.UNMASKED_RADIX||this.mapToRadix.includes(s));return super.doSkipInvalid(s,i,r)&&!o}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,Ct.UNMASKED_RADIX)}set unmaskedValue(s){super.unmaskedValue=s}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(s){this.rawInputValue=this.format(s,this).replace(Ct.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(s){this.typedValue=s}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(s){return(super.typedValueEquals(s)||Ct.EMPTY_VALUES.includes(s)&&Ct.EMPTY_VALUES.includes(this.typedValue))&&!(s===0&&this.value==="")}}Dd=Ct;Ct.UNMASKED_RADIX=".";Ct.EMPTY_VALUES=[...ht.EMPTY_VALUES,0];Ct.DEFAULTS={...ht.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[Dd.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:a=>a.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})};ge.MaskedNumber=Ct;const Dr={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function Bd(a,s,i){s===void 0&&(s=Dr.MASKED),i===void 0&&(i=Dr.MASKED);const r=us(a);return o=>r.runIsolated(c=>(c[s]=o,c[i]))}function qf(a,s,i,r){return Bd(s,i,r)(a)}ge.PIPE_TYPE=Dr;ge.createPipe=Bd;ge.pipe=qf;class $f extends mt{get repeatFrom(){var s;return(s=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)!=null?s:0}get repeatTo(){var s;return(s=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?s:1/0}constructor(s){super(s)}updateOptions(s){super.updateOptions(s)}_update(s){var i,r,o;const{repeat:c,...d}=Zi(s);this._blockOpts=Object.assign({},this._blockOpts,d);const f=us(this._blockOpts);this.repeat=(i=(r=c??f.repeat)!=null?r:this.repeat)!=null?i:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&((o=this._blocks)==null?void 0:o.length)||0,this.repeatFrom)),blocks:{m:f},eager:f.eager,overwrite:f.overwrite,skipInvalid:f.skipInvalid,lazy:f.lazy,placeholderChar:f.placeholderChar,displayChar:f.displayChar})}_allocateBlock(s){if(s<this._blocks.length)return this._blocks[s];if(this.repeatTo===1/0||this._blocks.length<this.repeatTo)return this._blocks.push(us(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]}_appendCharRaw(s,i){i===void 0&&(i={});const r=new ke;for(let m=(o=(c=this._mapPosToBlock(this.displayValue.length))==null?void 0:c.index)!=null?o:Math.max(this._blocks.length-1,0),u,x;u=(d=this._blocks[m])!=null?d:x=!x&&this._allocateBlock(m);++m){var o,c,d,f;const h=u._appendChar(s,{...i,_beforeTailState:(f=i._beforeTailState)==null||(f=f._blocks)==null?void 0:f[m]});if(h.skip&&x){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(r.aggregate(h),h.consumed)break}return r}_trimEmptyTail(s,i){var r,o;s===void 0&&(s=0);const c=Math.max(((r=this._mapPosToBlock(s))==null?void 0:r.index)||0,this.repeatFrom,0);let d;i!=null&&(d=(o=this._mapPosToBlock(i))==null?void 0:o.index),d==null&&(d=this._blocks.length-1);let f=0;for(let m=d;c<=m&&!this._blocks[m].unmaskedValue;--m,++f);f&&(this._blocks.splice(d-f+1,f),this.mask=this.mask.slice(f))}reset(){super.reset(),this._trimEmptyTail()}remove(s,i){s===void 0&&(s=0),i===void 0&&(i=this.displayValue.length);const r=super.remove(s,i);return this._trimEmptyTail(s,i),r}totalInputPositions(s,i){return s===void 0&&(s=0),i==null&&this.repeatTo===1/0?1/0:super.totalInputPositions(s,i)}get state(){return super.state}set state(s){this._blocks.length=s._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=s}}ge.RepeatBlock=$f;try{globalThis.IMask=ge}catch{}var nr={exports:{}},rr,ql;function Gf(){if(ql)return rr;ql=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return rr=a,rr}var or,$l;function Wf(){if($l)return or;$l=1;var a=Gf();function s(){}function i(){}return i.resetWarningCache=s,or=function(){function r(d,f,m,u,x,h){if(h!==a){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function o(){return r}var c={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:i,resetWarningCache:s};return c.PropTypes=c,c},or}var Gl;function lo(){return Gl||(Gl=1,nr.exports=Wf()()),nr.exports}var Zf=lo();const de=ms(Zf),zd={mask:de.oneOfType([de.array,de.func,de.string,de.instanceOf(RegExp),de.oneOf([Date,Number,ge.Masked]),de.instanceOf(ge.Masked)]),value:de.any,unmask:de.oneOfType([de.bool,de.oneOf(["typed"])]),prepare:de.func,prepareChar:de.func,validate:de.func,commit:de.func,overwrite:de.oneOfType([de.bool,de.oneOf(["shift"])]),eager:de.oneOfType([de.bool,de.oneOf(["append","remove"])]),skipInvalid:de.bool,onAccept:de.func,onComplete:de.func,placeholderChar:de.string,displayChar:de.string,lazy:de.bool,definitions:de.object,blocks:de.object,enum:de.arrayOf(de.string),maxLength:de.number,from:de.number,to:de.number,pattern:de.string,format:de.func,parse:de.func,autofix:de.oneOfType([de.bool,de.oneOf(["pad"])]),radix:de.string,thousandsSeparator:de.string,mapToRadix:de.arrayOf(de.string),scale:de.number,normalizeZeros:de.bool,padFractionalZeros:de.bool,min:de.oneOfType([de.number,de.instanceOf(Date)]),max:de.oneOfType([de.number,de.instanceOf(Date)]),dispatch:de.func,inputRef:de.oneOfType([de.func,de.shape({current:de.object})])},Fd=Object.keys(zd).filter(a=>a!=="value"),Kf=["value","unmask","onAccept","onComplete","inputRef"],Yf=Fd.filter(a=>Kf.indexOf(a)<0);function Qf(a){var s;const i=(s=class extends K.Component{constructor(c){super(c),this._inputRef=this._inputRef.bind(this)}componentDidMount(){this.props.mask&&this.initMask()}componentDidUpdate(){const c=this.props,d=this._extractMaskOptionsFromProps(c);if(d.mask)this.maskRef?(this.maskRef.updateOptions(d),"value"in c&&c.value!==void 0&&(this.maskValue=c.value)):this.initMask(d);else if(this.destroyMask(),"value"in c&&c.value!==void 0){var f;(f=this.element)!=null&&f.isContentEditable&&this.element.tagName!=="INPUT"&&this.element.tagName!=="TEXTAREA"?this.element.textContent=c.value:this.element.value=c.value}}componentWillUnmount(){this.destroyMask()}_inputRef(c){this.element=c,this.props.inputRef&&(Object.prototype.hasOwnProperty.call(this.props.inputRef,"current")?this.props.inputRef.current=c:this.props.inputRef(c))}initMask(c){c===void 0&&(c=this._extractMaskOptionsFromProps(this.props)),this.maskRef=ge(this.element,c).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this)),"value"in this.props&&this.props.value!==void 0&&(this.maskValue=this.props.value)}destroyMask(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}_extractMaskOptionsFromProps(c){const{...d}=c;return Object.keys(d).filter(f=>Yf.indexOf(f)<0).forEach(f=>{delete d[f]}),d}_extractNonMaskProps(c){const{...d}=c;return Fd.forEach(f=>{f!=="maxLength"&&delete d[f]}),"defaultValue"in d||(d.defaultValue=c.mask?"":d.value),delete d.value,d}get maskValue(){return this.maskRef?this.props.unmask==="typed"?this.maskRef.typedValue:this.props.unmask?this.maskRef.unmaskedValue:this.maskRef.value:""}set maskValue(c){this.maskRef&&(c=c==null&&this.props.unmask!=="typed"?"":c,this.props.unmask==="typed"?this.maskRef.typedValue=c:this.props.unmask?this.maskRef.unmaskedValue=c:this.maskRef.value=c)}_onAccept(c){this.props.onAccept&&this.maskRef&&this.props.onAccept(this.maskValue,this.maskRef,c)}_onComplete(c){this.props.onComplete&&this.maskRef&&this.props.onComplete(this.maskValue,this.maskRef,c)}render(){return K.createElement(a,{...this._extractNonMaskProps(this.props),inputRef:this._inputRef})}},s.displayName=void 0,s.propTypes=void 0,s),r=a.displayName||a.name||"Component";return i.displayName="IMask("+r+")",i.propTypes=zd,K.forwardRef((o,c)=>K.createElement(i,{...o,ref:c}))}const Xf=Qf(a=>{let{inputRef:s,...i}=a;return K.createElement("input",{...i,ref:s})}),Jf=(a,s)=>K.createElement(Xf,{...a,ref:s}),Os=K.forwardRef(Jf);function ex({metrics:a}){return a.isNew?e.jsx("div",{className:"bg-blue-500/10 border-b border-blue-500/20 py-2 overflow-hidden",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-400 text-xs font-bold uppercase tracking-widest",children:[e.jsx(Bh,{className:"w-4 h-4"}),e.jsx("span",{children:"Restaurante Novo no EmprataAI  Seja um dos primeiros a experimentar!"})]})}):a.reviewCount===0?null:e.jsx("div",{className:"bg-[#121212] border-b border-white/5 py-3 overflow-hidden whitespace-nowrap",children:e.jsxs("div",{className:"inline-flex items-center gap-8 animate-marquee",children:[e.jsxs("span",{className:"flex items-center gap-2 text-xs font-bold text-white/60",children:[e.jsx(un,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),a.rating," (",a.reviewCount," avaliaes reais)"]}),a.latestReviews.map((s,i)=>e.jsxs("span",{className:"flex items-center gap-2 text-xs text-white/40 italic",children:['"',s.comment,'"  ',s.customerName||"Cliente"]},i))]})})}var Wl;(function(a){a.STRING="string",a.NUMBER="number",a.INTEGER="integer",a.BOOLEAN="boolean",a.ARRAY="array",a.OBJECT="object"})(Wl||(Wl={}));var Zl;(function(a){a.LANGUAGE_UNSPECIFIED="language_unspecified",a.PYTHON="python"})(Zl||(Zl={}));var Kl;(function(a){a.OUTCOME_UNSPECIFIED="outcome_unspecified",a.OUTCOME_OK="outcome_ok",a.OUTCOME_FAILED="outcome_failed",a.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Kl||(Kl={}));const Yl=["user","model","function","system"];var Ql;(function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Ql||(Ql={}));var Xl;(function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"})(Xl||(Xl={}));var Jl;(function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"})(Jl||(Jl={}));var ec;(function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER"})(ec||(ec={}));var qi;(function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.OTHER="OTHER"})(qi||(qi={}));var tc;(function(a){a.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",a.RETRIEVAL_QUERY="RETRIEVAL_QUERY",a.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",a.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",a.CLASSIFICATION="CLASSIFICATION",a.CLUSTERING="CLUSTERING"})(tc||(tc={}));var sc;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE"})(sc||(sc={}));var ic;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"})(ic||(ic={}));class dt extends Error{constructor(s){super(`[GoogleGenerativeAI Error]: ${s}`)}}class di extends dt{constructor(s,i){super(s),this.response=i}}class Ud extends dt{constructor(s,i,r,o){super(s),this.status=i,this.statusText=r,this.errorDetails=o}}class ys extends dt{}class Vd extends dt{}const tx="https://generativelanguage.googleapis.com",sx="v1beta",ix="0.24.1",ax="genai-js";var $s;(function(a){a.GENERATE_CONTENT="generateContent",a.STREAM_GENERATE_CONTENT="streamGenerateContent",a.COUNT_TOKENS="countTokens",a.EMBED_CONTENT="embedContent",a.BATCH_EMBED_CONTENTS="batchEmbedContents"})($s||($s={}));class nx{constructor(s,i,r,o,c){this.model=s,this.task=i,this.apiKey=r,this.stream=o,this.requestOptions=c}toString(){var s,i;const r=((s=this.requestOptions)===null||s===void 0?void 0:s.apiVersion)||sx;let c=`${((i=this.requestOptions)===null||i===void 0?void 0:i.baseUrl)||tx}/${r}/${this.model}:${this.task}`;return this.stream&&(c+="?alt=sse"),c}}function rx(a){const s=[];return a?.apiClient&&s.push(a.apiClient),s.push(`${ax}/${ix}`),s.join(" ")}async function ox(a){var s;const i=new Headers;i.append("Content-Type","application/json"),i.append("x-goog-api-client",rx(a.requestOptions)),i.append("x-goog-api-key",a.apiKey);let r=(s=a.requestOptions)===null||s===void 0?void 0:s.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new ys(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,c]of r.entries()){if(o==="x-goog-api-key")throw new ys(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new ys(`Header name ${o} can only be set using the apiClient field`);i.append(o,c)}}return i}async function lx(a,s,i,r,o,c){const d=new nx(a,s,i,r,c);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},hx(c)),{method:"POST",headers:await ox(d),body:o})}}async function ta(a,s,i,r,o,c={},d=fetch){const{url:f,fetchOptions:m}=await lx(a,s,i,r,o,c);return cx(f,m,d)}async function cx(a,s,i=fetch){let r;try{r=await i(a,s)}catch(o){dx(o,a)}return r.ok||await ux(r,a),r}function dx(a,s){let i=a;throw i.name==="AbortError"?(i=new Vd(`Request aborted when fetching ${s.toString()}: ${a.message}`),i.stack=a.stack):a instanceof Ud||a instanceof ys||(i=new dt(`Error fetching from ${s.toString()}: ${a.message}`),i.stack=a.stack),i}async function ux(a,s){let i="",r;try{const o=await a.json();i=o.error.message,o.error.details&&(i+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new Ud(`Error fetching from ${s.toString()}: [${a.status} ${a.statusText}] ${i}`,a.status,a.statusText,r)}function hx(a){const s={};if(a?.signal!==void 0||a?.timeout>=0){const i=new AbortController;a?.timeout>=0&&setTimeout(()=>i.abort(),a.timeout),a?.signal&&a.signal.addEventListener("abort",()=>{i.abort()}),s.signal=i.signal}return s}function co(a){return a.text=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ua(a.candidates[0]))throw new di(`${vs(a)}`,a);return mx(a)}else if(a.promptFeedback)throw new di(`Text not available. ${vs(a)}`,a);return""},a.functionCall=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ua(a.candidates[0]))throw new di(`${vs(a)}`,a);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ac(a)[0]}else if(a.promptFeedback)throw new di(`Function call not available. ${vs(a)}`,a)},a.functionCalls=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ua(a.candidates[0]))throw new di(`${vs(a)}`,a);return ac(a)}else if(a.promptFeedback)throw new di(`Function call not available. ${vs(a)}`,a)},a}function mx(a){var s,i,r,o;const c=[];if(!((i=(s=a.candidates)===null||s===void 0?void 0:s[0].content)===null||i===void 0)&&i.parts)for(const d of(o=(r=a.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)d.text&&c.push(d.text),d.executableCode&&c.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&c.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return c.length>0?c.join(""):""}function ac(a){var s,i,r,o;const c=[];if(!((i=(s=a.candidates)===null||s===void 0?void 0:s[0].content)===null||i===void 0)&&i.parts)for(const d of(o=(r=a.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)d.functionCall&&c.push(d.functionCall);if(c.length>0)return c}const px=[qi.RECITATION,qi.SAFETY,qi.LANGUAGE];function Ua(a){return!!a.finishReason&&px.includes(a.finishReason)}function vs(a){var s,i,r;let o="";if((!a.candidates||a.candidates.length===0)&&a.promptFeedback)o+="Response was blocked",!((s=a.promptFeedback)===null||s===void 0)&&s.blockReason&&(o+=` due to ${a.promptFeedback.blockReason}`),!((i=a.promptFeedback)===null||i===void 0)&&i.blockReasonMessage&&(o+=`: ${a.promptFeedback.blockReasonMessage}`);else if(!((r=a.candidates)===null||r===void 0)&&r[0]){const c=a.candidates[0];Ua(c)&&(o+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(o+=`: ${c.finishMessage}`))}return o}function Ki(a){return this instanceof Ki?(this.v=a,this):new Ki(a)}function fx(a,s,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(a,s||[]),o,c=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(g){r[g]&&(o[g]=function(b){return new Promise(function(w,j){c.push([g,b,w,j])>1||f(g,b)})})}function f(g,b){try{m(r[g](b))}catch(w){h(c[0][3],w)}}function m(g){g.value instanceof Ki?Promise.resolve(g.value.v).then(u,x):h(c[0][2],g)}function u(g){f("next",g)}function x(g){f("throw",g)}function h(g,b){g(b),c.shift(),c.length&&f(c[0][0],c[0][1])}}const nc=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function xx(a){const s=a.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),i=bx(s),[r,o]=i.tee();return{stream:vx(r),response:gx(o)}}async function gx(a){const s=[],i=a.getReader();for(;;){const{done:r,value:o}=await i.read();if(r)return co(wx(s));s.push(o)}}function vx(a){return fx(this,arguments,function*(){const i=a.getReader();for(;;){const{value:r,done:o}=yield Ki(i.read());if(o)break;yield yield Ki(co(r))}})}function bx(a){const s=a.getReader();return new ReadableStream({start(r){let o="";return c();function c(){return s.read().then(({value:d,done:f})=>{if(f){if(o.trim()){r.error(new dt("Failed to parse stream"));return}r.close();return}o+=d;let m=o.match(nc),u;for(;m;){try{u=JSON.parse(m[1])}catch{r.error(new dt(`Error parsing JSON response: "${m[1]}"`));return}r.enqueue(u),o=o.substring(m[0].length),m=o.match(nc)}return c()}).catch(d=>{let f=d;throw f.stack=d.stack,f.name==="AbortError"?f=new Vd("Request aborted when reading from the stream"):f=new dt("Error reading from the stream"),f})}}})}function wx(a){const s=a[a.length-1],i={promptFeedback:s?.promptFeedback};for(const r of a){if(r.candidates){let o=0;for(const c of r.candidates)if(i.candidates||(i.candidates=[]),i.candidates[o]||(i.candidates[o]={index:o}),i.candidates[o].citationMetadata=c.citationMetadata,i.candidates[o].groundingMetadata=c.groundingMetadata,i.candidates[o].finishReason=c.finishReason,i.candidates[o].finishMessage=c.finishMessage,i.candidates[o].safetyRatings=c.safetyRatings,c.content&&c.content.parts){i.candidates[o].content||(i.candidates[o].content={role:c.content.role||"user",parts:[]});const d={};for(const f of c.content.parts)f.text&&(d.text=f.text),f.functionCall&&(d.functionCall=f.functionCall),f.executableCode&&(d.executableCode=f.executableCode),f.codeExecutionResult&&(d.codeExecutionResult=f.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),i.candidates[o].content.parts.push(d)}o++}r.usageMetadata&&(i.usageMetadata=r.usageMetadata)}return i}async function Hd(a,s,i,r){const o=await ta(s,$s.STREAM_GENERATE_CONTENT,a,!0,JSON.stringify(i),r);return xx(o)}async function qd(a,s,i,r){const c=await(await ta(s,$s.GENERATE_CONTENT,a,!1,JSON.stringify(i),r)).json();return{response:co(c)}}function $d(a){if(a!=null){if(typeof a=="string")return{role:"system",parts:[{text:a}]};if(a.text)return{role:"system",parts:[a]};if(a.parts)return a.role?a:{role:"system",parts:a.parts}}}function Yi(a){let s=[];if(typeof a=="string")s=[{text:a}];else for(const i of a)typeof i=="string"?s.push({text:i}):s.push(i);return yx(s)}function yx(a){const s={role:"user",parts:[]},i={role:"function",parts:[]};let r=!1,o=!1;for(const c of a)"functionResponse"in c?(i.parts.push(c),o=!0):(s.parts.push(c),r=!0);if(r&&o)throw new dt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new dt("No content is provided for sending chat message.");return r?s:i}function _x(a,s){var i;let r={model:s?.model,generationConfig:s?.generationConfig,safetySettings:s?.safetySettings,tools:s?.tools,toolConfig:s?.toolConfig,systemInstruction:s?.systemInstruction,cachedContent:(i=s?.cachedContent)===null||i===void 0?void 0:i.name,contents:[]};const o=a.generateContentRequest!=null;if(a.contents){if(o)throw new ys("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=a.contents}else if(o)r=Object.assign(Object.assign({},r),a.generateContentRequest);else{const c=Yi(a);r.contents=[c]}return{generateContentRequest:r}}function rc(a){let s;return a.contents?s=a:s={contents:[Yi(a)]},a.systemInstruction&&(s.systemInstruction=$d(a.systemInstruction)),s}function jx(a){return typeof a=="string"||Array.isArray(a)?{content:Yi(a)}:a}const oc=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Nx={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function kx(a){let s=!1;for(const i of a){const{role:r,parts:o}=i;if(!s&&r!=="user")throw new dt(`First content should be with role 'user', got ${r}`);if(!Yl.includes(r))throw new dt(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Yl)}`);if(!Array.isArray(o))throw new dt("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new dt("Each Content should have at least one part");const c={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const f of o)for(const m of oc)m in f&&(c[m]+=1);const d=Nx[r];for(const f of oc)if(!d.includes(f)&&c[f]>0)throw new dt(`Content with role '${r}' can't contain '${f}' part`);s=!0}}function lc(a){var s;if(a.candidates===void 0||a.candidates.length===0)return!1;const i=(s=a.candidates[0])===null||s===void 0?void 0:s.content;if(i===void 0||i.parts===void 0||i.parts.length===0)return!1;for(const r of i.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const cc="SILENT_ERROR";class Cx{constructor(s,i,r,o={}){this.model=i,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=s,r?.history&&(kx(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(s,i={}){var r,o,c,d,f,m;await this._sendPromise;const u=Yi(s),x={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(f=this.params)===null||f===void 0?void 0:f.systemInstruction,cachedContent:(m=this.params)===null||m===void 0?void 0:m.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),i);let g;return this._sendPromise=this._sendPromise.then(()=>qd(this._apiKey,this.model,x,h)).then(b=>{var w;if(lc(b.response)){this._history.push(u);const j=Object.assign({parts:[],role:"model"},(w=b.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(j)}else{const j=vs(b.response);j&&console.warn(`sendMessage() was unsuccessful. ${j}. Inspect response object for details.`)}g=b}).catch(b=>{throw this._sendPromise=Promise.resolve(),b}),await this._sendPromise,g}async sendMessageStream(s,i={}){var r,o,c,d,f,m;await this._sendPromise;const u=Yi(s),x={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(f=this.params)===null||f===void 0?void 0:f.systemInstruction,cachedContent:(m=this.params)===null||m===void 0?void 0:m.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),i),g=Hd(this._apiKey,this.model,x,h);return this._sendPromise=this._sendPromise.then(()=>g).catch(b=>{throw new Error(cc)}).then(b=>b.response).then(b=>{if(lc(b)){this._history.push(u);const w=Object.assign({},b.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=vs(b);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(b=>{b.message!==cc&&console.error(b)}),g}}async function Ex(a,s,i,r){return(await ta(s,$s.COUNT_TOKENS,a,!1,JSON.stringify(i),r)).json()}async function Sx(a,s,i,r){return(await ta(s,$s.EMBED_CONTENT,a,!1,JSON.stringify(i),r)).json()}async function Ax(a,s,i,r){const o=i.requests.map(d=>Object.assign(Object.assign({},d),{model:s}));return(await ta(s,$s.BATCH_EMBED_CONTENTS,a,!1,JSON.stringify({requests:o}),r)).json()}class dc{constructor(s,i,r={}){this.apiKey=s,this._requestOptions=r,i.model.includes("/")?this.model=i.model:this.model=`models/${i.model}`,this.generationConfig=i.generationConfig||{},this.safetySettings=i.safetySettings||[],this.tools=i.tools,this.toolConfig=i.toolConfig,this.systemInstruction=$d(i.systemInstruction),this.cachedContent=i.cachedContent}async generateContent(s,i={}){var r;const o=rc(s),c=Object.assign(Object.assign({},this._requestOptions),i);return qd(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}async generateContentStream(s,i={}){var r;const o=rc(s),c=Object.assign(Object.assign({},this._requestOptions),i);return Hd(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}startChat(s){var i;return new Cx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),this._requestOptions)}async countTokens(s,i={}){const r=_x(s,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),i);return Ex(this.apiKey,this.model,r,o)}async embedContent(s,i={}){const r=jx(s),o=Object.assign(Object.assign({},this._requestOptions),i);return Sx(this.apiKey,this.model,r,o)}async batchEmbedContents(s,i={}){const r=Object.assign(Object.assign({},this._requestOptions),i);return Ax(this.apiKey,this.model,s,r)}}class sa{constructor(s){this.apiKey=s}getGenerativeModel(s,i){if(!s.model)throw new dt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new dc(this.apiKey,s,i)}getGenerativeModelFromCachedContent(s,i,r){if(!s.name)throw new ys("Cached content must contain a `name` field.");if(!s.model)throw new ys("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const d of o)if(i?.[d]&&s[d]&&i?.[d]!==s[d]){if(d==="model"){const f=i.model.startsWith("models/")?i.model.replace("models/",""):i.model,m=s.model.startsWith("models/")?s.model.replace("models/",""):s.model;if(f===m)continue}throw new ys(`Different value for "${d}" specified in modelParams (${i[d]}) and cachedContent (${s[d]})`)}const c=Object.assign(Object.assign({},i),{model:s.model,tools:s.tools,toolConfig:s.toolConfig,systemInstruction:s.systemInstruction,cachedContent:s});return new dc(this.apiKey,c,r)}}const Tx="",Px=new sa(Tx);Px.getGenerativeModel({model:"gemini-2.0-flash-exp"});async function Ix(a,s,i){return s}async function Mx(a,s="standard"){return"Delicioso prato da casa."}const uc=[{id:"pix_online",label:"Pix Automtico",description:"Aprovao imediata  Envio mais rpido",icon:e.jsx(mn,{className:"w-6 h-6 text-green-400"}),category:"online"},{id:"credit_online",label:"Carto de Crdito",description:"Visa, Master, Elo  Parcele em at 12x",icon:e.jsx(Ds,{className:"w-6 h-6 text-blue-400"}),category:"online"},{id:"credit_machine",label:"Maquininha (Crdito)",description:"Pague ao receber",icon:e.jsx(Ds,{className:"w-6 h-6"}),category:"delivery"},{id:"debit_machine",label:"Maquininha (Dbito)",description:"Pague ao receber",icon:e.jsx(Ds,{className:"w-6 h-6"}),category:"delivery"},{id:"cash",label:"Dinheiro",description:"Pague ao receber",icon:e.jsx(Zr,{className:"w-6 h-6 text-green-500"}),category:"delivery"}];function Rx({order:a,onSuccess:s,onCancel:i}){const[r,o]=k.useState("method"),[c,d]=k.useState(""),[f,m]=k.useState(""),[u,x]=k.useState({holder:"",number:"",expiry:"",cvv:""}),[h,g]=k.useState(null),[b,w]=k.useState(!1),[j,C]=k.useState(null),A=async()=>{if(c){o("processing"),C(null);try{if(["cash","credit_machine","debit_machine"].includes(c)){s({paymentMethod:c,paymentStatus:"pending",changeFor:c==="cash"?parseFloat(f.replace(/\D/g,""))/100:void 0});return}const S=(await vi(bi,"financeCharge")({orderId:a.id||`temp_${Date.now()}`,amount:a.total,restaurantId:a.restaurantId,customerData:{name:a.customer.name,cpfCnpj:a.customer.cpf.replace(/\D/g,"")},billingType:c==="pix_online"?"PIX":"CREDIT_CARD",card:c==="credit_online"?u:void 0})).data;c==="pix_online"?(g(S),o("pix_waiting"),X.success("Pix gerado! Escaneie o QR Code para pagar.")):c==="credit_online"&&s({paymentMethod:c,paymentStatus:"authorized",paymentId:S.paymentId})}catch(_){console.error("Checkout error:",_),C(_.message||"Erro ao processar pagamento"),o("error")}}},E=()=>{h?.pixCode&&(navigator.clipboard.writeText(h.pixCode),w(!0),X.success("Cdigo Pix copiado!"),setTimeout(()=>w(!1),3e3))};return e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[#121212] w-full max-w-md rounded-3xl overflow-hidden border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary/20 to-orange-600/10 p-6 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Cr,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-black italic",children:"Pagamento Seguro"})]}),e.jsxs("p",{className:"text-sm text-white/50",children:["Total: ",e.jsxs("span",{className:"text-primary font-black text-lg",children:["R$ ",a.total.toFixed(2)]})]})]}),e.jsx("div",{className:"p-6",children:e.jsxs(Be,{mode:"wait",children:[r==="method"&&e.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-white/40 mb-2",children:"Pague Agora"}),uc.filter(_=>_.category==="online").map(_=>e.jsxs("button",{onClick:()=>d(_.id),className:`w-full p-4 rounded-2xl border flex items-center gap-4 transition-all ${c===_.id?"bg-primary/10 border-primary text-white":"bg-black/40 border-white/10 text-white/60 hover:bg-white/5"}`,children:[_.icon,e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"font-bold text-sm",children:_.label}),e.jsx("p",{className:"text-xs opacity-60",children:_.description})]})]},_.id)),c==="credit_online"&&e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-3 mt-4 p-4 bg-white/5 rounded-2xl border border-white/10",children:[e.jsx("input",{placeholder:"Nome no Carto",onChange:_=>x({...u,holder:_.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-primary text-white"}),e.jsx(Os,{mask:"0000 0000 0000 0000",placeholder:"0000 0000 0000 0000",onAccept:_=>x({...u,number:_}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-primary text-white"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Os,{mask:"00/00",placeholder:"MM/AA",onAccept:_=>x({...u,expiry:_}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-primary text-white"}),e.jsx(Os,{mask:"000",placeholder:"CVV",onAccept:_=>x({...u,cvv:_}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-sm outline-none focus:border-primary text-white"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-white/40 justify-center",children:[e.jsx(Cr,{size:12})," Seus dados so criptografados e processados pelo Asaas"]})]}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-white/40 mt-6 mb-2",children:"Pague na Entrega"}),uc.filter(_=>_.category==="delivery").map(_=>e.jsxs("button",{onClick:()=>d(_.id),className:`w-full p-4 rounded-2xl border flex items-center gap-4 transition-all ${c===_.id?"bg-white/10 border-white text-white":"bg-black/40 border-white/10 text-white/60 hover:bg-white/5"}`,children:[_.icon,e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"font-bold text-sm",children:_.label}),e.jsx("p",{className:"text-xs opacity-60",children:_.description})]})]},_.id)),e.jsx(Be,{children:c==="cash"&&e.jsx(Q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl mt-2 border border-white/10",children:[e.jsx("label",{className:"text-xs font-bold text-white/50 mb-2 block uppercase tracking-wider",children:"Precisa de troco para?"}),e.jsx(Os,{mask:"R$ num",blocks:{num:{mask:Number,scale:2,thousandsSeparator:".",padFractionalZeros:!0,radix:","}},value:f,onAccept:_=>m(_),placeholder:"R$ 0,00",className:"w-full bg-transparent border-b border-white/20 pb-2 outline-none font-black text-xl text-white"})]})})}),e.jsxs("button",{disabled:!c,onClick:A,className:"w-full mt-6 py-4 bg-primary hover:bg-orange-600 disabled:opacity-40 disabled:cursor-not-allowed rounded-2xl font-black uppercase tracking-wider transition-all flex items-center justify-center gap-2",children:["Confirmar Pedido",e.jsx(Ns,{className:"w-5 h-5"})]}),e.jsx("button",{onClick:i,className:"w-full py-3 text-white/40 hover:text-white text-sm font-bold transition-colors",children:"Cancelar"})]},"method"),r==="pix_waiting"&&h&&e.jsxs(Q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"text-center py-4",children:[h.pixImage&&e.jsx("div",{className:"bg-white p-4 rounded-2xl inline-block mb-6 shadow-xl",children:e.jsx("img",{src:`data:image/png;base64,${h.pixImage}`,alt:"Pix QR Code",className:"w-48 h-48"})}),h.pixCode&&e.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10 flex items-center gap-3 mb-6",children:[e.jsx("input",{readOnly:!0,value:h.pixCode,className:"bg-transparent text-xs w-full text-white/50 truncate font-mono"}),e.jsxs("button",{onClick:E,className:"flex items-center gap-1 text-primary font-bold text-xs uppercase shrink-0",children:[b?e.jsx(ct,{className:"w-4 h-4"}):e.jsx(hn,{className:"w-4 h-4"}),b?"Copiado":"Copiar"]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-400",children:[e.jsx(ve,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{className:"text-sm font-bold",children:"Aguardando pagamento..."})]}),e.jsx("p",{className:"text-xs text-white/30 mt-4",children:"O pedido ser enviado automaticamente aps a confirmao"})]},"pix"),r==="processing"&&e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center py-16",children:[e.jsx(ve,{className:"w-12 h-12 text-primary animate-spin mb-4"}),e.jsx("p",{className:"text-white/60 font-medium",children:"Processando pagamento..."}),e.jsx("p",{className:"text-xs text-white/30 mt-2",children:"Ambiente seguro EmprataAI"})]},"processing"),r==="error"&&e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-10",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ks,{className:"w-8 h-8 text-red-400"})}),e.jsx("h3",{className:"text-lg font-black mb-2",children:"Erro no Pagamento"}),e.jsx("p",{className:"text-sm text-white/50 mb-6",children:j||"Tente outro mtodo"}),e.jsx("button",{onClick:()=>o("method"),className:"px-8 py-3 bg-white/10 rounded-full font-bold hover:bg-white/20 transition-colors",children:"Tentar Novamente"})]},"error")]})})]})}function Lx(){const a=new Date,s=a.getHours(),i=a.getDay();let r="afternoon";return s>=5&&s<11?r="morning":s>=11&&s<15?r="lunch":s>=15&&s<18?r="afternoon":s>=18&&s<23?r="dinner":r="late_night",{timeOfDay:r,dayOfWeek:i,weather:"sunny"}}function Ox(a,s){let i=0;const r=a.title.toLowerCase();return a.description?.toLowerCase(),a.isHighlight&&(i+=50),s.timeOfDay==="morning"&&((r.includes("caf")||r.includes("po")||r.includes("queijo"))&&(i+=30),r.includes("combo")&&(i+=20)),s.timeOfDay==="lunch"&&((r.includes("executivo")||r.includes("prato")||r.includes("salada"))&&(i+=40),r.includes("sobremesa")&&(i+=15)),s.timeOfDay==="dinner"&&((r.includes("pizza")||r.includes("burger")||r.includes("vinho"))&&(i+=40),(r.includes("compartilhar")||r.includes("famlia"))&&(i+=25)),s.timeOfDay==="late_night"&&((r.includes("burger")||r.includes("pizza")||r.includes("fritas"))&&(i+=50),r.includes("doce")&&(i+=30)),i}function Dx(a){if(!a)return null;const s=Lx(),i=a.categories.map(r=>({...r,score:0,items:r.items.map(o=>({...o,_score:Ox(o,s)})).sort((o,c)=>c._score-o._score)}));return i.forEach(r=>{const o=r.items.slice(0,3).reduce((c,d)=>c+d._score,0);r.score=o}),i.sort((r,o)=>o.score-r.score),{...a,categories:i}}function Bx({items:a,onItemClick:s}){return a.length===0?null:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 w-8 h-8 rounded-full flex items-center justify-center animate-pulse",children:e.jsx(Er,{className:"w-4 h-4 text-white fill-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white",children:"Em Alta"}),e.jsx("p",{className:"text-[10px] text-white/50 font-medium",children:"Os queridinhos do momento"})]})]}),e.jsx("div",{className:"flex gap-3 overflow-x-auto px-4 pb-4 no-scrollbar snap-x snap-mandatory",children:a.map((i,r)=>e.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:r*.1},onClick:()=>s(i),className:"snap-center flex-shrink-0 w-32 h-48 md:w-40 md:h-56 rounded-2xl relative overflow-hidden bg-white/5 border border-white/10 cursor-pointer group",children:[i.imageUrl?e.jsx("img",{src:i.imageUrl,alt:i.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800 to-black"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent opacity-80"}),e.jsxs("div",{className:"absolute inset-0 p-3 flex flex-col justify-end",children:[e.jsxs("div",{className:"bg-primary/20 backdrop-blur-md border border-primary/30 text-primary text-[9px] font-bold px-2 py-0.5 rounded-full w-fit mb-1 flex items-center gap-1",children:[e.jsx(at,{className:"w-2 h-2"}),"TOP 10"]}),e.jsx("h3",{className:"text-xs font-bold text-white line-clamp-2 leading-tight mb-1",children:i.title}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs font-black text-white",children:["R$ ",i.price.toFixed(2).replace(".",",")]}),e.jsx("button",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center text-black shadow-lg transform active:scale-90 transition-transform",children:e.jsx($t,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"absolute inset-0 border-2 border-primary/0 group-hover:border-primary/50 rounded-2xl transition-colors duration-300 pointer-events-none"})]},i.id))})]})}const zx=a=>{const[s,i]=k.useState({rating:null,reviewCount:0,totalOrders:0,isNew:!0,latestReviews:[]}),[r,o]=k.useState(!0);return k.useEffect(()=>{if(!a)return;(async()=>{try{const d=ze(le,"reviews"),f=We(d,Ie("restaurantId","==",a),Ks("createdAt","desc"),so(5)),u=(await Gt(f)).docs.map(j=>j.data());let x=null;if(u.length>0){const j=u.reduce((C,A)=>C+(A.rating||0),0);x=parseFloat((j/u.length).toFixed(1))}const h=ze(le,"orders"),g=We(h,Ie("restaurantId","==",a)),w=(await Gt(g)).size;i({rating:x,reviewCount:u.length,totalOrders:w,isNew:w<10,latestReviews:u})}catch(d){console.error("Erro ao buscar mtricas reais:",d)}finally{o(!1)}})()},[a]),{metrics:s,loading:r}},hc=(a,s,i,r)=>{if(!a||!s||!i||!r)return 0;const o=6371,c=Aa(i-a),d=Aa(r-s),f=Math.sin(c/2)*Math.sin(c/2)+Math.cos(Aa(a))*Math.cos(Aa(i))*Math.sin(d/2)*Math.sin(d/2),m=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),u=o*m;return parseFloat(u.toFixed(1))},Aa=a=>a*(Math.PI/180),Fx=a=>a<1?`${(a*1e3).toFixed(0)}m`:`${a}km`,Ux="SUA_API_KEY_AQUI",Vx=new sa(Ux),uo=Vx.getGenerativeModel({model:"gemini-3-pro-preview",generationConfig:{temperature:.7,topP:.8,topK:40}});function Ta(a){return a*(Math.PI/180)}function mc(a,s,i,r){const c=Ta(i-a),d=Ta(r-s),f=Math.sin(c/2)*Math.sin(c/2)+Math.cos(Ta(a))*Math.cos(Ta(i))*Math.sin(d/2)*Math.sin(d/2);return 6371*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}async function Hx(a){const{restaurantId:s,storeLocation:i,userLocation:r}=a;try{const o=We(ze(le,"orders"),Ie("restaurantId","==",s),Ie("status","in",["pending","preparing","PENDING","PREPARING"])),d=(await Gt(o)).size,f=mc(i.lat,i.lng,r.lat,r.lng);let m="CLEAR";try{const C=await Ot(Te(le,"users",s));C.exists()&&(m=C.data()?.marketplace?.weatherCondition||"CLEAR")}catch{console.log("Could not fetch weather condition")}let u={avgDelay:0,rushHourImpact:1};try{const C=await Ot(Te(le,"users",s));C.exists()&&C.data()?.emprataBrain&&(u=C.data().emprataBrain)}catch{console.log("Could not fetch brain memory")}const x=new Date,h=x.getDay()===0||x.getDay()===6,g=x.getHours(),b=g>=11&&g<=13||g>=18&&g<=21,w=`${h?"Fim de semana":"Dia de semana"}, ${b?"Horrio de Pico":"Horrio calmo"}, ${x.toLocaleTimeString("pt-BR")}`,j=`
      Aja como um Algoritmo Logstico Avanado (estilo Waze + iFood).
      Calcule o tempo de entrega com base nestes dados REAIS:
      
      DADOS:
      - Distncia Linear: ${f.toFixed(2)} km
      - Fila na Cozinha: ${d} pedidos na frente
      - Contexto Temporal: ${w}
      - Condio Climtica: ${m==="RAIN"?"CHOVENDO (adicione 30% ao tempo)":"Tempo bom"}
      - Histrico: Mdia de atraso de ${u.avgDelay||0} minutos
      - Fator de Rush Hour: ${u.rushHourImpact||1}x
      
      REGRAS:
      1. Base: 15min preparo + 2min por pedido na fila + 4min por km
      2. Se horrio de pico: multiplique por 1.3
      3. Se chovendo: multiplique por 1.3
      4. Some o vis de atraso histrico
      
      Retorne APENAS um JSON vlido (sem markdown):
      {
        "minTime": nmero,
        "maxTime": nmero,
        "reason": "Motivo curto e amigvel em portugus (ex: Alta demanda na cozinha)"
      }
    `;try{const E=(await uo.generateContent(j)).response.text().replace(/```json/g,"").replace(/```/g,"").trim(),_=JSON.parse(E);return{minTime:_.minTime,maxTime:_.maxTime,reason:_.reason,distanceKm:f,kitchenQueue:d,weatherImpact:m==="RAIN"}}catch(C){return console.error("AI prediction failed, using fallback:",C),pc(f,d,b,m==="RAIN")}}catch(o){console.error("Prediction error:",o);const c=mc(i.lat,i.lng,r.lat,r.lng);return pc(c,0,!1,!1)}}function pc(a,s,i,r){let o=15+s*2+a*4;i&&(o*=1.3),r&&(o*=1.3);const c=Math.floor(o),d=Math.floor(o+10);let f="Previso padro";return s>5?f="Alta demanda na cozinha":r?f="Condies climticas":i&&(f="Horrio de pico"),{minTime:c,maxTime:d,reason:f,distanceKm:a,kitchenQueue:s,weatherImpact:r}}function qx({orderId:a,deliveryPin:s,total:i,restaurantName:r,onDismiss:o}){const{user:c}=Ze(),d=c?.uid?c.uid.slice(0,8):Math.random().toString(36).slice(2,10),f=`${window.location.origin}/invite/${d}`,m=` Acabei de pedir no ${r||"Emprata"} e a comida  surreal!

 Use meu cdigo e ganhe R$ 10 de desconto no primeiro pedido:
${f}`,u=async()=>{if(typeof window.gtag=="function"&&window.gtag("event","share",{method:"native",content_type:"referral",item_id:a}),navigator.share)try{await navigator.share({title:"Ganhe R$ 10 no Emprata",text:m,url:f}),X.success("Compartilhado! ")}catch{x()}else x()},x=()=>{navigator.clipboard.writeText(f),X.success("Link copiado! Mande para seus amigos ")};return e.jsxs("div",{className:"fixed inset-0 z-[70] bg-black flex flex-col items-center justify-center p-6 text-center overflow-y-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/20 via-black to-purple-900/20"}),e.jsxs(Q.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"relative mb-6",children:[e.jsx(Q.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"absolute inset-0 bg-green-500/30 rounded-full blur-2xl"}),e.jsx("div",{className:"relative w-24 h-24 bg-green-500 rounded-full flex items-center justify-center shadow-[0_0_50px_rgba(34,197,94,0.4)]",children:e.jsx(qs,{size:48,className:"text-white",strokeWidth:2.5})})]}),e.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-4xl font-black italic mb-2 relative z-10",children:"Pedido Confirmado!"}),e.jsx(Q.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-white/50 mb-6 relative z-10",children:"A cozinha j est preparando seu pedido."}),e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/5 p-6 rounded-3xl border border-white/10 mb-8 relative z-10",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-white/40 mb-2",children:"PIN DE ENTREGA"}),e.jsx("p",{className:"text-5xl font-black text-primary tracking-[0.2em]",children:s}),e.jsx("p",{className:"text-[10px] text-white/30 mt-2",children:"Mostre este cdigo ao entregador"})]}),e.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-gradient-to-br from-purple-900/30 to-blue-900/30 border border-purple-500/20 p-6 rounded-2xl w-full max-w-sm relative overflow-hidden z-10",children:[e.jsx(at,{className:"absolute top-3 right-3 text-yellow-400/50",size:20}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(rd,{className:"text-yellow-400",size:20}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-yellow-400",children:"No coma sozinho"})]}),e.jsxs("p",{className:"text-white font-bold mb-4 text-sm leading-relaxed",children:["Mande seu link para um amigo. Se ele pedir,"," ",e.jsx("span",{className:"text-green-400 block text-lg mt-1",children:"VOCS DOIS GANHAM R$ 10,00"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:u,className:"flex-1 bg-white text-black font-black py-4 rounded-xl flex items-center justify-center gap-2 hover:scale-[1.02] transition-transform active:scale-95",children:[e.jsx(Kr,{size:18})," COMPARTILHAR"]}),e.jsx("button",{onClick:x,className:"bg-white/10 text-white p-4 rounded-xl hover:bg-white/20 transition-colors border border-white/10",children:e.jsx(hn,{size:18})})]}),e.jsx("div",{className:"mt-4 bg-black/30 rounded-lg p-2 border border-white/5",children:e.jsx("p",{className:"text-[10px] text-white/40 font-mono truncate",children:f})})]}),e.jsxs(Q.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},onClick:o,className:"mt-6 text-white/40 hover:text-white font-bold text-sm uppercase tracking-widest flex items-center gap-2 relative z-10",children:["Fazer novo pedido ",e.jsx(Ns,{size:16})]})]})}function fc(){const{slug:a,tableNum:s}=fd(),[i]=pd();gt();const r=s||i.get("table"),[o,c]=k.useState(!0),[d,f]=k.useState(null),[m,u]=k.useState([]),[x,h]=k.useState([]),[g,b]=k.useState("Todos"),[w,j]=k.useState(null),[C,A]=k.useState([]),[E,_]=k.useState([]),[I,S]=k.useState(!1),[R,$]=k.useState(!1),[W,ae]=k.useState({name:"",cpf:"",table:r||"",phone:"",address:""}),[M,U]=k.useState(!1),[D,q]=k.useState(null),[J,se]=k.useState(""),[te,ue]=k.useState(!1),[ne,Ce]=k.useState([]),[P,N]=k.useState(null),[F,O]=k.useState(null),{metrics:B}=zx(d?.ownerId),[z,V]=k.useState(null),[Z,Y]=k.useState(!1);k.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(ie=>{N({lat:ie.coords.latitude,lng:ie.coords.longitude})})},[]),k.useEffect(()=>{if(P&&d?.location?.lat){const ie=hc(P.lat,P.lng,d.location.lat,d.location.lng);O(Fx(ie))}},[P,d]),k.useEffect(()=>{(async()=>{if(!d?.ownerId||!P)return;const pe=d.location||d.marketplace?.location;if(pe?.lat){Y(!0);try{const xe=await Hx({restaurantId:d.ownerId,storeLocation:{lat:pe.lat,lng:pe.lng},userLocation:P});V(xe)}catch(xe){console.error("Prediction error:",xe)}finally{Y(!1)}}})()},[d,P]);const[ce,he]=k.useState("standard"),[be,we]=k.useState({}),Oe=k.useRef(!1),ye={standard:"from-orange-500/10 to-transparent",comfort:"from-blue-500/10 to-transparent",fitness:"from-green-500/10 to-transparent",energy:"from-yellow-500/10 to-transparent",late_night:"from-purple-500/10 to-transparent"};k.useEffect(()=>{if(ce==="standard"){we({});return}(async()=>{const pe=m.slice(0,10);for(const xe of pe){we(Re=>({...Re,[xe.id]:" Personalizando..."}));const Ee=await Ix(xe.title,xe.description);we(Re=>({...Re,[xe.id]:Ee}))}})()},[ce,m]),k.useEffect(()=>{a&&(async()=>{try{const pe=We(ze(le,"menus"),Ie("slug","==",a)),xe=await Gt(pe);if(xe.empty){X.error("Restaurante no encontrado"),c(!1);return}const Ee=xe.docs[0].data();f(Ee);const Re=Dx(Ee);if(Re){j(Re);const _t=Re.categories.flatMap(Qe=>Qe.items.map(St=>({...St,category:Qe.title})));A(_t.filter(Qe=>Qe.isHighlight).slice(0,10)),u(_t),Ce(_t),h(["Todos",...Re.categories.map(Qe=>Qe.title)])}else{const _t=[],Qe=new Set;Ee.categories.forEach(St=>{Qe.add(St.title),St.items.forEach(ss=>{_t.push({...ss,category:St.title})})}),u(_t),Ce(_t),h(["Todos",...Array.from(Qe)])}}catch(pe){console.error(pe)}finally{c(!1)}})()},[a]),k.useEffect(()=>{},[ce,d]);const Fe=async ie=>{if(se(ie),!ie){Ce(m);return}if(ie.length<4){const pe=m.filter(xe=>xe.title.toLowerCase().includes(ie.toLowerCase()));Ce(pe);return}ue(!0);try{const{semanticSearch:pe}=await Mf(async()=>{const{semanticSearch:Ee}=await Promise.resolve().then(()=>Y0);return{semanticSearch:Ee}},void 0),xe=await pe(ie,m);if(xe.length>0){const Ee=m.filter(Re=>xe.includes(Re.id));Ce(Ee),X.success("IA: Encontrei pratos perfeitos para voc!",{icon:""})}else{const Ee=m.filter(Re=>Re.title.toLowerCase().includes(ie.toLowerCase()));Ce(Ee)}}catch(pe){console.error(pe)}finally{ue(!1)}};k.useEffect(()=>{const ie=i.get("add_item");if(ie&&m.length>0&&!Oe.current){const pe=m.find(xe=>xe.id===ie);pe&&(Oe.current=!0,_(xe=>xe.find(Re=>Re.id===pe.id)?xe.map(Re=>Re.id===pe.id?{...Re,quantity:Re.quantity+1}:Re):[...xe,{...pe,cartId:crypto.randomUUID(),quantity:1,notes:""}]),S(!0),X.success(" Oferta ativada!",{icon:""}))}},[m,i]);const et=ie=>{_(pe=>pe.find(Ee=>Ee.id===ie.id)?pe.map(Ee=>Ee.id===ie.id?{...Ee,quantity:Ee.quantity+1}:Ee):[...pe,{...ie,cartId:crypto.randomUUID(),quantity:1,notes:""}]),X.success(`${ie.title} adicionado!`)},qe=(ie,pe)=>{_(xe=>xe.map(Ee=>{if(Ee.cartId===ie){const Re=Ee.quantity+pe;return Re>0?{...Ee,quantity:Re}:Ee}return Ee}))},$e=E.reduce((ie,pe)=>ie+pe.price*pe.quantity,0),Ye=async ie=>{try{c(!0);const pe=15;if(P&&d?.location?.lat){const Re=hc(P.lat,P.lng,d.location.lat,d.location.lng);if(Re>pe){X.error(`Desculpe, no entregamos neste local (${Re}km). Limite: ${pe}km.`),c(!1);return}}if($e>300&&ie.paymentMethod==="CASH"){X.error("Para pedidos acima de R$ 300, apenas pagamento via Pix ou Carto Online."),c(!1);return}const xe=Math.floor(1e3+Math.random()*9e3).toString(),Ee=await pn(ze(le,"orders"),{restaurantId:d.ownerId,customer:{...W,uid:He.currentUser?.uid||null},items:E,total:$e,paymentMethod:ie.paymentMethod,paymentStatus:ie.paymentStatus||"pending",changeFor:ie.changeFor??null,paymentId:ie.paymentId??null,source:r?"QR_TABLE":"WEB_DELIVERY",tableId:r||null,status:"pending",createdAt:xt(),deliveryPin:xe,isOrderBumpAccepted:!1});q({orderId:Ee.id,deliveryPin:xe,total:$e}),_([]),U(!1),$(!1),S(!1)}catch(pe){X.error("Erro ao finalizar pedido"),console.error(pe)}finally{c(!1)}};return o?e.jsx(Rf,{}):e.jsxs("div",{className:"min-h-screen bg-[#050505] text-white pb-32 transition-colors duration-700",children:[e.jsx(Pd,{title:d?.name||"Cardpio",description:d?.description||`Pea delivery de ${d?.name||"restaurante"} pelo EmprataAI`,image:d?.coverUrl,path:`/menu/${a}`,type:"restaurant",rating:B?.rating,reviewCount:B?.reviewCount,priceRange:d?.priceRange||"$$"}),e.jsx("div",{className:`fixed inset-0 bg-gradient-to-b ${ye[ce]} opacity-30 pointer-events-none transition-all duration-1000`}),e.jsxs("div",{className:"relative h-[40vh] w-full overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/60 to-transparent z-10"}),e.jsx("img",{src:d?.coverUrl||"https://images.unsplash.com/photo-1559339352-11d035aa65de?w=1200&q=80",className:"w-full h-full object-cover scale-105 animate-slow-zoom"}),e.jsxs("div",{className:"absolute top-0 left-0 w-full p-6 z-20 flex justify-between items-start",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur-md px-4 py-2 rounded-full border border-white/10 text-xs font-bold uppercase tracking-widest flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),r?`Mesa ${r}`:"Delivery Online"]}),e.jsxs("div",{className:"relative w-full max-w-xs mx-auto md:mr-0 z-50",children:[e.jsx("input",{value:J,onChange:ie=>Fe(ie.target.value),placeholder:"Ex: 'Jantar romntico'...",className:"w-full bg-black/40 backdrop-blur-md border border-white/10 rounded-full py-2 pl-10 pr-4 text-xs text-white placeholder-white/50 focus:border-primary focus:outline-none transition-all"}),e.jsx(ts,{className:"absolute left-3 top-2.5 w-4 h-4 text-white/40"}),te&&e.jsx(at,{className:"absolute right-3 top-2.5 w-4 h-4 text-purple-400 animate-pulse"})]})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-8 z-20 w-full max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[B.isNew?e.jsx("span",{className:"bg-blue-500 text-white px-2 py-0.5 rounded text-[10px] font-bold uppercase",children:"Novo"}):e.jsxs("span",{className:"bg-yellow-500 text-black px-2 py-0.5 rounded text-[10px] font-bold uppercase flex items-center gap-1",children:[e.jsx(un,{size:10,className:"fill-black"})," ",B.rating]}),F&&e.jsxs("span",{className:"bg-black/50 backdrop-blur text-white border border-white/10 px-2 py-0.5 rounded text-[10px] font-bold uppercase flex items-center gap-1",children:[e.jsx(js,{size:10})," ",F]})]}),e.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-5xl md:text-7xl font-black italic tracking-tighter mb-4 text-transparent bg-clip-text bg-gradient-to-r from-white to-white/50",children:d?.name}),e.jsx("div",{className:"flex items-center gap-4 text-sm font-bold text-white/50",children:e.jsx("div",{className:"flex items-center gap-2",children:Z?e.jsxs(e.Fragment,{children:[e.jsx(ve,{size:14,className:"animate-spin"})," Calculando..."]}):z?e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex items-center gap-1 text-white",children:[e.jsx(Hs,{size:14})," ",z.minTime,"-",z.maxTime," min"]}),z.reason&&e.jsxs("span",{className:"text-[10px] text-primary",children:[z.weatherImpact&&" ",z.reason]})]}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Hs,{size:16})," 30-45 min"]})})})]})]}),e.jsx(ex,{metrics:B}),e.jsx("div",{className:"sticky top-4 z-30 px-4 mb-8",children:e.jsx("div",{className:"bg-black/60 backdrop-blur-xl border border-white/10 p-2 rounded-full flex gap-2 overflow-x-auto no-scrollbar shadow-2xl",children:x.map(ie=>e.jsx("button",{onClick:()=>b(ie),className:`px-6 py-3 rounded-full text-xs font-black uppercase tracking-wider whitespace-nowrap transition-all ${g===ie?"bg-white text-black shadow-lg shadow-white/20 scale-105":"text-white/60 hover:text-white hover:bg-white/5"}`,children:ie},ie))})}),e.jsxs("div",{className:"max-w-md mx-auto mb-10 px-6",children:[e.jsx("p",{className:"text-white/30 text-[10px] font-black uppercase tracking-[0.2em] text-center mb-4",children:"Personalize sua experincia"}),e.jsx("div",{className:"flex justify-center gap-4",children:[{id:"standard",icon:e.jsx(ot,{}),label:"Normal"},{id:"late_night",icon:e.jsx(zh,{}),label:"Larica"},{id:"fitness",icon:e.jsx(Fh,{}),label:"Fit"},{id:"energy",icon:e.jsx(Bt,{}),label:"Fome"}].map(ie=>e.jsx("button",{onClick:()=>he(ie.id),className:`p-3 rounded-2xl border transition-all ${ce===ie.id?"bg-white/10 border-white text-white scale-110 shadow-xl shadow-white/10":"bg-transparent border-white/5 text-white/30 hover:bg-white/5"}`,children:ie.icon},ie.id))})]}),e.jsx(Bx,{items:C,onItemClick:ie=>et({...ie,category:"Stories"})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ne.filter(ie=>g==="Todos"||ie.category===g).map((ie,pe)=>e.jsxs(Q.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:pe*.05},className:`group relative overflow-hidden rounded-[2rem] border border-white/5 hover:border-white/20 transition-all bg-[#121212] ${pe%5===0?"md:col-span-2 md:row-span-2":""}`,onClick:()=>et(ie),children:[e.jsxs("div",{className:`w-full ${pe%5===0?"h-96":"h-64"} relative`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10 opacity-90"}),e.jsx("img",{src:ie.imageUrl||"",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700 grayscale-[0.3] group-hover:grayscale-0"}),e.jsx("div",{className:"absolute top-4 right-4 z-20 bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-white/10",children:e.jsxs("span",{className:"text-white font-black",children:["R$ ",ie.price.toFixed(2)]})})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 z-20",children:[e.jsx("h3",{className:`font-black italic leading-none mb-2 ${pe%5===0?"text-4xl":"text-xl"}`,children:ie.title}),e.jsx("p",{className:`text-white/60 mb-4 line-clamp-2 text-sm ${pe%5===0?"max-w-md":""}`,children:be[ie.id]||ie.description}),e.jsxs("button",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-primary opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300",children:[e.jsx($t,{className:"w-4 h-4"})," Adicionar  sacola"]})]})]},ie.id))}),e.jsx(Be,{children:E.length>0&&e.jsx(Q.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-8 left-0 right-0 z-40 px-6 flex justify-center",children:e.jsxs("button",{onClick:()=>S(!0),className:"bg-primary text-white pl-6 pr-2 py-2 rounded-full shadow-[0_0_40px_rgba(255,100,0,0.4)] flex items-center gap-4 hover:scale-105 transition-transform active:scale-95",children:[e.jsx("span",{className:"font-black uppercase tracking-widest text-sm",children:"Ver Sacola"}),e.jsx("div",{className:"bg-white text-black font-black w-10 h-10 rounded-full flex items-center justify-center",children:E.reduce((ie,pe)=>ie+pe.quantity,0)})]})})}),I&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>S(!1)}),e.jsxs(Q.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"fixed top-0 right-0 z-50 h-full w-full max-w-sm bg-[#121212] flex flex-col items-center border-l border-white/10",children:[e.jsxs("div",{className:"w-full p-6 flex items-center justify-between border-b border-white/5",children:[e.jsx("h2",{className:"text-xl font-black italic",children:"Seu Pedido"}),e.jsx("button",{onClick:()=>S(!1),className:"bg-white/5 p-2 rounded-full hover:bg-white/20",children:e.jsx(Lt,{size:20})})]}),e.jsx("div",{className:"flex-1 w-full overflow-y-auto p-6 space-y-4",children:E.map(ie=>e.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 flex gap-4 border border-white/5",children:[e.jsx("img",{src:ie.imageUrl||"",className:"w-16 h-16 rounded-xl object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-sm leading-tight mb-1",children:ie.title}),e.jsxs("span",{className:"text-primary text-xs font-black",children:["R$ ",ie.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-col items-center bg-black/40 rounded-lg p-1 gap-2",children:[e.jsx("button",{onClick:()=>qe(ie.cartId,1),className:"hover:text-primary",children:e.jsx($t,{size:14})}),e.jsx("span",{className:"text-xs font-bold",children:ie.quantity}),e.jsx("button",{onClick:()=>qe(ie.cartId,-1),className:"hover:text-primary",children:e.jsx(Yr,{size:14})})]})]},ie.cartId))}),e.jsxs("div",{className:"w-full p-6 bg-gradient-to-t from-black to-transparent",children:[e.jsxs("div",{className:"flex justify-between items-end mb-6",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Total a pagar"}),e.jsxs("span",{className:"text-3xl font-black text-white",children:["R$ ",$e.toFixed(2)]})]}),e.jsx("button",{onClick:()=>{S(!1),$(!0)},className:"w-full py-4 bg-white text-black rounded-xl font-black uppercase tracking-widest hover:scale-[1.02] transition-transform",children:"Continuar"})]})]})]}),R&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl",children:M?e.jsx("div",{className:"w-full max-w-md",children:e.jsx(Rx,{order:{id:`order_${Date.now()}`,total:$e,restaurantId:d?.ownerId,customer:{name:W.name,cpf:W.cpf,phone:W.phone||""},items:E},onSuccess:Ye,onCancel:()=>U(!1)})}):e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-md bg-[#121212] rounded-3xl p-8 border border-white/10 relative",children:[e.jsx("button",{onClick:()=>$(!1),className:"absolute top-4 right-4 text-white/40",children:e.jsx(Lt,{})}),e.jsx("h2",{className:"text-2xl font-black italic mb-2",children:"Identifique-se"}),e.jsx("p",{className:"text-white/40 text-sm mb-6",children:"Para emitir sua nota e acompanhar o pedido."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{placeholder:"Seu Nome",value:W.name,onChange:ie=>ae({...W,name:ie.target.value}),className:"w-full bg-black border border-white/10 rounded-xl p-4 outline-none focus:border-primary text-white"}),e.jsx(Os,{mask:"000.000.000-00",placeholder:"CPF",value:W.cpf,unmask:!1,onAccept:ie=>ae({...W,cpf:ie}),className:"w-full bg-black border border-white/10 rounded-xl p-4 outline-none focus:border-primary text-white"}),e.jsx(Os,{mask:"(00) 00000-0000",placeholder:"WhatsApp",value:W.phone,onAccept:ie=>ae({...W,phone:ie}),className:"w-full bg-black border border-white/10 rounded-xl p-4 outline-none focus:border-primary text-white"}),r?e.jsxs("div",{className:"bg-primary/10 border border-primary/50 text-primary p-4 rounded-xl flex items-center gap-3",children:[e.jsx(js,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-bold text-sm",children:["Voc est na Mesa ",r]})]}):e.jsx("input",{placeholder:"Endereo Completo",value:W.address,onChange:ie=>ae({...W,address:ie.target.value}),className:"w-full bg-black border border-white/10 rounded-xl p-4 outline-none focus:border-primary text-white"}),e.jsx("button",{onClick:()=>{W.name&&W.cpf?U(!0):X.error("Dados incompletos")},className:"w-full bg-white text-black py-4 rounded-xl font-black uppercase tracking-widest mt-4",children:"Ir para Pagamento"})]})]})}),D&&e.jsx(qx,{orderId:D.orderId,deliveryPin:D.deliveryPin,total:D.total,restaurantName:d?.name,onDismiss:()=>q(null)})]})}function $x(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-zinc-950 to-black",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[e.jsxs(Ve,{to:"/",className:"inline-flex items-center gap-2 text-white/60 hover:text-white transition-colors mb-8",children:[e.jsx(Zs,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Voltar"})]}),e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"bg-primary/20 rounded-2xl p-3",children:e.jsx(Cr,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white",children:"Poltica de Privacidade"})]}),e.jsx("p",{className:"text-white/60 text-lg",children:"ltima atualizao: 25 de dezembro de 2024"})]}),e.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"prose prose-invert max-w-none",children:e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"1. Introduo"}),e.jsxs("p",{className:"text-white/70 leading-relaxed",children:["A ",e.jsx("strong",{className:"text-white",children:"Emprata AI"}),' ("ns", "nosso" ou "nossa") respeita sua privacidade e est comprometida em proteger seus dados pessoais. Esta Poltica de Privacidade explica como coletamos, usamos e protegemos suas informaes em conformidade com a ',e.jsx("strong",{className:"text-white",children:"Lei Geral de Proteo de Dados (LGPD - Lei n 13.709/2018)"}),"."]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"2. Dados Coletados"}),e.jsx("p",{className:"text-white/70 leading-relaxed mb-3",children:"Coletamos apenas os dados essenciais para o funcionamento do servio:"}),e.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"E-mail:"})," Utilizado para autenticao via Firebase Authentication e comunicao sobre sua conta."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Nome (opcional):"})," Fornecido durante o cadastro para personalizao da experincia."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Dados de Uso:"})," Informaes sobre como voc utiliza a plataforma (prompts, imagens geradas, crditos consumidos)."]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"3. Uso dos Dados"}),e.jsx("p",{className:"text-white/70 leading-relaxed mb-3",children:"Seus dados so utilizados exclusivamente para:"}),e.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[e.jsx("li",{children:"Autenticar e gerenciar sua conta"}),e.jsx("li",{children:"Processar solicitaes de gerao de imagens via IA"}),e.jsx("li",{children:"Gerenciar crditos e planos de assinatura"}),e.jsx("li",{children:"Melhorar nossos servios e experincia do usurio"}),e.jsx("li",{children:"Enviar notificaes importantes sobre sua conta"})]}),e.jsxs("p",{className:"text-white/70 leading-relaxed mt-3",children:[e.jsx("strong",{className:"text-white",children:"Importante:"})," No vendemos, alugamos ou compartilhamos seus dados pessoais com terceiros para fins de marketing."]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"4. Armazenamento e Segurana"}),e.jsxs("p",{className:"text-white/70 leading-relaxed",children:["Seus dados so armazenados de forma segura no ",e.jsx("strong",{className:"text-white",children:"Firebase (Google Cloud Platform)"}),", que utiliza criptografia em trnsito e em repouso. Implementamos medidas tcnicas e organizacionais para proteger suas informaes contra acesso no autorizado, perda ou destruio."]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"5. Seus Direitos (LGPD)"}),e.jsx("p",{className:"text-white/70 leading-relaxed mb-3",children:"Voc tem os seguintes direitos sobre seus dados pessoais:"}),e.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Acesso:"})," Solicitar uma cpia dos seus dados"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Correo:"})," Atualizar dados incorretos ou incompletos"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Excluso:"})," Solicitar a remoo dos seus dados"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Portabilidade:"})," Receber seus dados em formato estruturado"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Revogao de Consentimento:"})," Retirar seu consentimento a qualquer momento"]})]}),e.jsxs("p",{className:"text-white/70 leading-relaxed mt-3",children:["Para exercer seus direitos, entre em contato conosco atravs do e-mail: ",e.jsx("a",{href:"mailto:contato@emprata.ai",className:"text-primary hover:underline",children:"contato@emprata.ai"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"6. Cookies e Tecnologias Similares"}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:"Utilizamos cookies essenciais para autenticao e funcionamento da plataforma. No utilizamos cookies de rastreamento ou publicidade de terceiros."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"7. Alteraes nesta Poltica"}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:"Podemos atualizar esta Poltica de Privacidade periodicamente. Notificaremos voc sobre mudanas significativas atravs do e-mail cadastrado ou por aviso na plataforma."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"8. Contato"}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:"Para dvidas sobre esta Poltica de Privacidade ou sobre o tratamento dos seus dados, entre em contato:"}),e.jsxs("div",{className:"mt-3 text-white/70",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-white",children:"E-mail:"})," contato@emprata.ai"]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-white",children:"Encarregado de Dados (DPO):"})," dpo@emprata.ai"]})]})]})]})})]})})}function Gx(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-zinc-950 to-black",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[e.jsxs(Ve,{to:"/",className:"inline-flex items-center gap-2 text-white/60 hover:text-white transition-colors mb-8",children:[e.jsx(Zs,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Voltar"})]}),e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"bg-primary/20 rounded-2xl p-3",children:e.jsx(Qr,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white",children:"Termos de Uso"})]}),e.jsx("p",{className:"text-white/60 text-lg",children:"ltima atualizao: 25 de dezembro de 2024"})]}),e.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"prose prose-invert max-w-none",children:e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"1. Aceitao dos Termos"}),e.jsxs("p",{className:"text-white/70 leading-relaxed",children:["Ao acessar e utilizar a plataforma ",e.jsx("strong",{className:"text-white",children:"Emprata AI"}),", voc concorda em cumprir e estar vinculado a estes Termos de Uso. Se voc no concordar com qualquer parte destes termos, no utilize nossos servios."]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"2. Descrio do Servio"}),e.jsxs("p",{className:"text-white/70 leading-relaxed",children:["A Emprata AI  uma plataforma de inteligncia artificial que permite aos usurios gerar imagens profissionais atravs de prompts de texto. O servio  fornecido ",e.jsx("strong",{className:"text-white",children:'"como est"'})," e ",e.jsx("strong",{className:"text-white",children:'"conforme disponvel"'}),", sem garantias de qualquer tipo, expressas ou implcitas."]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"3. Uso Aceitvel"}),e.jsxs("p",{className:"text-white/70 leading-relaxed mb-3",children:["Voc concorda em utilizar a plataforma apenas para fins legais e de acordo com estes Termos.  ",e.jsx("strong",{className:"text-white",children:"PROIBIDO"}),":"]}),e.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[e.jsx("li",{children:"Gerar contedo ilegal, difamatrio, obsceno ou que viole direitos de terceiros"}),e.jsx("li",{children:"Utilizar o servio para criar deepfakes ou contedo enganoso"}),e.jsx("li",{children:"Tentar burlar o sistema de crditos ou acessar funcionalidades no autorizadas"}),e.jsx("li",{children:"Revender ou redistribuir o acesso  plataforma sem autorizao"}),e.jsx("li",{children:"Utilizar bots, scripts ou automaes para abusar do servio"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"4. Propriedade Intelectual"}),e.jsxs("p",{className:"text-white/70 leading-relaxed",children:["As imagens geradas pela IA so de ",e.jsx("strong",{className:"text-white",children:"propriedade do usurio"})," que as criou. No entanto, a Emprata AI no se responsabiliza por:"]}),e.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4 mt-3",children:[e.jsx("li",{children:"Violaes de direitos autorais ou marcas registradas nas imagens geradas"}),e.jsx("li",{children:"Uso indevido das imagens por parte do usurio"}),e.jsx("li",{children:"Similaridades no intencionais com obras protegidas por direitos autorais"})]}),e.jsxs("p",{className:"text-white/70 leading-relaxed mt-3",children:[e.jsx("strong",{className:"text-white",children:"Importante:"})," Voc  o nico responsvel pelo uso comercial ou pblico das imagens geradas."]})]}),e.jsxs("section",{className:"bg-primary/10 border-2 border-primary/30 rounded-2xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-primary",children:""})," 5. Poltica de Reembolso (CDC Art. 49)"]}),e.jsxs("p",{className:"text-white/70 leading-relaxed mb-3",children:["Em conformidade com o ",e.jsx("strong",{className:"text-white",children:"Artigo 49 do Cdigo de Defesa do Consumidor (CDC)"}),", voc tem o direito de desistir da compra em at ",e.jsx("strong",{className:"text-white",children:"7 (sete) dias corridos"})," a partir da data da contratao ou do recebimento do produto/servio."]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Condies para Reembolso:"}),e.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4",children:[e.jsx("li",{children:"Solicitao deve ser feita em at 7 dias corridos aps a compra"}),e.jsx("li",{children:"Reembolso integral do valor pago"}),e.jsx("li",{children:"Crditos no utilizados sero removidos da conta"}),e.jsx("li",{children:"Prazo de processamento: at 10 dias teis"})]})]}),e.jsxs("p",{className:"text-white/70 leading-relaxed mt-4",children:["Para solicitar reembolso, envie um e-mail para: ",e.jsx("a",{href:"mailto:reembolso@emprata.ai",className:"text-primary hover:underline font-bold",children:"reembolso@emprata.ai"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"6. Planos e Crditos"}),e.jsxs("p",{className:"text-white/70 leading-relaxed",children:["Os crditos adquiridos so ",e.jsx("strong",{className:"text-white",children:"acumulativos"})," e no expiram enquanto sua assinatura estiver ativa. Em caso de cancelamento, os crditos restantes sero perdidos. No h reembolso parcial de crditos no utilizados aps o perodo de 7 dias."]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"7. Limitao de Responsabilidade"}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:"A Emprata AI no se responsabiliza por:"}),e.jsxs("ul",{className:"list-disc list-inside text-white/70 space-y-2 ml-4 mt-3",children:[e.jsx("li",{children:"Danos diretos ou indiretos decorrentes do uso das imagens geradas"}),e.jsx("li",{children:"Interrupes temporrias do servio por manuteno ou falhas tcnicas"}),e.jsx("li",{children:"Perda de dados ou contedo gerado"}),e.jsx("li",{children:"Resultados especficos ou qualidade das imagens geradas"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"8. Suspenso e Encerramento"}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:"Reservamo-nos o direito de suspender ou encerrar sua conta imediatamente, sem aviso prvio, em caso de violao destes Termos, uso fraudulento ou atividades ilegais."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"9. Modificaes nos Termos"}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:"Podemos atualizar estes Termos de Uso periodicamente. Mudanas significativas sero comunicadas atravs do e-mail cadastrado. O uso continuado da plataforma aps as alteraes constitui aceitao dos novos termos."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"10. Lei Aplicvel"}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:"Estes Termos so regidos pelas leis da Repblica Federativa do Brasil. Qualquer disputa ser resolvida no foro da comarca de So Paulo/SP."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"11. Contato"}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:"Para dvidas sobre estes Termos de Uso, entre em contato:"}),e.jsxs("div",{className:"mt-3 text-white/70",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-white",children:"E-mail:"})," contato@emprata.ai"]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-white",children:"Suporte:"})," suporte@emprata.ai"]})]})]})]})})]})})}function Wx(){const a=gt(),{isAuthenticated:s}=Ze(),i=()=>{a(s?"/app":"/")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-zinc-950 to-black flex items-center justify-center p-4",children:e.jsxs(Q.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.5},className:"text-center max-w-md",children:[e.jsx(Q.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200,damping:15},className:"flex justify-center mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(Q.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-red-500/30 rounded-full blur-2xl"}),e.jsx("div",{className:"relative bg-red-500/20 border-2 border-red-500/30 rounded-full p-6",children:e.jsx(Wr,{className:"w-16 h-16 text-red-500",strokeWidth:2})})]})}),e.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-8xl md:text-9xl font-black text-white mb-4 tracking-tighter",children:"404"}),e.jsx(Q.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-2xl md:text-3xl font-bold text-white mb-3",children:"Pgina no encontrada"}),e.jsx(Q.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/60 text-lg mb-8",children:"A pgina que voc est procurando no existe ou foi movida."}),e.jsx(Q.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"px-8 py-4 rounded-2xl bg-primary hover:bg-orange-600 font-black text-white shadow-xl shadow-primary/40 uppercase tracking-wider text-sm transition-all",children:"Voltar para o Incio"})]})})}function Gd(){const{currentPlan:a,planDetails:s,checkAccess:i,isLoading:r,isGrowthOrHigher:o,isBlack:c}=fn();return{currentPlan:a,planDetails:s,canAccess:f=>wf[f]?i(f):!0,isLoading:r,isPro:o,isBlack:c}}const Zx=[{id:"dashboard",label:"Viso Geral",icon:ad,path:"/dashboard",section:"Operao"},{id:"dispatch",label:"Logstica & Entregadores",icon:es,path:"/dispatch",section:"Operao",feature:"driver_app_access"},{id:"kds",label:"Tela da Cozinha (KDS)",icon:ot,path:"/kitchen-display",section:"Operao"},{id:"menu",label:"Editor de Cardpio",icon:Fs,path:"/menu-builder",section:"Gesto"},{id:"staff",label:"Equipe & Acessos",icon:qt,path:"/staff",section:"RH"},{id:"finance",label:"Financeiro",icon:Us,path:"/finance",section:"Gesto",feature:"financial_overview"},{id:"ai",label:"EmprataBrain Intelligence",icon:Vs,path:"/intelligence",section:"IA",feature:"ai_insights"},{id:"qr",label:"QR Codes das Mesas",icon:mn,path:"/qr-print",section:"Ferramentas",feature:"table_qr_code"},{id:"store",label:"Vitrine da Loja",icon:Fs,path:"/store-settings",section:"Gesto"},{id:"owner",label:"App do Dono (Mobile)",icon:_i,path:"/owner",section:"Apps"},{id:"profile",label:"Meu Perfil",icon:Gr,path:"/profile",section:"Conta"},{id:"subscription",label:"Meu Plano",icon:Us,path:"/subscription",section:"Conta"}];function Kx({isOpen:a,onClose:s}){const[i,r]=k.useState(""),[o,c]=k.useState(0),d=gt(),{checkAccess:f}=fn(),m=Zx.filter(h=>!(!(h.label.toLowerCase().includes(i.toLowerCase())||h.section.toLowerCase().includes(i.toLowerCase()))||h.feature&&!f(h.feature)));k.useEffect(()=>{a&&(r(""),c(0))},[a]);const u=k.useCallback(h=>{if(h.feature&&!f(h.feature)){const g=Wi(h.feature);X.error(`Recurso do plano ${yi[g].label}`,{description:"Faa upgrade para acessar",action:{label:"Ver Planos",onClick:()=>d("/subscription")}}),s(),d("/subscription");return}d(h.path),s()},[f,d,s]),x=k.useCallback(h=>{if(a)switch(h.key){case"Escape":s();break;case"ArrowDown":h.preventDefault(),c(g=>(g+1)%Math.max(m.length,1));break;case"ArrowUp":h.preventDefault(),c(g=>(g-1+m.length)%Math.max(m.length,1));break;case"Enter":m[o]&&u(m[o]);break}},[a,s,m,o,u]);return k.useEffect(()=>(window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)),[x]),e.jsx(Be,{children:a&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-start justify-center pt-[15vh] p-4",onClick:s,children:e.jsxs(Q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},onClick:h=>h.stopPropagation(),className:"w-full max-w-2xl bg-[#121212] border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center px-4 border-b border-white/10",children:[e.jsx(ts,{className:"text-white/40",size:20}),e.jsx("input",{autoFocus:!0,value:i,onChange:h=>{r(h.target.value),c(0)},placeholder:"O que voc procura? (Ex: Cardpio, Cozinha...)",className:"w-full bg-transparent p-4 text-white placeholder:text-white/20 outline-none text-lg"}),e.jsx("div",{className:"text-[10px] font-bold text-white/20 border border-white/10 px-2 py-1 rounded",children:"ESC"})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto p-2",children:m.length===0?e.jsx("div",{className:"p-8 text-center text-white/30",children:"Nenhuma ferramenta encontrada."}):m.map((h,g)=>{const b=h.icon,w=h.feature?f(h.feature):!0;return e.jsxs("button",{onClick:()=>u(h),className:`w-full flex items-center justify-between p-3 rounded-xl group transition-colors text-left ${g===o?"bg-white/10":"hover:bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${g===o?"bg-primary/20 text-primary":"bg-white/5 text-white/60 group-hover:text-primary group-hover:bg-primary/10"}`,children:e.jsx(b,{size:18})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-white text-sm flex items-center gap-2",children:[h.label,!w&&e.jsx(Dt,{size:12,className:"text-white/30"})]}),e.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider",children:h.section})]})]}),e.jsx(Ns,{size:16,className:`transition-all ${g===o?"text-white opacity-100":"text-white/20 -translate-x-2 opacity-0 group-hover:translate-x-0 group-hover:opacity-100"}`})]},h.id)})}),e.jsxs("div",{className:"p-2 bg-white/5 border-t border-white/5 flex justify-between px-4 text-[10px] text-white/30",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"EmprataOS"})," v2.0"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{children:" Navegar"}),e.jsx("span",{children:" Selecionar"}),e.jsx("span",{children:"ESC Fechar"})]})]})]})})})}const Wd=6048e5,Yx=864e5,xc=Symbol.for("constructDateFrom");function hs(a,s){return typeof a=="function"?a(s):a&&typeof a=="object"&&xc in a?a[xc](s):a instanceof Date?new a.constructor(s):new Date(s)}function zt(a,s){return hs(s||a,a)}function Qx(a,s,i){const r=zt(a,i?.in);return isNaN(s)?hs(a,NaN):(r.setDate(r.getDate()+s),r)}let Xx={};function wn(){return Xx}function Qi(a,s){const i=wn(),r=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=zt(a,s?.in),c=o.getDay(),d=(c<r?7:0)+c-r;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function ln(a,s){return Qi(a,{...s,weekStartsOn:1})}function Zd(a,s){const i=zt(a,s?.in),r=i.getFullYear(),o=hs(i,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const c=ln(o),d=hs(i,0);d.setFullYear(r,0,4),d.setHours(0,0,0,0);const f=ln(d);return i.getTime()>=c.getTime()?r+1:i.getTime()>=f.getTime()?r:r-1}function gc(a){const s=zt(a),i=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return i.setUTCFullYear(s.getFullYear()),+a-+i}function Kd(a,...s){const i=hs.bind(null,s.find(r=>typeof r=="object"));return s.map(i)}function Gs(a,s){const i=zt(a,s?.in);return i.setHours(0,0,0,0),i}function Jx(a,s,i){const[r,o]=Kd(i?.in,a,s),c=Gs(r),d=Gs(o),f=+c-gc(c),m=+d-gc(d);return Math.round((f-m)/Yx)}function eg(a,s){const i=Zd(a,s),r=hs(a,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),ln(r)}function vc(a,s,i){const[r,o]=Kd(i?.in,a,s);return+Gs(r)==+Gs(o)}function tg(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function sg(a){return!(!tg(a)&&typeof a!="number"||isNaN(+zt(a)))}function ig(a,s){const i=zt(a,s?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const ag={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ng=(a,s,i)=>{let r;const o=ag[a];return typeof o=="string"?r=o:s===1?r=o.one:r=o.other.replace("{{count}}",s.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};function lr(a){return(s={})=>{const i=s.width?String(s.width):a.defaultWidth;return a.formats[i]||a.formats[a.defaultWidth]}}const rg={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},og={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lg={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cg={date:lr({formats:rg,defaultWidth:"full"}),time:lr({formats:og,defaultWidth:"full"}),dateTime:lr({formats:lg,defaultWidth:"full"})},dg={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ug=(a,s,i,r)=>dg[a];function Ui(a){return(s,i)=>{const r=i?.context?String(i.context):"standalone";let o;if(r==="formatting"&&a.formattingValues){const d=a.defaultFormattingWidth||a.defaultWidth,f=i?.width?String(i.width):d;o=a.formattingValues[f]||a.formattingValues[d]}else{const d=a.defaultWidth,f=i?.width?String(i.width):a.defaultWidth;o=a.values[f]||a.values[d]}const c=a.argumentCallback?a.argumentCallback(s):s;return o[c]}}const hg={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mg={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pg={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fg={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xg={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gg={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vg=(a,s)=>{const i=Number(a),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},bg={ordinalNumber:vg,era:Ui({values:hg,defaultWidth:"wide"}),quarter:Ui({values:mg,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Ui({values:pg,defaultWidth:"wide"}),day:Ui({values:fg,defaultWidth:"wide"}),dayPeriod:Ui({values:xg,defaultWidth:"wide",formattingValues:gg,defaultFormattingWidth:"wide"})};function Vi(a){return(s,i={})=>{const r=i.width,o=r&&a.matchPatterns[r]||a.matchPatterns[a.defaultMatchWidth],c=s.match(o);if(!c)return null;const d=c[0],f=r&&a.parsePatterns[r]||a.parsePatterns[a.defaultParseWidth],m=Array.isArray(f)?yg(f,h=>h.test(d)):wg(f,h=>h.test(d));let u;u=a.valueCallback?a.valueCallback(m):m,u=i.valueCallback?i.valueCallback(u):u;const x=s.slice(d.length);return{value:u,rest:x}}}function wg(a,s){for(const i in a)if(Object.prototype.hasOwnProperty.call(a,i)&&s(a[i]))return i}function yg(a,s){for(let i=0;i<a.length;i++)if(s(a[i]))return i}function _g(a){return(s,i={})=>{const r=s.match(a.matchPattern);if(!r)return null;const o=r[0],c=s.match(a.parsePattern);if(!c)return null;let d=a.valueCallback?a.valueCallback(c[0]):c[0];d=i.valueCallback?i.valueCallback(d):d;const f=s.slice(o.length);return{value:d,rest:f}}}const jg=/^(\d+)(th|st|nd|rd)?/i,Ng=/\d+/i,kg={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cg={any:[/^b/i,/^(a|c)/i]},Eg={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sg={any:[/1/i,/2/i,/3/i,/4/i]},Ag={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tg={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pg={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ig={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mg={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rg={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lg={ordinalNumber:_g({matchPattern:jg,parsePattern:Ng,valueCallback:a=>parseInt(a,10)}),era:Vi({matchPatterns:kg,defaultMatchWidth:"wide",parsePatterns:Cg,defaultParseWidth:"any"}),quarter:Vi({matchPatterns:Eg,defaultMatchWidth:"wide",parsePatterns:Sg,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Vi({matchPatterns:Ag,defaultMatchWidth:"wide",parsePatterns:Tg,defaultParseWidth:"any"}),day:Vi({matchPatterns:Pg,defaultMatchWidth:"wide",parsePatterns:Ig,defaultParseWidth:"any"}),dayPeriod:Vi({matchPatterns:Mg,defaultMatchWidth:"any",parsePatterns:Rg,defaultParseWidth:"any"})},Og={code:"en-US",formatDistance:ng,formatLong:cg,formatRelative:ug,localize:bg,match:Lg,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Dg(a,s){const i=zt(a,s?.in);return Jx(i,ig(i))+1}function Bg(a,s){const i=zt(a,s?.in),r=+ln(i)-+eg(i);return Math.round(r/Wd)+1}function Yd(a,s){const i=zt(a,s?.in),r=i.getFullYear(),o=wn(),c=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,d=hs(s?.in||a,0);d.setFullYear(r+1,0,c),d.setHours(0,0,0,0);const f=Qi(d,s),m=hs(s?.in||a,0);m.setFullYear(r,0,c),m.setHours(0,0,0,0);const u=Qi(m,s);return+i>=+f?r+1:+i>=+u?r:r-1}function zg(a,s){const i=wn(),r=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=Yd(a,s),c=hs(s?.in||a,0);return c.setFullYear(o,0,r),c.setHours(0,0,0,0),Qi(c,s)}function Fg(a,s){const i=zt(a,s?.in),r=+Qi(i,s)-+zg(i,s);return Math.round(r/Wd)+1}function De(a,s){const i=a<0?"-":"",r=Math.abs(a).toString().padStart(s,"0");return i+r}const gs={y(a,s){const i=a.getFullYear(),r=i>0?i:1-i;return De(s==="yy"?r%100:r,s.length)},M(a,s){const i=a.getMonth();return s==="M"?String(i+1):De(i+1,2)},d(a,s){return De(a.getDate(),s.length)},a(a,s){const i=a.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return i==="am"?"a.m.":"p.m."}},h(a,s){return De(a.getHours()%12||12,s.length)},H(a,s){return De(a.getHours(),s.length)},m(a,s){return De(a.getMinutes(),s.length)},s(a,s){return De(a.getSeconds(),s.length)},S(a,s){const i=s.length,r=a.getMilliseconds(),o=Math.trunc(r*Math.pow(10,i-3));return De(o,s.length)}},ui={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bc={G:function(a,s,i){const r=a.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});default:return i.era(r,{width:"wide"})}},y:function(a,s,i){if(s==="yo"){const r=a.getFullYear(),o=r>0?r:1-r;return i.ordinalNumber(o,{unit:"year"})}return gs.y(a,s)},Y:function(a,s,i,r){const o=Yd(a,r),c=o>0?o:1-o;if(s==="YY"){const d=c%100;return De(d,2)}return s==="Yo"?i.ordinalNumber(c,{unit:"year"}):De(c,s.length)},R:function(a,s){const i=Zd(a);return De(i,s.length)},u:function(a,s){const i=a.getFullYear();return De(i,s.length)},Q:function(a,s,i){const r=Math.ceil((a.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return De(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(a,s,i){const r=Math.ceil((a.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return De(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(a,s,i){const r=a.getMonth();switch(s){case"M":case"MM":return gs.M(a,s);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(a,s,i){const r=a.getMonth();switch(s){case"L":return String(r+1);case"LL":return De(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(a,s,i,r){const o=Fg(a,r);return s==="wo"?i.ordinalNumber(o,{unit:"week"}):De(o,s.length)},I:function(a,s,i){const r=Bg(a);return s==="Io"?i.ordinalNumber(r,{unit:"week"}):De(r,s.length)},d:function(a,s,i){return s==="do"?i.ordinalNumber(a.getDate(),{unit:"date"}):gs.d(a,s)},D:function(a,s,i){const r=Dg(a);return s==="Do"?i.ordinalNumber(r,{unit:"dayOfYear"}):De(r,s.length)},E:function(a,s,i){const r=a.getDay();switch(s){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(a,s,i,r){const o=a.getDay(),c=(o-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(c);case"ee":return De(c,2);case"eo":return i.ordinalNumber(c,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(a,s,i,r){const o=a.getDay(),c=(o-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(c);case"cc":return De(c,s.length);case"co":return i.ordinalNumber(c,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(a,s,i){const r=a.getDay(),o=r===0?7:r;switch(s){case"i":return String(o);case"ii":return De(o,s.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(a,s,i){const o=a.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(a,s,i){const r=a.getHours();let o;switch(r===12?o=ui.noon:r===0?o=ui.midnight:o=r/12>=1?"pm":"am",s){case"b":case"bb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(a,s,i){const r=a.getHours();let o;switch(r>=17?o=ui.evening:r>=12?o=ui.afternoon:r>=4?o=ui.morning:o=ui.night,s){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(a,s,i){if(s==="ho"){let r=a.getHours()%12;return r===0&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return gs.h(a,s)},H:function(a,s,i){return s==="Ho"?i.ordinalNumber(a.getHours(),{unit:"hour"}):gs.H(a,s)},K:function(a,s,i){const r=a.getHours()%12;return s==="Ko"?i.ordinalNumber(r,{unit:"hour"}):De(r,s.length)},k:function(a,s,i){let r=a.getHours();return r===0&&(r=24),s==="ko"?i.ordinalNumber(r,{unit:"hour"}):De(r,s.length)},m:function(a,s,i){return s==="mo"?i.ordinalNumber(a.getMinutes(),{unit:"minute"}):gs.m(a,s)},s:function(a,s,i){return s==="so"?i.ordinalNumber(a.getSeconds(),{unit:"second"}):gs.s(a,s)},S:function(a,s){return gs.S(a,s)},X:function(a,s,i){const r=a.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return yc(r);case"XXXX":case"XX":return Ms(r);default:return Ms(r,":")}},x:function(a,s,i){const r=a.getTimezoneOffset();switch(s){case"x":return yc(r);case"xxxx":case"xx":return Ms(r);default:return Ms(r,":")}},O:function(a,s,i){const r=a.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+wc(r,":");default:return"GMT"+Ms(r,":")}},z:function(a,s,i){const r=a.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+wc(r,":");default:return"GMT"+Ms(r,":")}},t:function(a,s,i){const r=Math.trunc(+a/1e3);return De(r,s.length)},T:function(a,s,i){return De(+a,s.length)}};function wc(a,s=""){const i=a>0?"-":"+",r=Math.abs(a),o=Math.trunc(r/60),c=r%60;return c===0?i+String(o):i+String(o)+s+De(c,2)}function yc(a,s){return a%60===0?(a>0?"-":"+")+De(Math.abs(a)/60,2):Ms(a,s)}function Ms(a,s=""){const i=a>0?"-":"+",r=Math.abs(a),o=De(Math.trunc(r/60),2),c=De(r%60,2);return i+o+s+c}const _c=(a,s)=>{switch(a){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});default:return s.date({width:"full"})}},Qd=(a,s)=>{switch(a){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});default:return s.time({width:"full"})}},Ug=(a,s)=>{const i=a.match(/(P+)(p+)?/)||[],r=i[1],o=i[2];if(!o)return _c(a,s);let c;switch(r){case"P":c=s.dateTime({width:"short"});break;case"PP":c=s.dateTime({width:"medium"});break;case"PPP":c=s.dateTime({width:"long"});break;default:c=s.dateTime({width:"full"});break}return c.replace("{{date}}",_c(r,s)).replace("{{time}}",Qd(o,s))},Vg={p:Qd,P:Ug},Hg=/^D+$/,qg=/^Y+$/,$g=["D","DD","YY","YYYY"];function Gg(a){return Hg.test(a)}function Wg(a){return qg.test(a)}function Zg(a,s,i){const r=Kg(a,s,i);if(console.warn(r),$g.includes(a))throw new RangeError(r)}function Kg(a,s,i){const r=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${s}\`) for formatting ${r} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Yg=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qg=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xg=/^'([^]*?)'?$/,Jg=/''/g,e0=/[a-zA-Z]/;function t0(a,s,i){const r=wn(),o=r.locale??Og,c=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,d=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,f=zt(a,i?.in);if(!sg(f))throw new RangeError("Invalid time value");let m=s.match(Qg).map(x=>{const h=x[0];if(h==="p"||h==="P"){const g=Vg[h];return g(x,o.formatLong)}return x}).join("").match(Yg).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const h=x[0];if(h==="'")return{isToken:!1,value:s0(x)};if(bc[h])return{isToken:!0,value:x};if(h.match(e0))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:x}});o.localize.preprocessor&&(m=o.localize.preprocessor(f,m));const u={firstWeekContainsDate:c,weekStartsOn:d,locale:o};return m.map(x=>{if(!x.isToken)return x.value;const h=x.value;(Wg(h)||Gg(h))&&Zg(h,s,String(a));const g=bc[h[0]];return g(f,h,o.localize,u)}).join("")}function s0(a){const s=a.match(Xg);return s?s[1].replace(Jg,"'"):a}function i0(a,s,i){return Qx(a,-1,i)}const a0="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3";function n0(){const[a,s]=k.useState({totalSales:0,totalOrders:0,activeCustomers:0,chartData:[]}),i=k.useRef(new Audio(a0)),r=k.useRef(!0);return k.useEffect(()=>{const o=He.currentUser;if(!o)return;const c=Gs(new Date),d=We(ze(le,"orders"),Ie("restaurantId","==",o.uid),Ie("createdAt",">=",ds.fromDate(c)),Ks("createdAt","asc")),f=Et(d,m=>{let u=0;const x=new Set,h={};m.docs.forEach(b=>{const w=b.data();if(w.status!=="cancelled"&&w.status!=="CANCELLED"){u+=w.total||w.financials?.total||0,x.add(w.customer?.phone||w.customer?.id);const j=w.createdAt?.toDate?w.createdAt.toDate():new Date,C=t0(j,"HH:00");h[C]=(h[C]||0)+(w.total||w.financials?.total||0)}}),!r.current&&m.docChanges().some(b=>b.type==="added")&&i.current.play().catch(b=>console.log("Audio blocked",b));const g=Object.keys(h).map(b=>({date:b,value:h[b]}));s({totalSales:u,totalOrders:m.size,activeCustomers:x.size,chartData:g}),r.current=!1});return()=>f()},[]),a}function Rt(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}function r0(){const{user:a}=Ze(),{canAccess:s}=Gd(),i=gt(),{totalSales:r,totalOrders:o}=n0(),c=o>0?r/o:0,[d,f]=k.useState(!1);k.useEffect(()=>{const u=x=>{(x.metaKey||x.ctrlKey)&&x.key==="k"&&(x.preventDefault(),f(!0))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[]);const m=[{title:"Operao em Tempo Real",apps:[{title:"Logstica",desc:"Gesto de Motoboys",icon:es,path:"/dispatch",color:"text-green-400",bg:"bg-green-500/10",feature:"dispatch_console"},{title:"Cozinha (KDS)",desc:"Pedidos para Preparo",icon:ot,path:"/kitchen-display",color:"text-orange-400",bg:"bg-orange-500/10",feature:"kds_kitchen"},{title:"Terminal PDV",desc:"Caixa Unificado",icon:Uh,path:"/pos",color:"text-cyan-400",bg:"bg-cyan-500/10",feature:"pos_terminal"}]},{title:"Gesto & Estratgia",apps:[{title:"Cardpio",desc:"Editar Produtos",icon:Fs,path:"/menu-builder",color:"text-blue-400",bg:"bg-blue-500/10",feature:"menu_builder"},{title:"Financeiro",desc:"Fluxo de Caixa",icon:Us,path:"/finance",color:"text-yellow-400",bg:"bg-yellow-500/10",feature:"financial_advanced"},{title:"Equipe",desc:"Acessos e PINs",icon:qt,path:"/staff",color:"text-purple-400",bg:"bg-purple-500/10",feature:"staff_management"},{title:"Vitrine",desc:"Personalizar Loja",icon:Gr,path:"/store-settings",color:"text-slate-400",bg:"bg-slate-500/10",feature:"basic_access"}]},{title:"Inteligncia Artificial",apps:[{title:"EmprataBrain",desc:"Anlise de Negcio",icon:Vs,path:"/intelligence",color:"text-pink-400",bg:"bg-pink-500/10",border:"border-pink-500/30",feature:"emprata_brain"}]},{title:"Apps & Ferramentas",apps:[{title:"App do Dono",desc:"Controle Mobile",icon:_i,path:"/owner",color:"text-violet-400",bg:"bg-violet-500/10",feature:"basic_access"},{title:"QR Codes",desc:"Mesas e Links",icon:mn,path:"/qr-print",color:"text-emerald-400",bg:"bg-emerald-500/10",feature:"qr_codes"}]}];return e.jsxs("div",{className:"space-y-10 pb-20",children:[e.jsx(Kx,{isOpen:d,onClose:()=>f(!1)}),e.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-br from-[#121212] to-black border border-white/10 p-8 md:p-12 shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-primary/10 blur-[100px] rounded-full pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-60 h-60 bg-purple-500/10 blur-[80px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter text-white mb-2",children:["Painel de ",e.jsx("span",{className:"text-primary",children:"Controle"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-white/60",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/5",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Sistema Online"})]}),e.jsxs("span",{className:"text-sm",children:["Ol, ",a?.displayName?.split(" ")[0]||"Chef"]})]})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-4 rounded-2xl border border-white/10 min-w-[130px]",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/40 mb-1",children:"Vendas Hoje"}),e.jsx("p",{className:"text-2xl font-black text-white",children:Rt(r)})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-4 rounded-2xl border border-white/10 min-w-[100px]",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/40 mb-1",children:"Pedidos"}),e.jsx("p",{className:"text-2xl font-black text-white",children:o})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md p-4 rounded-2xl border border-white/10 min-w-[130px]",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-white/40 mb-1",children:"Ticket Mdio"}),e.jsx("p",{className:"text-2xl font-black text-white",children:Rt(c)})]})]})]}),e.jsx("div",{className:"mt-8 relative max-w-2xl",children:e.jsxs("button",{onClick:()=>f(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl p-4 flex items-center justify-between text-white/40 group transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ts,{size:20,className:"group-hover:text-white transition-colors"}),e.jsx("span",{children:"Buscar ferramenta, pedido ou configurao..."})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("kbd",{className:"bg-black/40 px-2 py-1 rounded text-xs font-bold border border-white/10",children:""}),e.jsx("kbd",{className:"bg-black/40 px-2 py-1 rounded text-xs font-bold border border-white/10",children:"K"})]})]})})]}),e.jsx("div",{className:"space-y-8",children:m.map((u,x)=>e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-white/20 mb-4 ml-2 flex items-center gap-2",children:u.title}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.apps.map(h=>{const g=s(h.feature);return e.jsxs(Q.button,{onClick:()=>i(g?h.path:"/subscription"),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`p-6 rounded-3xl border transition-all text-left group relative overflow-hidden ${g?`bg-[#121212] ${h.border||"border-white/5"} hover:border-white/20`:"bg-[#0a0a0a] border-white/5 opacity-80"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 relative z-10",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${h.bg} ${h.color} text-xl shadow-lg group-hover:scale-110 transition-transform`,children:e.jsx(h.icon,{size:28})}),g?e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/10 p-2 rounded-full",children:e.jsx(Bt,{size:14,className:"text-white"})}):e.jsx("div",{className:"bg-white/10 p-2 rounded-full backdrop-blur-md",children:e.jsx(Dt,{size:14,className:"text-white/60"})})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h4",{className:"text-xl font-bold text-white mb-1",children:h.title}),e.jsx("p",{className:"text-sm text-white/40 font-medium",children:h.desc})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/0 to-white/[0.02] opacity-0 group-hover:opacity-100 transition-opacity"}),!g&&e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20",children:e.jsxs("span",{className:"bg-white text-black px-4 py-2 rounded-xl text-xs font-black flex items-center gap-2 transform translate-y-4 group-hover:translate-y-0 transition-transform",children:[e.jsx(Bt,{size:12,className:"fill-black"})," DESBLOQUEAR"]})})]},h.path)})})]},x))}),e.jsx("div",{className:"text-center text-white/20 text-xs py-4",children:e.jsxs("p",{children:["EmprataOS v2.0  Pressione ",e.jsx("kbd",{className:"bg-white/5 px-1.5 py-0.5 rounded mx-1",children:"K"})," para buscar"]})})]})}function Xd(a,s){const i=k.useRef(s);k.useEffect(function(){s!==i.current&&a.attributionControl!=null&&(i.current!=null&&a.attributionControl.removeAttribution(i.current),s!=null&&a.attributionControl.addAttribution(s)),i.current=s},[a,s])}const o0=1;function l0(a){return Object.freeze({__version:o0,map:a})}function c0(a,s){return Object.freeze({...a,...s})}const Jd=k.createContext(null),eu=Jd.Provider;function ho(){const a=k.useContext(Jd);if(a==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return a}function d0(a){function s(i,r){const{instance:o,context:c}=a(i).current;return k.useImperativeHandle(r,()=>o),i.children==null?null:K.createElement(eu,{value:c},i.children)}return k.forwardRef(s)}function u0(a){function s(i,r){const[o,c]=k.useState(!1),{instance:d}=a(i,c).current;k.useImperativeHandle(r,()=>d),k.useEffect(function(){o&&d.update()},[d,o,i.children]);const f=d._contentNode;return f?xm.createPortal(i.children,f):null}return k.forwardRef(s)}function h0(a){function s(i,r){const{instance:o}=a(i).current;return k.useImperativeHandle(r,()=>o),null}return k.forwardRef(s)}function tu(a,s){const i=k.useRef();k.useEffect(function(){return s!=null&&a.instance.on(s),i.current=s,function(){i.current!=null&&a.instance.off(i.current),i.current=null}},[a,s])}function mo(a,s){const i=a.pane??s.pane;return i?{...a,pane:i}:a}function m0(a,s){return function(r,o){const c=ho(),d=a(mo(r,c),c);return Xd(c.map,r.attribution),tu(d.current,r.eventHandlers),s(d.current,c,r,o),d}}var Hi={exports:{}};var p0=Hi.exports,jc;function f0(){return jc||(jc=1,(function(a,s){(function(i,r){r(s)})(p0,(function(i){var r="1.9.4";function o(t){var n,l,p,v;for(l=1,p=arguments.length;l<p;l++){v=arguments[l];for(n in v)t[n]=v[n]}return t}var c=Object.create||(function(){function t(){}return function(n){return t.prototype=n,new t}})();function d(t,n){var l=Array.prototype.slice;if(t.bind)return t.bind.apply(t,l.call(arguments,1));var p=l.call(arguments,2);return function(){return t.apply(n,p.length?p.concat(l.call(arguments)):arguments)}}var f=0;function m(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function u(t,n,l){var p,v,y,T;return T=function(){p=!1,v&&(y.apply(l,v),v=!1)},y=function(){p?v=arguments:(t.apply(l,arguments),setTimeout(T,n),p=!0)},y}function x(t,n,l){var p=n[1],v=n[0],y=p-v;return t===p&&l?t:((t-v)%y+y)%y+v}function h(){return!1}function g(t,n){if(n===!1)return t;var l=Math.pow(10,n===void 0?6:n);return Math.round(t*l)/l}function b(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function w(t){return b(t).split(/\s+/)}function j(t,n){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?c(t.options):{});for(var l in n)t.options[l]=n[l];return t.options}function C(t,n,l){var p=[];for(var v in t)p.push(encodeURIComponent(l?v.toUpperCase():v)+"="+encodeURIComponent(t[v]));return(!n||n.indexOf("?")===-1?"?":"&")+p.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function E(t,n){return t.replace(A,function(l,p){var v=n[p];if(v===void 0)throw new Error("No value provided for variable "+l);return typeof v=="function"&&(v=v(n)),v})}var _=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function I(t,n){for(var l=0;l<t.length;l++)if(t[l]===n)return l;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var $=0;function W(t){var n=+new Date,l=Math.max(0,16-(n-$));return $=n+l,window.setTimeout(t,l)}var ae=window.requestAnimationFrame||R("RequestAnimationFrame")||W,M=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function U(t,n,l){if(l&&ae===W)t.call(n);else return ae.call(window,d(t,n))}function D(t){t&&M.call(window,t)}var q={__proto__:null,extend:o,create:c,bind:d,get lastId(){return f},stamp:m,throttle:u,wrapNum:x,falseFn:h,formatNum:g,trim:b,splitWords:w,setOptions:j,getParamString:C,template:E,isArray:_,indexOf:I,emptyImageUrl:S,requestFn:ae,cancelFn:M,requestAnimFrame:U,cancelAnimFrame:D};function J(){}J.extend=function(t){var n=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=n.__super__=this.prototype,p=c(l);p.constructor=n,n.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(n[v]=this[v]);return t.statics&&o(n,t.statics),t.includes&&(se(t.includes),o.apply(null,[p].concat(t.includes))),o(p,t),delete p.statics,delete p.includes,p.options&&(p.options=l.options?c(l.options):{},o(p.options,t.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,T=p._initHooks.length;y<T;y++)p._initHooks[y].call(this)}},n},J.include=function(t){var n=this.prototype.options;return o(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},J.mergeOptions=function(t){return o(this.prototype.options,t),this},J.addInitHook=function(t){var n=Array.prototype.slice.call(arguments,1),l=typeof t=="function"?t:function(){this[t].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function se(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=_(t)?t:[t];for(var n=0;n<t.length;n++)t[n]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var te={on:function(t,n,l){if(typeof t=="object")for(var p in t)this._on(p,t[p],n);else{t=w(t);for(var v=0,y=t.length;v<y;v++)this._on(t[v],n,l)}return this},off:function(t,n,l){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var p in t)this._off(p,t[p],n);else{t=w(t);for(var v=arguments.length===1,y=0,T=t.length;y<T;y++)v?this._off(t[y]):this._off(t[y],n,l)}return this},_on:function(t,n,l,p){if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}if(this._listens(t,n,l)===!1){l===this&&(l=void 0);var v={fn:n,ctx:l};p&&(v.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(v)}},_off:function(t,n,l){var p,v,y;if(this._events&&(p=this._events[t],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,y=p.length;v<y;v++)p[v].fn=h;delete this._events[t];return}if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}var T=this._listens(t,n,l);if(T!==!1){var H=p[T];this._firingCount&&(H.fn=h,this._events[t]=p=p.slice()),p.splice(T,1)}}},fire:function(t,n,l){if(!this.listens(t,l))return this;var p=o({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var v=this._events[t];if(v){this._firingCount=this._firingCount+1||1;for(var y=0,T=v.length;y<T;y++){var H=v[y],G=H.fn;H.once&&this.off(t,G,H.ctx),G.call(H.ctx||this,p)}this._firingCount--}}return l&&this._propagateEvent(p),this},listens:function(t,n,l,p){typeof t!="string"&&console.warn('"string" type argument expected');var v=n;typeof n!="function"&&(p=!!n,v=void 0,l=void 0);var y=this._events&&this._events[t];if(y&&y.length&&this._listens(t,v,l)!==!1)return!0;if(p){for(var T in this._eventParents)if(this._eventParents[T].listens(t,n,l,p))return!0}return!1},_listens:function(t,n,l){if(!this._events)return!1;var p=this._events[t]||[];if(!n)return!!p.length;l===this&&(l=void 0);for(var v=0,y=p.length;v<y;v++)if(p[v].fn===n&&p[v].ctx===l)return v;return!1},once:function(t,n,l){if(typeof t=="object")for(var p in t)this._on(p,t[p],n,!0);else{t=w(t);for(var v=0,y=t.length;v<y;v++)this._on(t[v],n,l,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[m(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[m(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};te.addEventListener=te.on,te.removeEventListener=te.clearAllEventListeners=te.off,te.addOneTimeEventListener=te.once,te.fireEvent=te.fire,te.hasEventListeners=te.listens;var ue=J.extend(te);function ne(t,n,l){this.x=l?Math.round(t):t,this.y=l?Math.round(n):n}var Ce=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(t){return this.clone()._add(P(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(P(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new ne(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new ne(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ce(this.x),this.y=Ce(this.y),this},distanceTo:function(t){t=P(t);var n=t.x-this.x,l=t.y-this.y;return Math.sqrt(n*n+l*l)},equals:function(t){return t=P(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=P(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function P(t,n,l){return t instanceof ne?t:_(t)?new ne(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new ne(t.x,t.y):new ne(t,n,l)}function N(t,n){if(t)for(var l=n?[t,n]:t,p=0,v=l.length;p<v;p++)this.extend(l[p])}N.prototype={extend:function(t){var n,l;if(!t)return this;if(t instanceof ne||typeof t[0]=="number"||"x"in t)n=l=P(t);else if(t=F(t),n=t.min,l=t.max,!n||!l)return this;return!this.min&&!this.max?(this.min=n.clone(),this.max=l.clone()):(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(t){return P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return P(this.min.x,this.max.y)},getTopRight:function(){return P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var n,l;return typeof t[0]=="number"||t instanceof ne?t=P(t):t=F(t),t instanceof N?(n=t.min,l=t.max):n=l=t,n.x>=this.min.x&&l.x<=this.max.x&&n.y>=this.min.y&&l.y<=this.max.y},intersects:function(t){t=F(t);var n=this.min,l=this.max,p=t.min,v=t.max,y=v.x>=n.x&&p.x<=l.x,T=v.y>=n.y&&p.y<=l.y;return y&&T},overlaps:function(t){t=F(t);var n=this.min,l=this.max,p=t.min,v=t.max,y=v.x>n.x&&p.x<l.x,T=v.y>n.y&&p.y<l.y;return y&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var n=this.min,l=this.max,p=Math.abs(n.x-l.x)*t,v=Math.abs(n.y-l.y)*t;return F(P(n.x-p,n.y-v),P(l.x+p,l.y+v))},equals:function(t){return t?(t=F(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function F(t,n){return!t||t instanceof N?t:new N(t,n)}function O(t,n){if(t)for(var l=n?[t,n]:t,p=0,v=l.length;p<v;p++)this.extend(l[p])}O.prototype={extend:function(t){var n=this._southWest,l=this._northEast,p,v;if(t instanceof z)p=t,v=t;else if(t instanceof O){if(p=t._southWest,v=t._northEast,!p||!v)return this}else return t?this.extend(V(t)||B(t)):this;return!n&&!l?(this._southWest=new z(p.lat,p.lng),this._northEast=new z(v.lat,v.lng)):(n.lat=Math.min(p.lat,n.lat),n.lng=Math.min(p.lng,n.lng),l.lat=Math.max(v.lat,l.lat),l.lng=Math.max(v.lng,l.lng)),this},pad:function(t){var n=this._southWest,l=this._northEast,p=Math.abs(n.lat-l.lat)*t,v=Math.abs(n.lng-l.lng)*t;return new O(new z(n.lat-p,n.lng-v),new z(l.lat+p,l.lng+v))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof z||"lat"in t?t=V(t):t=B(t);var n=this._southWest,l=this._northEast,p,v;return t instanceof O?(p=t.getSouthWest(),v=t.getNorthEast()):p=v=t,p.lat>=n.lat&&v.lat<=l.lat&&p.lng>=n.lng&&v.lng<=l.lng},intersects:function(t){t=B(t);var n=this._southWest,l=this._northEast,p=t.getSouthWest(),v=t.getNorthEast(),y=v.lat>=n.lat&&p.lat<=l.lat,T=v.lng>=n.lng&&p.lng<=l.lng;return y&&T},overlaps:function(t){t=B(t);var n=this._southWest,l=this._northEast,p=t.getSouthWest(),v=t.getNorthEast(),y=v.lat>n.lat&&p.lat<l.lat,T=v.lng>n.lng&&p.lng<l.lng;return y&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,n){return t?(t=B(t),this._southWest.equals(t.getSouthWest(),n)&&this._northEast.equals(t.getNorthEast(),n)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function B(t,n){return t instanceof O?t:new O(t,n)}function z(t,n,l){if(isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n,l!==void 0&&(this.alt=+l)}z.prototype={equals:function(t,n){if(!t)return!1;t=V(t);var l=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return l<=(n===void 0?1e-9:n)},toString:function(t){return"LatLng("+g(this.lat,t)+", "+g(this.lng,t)+")"},distanceTo:function(t){return Y.distance(this,V(t))},wrap:function(){return Y.wrapLatLng(this)},toBounds:function(t){var n=180*t/40075017,l=n/Math.cos(Math.PI/180*this.lat);return B([this.lat-n,this.lng-l],[this.lat+n,this.lng+l])},clone:function(){return new z(this.lat,this.lng,this.alt)}};function V(t,n,l){return t instanceof z?t:_(t)&&typeof t[0]!="object"?t.length===3?new z(t[0],t[1],t[2]):t.length===2?new z(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new z(t.lat,"lng"in t?t.lng:t.lon,t.alt):n===void 0?null:new z(t,n,l)}var Z={latLngToPoint:function(t,n){var l=this.projection.project(t),p=this.scale(n);return this.transformation._transform(l,p)},pointToLatLng:function(t,n){var l=this.scale(n),p=this.transformation.untransform(t,l);return this.projection.unproject(p)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var n=this.projection.bounds,l=this.scale(t),p=this.transformation.transform(n.min,l),v=this.transformation.transform(n.max,l);return new N(p,v)},infinite:!1,wrapLatLng:function(t){var n=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,l=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,p=t.alt;return new z(l,n,p)},wrapLatLngBounds:function(t){var n=t.getCenter(),l=this.wrapLatLng(n),p=n.lat-l.lat,v=n.lng-l.lng;if(p===0&&v===0)return t;var y=t.getSouthWest(),T=t.getNorthEast(),H=new z(y.lat-p,y.lng-v),G=new z(T.lat-p,T.lng-v);return new O(H,G)}},Y=o({},Z,{wrapLng:[-180,180],R:6371e3,distance:function(t,n){var l=Math.PI/180,p=t.lat*l,v=n.lat*l,y=Math.sin((n.lat-t.lat)*l/2),T=Math.sin((n.lng-t.lng)*l/2),H=y*y+Math.cos(p)*Math.cos(v)*T*T,G=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*G}}),ce=6378137,he={R:ce,MAX_LATITUDE:85.0511287798,project:function(t){var n=Math.PI/180,l=this.MAX_LATITUDE,p=Math.max(Math.min(l,t.lat),-l),v=Math.sin(p*n);return new ne(this.R*t.lng*n,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(t){var n=180/Math.PI;return new z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*n,t.x*n/this.R)},bounds:(function(){var t=ce*Math.PI;return new N([-t,-t],[t,t])})()};function be(t,n,l,p){if(_(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=n,this._c=l,this._d=p}be.prototype={transform:function(t,n){return this._transform(t.clone(),n)},_transform:function(t,n){return n=n||1,t.x=n*(this._a*t.x+this._b),t.y=n*(this._c*t.y+this._d),t},untransform:function(t,n){return n=n||1,new ne((t.x/n-this._b)/this._a,(t.y/n-this._d)/this._c)}};function we(t,n,l,p){return new be(t,n,l,p)}var Oe=o({},Y,{code:"EPSG:3857",projection:he,transformation:(function(){var t=.5/(Math.PI*he.R);return we(t,.5,-t,.5)})()}),ye=o({},Oe,{code:"EPSG:900913"});function Fe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function et(t,n){var l="",p,v,y,T,H,G;for(p=0,y=t.length;p<y;p++){for(H=t[p],v=0,T=H.length;v<T;v++)G=H[v],l+=(v?"L":"M")+G.x+" "+G.y;l+=n?oe.svg?"z":"x":""}return l||"M0 0"}var qe=document.documentElement.style,$e="ActiveXObject"in window,Ye=$e&&!document.addEventListener,ie="msLaunchUri"in navigator&&!("documentMode"in document),pe=kt("webkit"),xe=kt("android"),Ee=kt("android 2")||kt("android 3"),Re=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_t=xe&&kt("Google")&&Re<537&&!("AudioNode"in window),Qe=!!window.opera,St=!ie&&kt("chrome"),ss=kt("gecko")&&!pe&&!Qe&&!$e,ps=!St&&kt("safari"),At=kt("phantom"),is="OTransition"in qe,Wt=navigator.platform.indexOf("Win")===0,Qs=$e&&"transition"in qe,ji="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ee,Ni="MozPerspective"in qe,aa=!window.L_DISABLE_3D&&(Qs||ji||Ni)&&!is&&!At,Es=typeof orientation<"u"||kt("mobile"),ki=Es&&pe,Zt=Es&&ji,na=!window.PointerEvent&&window.MSPointerEvent,ra=!!(window.PointerEvent||na),Ci="ontouchstart"in window||!!window.TouchEvent,oa=!window.L_NO_TOUCH&&(Ci||ra),_e=Es&&Qe,tt=Es&&ss,nt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,pt=(function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",h,n),window.removeEventListener("testPassiveEventSupport",h,n)}catch{}return t})(),Xs=(function(){return!!document.createElement("canvas").getContext})(),Xe=!!(document.createElementNS&&Fe("svg").createSVGRect),vt=!!Xe&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Js=!Xe&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch{return!1}})(),jt=navigator.platform.indexOf("Mac")===0,Nt=navigator.platform.indexOf("Linux")===0;function kt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var oe={ie:$e,ielt9:Ye,edge:ie,webkit:pe,android:xe,android23:Ee,androidStock:_t,opera:Qe,chrome:St,gecko:ss,safari:ps,phantom:At,opera12:is,win:Wt,ie3d:Qs,webkit3d:ji,gecko3d:Ni,any3d:aa,mobile:Es,mobileWebkit:ki,mobileWebkit3d:Zt,msPointer:na,pointer:ra,touch:oa,touchNative:Ci,mobileOpera:_e,mobileGecko:tt,retina:nt,passiveEvents:pt,canvas:Xs,svg:Xe,vml:Js,inlineSvg:vt,mac:jt,linux:Nt},Nn=oe.msPointer?"MSPointerDown":"pointerdown",bo=oe.msPointer?"MSPointerMove":"pointermove",wo=oe.msPointer?"MSPointerUp":"pointerup",yo=oe.msPointer?"MSPointerCancel":"pointercancel",kn={touchstart:Nn,touchmove:bo,touchend:wo,touchcancel:yo},_o={touchstart:Lu,touchmove:la,touchend:la,touchcancel:la},ei={},jo=!1;function Tu(t,n,l){return n==="touchstart"&&Ru(),_o[n]?(l=_o[n].bind(this,l),t.addEventListener(kn[n],l,!1),l):(console.warn("wrong event specified:",n),h)}function Pu(t,n,l){if(!kn[n]){console.warn("wrong event specified:",n);return}t.removeEventListener(kn[n],l,!1)}function Iu(t){ei[t.pointerId]=t}function Mu(t){ei[t.pointerId]&&(ei[t.pointerId]=t)}function No(t){delete ei[t.pointerId]}function Ru(){jo||(document.addEventListener(Nn,Iu,!0),document.addEventListener(bo,Mu,!0),document.addEventListener(wo,No,!0),document.addEventListener(yo,No,!0),jo=!0)}function la(t,n){if(n.pointerType!==(n.MSPOINTER_TYPE_MOUSE||"mouse")){n.touches=[];for(var l in ei)n.touches.push(ei[l]);n.changedTouches=[n],t(n)}}function Lu(t,n){n.MSPOINTER_TYPE_TOUCH&&n.pointerType===n.MSPOINTER_TYPE_TOUCH&&lt(n),la(t,n)}function Ou(t){var n={},l,p;for(p in t)l=t[p],n[p]=l&&l.bind?l.bind(t):l;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}var Du=200;function Bu(t,n){t.addEventListener("dblclick",n);var l=0,p;function v(y){if(y.detail!==1){p=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var T=Ao(y);if(!(T.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!T.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var H=Date.now();H-l<=Du?(p++,p===2&&n(Ou(y))):p=1,l=H}}}return t.addEventListener("click",v),{dblclick:n,simDblclick:v}}function zu(t,n){t.removeEventListener("dblclick",n.dblclick),t.removeEventListener("click",n.simDblclick)}var Cn=ua(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ei=ua(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ko=Ei==="webkitTransition"||Ei==="OTransition"?Ei+"End":"transitionend";function Co(t){return typeof t=="string"?document.getElementById(t):t}function Si(t,n){var l=t.style[n]||t.currentStyle&&t.currentStyle[n];if((!l||l==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(t,null);l=p?p[n]:null}return l==="auto"?null:l}function Le(t,n,l){var p=document.createElement(t);return p.className=n||"",l&&l.appendChild(p),p}function Ge(t){var n=t.parentNode;n&&n.removeChild(t)}function ca(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ti(t){var n=t.parentNode;n&&n.lastChild!==t&&n.appendChild(t)}function si(t){var n=t.parentNode;n&&n.firstChild!==t&&n.insertBefore(t,n.firstChild)}function En(t,n){if(t.classList!==void 0)return t.classList.contains(n);var l=da(t);return l.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(l)}function Ne(t,n){if(t.classList!==void 0)for(var l=w(n),p=0,v=l.length;p<v;p++)t.classList.add(l[p]);else if(!En(t,n)){var y=da(t);Sn(t,(y?y+" ":"")+n)}}function Je(t,n){t.classList!==void 0?t.classList.remove(n):Sn(t,b((" "+da(t)+" ").replace(" "+n+" "," ")))}function Sn(t,n){t.className.baseVal===void 0?t.className=n:t.className.baseVal=n}function da(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Tt(t,n){"opacity"in t.style?t.style.opacity=n:"filter"in t.style&&Fu(t,n)}function Fu(t,n){var l=!1,p="DXImageTransform.Microsoft.Alpha";try{l=t.filters.item(p)}catch{if(n===1)return}n=Math.round(n*100),l?(l.Enabled=n!==100,l.Opacity=n):t.style.filter+=" progid:"+p+"(opacity="+n+")"}function ua(t){for(var n=document.documentElement.style,l=0;l<t.length;l++)if(t[l]in n)return t[l];return!1}function Ss(t,n,l){var p=n||new ne(0,0);t.style[Cn]=(oe.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(l?" scale("+l+")":"")}function st(t,n){t._leaflet_pos=n,oe.any3d?Ss(t,n):(t.style.left=n.x+"px",t.style.top=n.y+"px")}function As(t){return t._leaflet_pos||new ne(0,0)}var Ai,Ti,An;if("onselectstart"in document)Ai=function(){je(window,"selectstart",lt)},Ti=function(){Ue(window,"selectstart",lt)};else{var Pi=ua(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ai=function(){if(Pi){var t=document.documentElement.style;An=t[Pi],t[Pi]="none"}},Ti=function(){Pi&&(document.documentElement.style[Pi]=An,An=void 0)}}function Tn(){je(window,"dragstart",lt)}function Pn(){Ue(window,"dragstart",lt)}var ha,In;function Mn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ma(),ha=t,In=t.style.outlineStyle,t.style.outlineStyle="none",je(window,"keydown",ma))}function ma(){ha&&(ha.style.outlineStyle=In,ha=void 0,In=void 0,Ue(window,"keydown",ma))}function Eo(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Rn(t){var n=t.getBoundingClientRect();return{x:n.width/t.offsetWidth||1,y:n.height/t.offsetHeight||1,boundingClientRect:n}}var Uu={__proto__:null,TRANSFORM:Cn,TRANSITION:Ei,TRANSITION_END:ko,get:Co,getStyle:Si,create:Le,remove:Ge,empty:ca,toFront:ti,toBack:si,hasClass:En,addClass:Ne,removeClass:Je,setClass:Sn,getClass:da,setOpacity:Tt,testProp:ua,setTransform:Ss,setPosition:st,getPosition:As,get disableTextSelection(){return Ai},get enableTextSelection(){return Ti},disableImageDrag:Tn,enableImageDrag:Pn,preventOutline:Mn,restoreOutline:ma,getSizedParentNode:Eo,getScale:Rn};function je(t,n,l,p){if(n&&typeof n=="object")for(var v in n)On(t,v,n[v],l);else{n=w(n);for(var y=0,T=n.length;y<T;y++)On(t,n[y],l,p)}return this}var Kt="_leaflet_events";function Ue(t,n,l,p){if(arguments.length===1)So(t),delete t[Kt];else if(n&&typeof n=="object")for(var v in n)Dn(t,v,n[v],l);else if(n=w(n),arguments.length===2)So(t,function(H){return I(n,H)!==-1});else for(var y=0,T=n.length;y<T;y++)Dn(t,n[y],l,p);return this}function So(t,n){for(var l in t[Kt]){var p=l.split(/\d/)[0];(!n||n(p))&&Dn(t,p,null,null,l)}}var Ln={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function On(t,n,l,p){var v=n+m(l)+(p?"_"+m(p):"");if(t[Kt]&&t[Kt][v])return this;var y=function(H){return l.call(p||t,H||window.event)},T=y;!oe.touchNative&&oe.pointer&&n.indexOf("touch")===0?y=Tu(t,n,y):oe.touch&&n==="dblclick"?y=Bu(t,y):"addEventListener"in t?n==="touchstart"||n==="touchmove"||n==="wheel"||n==="mousewheel"?t.addEventListener(Ln[n]||n,y,oe.passiveEvents?{passive:!1}:!1):n==="mouseenter"||n==="mouseleave"?(y=function(H){H=H||window.event,zn(t,H)&&T(H)},t.addEventListener(Ln[n],y,!1)):t.addEventListener(n,T,!1):t.attachEvent("on"+n,y),t[Kt]=t[Kt]||{},t[Kt][v]=y}function Dn(t,n,l,p,v){v=v||n+m(l)+(p?"_"+m(p):"");var y=t[Kt]&&t[Kt][v];if(!y)return this;!oe.touchNative&&oe.pointer&&n.indexOf("touch")===0?Pu(t,n,y):oe.touch&&n==="dblclick"?zu(t,y):"removeEventListener"in t?t.removeEventListener(Ln[n]||n,y,!1):t.detachEvent("on"+n,y),t[Kt][v]=null}function Ts(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Bn(t){return On(t,"wheel",Ts),this}function Ii(t){return je(t,"mousedown touchstart dblclick contextmenu",Ts),t._leaflet_disable_click=!0,this}function lt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ps(t){return lt(t),Ts(t),this}function Ao(t){if(t.composedPath)return t.composedPath();for(var n=[],l=t.target;l;)n.push(l),l=l.parentNode;return n}function To(t,n){if(!n)return new ne(t.clientX,t.clientY);var l=Rn(n),p=l.boundingClientRect;return new ne((t.clientX-p.left)/l.x-n.clientLeft,(t.clientY-p.top)/l.y-n.clientTop)}var Vu=oe.linux&&oe.chrome?window.devicePixelRatio:oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Po(t){return oe.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Vu:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function zn(t,n){var l=n.relatedTarget;if(!l)return!0;try{for(;l&&l!==t;)l=l.parentNode}catch{return!1}return l!==t}var Hu={__proto__:null,on:je,off:Ue,stopPropagation:Ts,disableScrollPropagation:Bn,disableClickPropagation:Ii,preventDefault:lt,stop:Ps,getPropagationPath:Ao,getMousePosition:To,getWheelDelta:Po,isExternalTarget:zn,addListener:je,removeListener:Ue},Io=ue.extend({run:function(t,n,l,p){this.stop(),this._el=t,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=As(t),this._offset=n.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(t){var n=+new Date-this._startTime,l=this._duration*1e3;n<l?this._runFrame(this._easeOut(n/l),t):(this._runFrame(1),this._complete())},_runFrame:function(t,n){var l=this._startPos.add(this._offset.multiplyBy(t));n&&l._round(),st(this._el,l),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Pe=ue.extend({options:{crs:Oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,n){n=j(this,n),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),n.maxBounds&&this.setMaxBounds(n.maxBounds),n.zoom!==void 0&&(this._zoom=this._limitZoom(n.zoom)),n.center&&n.zoom!==void 0&&this.setView(V(n.center),n.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ei&&oe.any3d&&!oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),je(this._proxy,ko,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,l){if(n=n===void 0?this._zoom:this._limitZoom(n),t=this._limitCenter(V(t),n,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var p=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,l.zoom):this._tryAnimatedPan(t,l.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(t,n,l.pan&&l.pan.noMoveStart),this},setZoom:function(t,n){return this._loaded?this.setView(this.getCenter(),t,{zoom:n}):(this._zoom=t,this)},zoomIn:function(t,n){return t=t||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,n)},zoomOut:function(t,n){return t=t||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,n)},setZoomAround:function(t,n,l){var p=this.getZoomScale(n),v=this.getSize().divideBy(2),y=t instanceof ne?t:this.latLngToContainerPoint(t),T=y.subtract(v).multiplyBy(1-1/p),H=this.containerPointToLatLng(v.add(T));return this.setView(H,n,{zoom:l})},_getBoundsCenterZoom:function(t,n){n=n||{},t=t.getBounds?t.getBounds():B(t);var l=P(n.paddingTopLeft||n.padding||[0,0]),p=P(n.paddingBottomRight||n.padding||[0,0]),v=this.getBoundsZoom(t,!1,l.add(p));if(v=typeof n.maxZoom=="number"?Math.min(n.maxZoom,v):v,v===1/0)return{center:t.getCenter(),zoom:v};var y=p.subtract(l).divideBy(2),T=this.project(t.getSouthWest(),v),H=this.project(t.getNorthEast(),v),G=this.unproject(T.add(H).divideBy(2).add(y),v);return{center:G,zoom:v}},fitBounds:function(t,n){if(t=B(t),!t.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(t,n);return this.setView(l.center,l.zoom,n)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,n){return this.setView(t,this._zoom,{pan:n})},panBy:function(t,n){if(t=P(t).round(),n=n||{},!t.x&&!t.y)return this.fire("moveend");if(n.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Io,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),n.animate!==!1){Ne(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,l,n.duration||.25,n.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,n,l){if(l=l||{},l.animate===!1||!oe.any3d)return this.setView(t,n,l);this._stop();var p=this.project(this.getCenter()),v=this.project(t),y=this.getSize(),T=this._zoom;t=V(t),n=n===void 0?T:n;var H=Math.max(y.x,y.y),G=H*this.getZoomScale(T,n),ee=v.distanceTo(p)||1,re=1.42,fe=re*re;function Se(it){var ka=it?-1:1,Ph=it?G:H,Ih=G*G-H*H+ka*fe*fe*ee*ee,Mh=2*Ph*fe*ee,Yn=Ih/Mh,hl=Math.sqrt(Yn*Yn+1)-Yn,Rh=hl<1e-9?-18:Math.log(hl);return Rh}function ft(it){return(Math.exp(it)-Math.exp(-it))/2}function rt(it){return(Math.exp(it)+Math.exp(-it))/2}function It(it){return ft(it)/rt(it)}var bt=Se(0);function li(it){return H*(rt(bt)/rt(bt+re*it))}function Eh(it){return H*(rt(bt)*It(bt+re*it)-ft(bt))/fe}function Sh(it){return 1-Math.pow(1-it,1.5)}var Ah=Date.now(),dl=(Se(1)-bt)/re,Th=l.duration?1e3*l.duration:1e3*dl*.8;function ul(){var it=(Date.now()-Ah)/Th,ka=Sh(it)*dl;it<=1?(this._flyToFrame=U(ul,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(Eh(ka)/ee)),T),this.getScaleZoom(H/li(ka),T),{flyTo:!0})):this._move(t,n)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),ul.call(this),this},flyToBounds:function(t,n){var l=this._getBoundsCenterZoom(t,n);return this.flyTo(l.center,l.zoom,n)},setMaxBounds:function(t){return t=B(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var n=this.options.minZoom;return this.options.minZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var n=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,n){this._enforcingBounds=!0;var l=this.getCenter(),p=this._limitCenter(l,this._zoom,B(t));return l.equals(p)||this.panTo(p,n),this._enforcingBounds=!1,this},panInside:function(t,n){n=n||{};var l=P(n.paddingTopLeft||n.padding||[0,0]),p=P(n.paddingBottomRight||n.padding||[0,0]),v=this.project(this.getCenter()),y=this.project(t),T=this.getPixelBounds(),H=F([T.min.add(l),T.max.subtract(p)]),G=H.getSize();if(!H.contains(y)){this._enforcingBounds=!0;var ee=y.subtract(H.getCenter()),re=H.extend(y).getSize().subtract(G);v.x+=ee.x<0?-re.x:re.x,v.y+=ee.y<0?-re.y:re.y,this.panTo(this.unproject(v),n),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),p=n.divideBy(2).round(),v=l.divideBy(2).round(),y=p.subtract(v);return!y.x&&!y.y?this:(t.animate&&t.pan?this.panBy(y):(t.pan&&this._rawPanBy(y),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=d(this._handleGeolocationResponse,this),l=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,l,t):navigator.geolocation.getCurrentPosition(n,l,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var n=t.code,l=t.message||(n===1?"permission denied":n===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var n=t.coords.latitude,l=t.coords.longitude,p=new z(n,l),v=p.toBounds(t.coords.accuracy*2),y=this._locateOptions;if(y.setView){var T=this.getBoundsZoom(v);this.setView(p,y.maxZoom?Math.min(T,y.maxZoom):T)}var H={latlng:p,bounds:v,timestamp:t.timestamp};for(var G in t.coords)typeof t.coords[G]=="number"&&(H[G]=t.coords[G]);this.fire("locationfound",H)}},addHandler:function(t,n){if(!n)return this;var l=this[t]=new n(this);return this._handlers.push(l),this.options[t]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ge(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ge(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,n){var l="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),p=Le("div",l,n||this._mapPane);return t&&(this._panes[t]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),n=this.unproject(t.getBottomLeft()),l=this.unproject(t.getTopRight());return new O(n,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,n,l){t=B(t),l=P(l||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),y=this.getMaxZoom(),T=t.getNorthWest(),H=t.getSouthEast(),G=this.getSize().subtract(l),ee=F(this.project(H,p),this.project(T,p)).getSize(),re=oe.any3d?this.options.zoomSnap:1,fe=G.x/ee.x,Se=G.y/ee.y,ft=n?Math.max(fe,Se):Math.min(fe,Se);return p=this.getScaleZoom(ft,p),re&&(p=Math.round(p/(re/100))*(re/100),p=n?Math.ceil(p/re)*re:Math.floor(p/re)*re),Math.max(v,Math.min(y,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,n){var l=this._getTopLeftPoint(t,n);return new N(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,n){var l=this.options.crs;return n=n===void 0?this._zoom:n,l.scale(t)/l.scale(n)},getScaleZoom:function(t,n){var l=this.options.crs;n=n===void 0?this._zoom:n;var p=l.zoom(t*l.scale(n));return isNaN(p)?1/0:p},project:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.latLngToPoint(V(t),n)},unproject:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.pointToLatLng(P(t),n)},layerPointToLatLng:function(t){var n=P(t).add(this.getPixelOrigin());return this.unproject(n)},latLngToLayerPoint:function(t){var n=this.project(V(t))._round();return n._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(V(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(B(t))},distance:function(t,n){return this.options.crs.distance(V(t),V(n))},containerPointToLayerPoint:function(t){return P(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return P(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var n=this.containerPointToLayerPoint(P(t));return this.layerPointToLatLng(n)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(t)))},mouseEventToContainerPoint:function(t){return To(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var n=this._container=Co(t);if(n){if(n._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");je(n,"scroll",this._onScroll,this),this._containerId=m(n)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&oe.any3d,Ne(t,"leaflet-container"+(oe.touch?" leaflet-touch":"")+(oe.retina?" leaflet-retina":"")+(oe.ielt9?" leaflet-oldie":"")+(oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var n=Si(t,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&n!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ne(t.markerPane,"leaflet-zoom-hide"),Ne(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,n,l){st(this._mapPane,new ne(0,0));var p=!this._loaded;this._loaded=!0,n=this._limitZoom(n),this.fire("viewprereset");var v=this._zoom!==n;this._moveStart(v,l)._move(t,n)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(t,n){return t&&this.fire("zoomstart"),n||this.fire("movestart"),this},_move:function(t,n,l,p){n===void 0&&(n=this._zoom);var v=this._zoom!==n;return this._zoom=n,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),p?l&&l.pinch&&this.fire("zoom",l):((v||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){st(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[m(this._container)]=this;var n=t?Ue:je;n(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&n(window,"resize",this._onResize,this),oe.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,n){for(var l=[],p,v=n==="mouseout"||n==="mouseover",y=t.target||t.srcElement,T=!1;y;){if(p=this._targets[m(y)],p&&(n==="click"||n==="preclick")&&this._draggableMoved(p)){T=!0;break}if(p&&p.listens(n,!0)&&(v&&!zn(y,t)||(l.push(p),v))||y===this._container)break;y=y.parentNode}return!l.length&&!T&&!v&&this.listens(n,!0)&&(l=[this]),l},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var n=t.target||t.srcElement;if(!(!this._loaded||n._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(n))){var l=t.type;l==="mousedown"&&Mn(n),this._fireDOMEvent(t,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,l){if(t.type==="click"){var p=o({},t);p.type="preclick",this._fireDOMEvent(p,p.type,l)}var v=this._findEventTargets(t,n);if(l){for(var y=[],T=0;T<l.length;T++)l[T].listens(n,!0)&&y.push(l[T]);v=y.concat(v)}if(v.length){n==="contextmenu"&&lt(t);var H=v[0],G={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var ee=H.getLatLng&&(!H._radius||H._radius<=10);G.containerPoint=ee?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(t),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=ee?H.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(T=0;T<v.length;T++)if(v[T].fire(n,G,!0),G.originalEvent._stopped||v[T].options.bubblingMouseEvents===!1&&I(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,n=this._handlers.length;t<n;t++)this._handlers[t].disable()},whenReady:function(t,n){return this._loaded?t.call(n||this,{target:this}):this.on("load",t,n),this},_getMapPanePos:function(){return As(this._mapPane)||new ne(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,n){var l=t&&n!==void 0?this._getNewPixelOrigin(t,n):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,n){var l=this.getSize()._divideBy(2);return this.project(t,n)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,n,l){var p=this._getNewPixelOrigin(l,n);return this.project(t,n)._subtract(p)},_latLngBoundsToNewLayerBounds:function(t,n,l){var p=this._getNewPixelOrigin(l,n);return F([this.project(t.getSouthWest(),n)._subtract(p),this.project(t.getNorthWest(),n)._subtract(p),this.project(t.getSouthEast(),n)._subtract(p),this.project(t.getNorthEast(),n)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,n,l){if(!l)return t;var p=this.project(t,n),v=this.getSize().divideBy(2),y=new N(p.subtract(v),p.add(v)),T=this._getBoundsOffset(y,l,n);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?t:this.unproject(p.add(T),n)},_limitOffset:function(t,n){if(!n)return t;var l=this.getPixelBounds(),p=new N(l.min.add(t),l.max.add(t));return t.add(this._getBoundsOffset(p,n))},_getBoundsOffset:function(t,n,l){var p=F(this.project(n.getNorthEast(),l),this.project(n.getSouthWest(),l)),v=p.min.subtract(t.min),y=p.max.subtract(t.max),T=this._rebound(v.x,-y.x),H=this._rebound(v.y,-y.y);return new ne(T,H)},_rebound:function(t,n){return t+n>0?Math.round(t-n)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(n))},_limitZoom:function(t){var n=this.getMinZoom(),l=this.getMaxZoom(),p=oe.any3d?this.options.zoomSnap:1;return p&&(t=Math.round(t/p)*p),Math.max(n,Math.min(l,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Je(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,n){var l=this._getCenterOffset(t)._trunc();return(n&&n.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,n),!0)},_createAnimProxy:function(){var t=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(n){var l=Cn,p=this._proxy.style[l];Ss(this._proxy,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1)),p===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ge(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),n=this.getZoom();Ss(this._proxy,this.project(t,n),this.getZoomScale(n,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,n,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(n-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(n),v=this._getCenterOffset(t)._divideBy(1-1/p);return l.animate!==!0&&!this.getSize().contains(v)?!1:(U(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(t,n,!0)},this),!0)},_animateZoom:function(t,n,l,p){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=n,Ne(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:n,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Je(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qu(t,n){return new Pe(t,n)}var Ft=J.extend({options:{position:"topright"},initialize:function(t){j(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var n=this._map;return n&&n.removeControl(this),this.options.position=t,n&&n.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var n=this._container=this.onAdd(t),l=this.getPosition(),p=t._controlCorners[l];return Ne(n,"leaflet-control"),l.indexOf("bottom")!==-1?p.insertBefore(n,p.firstChild):p.appendChild(n),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ge(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Mi=function(t){return new Ft(t)};Pe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},n="leaflet-",l=this._controlContainer=Le("div",n+"control-container",this._container);function p(v,y){var T=n+v+" "+n+y;t[v+y]=Le("div",T,l)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ge(this._controlCorners[t]);Ge(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Mo=Ft.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,n,l,p){return l<p?-1:p<l?1:0}},initialize:function(t,n,l){j(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in t)this._addLayer(t[p],p);for(p in n)this._addLayer(n[p],p,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ft.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,n){return this._addLayer(t,n),this._map?this._update():this},addOverlay:function(t,n){return this._addLayer(t,n,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var n=this._getLayer(m(t));return n&&this._layers.splice(this._layers.indexOf(n),1),this._map?this._update():this},expand:function(){Ne(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Ne(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Je(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Je(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",n=this._container=Le("div",t),l=this.options.collapsed;n.setAttribute("aria-haspopup",!0),Ii(n),Bn(n);var p=this._section=Le("section",t+"-list");l&&(this._map.on("click",this.collapse,this),je(n,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Le("a",t+"-toggle",n);v.href="#",v.title="Layers",v.setAttribute("role","button"),je(v,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){lt(y),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=Le("div",t+"-base",p),this._separator=Le("div",t+"-separator",p),this._overlaysList=Le("div",t+"-overlays",p),n.appendChild(p)},_getLayer:function(t){for(var n=0;n<this._layers.length;n++)if(this._layers[n]&&m(this._layers[n].layer)===t)return this._layers[n]},_addLayer:function(t,n,l){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:n,overlay:l}),this.options.sortLayers&&this._layers.sort(d(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ca(this._baseLayersList),ca(this._overlaysList),this._layerControlInputs=[];var t,n,l,p,v=0;for(l=0;l<this._layers.length;l++)p=this._layers[l],this._addItem(p),n=n||p.overlay,t=t||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(t=t&&v>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var n=this._getLayer(m(t.target)),l=n.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;l&&this._map.fire(l,n)},_createRadioElement:function(t,n){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(n?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=l,p.firstChild},_addItem:function(t){var n=document.createElement("label"),l=this._map.hasLayer(t.layer),p;t.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=l):p=this._createRadioElement("leaflet-base-layers_"+m(this),l),this._layerControlInputs.push(p),p.layerId=m(t.layer),je(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+t.name;var y=document.createElement("span");n.appendChild(y),y.appendChild(p),y.appendChild(v);var T=t.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,n,l,p=[],v=[];this._handlingClick=!0;for(var y=t.length-1;y>=0;y--)n=t[y],l=this._getLayer(n.layerId).layer,n.checked?p.push(l):n.checked||v.push(l);for(y=0;y<v.length;y++)this._map.hasLayer(v[y])&&this._map.removeLayer(v[y]);for(y=0;y<p.length;y++)this._map.hasLayer(p[y])||this._map.addLayer(p[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,n,l,p=this._map.getZoom(),v=t.length-1;v>=0;v--)n=t[v],l=this._getLayer(n.layerId).layer,n.disabled=l.options.minZoom!==void 0&&p<l.options.minZoom||l.options.maxZoom!==void 0&&p>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,je(t,"click",lt),this.expand();var n=this;setTimeout(function(){Ue(t,"click",lt),n._preventClick=!1})}}),$u=function(t,n,l){return new Mo(t,n,l)},Fn=Ft.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var n="leaflet-control-zoom",l=Le("div",n+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,n+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,n+"-out",l,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,n,l,p,v){var y=Le("a",l,p);return y.innerHTML=t,y.href="#",y.title=n,y.setAttribute("role","button"),y.setAttribute("aria-label",n),Ii(y),je(y,"click",Ps),je(y,"click",v,this),je(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var t=this._map,n="leaflet-disabled";Je(this._zoomInButton,n),Je(this._zoomOutButton,n),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Ne(this._zoomOutButton,n),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Ne(this._zoomInButton,n),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pe.mergeOptions({zoomControl:!0}),Pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Fn,this.addControl(this.zoomControl))});var Gu=function(t){return new Fn(t)},Ro=Ft.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var n="leaflet-control-scale",l=Le("div",n),p=this.options;return this._addScales(p,n+"-line",l),t.on(p.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),l},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,n,l){t.metric&&(this._mScale=Le("div",n,l)),t.imperial&&(this._iScale=Le("div",n,l))},_update:function(){var t=this._map,n=t.getSize().y/2,l=t.distance(t.containerPointToLatLng([0,n]),t.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(l)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var n=this._getRoundNum(t),l=n<1e3?n+" m":n/1e3+" km";this._updateScale(this._mScale,l,n/t)},_updateImperial:function(t){var n=t*3.2808399,l,p,v;n>5280?(l=n/5280,p=this._getRoundNum(l),this._updateScale(this._iScale,p+" mi",p/l)):(v=this._getRoundNum(n),this._updateScale(this._iScale,v+" ft",v/n))},_updateScale:function(t,n,l){t.style.width=Math.round(this.options.maxWidth*l)+"px",t.innerHTML=n},_getRoundNum:function(t){var n=Math.pow(10,(Math.floor(t)+"").length-1),l=t/n;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,n*l}}),Wu=function(t){return new Ro(t)},Zu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Un=Ft.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(oe.inlineSvg?Zu+" ":"")+"Leaflet</a>"},initialize:function(t){j(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),Ii(this._container);for(var n in t._layers)t._layers[n].getAttribution&&this.addAttribution(t._layers[n].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var n in this._attributions)this._attributions[n]&&t.push(n);var l=[];this.options.prefix&&l.push(this.options.prefix),t.length&&l.push(t.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Pe.mergeOptions({attributionControl:!0}),Pe.addInitHook(function(){this.options.attributionControl&&new Un().addTo(this)});var Ku=function(t){return new Un(t)};Ft.Layers=Mo,Ft.Zoom=Fn,Ft.Scale=Ro,Ft.Attribution=Un,Mi.layers=$u,Mi.zoom=Gu,Mi.scale=Wu,Mi.attribution=Ku;var Yt=J.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yt.addTo=function(t,n){return t.addHandler(n,this),this};var Yu={Events:te},Lo=oe.touch?"touchstart mousedown":"mousedown",fs=ue.extend({options:{clickTolerance:3},initialize:function(t,n,l,p){j(this,p),this._element=t,this._dragStartTarget=n||t,this._preventOutline=l},enable:function(){this._enabled||(je(this._dragStartTarget,Lo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fs._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,Lo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!En(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){fs._dragging===this&&this.finishDrag();return}if(!(fs._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(fs._dragging=this,this._preventOutline&&Mn(this._element),Tn(),Ai(),!this._moving)){this.fire("down");var n=t.touches?t.touches[0]:t,l=Eo(this._element);this._startPoint=new ne(n.clientX,n.clientY),this._startPos=As(this._element),this._parentScale=Rn(l);var p=t.type==="mousedown";je(document,p?"mousemove":"touchmove",this._onMove,this),je(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var n=t.touches&&t.touches.length===1?t.touches[0]:t,l=new ne(n.clientX,n.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,lt(t),this._moved||(this.fire("dragstart"),this._moved=!0,Ne(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ne(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),st(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Je(document.body,"leaflet-dragging"),this._lastTarget&&(Je(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),Pn(),Ti();var n=this._moved&&this._moving;this._moving=!1,fs._dragging=!1,n&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Oo(t,n,l){var p,v=[1,4,2,8],y,T,H,G,ee,re,fe,Se;for(y=0,re=t.length;y<re;y++)t[y]._code=Is(t[y],n);for(H=0;H<4;H++){for(fe=v[H],p=[],y=0,re=t.length,T=re-1;y<re;T=y++)G=t[y],ee=t[T],G._code&fe?ee._code&fe||(Se=pa(ee,G,fe,n,l),Se._code=Is(Se,n),p.push(Se)):(ee._code&fe&&(Se=pa(ee,G,fe,n,l),Se._code=Is(Se,n),p.push(Se)),p.push(G));t=p}return t}function Do(t,n){var l,p,v,y,T,H,G,ee,re;if(!t||t.length===0)throw new Error("latlngs not passed");Pt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var fe=V([0,0]),Se=B(t),ft=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());ft<1700&&(fe=Vn(t));var rt=t.length,It=[];for(l=0;l<rt;l++){var bt=V(t[l]);It.push(n.project(V([bt.lat-fe.lat,bt.lng-fe.lng])))}for(H=G=ee=0,l=0,p=rt-1;l<rt;p=l++)v=It[l],y=It[p],T=v.y*y.x-y.y*v.x,G+=(v.x+y.x)*T,ee+=(v.y+y.y)*T,H+=T*3;H===0?re=It[0]:re=[G/H,ee/H];var li=n.unproject(P(re));return V([li.lat+fe.lat,li.lng+fe.lng])}function Vn(t){for(var n=0,l=0,p=0,v=0;v<t.length;v++){var y=V(t[v]);n+=y.lat,l+=y.lng,p++}return V([n/p,l/p])}var Qu={__proto__:null,clipPolygon:Oo,polygonCenter:Do,centroid:Vn};function Bo(t,n){if(!n||!t.length)return t.slice();var l=n*n;return t=eh(t,l),t=Ju(t,l),t}function zo(t,n,l){return Math.sqrt(Ri(t,n,l,!0))}function Xu(t,n,l){return Ri(t,n,l)}function Ju(t,n){var l=t.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(l);v[0]=v[l-1]=1,Hn(t,v,n,0,l-1);var y,T=[];for(y=0;y<l;y++)v[y]&&T.push(t[y]);return T}function Hn(t,n,l,p,v){var y=0,T,H,G;for(H=p+1;H<=v-1;H++)G=Ri(t[H],t[p],t[v],!0),G>y&&(T=H,y=G);y>l&&(n[T]=1,Hn(t,n,l,p,T),Hn(t,n,l,T,v))}function eh(t,n){for(var l=[t[0]],p=1,v=0,y=t.length;p<y;p++)th(t[p],t[v])>n&&(l.push(t[p]),v=p);return v<y-1&&l.push(t[y-1]),l}var Fo;function Uo(t,n,l,p,v){var y=p?Fo:Is(t,l),T=Is(n,l),H,G,ee;for(Fo=T;;){if(!(y|T))return[t,n];if(y&T)return!1;H=y||T,G=pa(t,n,H,l,v),ee=Is(G,l),H===y?(t=G,y=ee):(n=G,T=ee)}}function pa(t,n,l,p,v){var y=n.x-t.x,T=n.y-t.y,H=p.min,G=p.max,ee,re;return l&8?(ee=t.x+y*(G.y-t.y)/T,re=G.y):l&4?(ee=t.x+y*(H.y-t.y)/T,re=H.y):l&2?(ee=G.x,re=t.y+T*(G.x-t.x)/y):l&1&&(ee=H.x,re=t.y+T*(H.x-t.x)/y),new ne(ee,re,v)}function Is(t,n){var l=0;return t.x<n.min.x?l|=1:t.x>n.max.x&&(l|=2),t.y<n.min.y?l|=4:t.y>n.max.y&&(l|=8),l}function th(t,n){var l=n.x-t.x,p=n.y-t.y;return l*l+p*p}function Ri(t,n,l,p){var v=n.x,y=n.y,T=l.x-v,H=l.y-y,G=T*T+H*H,ee;return G>0&&(ee=((t.x-v)*T+(t.y-y)*H)/G,ee>1?(v=l.x,y=l.y):ee>0&&(v+=T*ee,y+=H*ee)),T=t.x-v,H=t.y-y,p?T*T+H*H:new ne(v,y)}function Pt(t){return!_(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Vo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Pt(t)}function Ho(t,n){var l,p,v,y,T,H,G,ee;if(!t||t.length===0)throw new Error("latlngs not passed");Pt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var re=V([0,0]),fe=B(t),Se=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Se<1700&&(re=Vn(t));var ft=t.length,rt=[];for(l=0;l<ft;l++){var It=V(t[l]);rt.push(n.project(V([It.lat-re.lat,It.lng-re.lng])))}for(l=0,p=0;l<ft-1;l++)p+=rt[l].distanceTo(rt[l+1])/2;if(p===0)ee=rt[0];else for(l=0,y=0;l<ft-1;l++)if(T=rt[l],H=rt[l+1],v=T.distanceTo(H),y+=v,y>p){G=(y-p)/v,ee=[H.x-G*(H.x-T.x),H.y-G*(H.y-T.y)];break}var bt=n.unproject(P(ee));return V([bt.lat+re.lat,bt.lng+re.lng])}var sh={__proto__:null,simplify:Bo,pointToSegmentDistance:zo,closestPointOnSegment:Xu,clipSegment:Uo,_getEdgeIntersection:pa,_getBitCode:Is,_sqClosestPointOnSegment:Ri,isFlat:Pt,_flat:Vo,polylineCenter:Ho},qn={project:function(t){return new ne(t.lng,t.lat)},unproject:function(t){return new z(t.y,t.x)},bounds:new N([-180,-90],[180,90])},$n={R:6378137,R_MINOR:6356752314245179e-9,bounds:new N([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var n=Math.PI/180,l=this.R,p=t.lat*n,v=this.R_MINOR/l,y=Math.sqrt(1-v*v),T=y*Math.sin(p),H=Math.tan(Math.PI/4-p/2)/Math.pow((1-T)/(1+T),y/2);return p=-l*Math.log(Math.max(H,1e-10)),new ne(t.lng*n*l,p)},unproject:function(t){for(var n=180/Math.PI,l=this.R,p=this.R_MINOR/l,v=Math.sqrt(1-p*p),y=Math.exp(-t.y/l),T=Math.PI/2-2*Math.atan(y),H=0,G=.1,ee;H<15&&Math.abs(G)>1e-7;H++)ee=v*Math.sin(T),ee=Math.pow((1-ee)/(1+ee),v/2),G=Math.PI/2-2*Math.atan(y*ee)-T,T+=G;return new z(T*n,t.x*n/l)}},ih={__proto__:null,LonLat:qn,Mercator:$n,SphericalMercator:he},ah=o({},Y,{code:"EPSG:3395",projection:$n,transformation:(function(){var t=.5/(Math.PI*$n.R);return we(t,.5,-t,.5)})()}),qo=o({},Y,{code:"EPSG:4326",projection:qn,transformation:we(1/180,1,-1/180,.5)}),nh=o({},Z,{projection:qn,transformation:we(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,n){var l=n.lng-t.lng,p=n.lat-t.lat;return Math.sqrt(l*l+p*p)},infinite:!0});Z.Earth=Y,Z.EPSG3395=ah,Z.EPSG3857=Oe,Z.EPSG900913=ye,Z.EPSG4326=qo,Z.Simple=nh;var Ut=ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[m(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[m(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var n=t.target;if(n.hasLayer(this)){if(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents){var l=this.getEvents();n.on(l,this),this.once("remove",function(){n.off(l,this)},this)}this.onAdd(n),this.fire("add"),n.fire("layeradd",{layer:this})}}});Pe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var n=m(t);return this._layers[n]?this:(this._layers[n]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var n=m(t);return this._layers[n]?(this._loaded&&t.onRemove(this),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return m(t)in this._layers},eachLayer:function(t,n){for(var l in this._layers)t.call(n,this._layers[l]);return this},_addLayers:function(t){t=t?_(t)?t:[t]:[];for(var n=0,l=t.length;n<l;n++)this.addLayer(t[n])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[m(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var n=m(t);this._zoomBoundLayers[n]&&(delete this._zoomBoundLayers[n],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,n=-1/0,l=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;t=v.minZoom===void 0?t:Math.min(t,v.minZoom),n=v.maxZoom===void 0?n:Math.max(n,v.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=t===1/0?void 0:t,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ii=Ut.extend({initialize:function(t,n){j(this,n),this._layers={};var l,p;if(t)for(l=0,p=t.length;l<p;l++)this.addLayer(t[l])},addLayer:function(t){var n=this.getLayerId(t);return this._layers[n]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var n=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[n]&&this._map.removeLayer(this._layers[n]),delete this._layers[n],this},hasLayer:function(t){var n=typeof t=="number"?t:this.getLayerId(t);return n in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var n=Array.prototype.slice.call(arguments,1),l,p;for(l in this._layers)p=this._layers[l],p[t]&&p[t].apply(p,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,n){for(var l in this._layers)t.call(n,this._layers[l]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return m(t)}}),rh=function(t,n){return new ii(t,n)},as=ii.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ii.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ii.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new O;for(var n in this._layers){var l=this._layers[n];t.extend(l.getBounds?l.getBounds():l.getLatLng())}return t}}),oh=function(t,n){return new as(t,n)},ai=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){j(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,n){var l=this._getIconUrl(t);if(!l){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(l,n&&n.tagName==="IMG"?n:null);return this._setIconStyles(p,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(t,n){var l=this.options,p=l[n+"Size"];typeof p=="number"&&(p=[p,p]);var v=P(p),y=P(n==="shadow"&&l.shadowAnchor||l.iconAnchor||v&&v.divideBy(2,!0));t.className="leaflet-marker-"+n+" "+(l.className||""),y&&(t.style.marginLeft=-y.x+"px",t.style.marginTop=-y.y+"px"),v&&(t.style.width=v.x+"px",t.style.height=v.y+"px")},_createImg:function(t,n){return n=n||document.createElement("img"),n.src=t,n},_getIconUrl:function(t){return oe.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function lh(t){return new ai(t)}var Li=ai.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Li.imagePath!="string"&&(Li.imagePath=this._detectIconPath()),(this.options.imagePath||Li.imagePath)+ai.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var n=function(l,p,v){var y=p.exec(l);return y&&y[v]};return t=n(t,/^url\((['"])?(.+)\1\)$/,2),t&&n(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Le("div","leaflet-default-icon-path",document.body),n=Si(t,"background-image")||Si(t,"backgroundImage");if(document.body.removeChild(t),n=this._stripUrl(n),n)return n;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),$o=Yt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new fs(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ne(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Je(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var n=this._marker,l=n._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,y=As(n._icon),T=l.getPixelBounds(),H=l.getPixelOrigin(),G=F(T.min._subtract(H).add(v),T.max._subtract(H).subtract(v));if(!G.contains(y)){var ee=P((Math.max(G.max.x,y.x)-G.max.x)/(T.max.x-G.max.x)-(Math.min(G.min.x,y.x)-G.min.x)/(T.min.x-G.min.x),(Math.max(G.max.y,y.y)-G.max.y)/(T.max.y-G.max.y)-(Math.min(G.min.y,y.y)-G.min.y)/(T.min.y-G.min.y)).multiplyBy(p);l.panBy(ee,{animate:!1}),this._draggable._newPos._add(ee),this._draggable._startPos._add(ee),st(n._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=U(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,t)))},_onDrag:function(t){var n=this._marker,l=n._shadow,p=As(n._icon),v=n._map.layerPointToLatLng(p);l&&st(l,p),n._latlng=v,t.latlng=v,t.oldLatLng=this._oldLatLng,n.fire("move",t).fire("drag",t)},_onDragEnd:function(t){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),fa=Ut.extend({options:{icon:new Li,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,n){j(this,n),this._latlng=V(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var n=this._latlng;return this._latlng=V(t),this.update(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=t.icon.createIcon(this._icon),p=!1;l!==this._icon&&(this._icon&&this._removeIcon(),p=!0,t.title&&(l.title=t.title),l.tagName==="IMG"&&(l.alt=t.alt||"")),Ne(l,n),t.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(l,"focus",this._panOnFocus,this);var v=t.icon.createShadow(this._shadow),y=!1;v!==this._shadow&&(this._removeShadow(),y=!0),v&&(Ne(v,n),v.alt=""),this._shadow=v,t.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&y&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),Ge(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ge(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&st(this._icon,t),this._shadow&&st(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(n)},_initInteraction:function(){if(this.options.interactive&&(Ne(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$o)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $o(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Tt(this._icon,t),this._shadow&&Tt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var n=this.options.icon.options,l=n.iconSize?P(n.iconSize):P(0,0),p=n.iconAnchor?P(n.iconAnchor):P(0,0);t.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:l.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ch(t,n){return new fa(t,n)}var xs=Ut.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return j(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),xa=xs.extend({options:{fill:!0,radius:10},initialize:function(t,n){j(this,n),this._latlng=V(t),this._radius=this.options.radius},setLatLng:function(t){var n=this._latlng;return this._latlng=V(t),this.redraw(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var n=t&&t.radius||this._radius;return xs.prototype.setStyle.call(this,t),this.setRadius(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,n=this._radiusY||t,l=this._clickTolerance(),p=[t+l,n+l];this._pxBounds=new N(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dh(t,n){return new xa(t,n)}var Gn=xa.extend({initialize:function(t,n,l){if(typeof n=="number"&&(n=o({},l,{radius:n})),j(this,n),this._latlng=V(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new O(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:xs.prototype.setStyle,_project:function(){var t=this._latlng.lng,n=this._latlng.lat,l=this._map,p=l.options.crs;if(p.distance===Y.distance){var v=Math.PI/180,y=this._mRadius/Y.R/v,T=l.project([n+y,t]),H=l.project([n-y,t]),G=T.add(H).divideBy(2),ee=l.unproject(G).lat,re=Math.acos((Math.cos(y*v)-Math.sin(n*v)*Math.sin(ee*v))/(Math.cos(n*v)*Math.cos(ee*v)))/v;(isNaN(re)||re===0)&&(re=y/Math.cos(Math.PI/180*n)),this._point=G.subtract(l.getPixelOrigin()),this._radius=isNaN(re)?0:G.x-l.project([ee,t-re]).x,this._radiusY=G.y-T.y}else{var fe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(fe).x}this._updateBounds()}});function uh(t,n,l){return new Gn(t,n,l)}var ns=xs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,n){j(this,n),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var n=1/0,l=null,p=Ri,v,y,T=0,H=this._parts.length;T<H;T++)for(var G=this._parts[T],ee=1,re=G.length;ee<re;ee++){v=G[ee-1],y=G[ee];var fe=p(t,v,y,!0);fe<n&&(n=fe,l=p(t,v,y))}return l&&(l.distance=Math.sqrt(n)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ho(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,n){return n=n||this._defaultShape(),t=V(t),n.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new O,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Pt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var n=[],l=Pt(t),p=0,v=t.length;p<v;p++)l?(n[p]=V(t[p]),this._bounds.extend(n[p])):n[p]=this._convertLatLngs(t[p]);return n},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),n=new ne(t,t);this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(n),this._rawPxBounds.max.add(n)]))},_projectLatlngs:function(t,n,l){var p=t[0]instanceof z,v=t.length,y,T;if(p){for(T=[],y=0;y<v;y++)T[y]=this._map.latLngToLayerPoint(t[y]),l.extend(T[y]);n.push(T)}else for(y=0;y<v;y++)this._projectLatlngs(t[y],n,l)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var n=this._parts,l,p,v,y,T,H,G;for(l=0,v=0,y=this._rings.length;l<y;l++)for(G=this._rings[l],p=0,T=G.length;p<T-1;p++)H=Uo(G[p],G[p+1],t,p,!0),H&&(n[v]=n[v]||[],n[v].push(H[0]),(H[1]!==G[p+1]||p===T-2)&&(n[v].push(H[1]),v++))}},_simplifyPoints:function(){for(var t=this._parts,n=this.options.smoothFactor,l=0,p=t.length;l<p;l++)t[l]=Bo(t[l],n)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,n){var l,p,v,y,T,H,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(l=0,y=this._parts.length;l<y;l++)for(H=this._parts[l],p=0,T=H.length,v=T-1;p<T;v=p++)if(!(!n&&p===0)&&zo(t,H[v],H[p])<=G)return!0;return!1}});function hh(t,n){return new ns(t,n)}ns._flat=Vo;var ni=ns.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Do(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var n=ns.prototype._convertLatLngs.call(this,t),l=n.length;return l>=2&&n[0]instanceof z&&n[0].equals(n[l-1])&&n.pop(),n},_setLatLngs:function(t){ns.prototype._setLatLngs.call(this,t),Pt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Pt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,n=this.options.weight,l=new ne(n,n);if(t=new N(t.min.subtract(l),t.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,y;p<v;p++)y=Oo(this._rings[p],t,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var n=!1,l,p,v,y,T,H,G,ee;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(y=0,G=this._parts.length;y<G;y++)for(l=this._parts[y],T=0,ee=l.length,H=ee-1;T<ee;H=T++)p=l[T],v=l[H],p.y>t.y!=v.y>t.y&&t.x<(v.x-p.x)*(t.y-p.y)/(v.y-p.y)+p.x&&(n=!n);return n||ns.prototype._containsPoint.call(this,t,!0)}});function mh(t,n){return new ni(t,n)}var rs=as.extend({initialize:function(t,n){j(this,n),this._layers={},t&&this.addData(t)},addData:function(t){var n=_(t)?t:t.features,l,p,v;if(n){for(l=0,p=n.length;l<p;l++)v=n[l],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var y=this.options;if(y.filter&&!y.filter(t))return this;var T=ga(t,y);return T?(T.feature=wa(t),T.defaultOptions=T.options,this.resetStyle(T),y.onEachFeature&&y.onEachFeature(t,T),this.addLayer(T)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(n){this._setLayerStyle(n,t)},this)},_setLayerStyle:function(t,n){t.setStyle&&(typeof n=="function"&&(n=n(t.feature)),t.setStyle(n))}});function ga(t,n){var l=t.type==="Feature"?t.geometry:t,p=l?l.coordinates:null,v=[],y=n&&n.pointToLayer,T=n&&n.coordsToLatLng||Wn,H,G,ee,re;if(!p&&!l)return null;switch(l.type){case"Point":return H=T(p),Go(y,t,H,n);case"MultiPoint":for(ee=0,re=p.length;ee<re;ee++)H=T(p[ee]),v.push(Go(y,t,H,n));return new as(v);case"LineString":case"MultiLineString":return G=va(p,l.type==="LineString"?0:1,T),new ns(G,n);case"Polygon":case"MultiPolygon":return G=va(p,l.type==="Polygon"?1:2,T),new ni(G,n);case"GeometryCollection":for(ee=0,re=l.geometries.length;ee<re;ee++){var fe=ga({geometry:l.geometries[ee],type:"Feature",properties:t.properties},n);fe&&v.push(fe)}return new as(v);case"FeatureCollection":for(ee=0,re=l.features.length;ee<re;ee++){var Se=ga(l.features[ee],n);Se&&v.push(Se)}return new as(v);default:throw new Error("Invalid GeoJSON object.")}}function Go(t,n,l,p){return t?t(n,l):new fa(l,p&&p.markersInheritOptions&&p)}function Wn(t){return new z(t[1],t[0],t[2])}function va(t,n,l){for(var p=[],v=0,y=t.length,T;v<y;v++)T=n?va(t[v],n-1,l):(l||Wn)(t[v]),p.push(T);return p}function Zn(t,n){return t=V(t),t.alt!==void 0?[g(t.lng,n),g(t.lat,n),g(t.alt,n)]:[g(t.lng,n),g(t.lat,n)]}function ba(t,n,l,p){for(var v=[],y=0,T=t.length;y<T;y++)v.push(n?ba(t[y],Pt(t[y])?0:n-1,l,p):Zn(t[y],p));return!n&&l&&v.length>0&&v.push(v[0].slice()),v}function ri(t,n){return t.feature?o({},t.feature,{geometry:n}):wa(n)}function wa(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Kn={toGeoJSON:function(t){return ri(this,{type:"Point",coordinates:Zn(this.getLatLng(),t)})}};fa.include(Kn),Gn.include(Kn),xa.include(Kn),ns.include({toGeoJSON:function(t){var n=!Pt(this._latlngs),l=ba(this._latlngs,n?1:0,!1,t);return ri(this,{type:(n?"Multi":"")+"LineString",coordinates:l})}}),ni.include({toGeoJSON:function(t){var n=!Pt(this._latlngs),l=n&&!Pt(this._latlngs[0]),p=ba(this._latlngs,l?2:n?1:0,!0,t);return n||(p=[p]),ri(this,{type:(l?"Multi":"")+"Polygon",coordinates:p})}}),ii.include({toMultiPoint:function(t){var n=[];return this.eachLayer(function(l){n.push(l.toGeoJSON(t).geometry.coordinates)}),ri(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(t){var n=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(n==="MultiPoint")return this.toMultiPoint(t);var l=n==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var y=v.toGeoJSON(t);if(l)p.push(y.geometry);else{var T=wa(y);T.type==="FeatureCollection"?p.push.apply(p,T.features):p.push(T)}}}),l?ri(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Wo(t,n){return new rs(t,n)}var ph=Wo,ya=Ut.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,n,l){this._url=t,this._bounds=B(n),j(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ne(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ge(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ti(this._image),this},bringToBack:function(){return this._map&&si(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=B(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",n=this._image=t?this._url:Le("img");if(Ne(n,"leaflet-image-layer"),this._zoomAnimated&&Ne(n,"leaflet-zoom-animated"),this.options.className&&Ne(n,this.options.className),n.onselectstart=h,n.onmousemove=h,n.onload=d(this.fire,this,"load"),n.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=n.src;return}n.src=this._url,n.alt=this.options.alt},_animateZoom:function(t){var n=this._map.getZoomScale(t.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ss(this._image,l,n)},_reset:function(){var t=this._image,n=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=n.getSize();st(t,n.min),t.style.width=l.x+"px",t.style.height=l.y+"px"},_updateOpacity:function(){Tt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),fh=function(t,n,l){return new ya(t,n,l)},Zo=ya.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",n=this._image=t?this._url:Le("video");if(Ne(n,"leaflet-image-layer"),this._zoomAnimated&&Ne(n,"leaflet-zoom-animated"),this.options.className&&Ne(n,this.options.className),n.onselectstart=h,n.onmousemove=h,n.onloadeddata=d(this.fire,this,"load"),t){for(var l=n.getElementsByTagName("source"),p=[],v=0;v<l.length;v++)p.push(l[v].src);this._url=l.length>0?p:[n.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(n.style,"objectFit")&&(n.style.objectFit="fill"),n.autoplay=!!this.options.autoplay,n.loop=!!this.options.loop,n.muted=!!this.options.muted,n.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var T=Le("source");T.src=this._url[y],n.appendChild(T)}}});function xh(t,n,l){return new Zo(t,n,l)}var Ko=ya.extend({_initImage:function(){var t=this._image=this._url;Ne(t,"leaflet-image-layer"),this._zoomAnimated&&Ne(t,"leaflet-zoom-animated"),this.options.className&&Ne(t,this.options.className),t.onselectstart=h,t.onmousemove=h}});function gh(t,n,l){return new Ko(t,n,l)}var Qt=Ut.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,n){t&&(t instanceof z||_(t))?(this._latlng=V(t),j(this,n)):(j(this,t),this._source=n),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Tt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Tt(this._container,1),this.bringToFront(),this.options.interactive&&(Ne(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Tt(this._container,0),this._removeTimeout=setTimeout(d(Ge,void 0,this._container),200)):Ge(this._container),this.options.interactive&&(Je(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=V(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ti(this._container),this},bringToBack:function(){return this._map&&si(this._container),this},_prepareOpen:function(t){var n=this._source;if(!n._map)return!1;if(n instanceof as){n=null;var l=this._source._layers;for(var p in l)if(l[p]._map){n=l[p];break}if(!n)return!1;this._source=n}if(!t)if(n.getCenter)t=n.getCenter();else if(n.getLatLng)t=n.getLatLng();else if(n.getBounds)t=n.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,n=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof n=="string")t.innerHTML=n;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(n)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),n=P(this.options.offset),l=this._getAnchor();this._zoomAnimated?st(this._container,t.add(l)):n=n.add(t).add(l);var p=this._containerBottom=-n.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Pe.include({_initOverlay:function(t,n,l,p){var v=n;return v instanceof t||(v=new t(p).setContent(n)),l&&v.setLatLng(l),v}}),Ut.include({_initOverlay:function(t,n,l,p){var v=l;return v instanceof t?(j(v,p),v._source=this):(v=n&&!p?n:new t(p,this),v.setContent(l)),v}});var _a=Qt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Qt.prototype.openOn.call(this,t)},onAdd:function(t){Qt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xs||this._source.on("preclick",Ts))},onRemove:function(t){Qt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xs||this._source.off("preclick",Ts))},getEvents:function(){var t=Qt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",n=this._container=Le("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=Le("div",t+"-content-wrapper",n);if(this._contentNode=Le("div",t+"-content",l),Ii(n),Bn(this._contentNode),je(n,"contextmenu",Ts),this._tipContainer=Le("div",t+"-tip-container",n),this._tip=Le("div",t+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Le("a",t+"-close-button",n);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',je(p,"click",function(v){lt(v),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,n=t.style;n.width="",n.whiteSpace="nowrap";var l=t.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),n.width=l+1+"px",n.whiteSpace="",n.height="";var p=t.offsetHeight,v=this.options.maxHeight,y="leaflet-popup-scrolled";v&&p>v?(n.height=v+"px",Ne(t,y)):Je(t,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),l=this._getAnchor();st(this._container,n.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,n=parseInt(Si(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+n,p=this._containerWidth,v=new ne(this._containerLeft,-l-this._containerBottom);v._add(As(this._container));var y=t.layerPointToContainerPoint(v),T=P(this.options.autoPanPadding),H=P(this.options.autoPanPaddingTopLeft||T),G=P(this.options.autoPanPaddingBottomRight||T),ee=t.getSize(),re=0,fe=0;y.x+p+G.x>ee.x&&(re=y.x+p-ee.x+G.x),y.x-re-H.x<0&&(re=y.x-H.x),y.y+l+G.y>ee.y&&(fe=y.y+l-ee.y+G.y),y.y-fe-H.y<0&&(fe=y.y-H.y),(re||fe)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([re,fe]))}},_getAnchor:function(){return P(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vh=function(t,n){return new _a(t,n)};Pe.mergeOptions({closePopupOnClick:!0}),Pe.include({openPopup:function(t,n,l){return this._initOverlay(_a,t,n,l).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ut.include({bindPopup:function(t,n){return this._popup=this._initOverlay(_a,this._popup,t,n),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof as||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Ps(t);var n=t.layer||t.target;if(this._popup._source===n&&!(n instanceof xs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=n,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ja=Qt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Qt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Qt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Qt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",n=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",n),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var n,l,p=this._map,v=this._container,y=p.latLngToContainerPoint(p.getCenter()),T=p.layerPointToContainerPoint(t),H=this.options.direction,G=v.offsetWidth,ee=v.offsetHeight,re=P(this.options.offset),fe=this._getAnchor();H==="top"?(n=G/2,l=ee):H==="bottom"?(n=G/2,l=0):H==="center"?(n=G/2,l=ee/2):H==="right"?(n=0,l=ee/2):H==="left"?(n=G,l=ee/2):T.x<y.x?(H="right",n=0,l=ee/2):(H="left",n=G+(re.x+fe.x)*2,l=ee/2),t=t.subtract(P(n,l,!0)).add(re).add(fe),Je(v,"leaflet-tooltip-right"),Je(v,"leaflet-tooltip-left"),Je(v,"leaflet-tooltip-top"),Je(v,"leaflet-tooltip-bottom"),Ne(v,"leaflet-tooltip-"+H),st(v,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Tt(this._container,t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(n)},_getAnchor:function(){return P(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bh=function(t,n){return new ja(t,n)};Pe.include({openTooltip:function(t,n,l){return this._initOverlay(ja,t,n,l).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ut.include({bindTooltip:function(t,n){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ja,this._tooltip,t,n),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var n=t?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[n](l),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof as||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var n=typeof t.getElement=="function"&&t.getElement();n&&(je(n,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),je(n,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var n=typeof t.getElement=="function"&&t.getElement();n&&n.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var n=this;this._map.once("moveend",function(){n._openOnceFlag=!1,n._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var n=t.latlng,l,p;this._tooltip.options.sticky&&t.originalEvent&&(l=this._map.mouseEventToContainerPoint(t.originalEvent),p=this._map.containerPointToLayerPoint(l),n=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(n)}});var Yo=ai.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var n=t&&t.tagName==="DIV"?t:document.createElement("div"),l=this.options;if(l.html instanceof Element?(ca(n),n.appendChild(l.html)):n.innerHTML=l.html!==!1?l.html:"",l.bgPos){var p=P(l.bgPos);n.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});function wh(t){return new Yo(t)}ai.Default=Li;var Oi=Ut.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){j(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ge(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ti(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(si(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof ne?t:new ne(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var n=this.getPane().children,l=-t(-1/0,1/0),p=0,v=n.length,y;p<v;p++)y=n[p].style.zIndex,n[p]!==this._container&&y&&(l=t(l,+y));isFinite(l)&&(this.options.zIndex=l+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!oe.ielt9){Tt(this._container,this.options.opacity);var t=+new Date,n=!1,l=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var y=Math.min(1,(t-v.loaded)/200);Tt(v.el,y),y<1?n=!0:(v.active?l=!0:this._onOpaqueTile(v),v.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),n&&(D(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,n=this.options.maxZoom;if(t!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===t?(this._levels[l].el.style.zIndex=n-Math.abs(t-l),this._onUpdateLevel(l)):(Ge(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var p=this._levels[t],v=this._map;return p||(p=this._levels[t]={},p.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=n,p.origin=v.project(v.unproject(v.getPixelOrigin()),t).round(),p.zoom=t,this._setZoomTransform(p,v.getCenter(),v.getZoom()),h(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var t,n,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var p=n.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var n in this._tiles)this._tiles[n].coords.z===t&&this._removeTile(n)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ge(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,n,l,p){var v=Math.floor(t/2),y=Math.floor(n/2),T=l-1,H=new ne(+v,+y);H.z=+T;var G=this._tileCoordsToKey(H),ee=this._tiles[G];return ee&&ee.active?(ee.retain=!0,!0):(ee&&ee.loaded&&(ee.retain=!0),T>p?this._retainParent(v,y,T,p):!1)},_retainChildren:function(t,n,l,p){for(var v=2*t;v<2*t+2;v++)for(var y=2*n;y<2*n+2;y++){var T=new ne(v,y);T.z=l+1;var H=this._tileCoordsToKey(T),G=this._tiles[H];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);l+1<p&&this._retainChildren(v,y,l+1,p)}},_resetView:function(t){var n=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),n,n)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var n=this.options;return n.minNativeZoom!==void 0&&t<n.minNativeZoom?n.minNativeZoom:n.maxNativeZoom!==void 0&&n.maxNativeZoom<t?n.maxNativeZoom:t},_setView:function(t,n,l,p){var v=Math.round(n);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var y=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||y)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(t),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(t,n)},_setZoomTransforms:function(t,n){for(var l in this._levels)this._setZoomTransform(this._levels[l],t,n)},_setZoomTransform:function(t,n,l){var p=this._map.getZoomScale(l,t.zoom),v=t.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(n,l)).round();oe.any3d?Ss(t.el,v,p):st(t.el,v)},_resetGrid:function(){var t=this._map,n=t.options.crs,l=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,n.wrapLng[0]],p).x/l.x),Math.ceil(t.project([0,n.wrapLng[1]],p).x/l.y)],this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([n.wrapLat[0],0],p).y/l.x),Math.ceil(t.project([n.wrapLat[1],0],p).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var n=this._map,l=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),p=n.getZoomScale(l,this._tileZoom),v=n.project(t,this._tileZoom).floor(),y=n.getSize().divideBy(p*2);return new N(v.subtract(y),v.add(y))},_update:function(t){var n=this._map;if(n){var l=this._clampZoom(n.getZoom());if(t===void 0&&(t=n.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(t),v=this._pxBoundsToTileRange(p),y=v.getCenter(),T=[],H=this.options.keepBuffer,G=new N(v.getBottomLeft().subtract([H,-H]),v.getTopRight().add([H,-H]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ee in this._tiles){var re=this._tiles[ee].coords;(re.z!==this._tileZoom||!G.contains(new ne(re.x,re.y)))&&(this._tiles[ee].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(t,l);return}for(var fe=v.min.y;fe<=v.max.y;fe++)for(var Se=v.min.x;Se<=v.max.x;Se++){var ft=new ne(Se,fe);if(ft.z=this._tileZoom,!!this._isValidTile(ft)){var rt=this._tiles[this._tileCoordsToKey(ft)];rt?rt.current=!0:T.push(ft)}}if(T.sort(function(bt,li){return bt.distanceTo(y)-li.distanceTo(y)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var It=document.createDocumentFragment();for(Se=0;Se<T.length;Se++)this._addTile(T[Se],It);this._level.el.appendChild(It)}}}},_isValidTile:function(t){var n=this._map.options.crs;if(!n.infinite){var l=this._globalTileRange;if(!n.wrapLng&&(t.x<l.min.x||t.x>l.max.x)||!n.wrapLat&&(t.y<l.min.y||t.y>l.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(t);return B(this.options.bounds).overlaps(p)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var n=this._map,l=this.getTileSize(),p=t.scaleBy(l),v=p.add(l),y=n.unproject(p,t.z),T=n.unproject(v,t.z);return[y,T]},_tileCoordsToBounds:function(t){var n=this._tileCoordsToNwSe(t),l=new O(n[0],n[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var n=t.split(":"),l=new ne(+n[0],+n[1]);return l.z=+n[2],l},_removeTile:function(t){var n=this._tiles[t];n&&(Ge(n.el),delete this._tiles[t],this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Ne(t,"leaflet-tile");var n=this.getTileSize();t.style.width=n.x+"px",t.style.height=n.y+"px",t.onselectstart=h,t.onmousemove=h,oe.ielt9&&this.options.opacity<1&&Tt(t,this.options.opacity)},_addTile:function(t,n){var l=this._getTilePos(t),p=this._tileCoordsToKey(t),v=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(v),this.createTile.length<2&&U(d(this._tileReady,this,t,null,v)),st(v,l),this._tiles[p]={el:v,coords:t,current:!0},n.appendChild(v),this.fire("tileloadstart",{tile:v,coords:t})},_tileReady:function(t,n,l){n&&this.fire("tileerror",{error:n,tile:l,coords:t});var p=this._tileCoordsToKey(t);l=this._tiles[p],l&&(l.loaded=+new Date,this._map._fadeAnimated?(Tt(l.el,0),D(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),n||(Ne(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),oe.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var n=new ne(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return n.z=t.z,n},_pxBoundsToTileRange:function(t){var n=this.getTileSize();return new N(t.min.unscaleBy(n).floor(),t.max.unscaleBy(n).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function yh(t){return new Oi(t)}var oi=Oi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,n){this._url=t,n=j(this,n),n.detectRetina&&oe.retina&&n.maxZoom>0?(n.tileSize=Math.floor(n.tileSize/2),n.zoomReverse?(n.zoomOffset--,n.minZoom=Math.min(n.maxZoom,n.minZoom+1)):(n.zoomOffset++,n.maxZoom=Math.max(n.minZoom,n.maxZoom-1)),n.minZoom=Math.max(0,n.minZoom)):n.zoomReverse?n.minZoom=Math.min(n.maxZoom,n.minZoom):n.maxZoom=Math.max(n.minZoom,n.maxZoom),typeof n.subdomains=="string"&&(n.subdomains=n.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,n){return this._url===t&&n===void 0&&(n=!0),this._url=t,n||this.redraw(),this},createTile:function(t,n){var l=document.createElement("img");return je(l,"load",d(this._tileOnLoad,this,n,l)),je(l,"error",d(this._tileOnError,this,n,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(t),l},getTileUrl:function(t){var n={r:oe.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=l),n["-y"]=l}return E(this._url,o(n,this.options))},_tileOnLoad:function(t,n){oe.ielt9?setTimeout(d(t,this,null,n),0):t(null,n)},_tileOnError:function(t,n,l){var p=this.options.errorTileUrl;p&&n.getAttribute("src")!==p&&(n.src=p),t(l,n)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,n=this.options.maxZoom,l=this.options.zoomReverse,p=this.options.zoomOffset;return l&&(t=n-t),t+p},_getSubdomain:function(t){var n=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[n]},_abortLoading:function(){var t,n;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(n=this._tiles[t].el,n.onload=h,n.onerror=h,!n.complete)){n.src=S;var l=this._tiles[t].coords;Ge(n),delete this._tiles[t],this.fire("tileabort",{tile:n,coords:l})}},_removeTile:function(t){var n=this._tiles[t];if(n)return n.el.setAttribute("src",S),Oi.prototype._removeTile.call(this,t)},_tileReady:function(t,n,l){if(!(!this._map||l&&l.getAttribute("src")===S))return Oi.prototype._tileReady.call(this,t,n,l)}});function Qo(t,n){return new oi(t,n)}var Xo=oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var l=o({},this.defaultWmsParams);for(var p in n)p in this.options||(l[p]=n[p]);n=j(this,n);var v=n.detectRetina&&oe.retina?2:1,y=this.getTileSize();l.width=y.x*v,l.height=y.y*v,this.wmsParams=l},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var n=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[n]=this._crs.code,oi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var n=this._tileCoordsToNwSe(t),l=this._crs,p=F(l.project(n[0]),l.project(n[1])),v=p.min,y=p.max,T=(this._wmsVersion>=1.3&&this._crs===qo?[v.y,v.x,y.y,y.x]:[v.x,v.y,y.x,y.y]).join(","),H=oi.prototype.getTileUrl.call(this,t);return H+C(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(t,n){return o(this.wmsParams,t),n||this.redraw(),this}});function _h(t,n){return new Xo(t,n)}oi.WMS=Xo,Qo.wms=_h;var os=Ut.extend({options:{padding:.1},initialize:function(t){j(this,t),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ne(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,n){var l=this._map.getZoomScale(n,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,n),y=p.multiplyBy(-l).add(v).subtract(this._map._getNewPixelOrigin(t,n));oe.any3d?Ss(this._container,y,l):st(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,n=this._map.getSize(),l=this._map.containerPointToLayerPoint(n.multiplyBy(-t)).round();this._bounds=new N(l,l.add(n.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jo=os.extend({options:{tolerance:0},getEvents:function(){var t=os.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){os.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");je(t,"mousemove",this._onMouseMove,this),je(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),je(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,Ge(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var n in this._layers)t=this._layers[n],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){os.prototype._update.call(this);var t=this._bounds,n=this._container,l=t.getSize(),p=oe.retina?2:1;st(n,t.min),n.width=p*l.x,n.height=p*l.y,n.style.width=l.x+"px",n.style.height=l.y+"px",oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){os.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[m(t)]=t;var n=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=n),this._drawLast=n,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var n=t._order,l=n.next,p=n.prev;l?l.prev=p:this._drawLast=p,p?p.next=l:this._drawFirst=l,delete t._order,delete this._layers[m(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var n=t.options.dashArray.split(/[, ]+/),l=[],p,v;for(v=0;v<n.length;v++){if(p=Number(n[v]),isNaN(p))return;l.push(p)}t.options._dashArray=l}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var n=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([n,n])),this._redrawBounds.extend(t._pxBounds.max.add([n,n]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var n=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,n.x,n.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,n=this._redrawBounds;if(this._ctx.save(),n){var l=n.getSize();this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)t=p.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,n){if(this._drawing){var l,p,v,y,T=t._parts,H=T.length,G=this._ctx;if(H){for(G.beginPath(),l=0;l<H;l++){for(p=0,v=T[l].length;p<v;p++)y=T[l][p],G[p?"lineTo":"moveTo"](y.x,y.y);n&&G.closePath()}this._fillStroke(G,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var n=t._point,l=this._ctx,p=Math.max(Math.round(t._radius),1),v=(Math.max(Math.round(t._radiusY),1)||p)/p;v!==1&&(l.save(),l.scale(1,v)),l.beginPath(),l.arc(n.x,n.y/v,p,0,Math.PI*2,!1),v!==1&&l.restore(),this._fillStroke(l,t)}},_fillStroke:function(t,n){var l=n.options;l.fill&&(t.globalAlpha=l.fillOpacity,t.fillStyle=l.fillColor||l.color,t.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(t.setLineDash&&t.setLineDash(n.options&&n.options._dashArray||[]),t.globalAlpha=l.opacity,t.lineWidth=l.weight,t.strokeStyle=l.color,t.lineCap=l.lineCap,t.lineJoin=l.lineJoin,t.stroke())},_onClick:function(t){for(var n=this._map.mouseEventToLayerPoint(t),l,p,v=this._drawFirst;v;v=v.next)l=v.layer,l.options.interactive&&l._containsPoint(n)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(l))&&(p=l);this._fireEvent(p?[p]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var n=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,n)}},_handleMouseOut:function(t){var n=this._hoveredLayer;n&&(Je(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,n){if(!this._mouseHoverThrottled){for(var l,p,v=this._drawFirst;v;v=v.next)l=v.layer,l.options.interactive&&l._containsPoint(n)&&(p=l);p!==this._hoveredLayer&&(this._handleMouseOut(t),p&&(Ne(this._container,"leaflet-interactive"),this._fireEvent([p],t,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,n,l){this._map._fireDOMEvent(n,l||n.type,t)},_bringToFront:function(t){var n=t._order;if(n){var l=n.next,p=n.prev;if(l)l.prev=p;else return;p?p.next=l:l&&(this._drawFirst=l),n.prev=this._drawLast,this._drawLast.next=n,n.next=null,this._drawLast=n,this._requestRedraw(t)}},_bringToBack:function(t){var n=t._order;if(n){var l=n.next,p=n.prev;if(p)p.next=l;else return;l?l.prev=p:p&&(this._drawLast=p),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t)}}});function el(t){return oe.canvas?new Jo(t):null}var Di=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),jh={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(os.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var n=t._container=Di("shape");Ne(n,"leaflet-vml-shape "+(this.options.className||"")),n.coordsize="1 1",t._path=Di("path"),n.appendChild(t._path),this._updateStyle(t),this._layers[m(t)]=t},_addPath:function(t){var n=t._container;this._container.appendChild(n),t.options.interactive&&t.addInteractiveTarget(n)},_removePath:function(t){var n=t._container;Ge(n),t.removeInteractiveTarget(n),delete this._layers[m(t)]},_updateStyle:function(t){var n=t._stroke,l=t._fill,p=t.options,v=t._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(n||(n=t._stroke=Di("stroke")),v.appendChild(n),n.weight=p.weight+"px",n.color=p.color,n.opacity=p.opacity,p.dashArray?n.dashStyle=_(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):n.dashStyle="",n.endcap=p.lineCap.replace("butt","flat"),n.joinstyle=p.lineJoin):n&&(v.removeChild(n),t._stroke=null),p.fill?(l||(l=t._fill=Di("fill")),v.appendChild(l),l.color=p.fillColor||p.color,l.opacity=p.fillOpacity):l&&(v.removeChild(l),t._fill=null)},_updateCircle:function(t){var n=t._point.round(),l=Math.round(t._radius),p=Math.round(t._radiusY||l);this._setPath(t,t._empty()?"M0 0":"AL "+n.x+","+n.y+" "+l+","+p+" 0,"+65535*360)},_setPath:function(t,n){t._path.v=n},_bringToFront:function(t){ti(t._container)},_bringToBack:function(t){si(t._container)}},Na=oe.vml?Di:Fe,Bi=os.extend({_initContainer:function(){this._container=Na("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Na("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ge(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){os.prototype._update.call(this);var t=this._bounds,n=t.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(n))&&(this._svgSize=n,l.setAttribute("width",n.x),l.setAttribute("height",n.y)),st(l,t.min),l.setAttribute("viewBox",[t.min.x,t.min.y,n.x,n.y].join(" ")),this.fire("update")}},_initPath:function(t){var n=t._path=Na("path");t.options.className&&Ne(n,t.options.className),t.options.interactive&&Ne(n,"leaflet-interactive"),this._updateStyle(t),this._layers[m(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ge(t._path),t.removeInteractiveTarget(t._path),delete this._layers[m(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var n=t._path,l=t.options;n&&(l.stroke?(n.setAttribute("stroke",l.color),n.setAttribute("stroke-opacity",l.opacity),n.setAttribute("stroke-width",l.weight),n.setAttribute("stroke-linecap",l.lineCap),n.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?n.setAttribute("stroke-dasharray",l.dashArray):n.removeAttribute("stroke-dasharray"),l.dashOffset?n.setAttribute("stroke-dashoffset",l.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),l.fill?(n.setAttribute("fill",l.fillColor||l.color),n.setAttribute("fill-opacity",l.fillOpacity),n.setAttribute("fill-rule",l.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(t,n){this._setPath(t,et(t._parts,n))},_updateCircle:function(t){var n=t._point,l=Math.max(Math.round(t._radius),1),p=Math.max(Math.round(t._radiusY),1)||l,v="a"+l+","+p+" 0 1,0 ",y=t._empty()?"M0 0":"M"+(n.x-l)+","+n.y+v+l*2+",0 "+v+-l*2+",0 ";this._setPath(t,y)},_setPath:function(t,n){t._path.setAttribute("d",n)},_bringToFront:function(t){ti(t._path)},_bringToBack:function(t){si(t._path)}});oe.vml&&Bi.include(jh);function tl(t){return oe.svg||oe.vml?new Bi(t):null}Pe.include({getRenderer:function(t){var n=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this._createRenderer()),this.hasLayer(n)||this.addLayer(n),n},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var n=this._paneRenderers[t];return n===void 0&&(n=this._createRenderer({pane:t}),this._paneRenderers[t]=n),n},_createRenderer:function(t){return this.options.preferCanvas&&el(t)||tl(t)}});var sl=ni.extend({initialize:function(t,n){ni.prototype.initialize.call(this,this._boundsToLatLngs(t),n)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=B(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Nh(t,n){return new sl(t,n)}Bi.create=Na,Bi.pointsToPath=et,rs.geometryToLayer=ga,rs.coordsToLatLng=Wn,rs.coordsToLatLngs=va,rs.latLngToCoords=Zn,rs.latLngsToCoords=ba,rs.getFeature=ri,rs.asFeature=wa,Pe.mergeOptions({boxZoom:!0});var il=Yt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ge(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ai(),Tn(),this._startPoint=this._map.mouseEventToContainerPoint(t),je(document,{contextmenu:Ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),Ne(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var n=new N(this._point,this._startPoint),l=n.getSize();st(this._box,n.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Ge(this._box),Je(this._container,"leaflet-crosshair")),Ti(),Pn(),Ue(document,{contextmenu:Ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var n=new O(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(n).fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pe.addInitHook("addHandler","boxZoom",il),Pe.mergeOptions({doubleClickZoom:!0});var al=Yt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var n=this._map,l=n.getZoom(),p=n.options.zoomDelta,v=t.originalEvent.shiftKey?l-p:l+p;n.options.doubleClickZoom==="center"?n.setZoom(v):n.setZoomAround(t.containerPoint,v)}});Pe.addInitHook("addHandler","doubleClickZoom",al),Pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nl=Yt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new fs(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Ne(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Je(this._map._container,"leaflet-grab"),Je(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var n=B(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(n.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(n.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var n=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(n),this._prunePositions(n)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),n=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=n.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,n){return t-(t-n)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),n=this._offsetLimit;t.x<n.min.x&&(t.x=this._viscousLimit(t.x,n.min.x)),t.y<n.min.y&&(t.y=this._viscousLimit(t.y,n.min.y)),t.x>n.max.x&&(t.x=this._viscousLimit(t.x,n.max.x)),t.y>n.max.y&&(t.y=this._viscousLimit(t.y,n.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,n=Math.round(t/2),l=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-n+l)%t+n-l,y=(p+n+l)%t-n-l,T=Math.abs(v+l)<Math.abs(y+l)?v:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(t){var n=this._map,l=n.options,p=!l.inertia||t.noInertia||this._times.length<2;if(n.fire("dragend",t),p)n.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,T=l.easeLinearity,H=v.multiplyBy(T/y),G=H.distanceTo([0,0]),ee=Math.min(l.inertiaMaxSpeed,G),re=H.multiplyBy(ee/G),fe=ee/(l.inertiaDeceleration*T),Se=re.multiplyBy(-fe/2).round();!Se.x&&!Se.y?n.fire("moveend"):(Se=n._limitOffset(Se,n.options.maxBounds),U(function(){n.panBy(Se,{duration:fe,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});Pe.addInitHook("addHandler","dragging",nl),Pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var rl=Yt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),je(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,n=document.documentElement,l=t.scrollTop||n.scrollTop,p=t.scrollLeft||n.scrollLeft;this._map._container.focus(),window.scrollTo(p,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var n=this._panKeys={},l=this.keyCodes,p,v;for(p=0,v=l.left.length;p<v;p++)n[l.left[p]]=[-1*t,0];for(p=0,v=l.right.length;p<v;p++)n[l.right[p]]=[t,0];for(p=0,v=l.down.length;p<v;p++)n[l.down[p]]=[0,t];for(p=0,v=l.up.length;p<v;p++)n[l.up[p]]=[0,-1*t]},_setZoomDelta:function(t){var n=this._zoomKeys={},l=this.keyCodes,p,v;for(p=0,v=l.zoomIn.length;p<v;p++)n[l.zoomIn[p]]=t;for(p=0,v=l.zoomOut.length;p<v;p++)n[l.zoomOut[p]]=-t},_addHooks:function(){je(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=t.keyCode,l=this._map,p;if(n in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(p=this._panKeys[n],t.shiftKey&&(p=P(p).multiplyBy(3)),l.options.maxBounds&&(p=l._limitOffset(P(p),l.options.maxBounds)),l.options.worldCopyJump){var v=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(p)));l.panTo(v)}else l.panBy(p)}else if(n in this._zoomKeys)l.setZoom(l.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else if(n===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Ps(t)}}});Pe.addInitHook("addHandler","keyboard",rl),Pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ol=Yt.extend({addHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var n=Po(t),l=this._map.options.wheelDebounceTime;this._delta+=n,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var p=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),p),Ps(t)},_performZoom:function(){var t=this._map,n=t.getZoom(),l=this._map.options.zoomSnap||0;t._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,y=l?Math.ceil(v/l)*l:v,T=t._limitZoom(n+(this._delta>0?y:-y))-n;this._delta=0,this._startTime=null,T&&(t.options.scrollWheelZoom==="center"?t.setZoom(n+T):t.setZoomAround(this._lastMousePos,n+T))}});Pe.addInitHook("addHandler","scrollWheelZoom",ol);var kh=600;Pe.mergeOptions({tapHold:oe.touchNative&&oe.safari&&oe.mobile,tapTolerance:15});var ll=Yt.extend({addHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var n=t.touches[0];this._startPos=this._newPos=new ne(n.clientX,n.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(je(document,"touchend",lt),je(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",n))},this),kh),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ue(document,"touchend",lt),Ue(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(t){var n=t.touches[0];this._newPos=new ne(n.clientX,n.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,n){var l=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});l._simulated=!0,n.target.dispatchEvent(l)}});Pe.addInitHook("addHandler","tapHold",ll),Pe.mergeOptions({touchZoom:oe.touch,bounceAtZoomLimits:!0});var cl=Yt.extend({addHooks:function(){Ne(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Je(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(!(!t.touches||t.touches.length!==2||n._animatingZoom||this._zooming)){var l=n.mouseEventToContainerPoint(t.touches[0]),p=n.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),n.options.touchZoom!=="center"&&(this._pinchStartLatLng=n.containerPointToLatLng(l.add(p)._divideBy(2))),this._startDist=l.distanceTo(p),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),lt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var n=this._map,l=n.mouseEventToContainerPoint(t.touches[0]),p=n.mouseEventToContainerPoint(t.touches[1]),v=l.distanceTo(p)/this._startDist;if(this._zoom=n.getScaleZoom(v,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&v<1||this._zoom>n.getMaxZoom()&&v>1)&&(this._zoom=n._limitZoom(this._zoom)),n.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var y=l._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&y.x===0&&y.y===0)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(n._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var T=d(n._move,n,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(T,this,!0),lt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pe.addInitHook("addHandler","touchZoom",cl),Pe.BoxZoom=il,Pe.DoubleClickZoom=al,Pe.Drag=nl,Pe.Keyboard=rl,Pe.ScrollWheelZoom=ol,Pe.TapHold=ll,Pe.TouchZoom=cl,i.Bounds=N,i.Browser=oe,i.CRS=Z,i.Canvas=Jo,i.Circle=Gn,i.CircleMarker=xa,i.Class=J,i.Control=Ft,i.DivIcon=Yo,i.DivOverlay=Qt,i.DomEvent=Hu,i.DomUtil=Uu,i.Draggable=fs,i.Evented=ue,i.FeatureGroup=as,i.GeoJSON=rs,i.GridLayer=Oi,i.Handler=Yt,i.Icon=ai,i.ImageOverlay=ya,i.LatLng=z,i.LatLngBounds=O,i.Layer=Ut,i.LayerGroup=ii,i.LineUtil=sh,i.Map=Pe,i.Marker=fa,i.Mixin=Yu,i.Path=xs,i.Point=ne,i.PolyUtil=Qu,i.Polygon=ni,i.Polyline=ns,i.Popup=_a,i.PosAnimation=Io,i.Projection=ih,i.Rectangle=sl,i.Renderer=os,i.SVG=Bi,i.SVGOverlay=Ko,i.TileLayer=oi,i.Tooltip=ja,i.Transformation=be,i.Util=q,i.VideoOverlay=Zo,i.bind=d,i.bounds=F,i.canvas=el,i.circle=uh,i.circleMarker=dh,i.control=Mi,i.divIcon=wh,i.extend=o,i.featureGroup=oh,i.geoJSON=Wo,i.geoJson=ph,i.gridLayer=yh,i.icon=lh,i.imageOverlay=fh,i.latLng=V,i.latLngBounds=B,i.layerGroup=rh,i.map=qu,i.marker=ch,i.point=P,i.polygon=mh,i.polyline=hh,i.popup=vh,i.rectangle=Nh,i.setOptions=j,i.stamp=m,i.svg=tl,i.svgOverlay=gh,i.tileLayer=Qo,i.tooltip=bh,i.transformation=we,i.version=r,i.videoOverlay=xh;var Ch=window.L;i.noConflict=function(){return window.L=Ch,this},window.L=i}))})(Hi,Hi.exports)),Hi.exports}var ia=f0();const yn=ms(ia);function po(a,s,i){return Object.freeze({instance:a,context:s,container:i})}function fo(a,s){return s==null?function(r,o){const c=k.useRef();return c.current||(c.current=a(r,o)),c}:function(r,o){const c=k.useRef();c.current||(c.current=a(r,o));const d=k.useRef(r),{instance:f}=c.current;return k.useEffect(function(){d.current!==r&&(s(f,r,d.current),d.current=r)},[f,r,o]),c}}function x0(a,s){k.useEffect(function(){return(s.layerContainer??s.map).addLayer(a.instance),function(){s.layerContainer?.removeLayer(a.instance),s.map.removeLayer(a.instance)}},[s,a])}function su(a){return function(i){const r=ho(),o=a(mo(i,r),r);return Xd(r.map,i.attribution),tu(o.current,i.eventHandlers),x0(o.current,r),o}}function g0(a,s){const i=fo(a,s),r=su(i);return d0(r)}function v0(a,s){const i=fo(a),r=m0(i,s);return u0(r)}function b0(a,s){const i=fo(a,s),r=su(i);return h0(r)}function w0(a,s,i){const{opacity:r,zIndex:o}=s;r!=null&&r!==i.opacity&&a.setOpacity(r),o!=null&&o!==i.zIndex&&a.setZIndex(o)}function y0(){return ho().map}function Br(){return Br=Object.assign||function(a){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},Br.apply(this,arguments)}function _0({bounds:a,boundsOptions:s,center:i,children:r,className:o,id:c,placeholder:d,style:f,whenReady:m,zoom:u,...x},h){const[g]=k.useState({className:o,id:c,style:f}),[b,w]=k.useState(null);k.useImperativeHandle(h,()=>b?.map??null,[b]);const j=k.useCallback(A=>{if(A!==null&&b===null){const E=new ia.Map(A,x);i!=null&&u!=null?E.setView(i,u):a!=null&&E.fitBounds(a,s),m!=null&&E.whenReady(m),w(l0(E))}},[]);k.useEffect(()=>()=>{b?.map.remove()},[b]);const C=b?K.createElement(eu,{value:b},r):d??null;return K.createElement("div",Br({},g,{ref:j}),C)}const iu=k.forwardRef(_0),zr=g0(function({position:s,...i},r){const o=new ia.Marker(s,i);return po(o,c0(r,{overlayContainer:o}))},function(s,i,r){i.position!==r.position&&s.setLatLng(i.position),i.icon!=null&&i.icon!==r.icon&&s.setIcon(i.icon),i.zIndexOffset!=null&&i.zIndexOffset!==r.zIndexOffset&&s.setZIndexOffset(i.zIndexOffset),i.opacity!=null&&i.opacity!==r.opacity&&s.setOpacity(i.opacity),s.dragging!=null&&i.draggable!==r.draggable&&(i.draggable===!0?s.dragging.enable():s.dragging.disable())}),Fr=v0(function(s,i){const r=new ia.Popup(s,i.overlayContainer);return po(r,i)},function(s,i,{position:r},o){k.useEffect(function(){const{instance:d}=s;function f(u){u.popup===d&&(d.update(),o(!0))}function m(u){u.popup===d&&o(!1)}return i.map.on({popupopen:f,popupclose:m}),i.overlayContainer==null?(r!=null&&d.setLatLng(r),d.openOn(i.map)):i.overlayContainer.bindPopup(d),function(){i.map.off({popupopen:f,popupclose:m}),i.overlayContainer?.unbindPopup(),i.map.removeLayer(d)}},[s,i,o,r])}),au=b0(function({url:s,...i},r){const o=new ia.TileLayer(s,mo(i,r));return po(o,r)},function(s,i,r){w0(s,i,r);const{url:o}=i;o!=null&&o!==r.url&&s.setUrl(o)}),j0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",N0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",k0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";delete yn.Icon.Default.prototype._getIconUrl;yn.Icon.Default.mergeOptions({iconRetinaUrl:j0,iconUrl:N0,shadowUrl:k0});function C0(){const[a,s]=k.useState("MAP"),[i,r]=k.useState([]);return k.useEffect(()=>{const o=He.currentUser;if(!o)return;const c=We(ze(le,"drivers"),Ie("restaurantId","==",o.uid)),d=Et(c,f=>{r(f.docs.map(m=>({id:m.id,...m.data()})))});return()=>d()},[]),e.jsxs("div",{className:"h-screen bg-[#0a0a0a] flex flex-col text-white",children:[e.jsxs("header",{className:"h-16 bg-[#121212] border-b border-white/5 px-6 flex items-center justify-between shrink-0 z-50",children:[e.jsxs(Ve,{to:"/dashboard",className:"flex items-center gap-2 text-white font-bold hover:text-primary",children:[e.jsx(Zs,{size:20})," Voltar"]}),e.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>s("LIST"),className:`px-4 py-1 rounded text-xs font-bold transition-all ${a==="LIST"?"bg-white text-black":"text-white"}`,children:"Lista"}),e.jsx("button",{onClick:()=>s("MAP"),className:`px-4 py-1 rounded text-xs font-bold transition-all ${a==="MAP"?"bg-white text-black":"text-white"}`,children:"Mapa"})]})]}),e.jsx("div",{className:"flex-1 relative overflow-hidden",children:a==="MAP"?e.jsx("div",{style:{height:"100%",width:"100%"},children:e.jsxs(iu,{center:[-23.5505,-46.6333],zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(au,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),i.map(o=>o.location&&e.jsx(zr,{position:[o.location.lat,o.location.lng],children:e.jsx(Fr,{children:e.jsxs("div",{className:"text-black",children:[e.jsx("strong",{children:o.name}),e.jsx("br",{}),"Status: ",o.currentStatus]})})},o.id))]})}):e.jsxs("div",{className:"p-8 text-white overflow-y-auto h-full",children:[e.jsx("h2",{className:"font-bold text-xl mb-4",children:"Lista de Motoboys"}),i.length===0&&e.jsx("p",{className:"text-white/40",children:"Nenhum motoboy encontrado."}),i.map(o=>e.jsxs("div",{className:"bg-[#1a1a1a] p-4 rounded-xl border border-white/10 mb-2 flex justify-between items-center",children:[e.jsx("span",{className:"font-bold",children:o.name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded font-bold ${o.currentStatus==="busy"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:o.currentStatus==="busy"?"Ocupado":"Livre"})]},o.id))]})})]})}var E0=Object.defineProperty,cn=Object.getOwnPropertySymbols,nu=Object.prototype.hasOwnProperty,ru=Object.prototype.propertyIsEnumerable,Nc=(a,s,i)=>s in a?E0(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i,Ur=(a,s)=>{for(var i in s||(s={}))nu.call(s,i)&&Nc(a,i,s[i]);if(cn)for(var i of cn(s))ru.call(s,i)&&Nc(a,i,s[i]);return a},Vr=(a,s)=>{var i={};for(var r in a)nu.call(a,r)&&s.indexOf(r)<0&&(i[r]=a[r]);if(a!=null&&cn)for(var r of cn(a))s.indexOf(r)<0&&ru.call(a,r)&&(i[r]=a[r]);return i};var Ws;(a=>{const s=class Ae{constructor(m,u,x,h){if(this.version=m,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],m<Ae.MIN_VERSION||m>Ae.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=m*4+17;let g=[];for(let w=0;w<this.size;w++)g.push(!1);for(let w=0;w<this.size;w++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(x);if(this.drawCodewords(b),h==-1){let w=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const C=this.getPenaltyScore();C<w&&(h=j,w=C),this.applyMask(j)}}o(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(m,u){const x=a.QrSegment.makeSegments(m);return Ae.encodeSegments(x,u)}static encodeBinary(m,u){const x=a.QrSegment.makeBytes(m);return Ae.encodeSegments([x],u)}static encodeSegments(m,u,x=1,h=40,g=-1,b=!0){if(!(Ae.MIN_VERSION<=x&&x<=h&&h<=Ae.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let w,j;for(w=x;;w++){const _=Ae.getNumDataCodewords(w,u)*8,I=d.getTotalBits(m,w);if(I<=_){j=I;break}if(w>=h)throw new RangeError("Data too long")}for(const _ of[Ae.Ecc.MEDIUM,Ae.Ecc.QUARTILE,Ae.Ecc.HIGH])b&&j<=Ae.getNumDataCodewords(w,_)*8&&(u=_);let C=[];for(const _ of m){i(_.mode.modeBits,4,C),i(_.numChars,_.mode.numCharCountBits(w),C);for(const I of _.getData())C.push(I)}o(C.length==j);const A=Ae.getNumDataCodewords(w,u)*8;o(C.length<=A),i(0,Math.min(4,A-C.length),C),i(0,(8-C.length%8)%8,C),o(C.length%8==0);for(let _=236;C.length<A;_^=253)i(_,8,C);let E=[];for(;E.length*8<C.length;)E.push(0);return C.forEach((_,I)=>E[I>>>3]|=_<<7-(I&7)),new Ae(w,u,E,g)}getModule(m,u){return 0<=m&&m<this.size&&0<=u&&u<this.size&&this.modules[u][m]}getModules(){return this.modules}drawFunctionPatterns(){for(let x=0;x<this.size;x++)this.setFunctionModule(6,x,x%2==0),this.setFunctionModule(x,6,x%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const m=this.getAlignmentPatternPositions(),u=m.length;for(let x=0;x<u;x++)for(let h=0;h<u;h++)x==0&&h==0||x==0&&h==u-1||x==u-1&&h==0||this.drawAlignmentPattern(m[x],m[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(m){const u=this.errorCorrectionLevel.formatBits<<3|m;let x=u;for(let g=0;g<10;g++)x=x<<1^(x>>>9)*1335;const h=(u<<10|x)^21522;o(h>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,r(h,g));this.setFunctionModule(8,7,r(h,6)),this.setFunctionModule(8,8,r(h,7)),this.setFunctionModule(7,8,r(h,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,r(h,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,r(h,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,r(h,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let m=this.version;for(let x=0;x<12;x++)m=m<<1^(m>>>11)*7973;const u=this.version<<12|m;o(u>>>18==0);for(let x=0;x<18;x++){const h=r(u,x),g=this.size-11+x%3,b=Math.floor(x/3);this.setFunctionModule(g,b,h),this.setFunctionModule(b,g,h)}}drawFinderPattern(m,u){for(let x=-4;x<=4;x++)for(let h=-4;h<=4;h++){const g=Math.max(Math.abs(h),Math.abs(x)),b=m+h,w=u+x;0<=b&&b<this.size&&0<=w&&w<this.size&&this.setFunctionModule(b,w,g!=2&&g!=4)}}drawAlignmentPattern(m,u){for(let x=-2;x<=2;x++)for(let h=-2;h<=2;h++)this.setFunctionModule(m+h,u+x,Math.max(Math.abs(h),Math.abs(x))!=1)}setFunctionModule(m,u,x){this.modules[u][m]=x,this.isFunction[u][m]=!0}addEccAndInterleave(m){const u=this.version,x=this.errorCorrectionLevel;if(m.length!=Ae.getNumDataCodewords(u,x))throw new RangeError("Invalid argument");const h=Ae.NUM_ERROR_CORRECTION_BLOCKS[x.ordinal][u],g=Ae.ECC_CODEWORDS_PER_BLOCK[x.ordinal][u],b=Math.floor(Ae.getNumRawDataModules(u)/8),w=h-b%h,j=Math.floor(b/h);let C=[];const A=Ae.reedSolomonComputeDivisor(g);for(let _=0,I=0;_<h;_++){let S=m.slice(I,I+j-g+(_<w?0:1));I+=S.length;const R=Ae.reedSolomonComputeRemainder(S,A);_<w&&S.push(0),C.push(S.concat(R))}let E=[];for(let _=0;_<C[0].length;_++)C.forEach((I,S)=>{(_!=j-g||S>=w)&&E.push(I[_])});return o(E.length==b),E}drawCodewords(m){if(m.length!=Math.floor(Ae.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let x=this.size-1;x>=1;x-=2){x==6&&(x=5);for(let h=0;h<this.size;h++)for(let g=0;g<2;g++){const b=x-g,j=(x+1&2)==0?this.size-1-h:h;!this.isFunction[j][b]&&u<m.length*8&&(this.modules[j][b]=r(m[u>>>3],7-(u&7)),u++)}}o(u==m.length*8)}applyMask(m){if(m<0||m>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let x=0;x<this.size;x++){let h;switch(m){case 0:h=(x+u)%2==0;break;case 1:h=u%2==0;break;case 2:h=x%3==0;break;case 3:h=(x+u)%3==0;break;case 4:h=(Math.floor(x/3)+Math.floor(u/2))%2==0;break;case 5:h=x*u%2+x*u%3==0;break;case 6:h=(x*u%2+x*u%3)%2==0;break;case 7:h=((x+u)%2+x*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][x]&&h&&(this.modules[u][x]=!this.modules[u][x])}}getPenaltyScore(){let m=0;for(let g=0;g<this.size;g++){let b=!1,w=0,j=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[g][C]==b?(w++,w==5?m+=Ae.PENALTY_N1:w>5&&m++):(this.finderPenaltyAddHistory(w,j),b||(m+=this.finderPenaltyCountPatterns(j)*Ae.PENALTY_N3),b=this.modules[g][C],w=1);m+=this.finderPenaltyTerminateAndCount(b,w,j)*Ae.PENALTY_N3}for(let g=0;g<this.size;g++){let b=!1,w=0,j=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][g]==b?(w++,w==5?m+=Ae.PENALTY_N1:w>5&&m++):(this.finderPenaltyAddHistory(w,j),b||(m+=this.finderPenaltyCountPatterns(j)*Ae.PENALTY_N3),b=this.modules[C][g],w=1);m+=this.finderPenaltyTerminateAndCount(b,w,j)*Ae.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let b=0;b<this.size-1;b++){const w=this.modules[g][b];w==this.modules[g][b+1]&&w==this.modules[g+1][b]&&w==this.modules[g+1][b+1]&&(m+=Ae.PENALTY_N2)}let u=0;for(const g of this.modules)u=g.reduce((b,w)=>b+(w?1:0),u);const x=this.size*this.size,h=Math.ceil(Math.abs(u*20-x*10)/x)-1;return o(0<=h&&h<=9),m+=h*Ae.PENALTY_N4,o(0<=m&&m<=2568888),m}getAlignmentPatternPositions(){if(this.version==1)return[];{const m=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(m*2-2))*2;let x=[6];for(let h=this.size-7;x.length<m;h-=u)x.splice(1,0,h);return x}}static getNumRawDataModules(m){if(m<Ae.MIN_VERSION||m>Ae.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*m+128)*m+64;if(m>=2){const x=Math.floor(m/7)+2;u-=(25*x-10)*x-55,m>=7&&(u-=36)}return o(208<=u&&u<=29648),u}static getNumDataCodewords(m,u){return Math.floor(Ae.getNumRawDataModules(m)/8)-Ae.ECC_CODEWORDS_PER_BLOCK[u.ordinal][m]*Ae.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][m]}static reedSolomonComputeDivisor(m){if(m<1||m>255)throw new RangeError("Degree out of range");let u=[];for(let h=0;h<m-1;h++)u.push(0);u.push(1);let x=1;for(let h=0;h<m;h++){for(let g=0;g<u.length;g++)u[g]=Ae.reedSolomonMultiply(u[g],x),g+1<u.length&&(u[g]^=u[g+1]);x=Ae.reedSolomonMultiply(x,2)}return u}static reedSolomonComputeRemainder(m,u){let x=u.map(h=>0);for(const h of m){const g=h^x.shift();x.push(0),u.forEach((b,w)=>x[w]^=Ae.reedSolomonMultiply(b,g))}return x}static reedSolomonMultiply(m,u){if(m>>>8||u>>>8)throw new RangeError("Byte out of range");let x=0;for(let h=7;h>=0;h--)x=x<<1^(x>>>7)*285,x^=(u>>>h&1)*m;return o(x>>>8==0),x}finderPenaltyCountPatterns(m){const u=m[1];o(u<=this.size*3);const x=u>0&&m[2]==u&&m[3]==u*3&&m[4]==u&&m[5]==u;return(x&&m[0]>=u*4&&m[6]>=u?1:0)+(x&&m[6]>=u*4&&m[0]>=u?1:0)}finderPenaltyTerminateAndCount(m,u,x){return m&&(this.finderPenaltyAddHistory(u,x),u=0),u+=this.size,this.finderPenaltyAddHistory(u,x),this.finderPenaltyCountPatterns(x)}finderPenaltyAddHistory(m,u){u[0]==0&&(m+=this.size),u.pop(),u.unshift(m)}};s.MIN_VERSION=1,s.MAX_VERSION=40,s.PENALTY_N1=3,s.PENALTY_N2=3,s.PENALTY_N3=40,s.PENALTY_N4=10,s.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],s.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=s;function i(f,m,u){if(m<0||m>31||f>>>m)throw new RangeError("Value out of range");for(let x=m-1;x>=0;x--)u.push(f>>>x&1)}function r(f,m){return(f>>>m&1)!=0}function o(f){if(!f)throw new Error("Assertion error")}const c=class Ke{constructor(m,u,x){if(this.mode=m,this.numChars=u,this.bitData=x,u<0)throw new RangeError("Invalid argument");this.bitData=x.slice()}static makeBytes(m){let u=[];for(const x of m)i(x,8,u);return new Ke(Ke.Mode.BYTE,m.length,u)}static makeNumeric(m){if(!Ke.isNumeric(m))throw new RangeError("String contains non-numeric characters");let u=[];for(let x=0;x<m.length;){const h=Math.min(m.length-x,3);i(parseInt(m.substring(x,x+h),10),h*3+1,u),x+=h}return new Ke(Ke.Mode.NUMERIC,m.length,u)}static makeAlphanumeric(m){if(!Ke.isAlphanumeric(m))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],x;for(x=0;x+2<=m.length;x+=2){let h=Ke.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x))*45;h+=Ke.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x+1)),i(h,11,u)}return x<m.length&&i(Ke.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x)),6,u),new Ke(Ke.Mode.ALPHANUMERIC,m.length,u)}static makeSegments(m){return m==""?[]:Ke.isNumeric(m)?[Ke.makeNumeric(m)]:Ke.isAlphanumeric(m)?[Ke.makeAlphanumeric(m)]:[Ke.makeBytes(Ke.toUtf8ByteArray(m))]}static makeEci(m){let u=[];if(m<0)throw new RangeError("ECI assignment value out of range");if(m<128)i(m,8,u);else if(m<16384)i(2,2,u),i(m,14,u);else if(m<1e6)i(6,3,u),i(m,21,u);else throw new RangeError("ECI assignment value out of range");return new Ke(Ke.Mode.ECI,0,u)}static isNumeric(m){return Ke.NUMERIC_REGEX.test(m)}static isAlphanumeric(m){return Ke.ALPHANUMERIC_REGEX.test(m)}getData(){return this.bitData.slice()}static getTotalBits(m,u){let x=0;for(const h of m){const g=h.mode.numCharCountBits(u);if(h.numChars>=1<<g)return 1/0;x+=4+g+h.bitData.length}return x}static toUtf8ByteArray(m){m=encodeURI(m);let u=[];for(let x=0;x<m.length;x++)m.charAt(x)!="%"?u.push(m.charCodeAt(x)):(u.push(parseInt(m.substring(x+1,x+3),16)),x+=2);return u}};c.NUMERIC_REGEX=/^[0-9]*$/,c.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,c.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let d=c;a.QrSegment=c})(Ws||(Ws={}));(a=>{(s=>{const i=class{constructor(o,c){this.ordinal=o,this.formatBits=c}};i.LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),s.Ecc=i})(a.QrCode||(a.QrCode={}))})(Ws||(Ws={}));(a=>{(s=>{const i=class{constructor(o,c){this.modeBits=o,this.numBitsCharCount=c}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};i.NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),s.Mode=i})(a.QrSegment||(a.QrSegment={}))})(Ws||(Ws={}));var fi=Ws;var S0={L:fi.QrCode.Ecc.LOW,M:fi.QrCode.Ecc.MEDIUM,Q:fi.QrCode.Ecc.QUARTILE,H:fi.QrCode.Ecc.HIGH},ou=128,lu="L",cu="#FFFFFF",du="#000000",uu=!1,hu=1,A0=4,T0=0,P0=.1;function mu(a,s=0){const i=[];return a.forEach(function(r,o){let c=null;r.forEach(function(d,f){if(!d&&c!==null){i.push(`M${c+s} ${o+s}h${f-c}v1H${c+s}z`),c=null;return}if(f===r.length-1){if(!d)return;c===null?i.push(`M${f+s},${o+s} h1v1H${f+s}z`):i.push(`M${c+s},${o+s} h${f+1-c}v1H${c+s}z`);return}d&&c===null&&(c=f)})}),i.join("")}function pu(a,s){return a.slice().map((i,r)=>r<s.y||r>=s.y+s.h?i:i.map((o,c)=>c<s.x||c>=s.x+s.w?o:!1))}function I0(a,s,i,r){if(r==null)return null;const o=a.length+i*2,c=Math.floor(s*P0),d=o/s,f=(r.width||c)*d,m=(r.height||c)*d,u=r.x==null?a.length/2-f/2:r.x*d,x=r.y==null?a.length/2-m/2:r.y*d,h=r.opacity==null?1:r.opacity;let g=null;if(r.excavate){let w=Math.floor(u),j=Math.floor(x),C=Math.ceil(f+u-w),A=Math.ceil(m+x-j);g={x:w,y:j,w:C,h:A}}const b=r.crossOrigin;return{x:u,y:x,h:m,w:f,excavation:g,opacity:h,crossOrigin:b}}function M0(a,s){return s!=null?Math.max(Math.floor(s),0):a?A0:T0}function fu({value:a,level:s,minVersion:i,includeMargin:r,marginSize:o,imageSettings:c,size:d,boostLevel:f}){let m=K.useMemo(()=>{const w=(Array.isArray(a)?a:[a]).reduce((j,C)=>(j.push(...fi.QrSegment.makeSegments(C)),j),[]);return fi.QrCode.encodeSegments(w,S0[s],i,void 0,void 0,f)},[a,s,i,f]);const{cells:u,margin:x,numCells:h,calculatedImageSettings:g}=K.useMemo(()=>{let b=m.getModules();const w=M0(r,o),j=b.length+w*2,C=I0(b,d,w,c);return{cells:b,margin:w,numCells:j,calculatedImageSettings:C}},[m,d,c,r,o]);return{qrcode:m,margin:x,cells:u,numCells:h,calculatedImageSettings:g}}var R0=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),L0=K.forwardRef(function(s,i){const r=s,{value:o,size:c=ou,level:d=lu,bgColor:f=cu,fgColor:m=du,includeMargin:u=uu,minVersion:x=hu,boostLevel:h,marginSize:g,imageSettings:b}=r,j=Vr(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=j,A=Vr(j,["style"]),E=b?.src,_=K.useRef(null),I=K.useRef(null),S=K.useCallback(J=>{_.current=J,typeof i=="function"?i(J):i&&(i.current=J)},[i]),[R,$]=K.useState(!1),{margin:W,cells:ae,numCells:M,calculatedImageSettings:U}=fu({value:o,level:d,minVersion:x,boostLevel:h,includeMargin:u,marginSize:g,imageSettings:b,size:c});K.useEffect(()=>{if(_.current!=null){const J=_.current,se=J.getContext("2d");if(!se)return;let te=ae;const ue=I.current,ne=U!=null&&ue!==null&&ue.complete&&ue.naturalHeight!==0&&ue.naturalWidth!==0;ne&&U.excavation!=null&&(te=pu(ae,U.excavation));const Ce=window.devicePixelRatio||1;J.height=J.width=c*Ce;const P=c/M*Ce;se.scale(P,P),se.fillStyle=f,se.fillRect(0,0,M,M),se.fillStyle=m,R0?se.fill(new Path2D(mu(te,W))):ae.forEach(function(N,F){N.forEach(function(O,B){O&&se.fillRect(B+W,F+W,1,1)})}),U&&(se.globalAlpha=U.opacity),ne&&se.drawImage(ue,U.x+W,U.y+W,U.w,U.h)}}),K.useEffect(()=>{$(!1)},[E]);const D=Ur({height:c,width:c},C);let q=null;return E!=null&&(q=K.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{$(!0)},ref:I,crossOrigin:U?.crossOrigin})),K.createElement(K.Fragment,null,K.createElement("canvas",Ur({style:D,height:c,width:c,ref:S,role:"img"},A)),q)});L0.displayName="QRCodeCanvas";var xu=K.forwardRef(function(s,i){const r=s,{value:o,size:c=ou,level:d=lu,bgColor:f=cu,fgColor:m=du,includeMargin:u=uu,minVersion:x=hu,boostLevel:h,title:g,marginSize:b,imageSettings:w}=r,j=Vr(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:A,numCells:E,calculatedImageSettings:_}=fu({value:o,level:d,minVersion:x,boostLevel:h,includeMargin:u,marginSize:b,imageSettings:w,size:c});let I=A,S=null;w!=null&&_!=null&&(_.excavation!=null&&(I=pu(A,_.excavation)),S=K.createElement("image",{href:w.src,height:_.h,width:_.w,x:_.x+C,y:_.y+C,preserveAspectRatio:"none",opacity:_.opacity,crossOrigin:_.crossOrigin}));const R=mu(I,C);return K.createElement("svg",Ur({height:c,width:c,viewBox:`0 0 ${E} ${E}`,ref:i,role:"img"},j),!!g&&K.createElement("title",null,g),K.createElement("path",{fill:f,d:`M0,0 h${E}v${E}H0z`,shapeRendering:"crispEdges"}),K.createElement("path",{fill:m,d:R,shapeRendering:"crispEdges"}),S)});xu.displayName="QRCodeSVG";const O0=({order:a})=>{const s=`https://emprata.ai/menu/${a.restaurantId}`;return e.jsxs("div",{className:"w-[80mm] p-2 font-mono text-black text-xs leading-tight",children:[e.jsxs("div",{className:"text-center border-b border-black pb-2 mb-2",children:[e.jsx("h1",{className:"text-lg font-black uppercase",children:"EmprataAI"}),e.jsxs("p",{children:["Senha: #",a.id.slice(-4).toUpperCase()]}),e.jsx("p",{children:new Date().toLocaleString()})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"font-bold text-sm",children:a.customer.name}),e.jsxs("p",{children:["Origem: ",a.source||"App Prprio"]})]}),e.jsx("div",{className:"border-b border-black pb-2 mb-2",children:a.items.map((i,r)=>e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsxs("span",{className:"font-bold w-6",children:[i.quantity,"x"]}),e.jsx("span",{className:"flex-1",children:i.name}),e.jsxs("span",{children:["R$ ",(i.price*i.quantity).toFixed(2)]})]},r))}),e.jsx("div",{className:"text-right font-bold text-sm mb-4",children:e.jsxs("p",{children:["Total: R$ ",a.financials?.total?.toFixed(2)||a.total?.toFixed(2)]})}),a.source!=="APP_PROPRIO"&&e.jsxs("div",{className:"border-2 border-dashed border-black p-2 text-center rounded-lg mt-4",children:[e.jsx("p",{className:"font-bold text-sm mb-1",children:"Ganhe 10% OFF no prximo!"}),e.jsx("p",{className:"text-[10px] mb-2",children:"Escaneie e pea direto pelo nosso App:"}),e.jsx("div",{className:"flex justify-center my-2",children:e.jsx(xu,{value:s,size:100})}),e.jsx("p",{className:"text-[10px] font-bold",children:"emprata.ai/menu/seurestaurante"})]}),e.jsx("div",{className:"text-center text-[10px] mt-4",children:"Powered by Emprata.ai"})]})};function kc(){const[a,s]=k.useState([]),[i,r]=k.useState([]),[o,c]=k.useState(null),[d,f]=k.useState(null),m=k.useRef(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3")),u=k.useRef(!0),x=k.useRef(0);k.useEffect(()=>{const w=He.currentUser;if(!w)return;const j=We(ze(le,"orders"),Ie("restaurantId","==",w.uid),Ie("status","in",["PENDING","pending","PREPARING","preparing","READY","ready"]),Ks("createdAt","asc")),C=Et(j,A=>{const E=[],_=[];A.docs.forEach(I=>{const S={id:I.id,...I.data()},R=S.status?.toUpperCase();R==="PENDING"?E.push(S):R==="PREPARING"&&_.push(S)}),!u.current&&E.length>x.current&&(m.current.play().catch(()=>{}),X.info(" Novo pedido na cozinha!")),x.current=E.length,s(E),r(_),u.current=!1});return()=>C()},[]);const h=async(w,j)=>{c(w);try{await ut(Te(le,"orders",w),{status:j,...j==="READY"?{kitchenFinishedAt:xt()}:{},updatedAt:xt()}),j==="READY"&&X.success("Pedido enviado para expedio!")}catch(C){console.error(C),X.error("Erro ao atualizar. Tente novamente.")}finally{c(null)}},g=w=>{f(w),setTimeout(()=>{window.print(),f(null)},500)},b=w=>{if(!w)return"0m";const j=w.toDate?w.toDate().getTime():new Date(w).getTime();return`${Math.floor((Date.now()-j)/6e4)}m`};return e.jsxs("div",{className:"min-h-screen bg-[#101010] text-white p-4",children:[d&&e.jsx("div",{className:"hidden print:block fixed top-0 left-0 bg-white text-black w-full h-full z-[9999]",children:e.jsx(O0,{order:d})}),e.jsxs("header",{className:"flex items-center justify-between mb-6 p-4 bg-[#1a1a1a] rounded-2xl border border-white/5 shadow-xl print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-500/10 rounded-xl text-orange-500 border border-orange-500/20",children:e.jsx(ot,{size:32})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-black uppercase tracking-tighter flex items-center gap-2",children:["Cozinha ",e.jsx("span",{className:"text-orange-500",children:"Inteligente"}),e.jsx("span",{className:"text-[10px] bg-white/10 px-2 py-0.5 rounded text-white/40",children:"V2.0"})]}),e.jsxs("p",{className:"text-xs text-white/40 font-bold flex items-center gap-1",children:[e.jsx(Vh,{size:10})," Sistema de som ativo"]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-3xl font-black text-white",children:a.length}),e.jsx("span",{className:"text-[10px] text-white/40 uppercase font-bold",children:"A Fazer"})]}),e.jsx("div",{className:"w-px bg-white/10"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-3xl font-black text-orange-500",children:i.length}),e.jsx("span",{className:"text-[10px] text-orange-500/60 uppercase font-bold",children:"No Fogo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-160px)] print:hidden",children:[e.jsxs("div",{className:"bg-[#0a0a0a] rounded-3xl border border-white/5 p-4 flex flex-col shadow-inner",children:[e.jsxs("h2",{className:"text-sm font-black uppercase mb-4 flex items-center gap-2 text-white/60 tracking-widest",children:[e.jsx($r,{className:"w-4 h-4 text-blue-500"})," Fila de Pedidos"]}),e.jsx("div",{className:"space-y-3 overflow-y-auto flex-1 pr-2",children:e.jsxs(Be,{mode:"popLayout",children:[a.length===0&&e.jsxs("div",{className:"text-center py-20 opacity-30",children:[e.jsx(Hh,{size:48,className:"mx-auto mb-4"}),e.jsx("p",{children:"Tudo limpo por aqui, Chef!"})]}),a.map(w=>e.jsxs(Q.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,x:-50},className:"bg-[#18181b] p-0 rounded-xl border border-white/5 overflow-hidden group hover:border-blue-500/50 transition-all relative",children:[w.paymentStatus==="PAID"&&e.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-black text-[10px] font-black px-2 py-1 rounded shadow-lg animate-bounce z-20",children:" PAGO (PIX)"}),e.jsxs("div",{className:"p-4 flex justify-between items-start bg-gradient-to-r from-blue-500/5 to-transparent",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-bold text-lg text-white",children:w.customer.name}),e.jsxs("span",{className:"text-[10px] font-mono text-white/30",children:["#",w.id.slice(-4)]})]}),e.jsxs("div",{className:"flex gap-2",children:[w.deliveryType==="DINE_IN"?e.jsxs("span",{className:"bg-purple-500/20 text-purple-400 text-[10px] px-2 py-0.5 rounded font-bold uppercase",children:["Mesa ",w.tableNumber]}):e.jsx("span",{className:"bg-green-500/20 text-green-400 text-[10px] px-2 py-0.5 rounded font-bold uppercase",children:w.source||"Delivery"}),e.jsxs("span",{className:"bg-white/5 text-white/60 text-[10px] px-2 py-0.5 rounded font-bold uppercase flex items-center gap-1",children:[e.jsx(ml,{size:10})," ",b(w.createdAt)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(w),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-white/60 transition-colors",title:"Imprimir Ticket",children:e.jsx(pl,{size:18})}),e.jsx("button",{onClick:()=>h(w.id,"PREPARING"),disabled:o===w.id,className:"bg-blue-600 hover:bg-blue-500 text-white px-5 py-3 rounded-xl font-bold text-xs uppercase tracking-wider shadow-lg shadow-blue-900/20 transition-all active:scale-95 disabled:opacity-50",children:o===w.id?"...":"Iniciar"})]})]}),e.jsxs("div",{className:"p-4 border-t border-white/5 bg-black/20",children:[e.jsx("ul",{className:"space-y-2",children:w.items.map((j,C)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsxs("span",{className:"font-black text-blue-400 bg-blue-400/10 px-1.5 rounded text-sm",children:[j.quantity,"x"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-white/90 block",children:j.name}),j.notes&&e.jsxs("span",{className:"text-xs text-red-400 font-bold block mt-0.5",children:[" ",j.notes]}),j.options&&j.options.length>0&&e.jsxs("span",{className:"text-[10px] text-white/40 block",children:["+ ",j.options.map(A=>A.name).join(", ")]})]})]},C))}),w.notes&&e.jsxs("div",{className:"mt-3 p-2 bg-yellow-500/10 border border-yellow-500/20 rounded text-xs text-yellow-200",children:[" ",w.notes]})]})]},w.id))]})})]}),e.jsxs("div",{className:"bg-[#0a0a0a] rounded-3xl border border-white/5 p-4 flex flex-col shadow-inner",children:[e.jsxs("h2",{className:"text-sm font-black uppercase mb-4 flex items-center gap-2 text-white/60 tracking-widest",children:[e.jsx(Er,{className:"w-4 h-4 text-orange-500"})," Em Preparo"]}),e.jsx("div",{className:"space-y-3 overflow-y-auto flex-1 pr-2",children:e.jsx(Be,{mode:"popLayout",children:i.map(w=>e.jsxs(Q.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,x:50},className:"bg-[#18181b] rounded-xl border-l-4 border-orange-500 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-5 pointer-events-none",children:e.jsx(Er,{size:100})}),e.jsxs("div",{className:"p-5 flex justify-between items-start relative z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:w.customer.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-orange-500 text-xs font-bold uppercase flex items-center gap-1 bg-orange-500/10 px-2 py-1 rounded",children:[e.jsx(Hs,{size:12})," ",b(w.createdAt)]}),e.jsxs("span",{className:"text-white/30 text-xs font-mono",children:[w.items.reduce((j,C)=>j+C.quantity,0)," itens"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(w),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-white/60 transition-colors",title:"Imprimir Ticket",children:e.jsx(pl,{size:18})}),e.jsxs("button",{onClick:()=>h(w.id,"READY"),disabled:o===w.id,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-4 rounded-xl font-bold text-sm uppercase tracking-wider shadow-lg shadow-green-900/20 transition-all active:scale-95 flex items-center gap-2 disabled:opacity-50",children:[o===w.id?e.jsx(ml,{className:"animate-spin"}):e.jsx(qs,{size:18}),e.jsx("span",{children:"Pronto"})]})]})]}),e.jsx("div",{className:"px-5 pb-5",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:w.items.map((j,C)=>e.jsxs("span",{className:"bg-white/5 border border-white/10 px-3 py-1.5 rounded-lg text-sm font-medium text-white/80",children:[e.jsxs("span",{className:"text-orange-500 font-bold mr-1",children:[j.quantity,"x"]})," ",j.name]},C))})})]},w.id))})})]})]})]})}var hi={},cr,Cc;function gu(){return Cc||(Cc=1,cr={L:1,M:0,Q:3,H:2}),cr}var dr,Ec;function vu(){return Ec||(Ec=1,dr={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),dr}var ur,Sc;function D0(){if(Sc)return ur;Sc=1;var a=vu();function s(i){this.mode=a.MODE_8BIT_BYTE,this.data=i}return s.prototype={getLength:function(i){return this.data.length},write:function(i){for(var r=0;r<this.data.length;r++)i.put(this.data.charCodeAt(r),8)}},ur=s,ur}var hr,Ac;function B0(){if(Ac)return hr;Ac=1;var a=gu();function s(i,r){this.totalCount=i,this.dataCount=r}return s.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],s.getRSBlocks=function(i,r){var o=s.getRsBlockTable(i,r);if(o==null)throw new Error("bad rs block @ typeNumber:"+i+"/errorCorrectLevel:"+r);for(var c=o.length/3,d=new Array,f=0;f<c;f++)for(var m=o[f*3+0],u=o[f*3+1],x=o[f*3+2],h=0;h<m;h++)d.push(new s(u,x));return d},s.getRsBlockTable=function(i,r){switch(r){case a.L:return s.RS_BLOCK_TABLE[(i-1)*4+0];case a.M:return s.RS_BLOCK_TABLE[(i-1)*4+1];case a.Q:return s.RS_BLOCK_TABLE[(i-1)*4+2];case a.H:return s.RS_BLOCK_TABLE[(i-1)*4+3];default:return}},hr=s,hr}var mr,Tc;function z0(){if(Tc)return mr;Tc=1;function a(){this.buffer=new Array,this.length=0}return a.prototype={get:function(s){var i=Math.floor(s/8);return(this.buffer[i]>>>7-s%8&1)==1},put:function(s,i){for(var r=0;r<i;r++)this.putBit((s>>>i-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(s){var i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),s&&(this.buffer[i]|=128>>>this.length%8),this.length++}},mr=a,mr}var pr,Pc;function bu(){if(Pc)return pr;Pc=1;for(var a={glog:function(i){if(i<1)throw new Error("glog("+i+")");return a.LOG_TABLE[i]},gexp:function(i){for(;i<0;)i+=255;for(;i>=256;)i-=255;return a.EXP_TABLE[i]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},s=0;s<8;s++)a.EXP_TABLE[s]=1<<s;for(var s=8;s<256;s++)a.EXP_TABLE[s]=a.EXP_TABLE[s-4]^a.EXP_TABLE[s-5]^a.EXP_TABLE[s-6]^a.EXP_TABLE[s-8];for(var s=0;s<255;s++)a.LOG_TABLE[a.EXP_TABLE[s]]=s;return pr=a,pr}var fr,Ic;function wu(){if(Ic)return fr;Ic=1;var a=bu();function s(i,r){if(i.length==null)throw new Error(i.length+"/"+r);for(var o=0;o<i.length&&i[o]==0;)o++;this.num=new Array(i.length-o+r);for(var c=0;c<i.length-o;c++)this.num[c]=i[c+o]}return s.prototype={get:function(i){return this.num[i]},getLength:function(){return this.num.length},multiply:function(i){for(var r=new Array(this.getLength()+i.getLength()-1),o=0;o<this.getLength();o++)for(var c=0;c<i.getLength();c++)r[o+c]^=a.gexp(a.glog(this.get(o))+a.glog(i.get(c)));return new s(r,0)},mod:function(i){if(this.getLength()-i.getLength()<0)return this;for(var r=a.glog(this.get(0))-a.glog(i.get(0)),o=new Array(this.getLength()),c=0;c<this.getLength();c++)o[c]=this.get(c);for(var c=0;c<i.getLength();c++)o[c]^=a.gexp(a.glog(i.get(c))+r);return new s(o,0).mod(i)}},fr=s,fr}var xr,Mc;function F0(){if(Mc)return xr;Mc=1;var a=vu(),s=wu(),i=bu(),r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(c){for(var d=c<<10;o.getBCHDigit(d)-o.getBCHDigit(o.G15)>=0;)d^=o.G15<<o.getBCHDigit(d)-o.getBCHDigit(o.G15);return(c<<10|d)^o.G15_MASK},getBCHTypeNumber:function(c){for(var d=c<<12;o.getBCHDigit(d)-o.getBCHDigit(o.G18)>=0;)d^=o.G18<<o.getBCHDigit(d)-o.getBCHDigit(o.G18);return c<<12|d},getBCHDigit:function(c){for(var d=0;c!=0;)d++,c>>>=1;return d},getPatternPosition:function(c){return o.PATTERN_POSITION_TABLE[c-1]},getMask:function(c,d,f){switch(c){case r.PATTERN000:return(d+f)%2==0;case r.PATTERN001:return d%2==0;case r.PATTERN010:return f%3==0;case r.PATTERN011:return(d+f)%3==0;case r.PATTERN100:return(Math.floor(d/2)+Math.floor(f/3))%2==0;case r.PATTERN101:return d*f%2+d*f%3==0;case r.PATTERN110:return(d*f%2+d*f%3)%2==0;case r.PATTERN111:return(d*f%3+(d+f)%2)%2==0;default:throw new Error("bad maskPattern:"+c)}},getErrorCorrectPolynomial:function(c){for(var d=new s([1],0),f=0;f<c;f++)d=d.multiply(new s([1,i.gexp(f)],0));return d},getLengthInBits:function(c,d){if(1<=d&&d<10)switch(c){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:return 8;case a.MODE_KANJI:return 8;default:throw new Error("mode:"+c)}else if(d<27)switch(c){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+c)}else if(d<41)switch(c){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+c)}else throw new Error("type:"+d)},getLostPoint:function(c){for(var d=c.getModuleCount(),f=0,m=0;m<d;m++)for(var u=0;u<d;u++){for(var x=0,h=c.isDark(m,u),g=-1;g<=1;g++)if(!(m+g<0||d<=m+g))for(var b=-1;b<=1;b++)u+b<0||d<=u+b||g==0&&b==0||h==c.isDark(m+g,u+b)&&x++;x>5&&(f+=3+x-5)}for(var m=0;m<d-1;m++)for(var u=0;u<d-1;u++){var w=0;c.isDark(m,u)&&w++,c.isDark(m+1,u)&&w++,c.isDark(m,u+1)&&w++,c.isDark(m+1,u+1)&&w++,(w==0||w==4)&&(f+=3)}for(var m=0;m<d;m++)for(var u=0;u<d-6;u++)c.isDark(m,u)&&!c.isDark(m,u+1)&&c.isDark(m,u+2)&&c.isDark(m,u+3)&&c.isDark(m,u+4)&&!c.isDark(m,u+5)&&c.isDark(m,u+6)&&(f+=40);for(var u=0;u<d;u++)for(var m=0;m<d-6;m++)c.isDark(m,u)&&!c.isDark(m+1,u)&&c.isDark(m+2,u)&&c.isDark(m+3,u)&&c.isDark(m+4,u)&&!c.isDark(m+5,u)&&c.isDark(m+6,u)&&(f+=40);for(var j=0,u=0;u<d;u++)for(var m=0;m<d;m++)c.isDark(m,u)&&j++;var C=Math.abs(100*j/d/d-50)/5;return f+=C*10,f}};return xr=o,xr}var gr,Rc;function U0(){if(Rc)return gr;Rc=1;var a=D0(),s=B0(),i=z0(),r=F0(),o=wu();function c(f,m){this.typeNumber=f,this.errorCorrectLevel=m,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var d=c.prototype;return d.addData=function(f){var m=new a(f);this.dataList.push(m),this.dataCache=null},d.isDark=function(f,m){if(f<0||this.moduleCount<=f||m<0||this.moduleCount<=m)throw new Error(f+","+m);return this.modules[f][m]},d.getModuleCount=function(){return this.moduleCount},d.make=function(){if(this.typeNumber<1){var f=1;for(f=1;f<40;f++){for(var m=s.getRSBlocks(f,this.errorCorrectLevel),u=new i,x=0,h=0;h<m.length;h++)x+=m[h].dataCount;for(var h=0;h<this.dataList.length;h++){var g=this.dataList[h];u.put(g.mode,4),u.put(g.getLength(),r.getLengthInBits(g.mode,f)),g.write(u)}if(u.getLengthInBits()<=x*8)break}this.typeNumber=f}this.makeImpl(!1,this.getBestMaskPattern())},d.makeImpl=function(f,m){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var u=0;u<this.moduleCount;u++){this.modules[u]=new Array(this.moduleCount);for(var x=0;x<this.moduleCount;x++)this.modules[u][x]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(f,m),this.typeNumber>=7&&this.setupTypeNumber(f),this.dataCache==null&&(this.dataCache=c.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,m)},d.setupPositionProbePattern=function(f,m){for(var u=-1;u<=7;u++)if(!(f+u<=-1||this.moduleCount<=f+u))for(var x=-1;x<=7;x++)m+x<=-1||this.moduleCount<=m+x||(0<=u&&u<=6&&(x==0||x==6)||0<=x&&x<=6&&(u==0||u==6)||2<=u&&u<=4&&2<=x&&x<=4?this.modules[f+u][m+x]=!0:this.modules[f+u][m+x]=!1)},d.getBestMaskPattern=function(){for(var f=0,m=0,u=0;u<8;u++){this.makeImpl(!0,u);var x=r.getLostPoint(this);(u==0||f>x)&&(f=x,m=u)}return m},d.createMovieClip=function(f,m,u){var x=f.createEmptyMovieClip(m,u),h=1;this.make();for(var g=0;g<this.modules.length;g++)for(var b=g*h,w=0;w<this.modules[g].length;w++){var j=w*h,C=this.modules[g][w];C&&(x.beginFill(0,100),x.moveTo(j,b),x.lineTo(j+h,b),x.lineTo(j+h,b+h),x.lineTo(j,b+h),x.endFill())}return x},d.setupTimingPattern=function(){for(var f=8;f<this.moduleCount-8;f++)this.modules[f][6]==null&&(this.modules[f][6]=f%2==0);for(var m=8;m<this.moduleCount-8;m++)this.modules[6][m]==null&&(this.modules[6][m]=m%2==0)},d.setupPositionAdjustPattern=function(){for(var f=r.getPatternPosition(this.typeNumber),m=0;m<f.length;m++)for(var u=0;u<f.length;u++){var x=f[m],h=f[u];if(this.modules[x][h]==null)for(var g=-2;g<=2;g++)for(var b=-2;b<=2;b++)g==-2||g==2||b==-2||b==2||g==0&&b==0?this.modules[x+g][h+b]=!0:this.modules[x+g][h+b]=!1}},d.setupTypeNumber=function(f){for(var m=r.getBCHTypeNumber(this.typeNumber),u=0;u<18;u++){var x=!f&&(m>>u&1)==1;this.modules[Math.floor(u/3)][u%3+this.moduleCount-8-3]=x}for(var u=0;u<18;u++){var x=!f&&(m>>u&1)==1;this.modules[u%3+this.moduleCount-8-3][Math.floor(u/3)]=x}},d.setupTypeInfo=function(f,m){for(var u=this.errorCorrectLevel<<3|m,x=r.getBCHTypeInfo(u),h=0;h<15;h++){var g=!f&&(x>>h&1)==1;h<6?this.modules[h][8]=g:h<8?this.modules[h+1][8]=g:this.modules[this.moduleCount-15+h][8]=g}for(var h=0;h<15;h++){var g=!f&&(x>>h&1)==1;h<8?this.modules[8][this.moduleCount-h-1]=g:h<9?this.modules[8][15-h-1+1]=g:this.modules[8][15-h-1]=g}this.modules[this.moduleCount-8][8]=!f},d.mapData=function(f,m){for(var u=-1,x=this.moduleCount-1,h=7,g=0,b=this.moduleCount-1;b>0;b-=2)for(b==6&&b--;;){for(var w=0;w<2;w++)if(this.modules[x][b-w]==null){var j=!1;g<f.length&&(j=(f[g]>>>h&1)==1);var C=r.getMask(m,x,b-w);C&&(j=!j),this.modules[x][b-w]=j,h--,h==-1&&(g++,h=7)}if(x+=u,x<0||this.moduleCount<=x){x-=u,u=-u;break}}},c.PAD0=236,c.PAD1=17,c.createData=function(f,m,u){for(var x=s.getRSBlocks(f,m),h=new i,g=0;g<u.length;g++){var b=u[g];h.put(b.mode,4),h.put(b.getLength(),r.getLengthInBits(b.mode,f)),b.write(h)}for(var w=0,g=0;g<x.length;g++)w+=x[g].dataCount;if(h.getLengthInBits()>w*8)throw new Error("code length overflow. ("+h.getLengthInBits()+">"+w*8+")");for(h.getLengthInBits()+4<=w*8&&h.put(0,4);h.getLengthInBits()%8!=0;)h.putBit(!1);for(;!(h.getLengthInBits()>=w*8||(h.put(c.PAD0,8),h.getLengthInBits()>=w*8));)h.put(c.PAD1,8);return c.createBytes(h,x)},c.createBytes=function(f,m){for(var u=0,x=0,h=0,g=new Array(m.length),b=new Array(m.length),w=0;w<m.length;w++){var j=m[w].dataCount,C=m[w].totalCount-j;x=Math.max(x,j),h=Math.max(h,C),g[w]=new Array(j);for(var A=0;A<g[w].length;A++)g[w][A]=255&f.buffer[A+u];u+=j;var E=r.getErrorCorrectPolynomial(C),_=new o(g[w],E.getLength()-1),I=_.mod(E);b[w]=new Array(E.getLength()-1);for(var A=0;A<b[w].length;A++){var S=A+I.getLength()-b[w].length;b[w][A]=S>=0?I.get(S):0}}for(var R=0,A=0;A<m.length;A++)R+=m[A].totalCount;for(var $=new Array(R),W=0,A=0;A<x;A++)for(var w=0;w<m.length;w++)A<g[w].length&&($[W++]=g[w][A]);for(var A=0;A<h;A++)for(var w=0;w<m.length;w++)A<b[w].length&&($[W++]=b[w][A]);return $},gr=c,gr}var Pa={},Lc;function V0(){if(Lc)return Pa;Lc=1,Object.defineProperty(Pa,"__esModule",{value:!0});var a=Object.assign||function(u){for(var x=1;x<arguments.length;x++){var h=arguments[x];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(u[g]=h[g])}return u},s=lo(),i=c(s),r=xd(),o=c(r);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,x){var h={};for(var g in u)x.indexOf(g)>=0||Object.prototype.hasOwnProperty.call(u,g)&&(h[g]=u[g]);return h}var f={bgColor:i.default.oneOfType([i.default.object,i.default.string]).isRequired,bgD:i.default.string.isRequired,fgColor:i.default.oneOfType([i.default.object,i.default.string]).isRequired,fgD:i.default.string.isRequired,size:i.default.number.isRequired,title:i.default.string,viewBoxSize:i.default.number.isRequired,xmlns:i.default.string},m=(0,r.forwardRef)(function(u,x){var h=u.bgColor,g=u.bgD,b=u.fgD,w=u.fgColor,j=u.size,C=u.title,A=u.viewBoxSize,E=u.xmlns,_=E===void 0?"http://www.w3.org/2000/svg":E,I=d(u,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return o.default.createElement("svg",a({},I,{height:j,ref:x,viewBox:"0 0 "+A+" "+A,width:j,xmlns:_}),C?o.default.createElement("title",null,C):null,o.default.createElement("path",{d:g,fill:h}),o.default.createElement("path",{d:b,fill:w}))});return m.displayName="QRCodeSvg",m.propTypes=f,Pa.default=m,Pa}var Oc;function H0(){if(Oc)return hi;Oc=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.QRCode=void 0;var a=Object.assign||function(j){for(var C=1;C<arguments.length;C++){var A=arguments[C];for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(j[E]=A[E])}return j},s=lo(),i=h(s),r=gu(),o=h(r),c=U0(),d=h(c),f=xd(),m=h(f),u=V0(),x=h(u);function h(j){return j&&j.__esModule?j:{default:j}}function g(j,C){var A={};for(var E in j)C.indexOf(E)>=0||Object.prototype.hasOwnProperty.call(j,E)&&(A[E]=j[E]);return A}var b={bgColor:i.default.oneOfType([i.default.object,i.default.string]),fgColor:i.default.oneOfType([i.default.object,i.default.string]),level:i.default.string,size:i.default.number,value:i.default.string.isRequired},w=(0,f.forwardRef)(function(j,C){var A=j.bgColor,E=A===void 0?"#FFFFFF":A,_=j.fgColor,I=_===void 0?"#000000":_,S=j.level,R=S===void 0?"L":S,$=j.size,W=$===void 0?256:$,ae=j.value,M=g(j,["bgColor","fgColor","level","size","value"]),U=new d.default(-1,o.default[R]);U.addData(ae),U.make();var D=U.modules;return m.default.createElement(x.default,a({},M,{bgColor:E,bgD:D.map(function(q,J){return q.map(function(se,te){return se?"":"M "+te+" "+J+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:I,fgD:D.map(function(q,J){return q.map(function(se,te){return se?"M "+te+" "+J+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:C,size:W,viewBoxSize:D.length}))});return hi.QRCode=w,w.displayName="QRCode",w.propTypes=b,hi.default=w,hi}var q0=H0();const $0=ms(q0),xo="menus";async function G0(a){const s=Te(ze(le,xo)),i={...a,id:s.id,createdAt:new Date,updatedAt:new Date};return await zs(s,{...i,createdAt:xt(),updatedAt:xt()}),i}async function W0(a,s){const i=Te(le,xo,a);await ut(i,{...s,updatedAt:xt()})}async function Z0(a){const s=We(ze(le,xo),Ie("ownerId","==",a)),i=await Gt(s);if(i.empty)return null;const r=i.docs[0].data();return{...r,id:i.docs[0].id,createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}}function vr(a){return a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").substring(0,50)}const _n=new sa("AIzaSyAFo1Hq5LuuaqkKLzZgUOl3PTtKk_cagVc"),go="gemini-1.5-pro";async function yu(a,s="gourmet"){if(!a.trim())throw new Error("Texto vazio no pode ser aprimorado.");const i=_n.getGenerativeModel({model:go}),r=`Atue como um Copywriter Gastronmico de elite. Reescreva a descrio deste prato para torn-la irresistvel, focada em despertar fome e sensorialidade. Mantenha curto (mx 150 caracteres). Vibe: ${s}.

Descrio original: "${a}"

Responda APENAS com a descrio aprimorada, sem aspas nem explicaes.`;return(await i.generateContent(r)).response.text().trim().substring(0,150)}async function _u(a){if(!a.length)throw new Error("Lista de itens vazia.");const s=_n.getGenerativeModel({model:go,generationConfig:{responseMimeType:"application/json"}}),r=`Atue como um Engenheiro de Cardpio. Analise esta lista de itens.
1. Categorize-os logicamente (Entradas, Pratos Principais, Burgers, Pizzas, Bebidas, Sobremesas, etc).
2. Identifique quais itens tm maior potencial de venda para serem "Destaques" (Highlights) - mximo 3 itens.

Lista de itens:
${a.map((d,f)=>`${f+1}. ${d}`).join(`
`)}

Retorne APENAS um JSON vlido com a estrutura:
{
  "categories": [
    { "name": "Nome da Categoria", "items": ["Item 1", "Item 2"] }
  ],
  "suggestedHighlights": ["Item destaque 1", "Item destaque 2"]
}`,c=(await s.generateContent(r)).response.text();try{const d=JSON.parse(c);if(!d.categories||!Array.isArray(d.categories))throw new Error("Resposta invlida da IA");return d}catch{throw console.error(" Erro ao parsear resposta da IA:",c),new Error("Erro ao processar resposta da IA. Tente novamente.")}}async function ju(a){const s=`
    Analise o texto de cardpio abaixo e extraia os itens em formato JSON estruturado.
    O texto pode estar bagunado. Tente identificar Categoria, Nome do Prato, Descrio e Preo.
    
    Retorne APENAS um JSON com esta estrutura:
    {
      "categories": [
        {
          "title": "Nome da Categoria",
          "items": [
            {
              "title": "Nome do Item",
              "description": "Descrio (se houver)",
              "price": 0.00 (number)
            }
          ]
        }
      ]
    }

    TEXTO DO CARDPIO:
    ${a}
  `;try{const c=(await _n.getGenerativeModel({model:"gemini-1.5-pro"}).generateContent(s)).response.text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(c)}catch(i){throw console.error("Erro ao processar cardpio:",i),new Error("No foi possvel ler o cardpio. Tente formatar melhor o texto.")}}async function K0(a,s){const i=s.map(c=>`${c.id}: ${c.title} (${c.description})`).join(`
`),r=_n.getGenerativeModel({model:go,generationConfig:{responseMimeType:"application/json"}}),o=`
    Um cliente buscou: "${a}".
    Abaixo est o cardpio.
    Retorne uma lista JSON com os IDs dos 3 itens que melhor combinam com a INTENO do cliente (ex: se ele pediu "leve", procure saladas ou grelhados).
    
    Cardpio:
    ${i}

    Retorne APENAS: ["id1", "id2", "id3"]
  `;try{const c=await r.generateContent(o);return JSON.parse(c.response.text())}catch(c){return console.error(c),[]}}const Y0=Object.freeze(Object.defineProperty({__proto__:null,enhanceDescription:yu,organizeMenuStructure:_u,parseMenuFromText:ju,semanticSearch:K0},Symbol.toStringTag,{value:"Module"})),Q0=new sa("AIzaSyAFo1Hq5LuuaqkKLzZgUOl3PTtKk_cagVc"),X0="models/gemini-3-pro-preview";async function J0(a,s){if(!a.trim())throw new Error("Descrio do prato  obrigatria.");const i=Q0.getGenerativeModel({model:X0,generationConfig:{responseMimeType:"application/json"}}),r=`Atue como um Consultor de Menu Michelin com expertise em precificao gastronmica no Brasil.

Analise este prato: "${a}"

SUAS TAREFAS:
1. **Custo Estimado:** Estime o custo dos ingredientes em Reais (R$), considerando fornecedores brasileiros de mdio porte. Seja realista com pores tpicas.
2. **Preo de Venda:** Sugira um Preo de Venda ideal para atingir ${s}% de margem de lucro bruta. Use a frmula: Preo = Custo / (1 - ${s}/100).
3. **Dica de Neuromarketing:** D UMA dica psicolgica matadora para aumentar o valor percebido (ex: trocar palavras no nome, usar nmero quebrado, sugesto de empratamento, tcnica de ancoragem).

Retorne APENAS um JSON vlido com esta estrutura exata:
{
  "suggestedPrice": 45.90,
  "costEstimate": 12.50,
  "tip": "Troque 'Burger' por 'Smash Artesanal' e use preo R$ 44,90 (nmeros mpares parecem mais autnticos)"
}`;console.log(" [Business AI] Analisando precificao...");const c=(await i.generateContent(r)).response.text();try{const d=JSON.parse(c);if(typeof d.suggestedPrice!="number"||typeof d.costEstimate!="number"||typeof d.tip!="string")throw new Error("Estrutura de resposta invlida");return console.log(" [Business AI] Anlise de precificao concluda!"),d}catch{throw console.error(" [Business AI] Erro ao parsear resposta:",c),new Error("Erro ao processar anlise. Tente novamente.")}}const Dc=new sa("AIzaSyAFo1Hq5LuuaqkKLzZgUOl3PTtKk_cagVc"),br="models/gemini-3-pro-preview",wr="models/gemini-2.5-flash-image";async function ev(a,s=1080){return new Promise((i,r)=>{const o=new Image,c=document.createElement("canvas"),d=c.getContext("2d");if(!d){r(new Error("Canvas context not available"));return}o.onload=()=>{const f=Math.min(o.width,o.height),m=(o.width-f)/2,u=(o.height-f)/2;c.width=s,c.height=s,d.drawImage(o,m,u,f,f,0,0,s,s),c.toBlob(x=>{x?i(new File([x],a.name,{type:"image/jpeg",lastModified:Date.now()})):r(new Error("Failed to create blob"))},"image/jpeg",.95)},o.onerror=()=>r(new Error("Failed to load image")),o.src=URL.createObjectURL(a)})}function tv(a){return new Promise((s,i)=>{const r=new FileReader;r.readAsDataURL(a),r.onload=()=>{const o=r.result;s(o.split(",")[1])},r.onerror=o=>i(o)})}function sv(a,s,i){const r={rustico:"rustic wooden table",gourmet:"white marble surface",dark:"dark matte black surface",domingo:"bright white with morning sunlight",marble:"luxurious black onyx marble",neon:"reflective surface with neon lights"},o={top:"90 flat lay top-down",diagonal:"45 diner's perspective",front:"eye-level hero shot",macro:"extreme close-up macro"},c=i>70?"bright studio softbox lighting":i>40?"balanced natural lighting":"dramatic low-key shadows";return`Role: Food Photographer Expert.
Task: Enhance this request into a high-end food delivery photography prompt.
Context:
- Surface: ${r[a]||r.rustico}
- Camera Angle: ${o[s]||o.diagonal}  
- Lighting: ${c}
Technical Specs: 85mm lens, f/1.8, shallow DOF, 1080x1080 square, 8K quality.
Keywords: commercial food photography, appetizing, Michelin star presentation.
Output: Just the prompt in English. No explanations.`}async function Nu(a){console.log(" [Neural Engine v4.2] Iniciando...");const s=Ys.getState(),i=He.currentUser;if(!i)return{success:!1,error:"Usurio no autenticado."};if(s.plan!=="PRO"&&s.credits<1)return{success:!1,error:"Crditos insuficientes. Faa um upgrade."};console.log(" Cobrana otimista (UI + Firestore)..."),s.decrementCredit();const r=Te(le,"users",i.uid);try{await ut(r,{credits:bl(-1)}),console.log(" Crdito deduzido no Firestore")}catch(o){return console.error(" Erro ao deduzir crdito no Firestore:",o),s.refundCredit(),{success:!1,error:"Erro ao processar pagamento. Tente novamente."}}try{console.log(" Processando imagem 1080x1080...");const o=await ev(a.file,1080),c=await tv(o);console.log(` [Prompt Architect] Usando ${br}...`);const d=Dc.getGenerativeModel({model:br}),f=sv(a.vibe,a.angle,a.lightIntensity||50),u=(await d.generateContent([{text:f},{inlineData:{mimeType:o.type,data:c}}])).response.text();console.log(" Prompt gerado:",u.substring(0,100)+"..."),console.log(` [Image Generator] Usando ${wr}...`);const b=(await Dc.getGenerativeModel({model:wr}).generateContent(u)).response.candidates?.[0]?.content?.parts||[];let w;for(const j of b)if(j.inlineData?.mimeType?.startsWith("image/")){w=`data:${j.inlineData.mimeType};base64,${j.inlineData.data}`;break}return w||(console.log(" Fallback para Pollinations..."),w=`https://image.pollinations.ai/prompt/${encodeURIComponent(u)}?model=flux-realism&width=1080&height=1080&nologo=true&seed=${Date.now()}`),console.log(" [Neural Engine] Gerao concluda!"),{success:!0,imageUrl:w,debugInfo:{usedModel:`${br} + ${wr}`,promptGenerated:u}}}catch(o){console.error(" Erro na gerao:",o),console.log(" Rollback: Devolvendo crdito (UI + Firestore)..."),s.refundCredit();try{await ut(r,{credits:bl(1)}),console.log(" Crdito devolvido no Firestore")}catch(c){console.error(" Erro crtico ao estornar crdito:",c)}return{success:!1,error:o.message||"Erro na Engine Neural. Tente novamente."}}}function iv({isOpen:a,onClose:s,onImageReady:i}){const[r,o]=k.useState(null),[c,d]=k.useState(null),[f,m]=k.useState(null),[u,x]=k.useState(!1),h=k.useRef(null),g=Ys(),b=A=>{const E=A.target.files?.[0];E&&(o(E),d(URL.createObjectURL(E)),m(null))},w=async()=>{if(r){x(!0);try{const A=await Nu({file:r,vibe:"standard",angle:"front",lightIntensity:70});A.success&&A.imageUrl&&(m(A.imageUrl),g.useCredit())}catch(A){console.error("Studio Error:",A)}finally{x(!1)}}},j=()=>{f&&(i(f),C())},C=()=>{o(null),d(null),m(null),x(!1),s()};return a?e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",children:e.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-[#111] border border-white/10 rounded-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-widest text-white flex items-center gap-2",children:[e.jsx(dn,{className:"w-4 h-4 text-primary"}),"Studio Express"]}),e.jsx("button",{onClick:C,className:"p-1 hover:bg-white/10 rounded-lg",children:e.jsx(Lt,{className:"w-4 h-4 text-white/40"})})]}),e.jsx("div",{className:"p-6 flex-1 overflow-y-auto flex flex-col items-center justify-center min-h-[300px]",children:c?e.jsxs("div",{className:"relative w-full aspect-square bg-black rounded-xl overflow-hidden border border-white/10 group",children:[e.jsx("img",{src:f||c,className:`w-full h-full object-contain ${u?"blur-lg scale-105":""} transition-all duration-700`,alt:"Preview"}),u&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[e.jsx(ve,{className:"w-12 h-12 text-primary animate-spin mb-4"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-primary animate-pulse",children:"Melhorando Iluminao..."})]}),!f&&!u&&e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:e.jsxs("button",{onClick:w,className:"w-full py-3 bg-primary hover:bg-orange-600 rounded-xl font-bold flex items-center justify-center gap-2 text-white shadow-lg shadow-orange-900/50 transition-all transform active:scale-95",children:[e.jsx(Ar,{className:"w-4 h-4"}),"Melhorar com IA (1 Crdito)"]})})]}):e.jsxs("div",{onClick:()=>h.current?.click(),className:"w-full h-64 border-2 border-dashed border-white/10 rounded-2xl flex flex-col items-center justify-center gap-4 cursor-pointer hover:border-primary hover:bg-primary/5 transition-all text-white/30 hover:text-primary",children:[e.jsx(Sr,{className:"w-12 h-12"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Upload Foto do Prato"}),e.jsx("input",{ref:h,type:"file",className:"hidden",accept:"image/*",onChange:b})]})}),f&&e.jsxs("div",{className:"p-4 border-t border-white/10 bg-white/5 flex gap-3",children:[e.jsx("button",{onClick:()=>{m(null)},className:"px-4 py-3 rounded-xl font-bold text-xs uppercase tracking-wider text-white/40 hover:text-white transition-colors",children:"Tentar De Novo"}),e.jsxs("button",{onClick:j,className:"flex-1 py-3 bg-green-500 hover:bg-green-600 rounded-xl font-bold flex items-center justify-center gap-2 text-white shadow-lg transition-all",children:[e.jsx(ct,{className:"w-4 h-4"}),"Usar Foto"]})]})]})}):null}function av({isOpen:a,onClose:s,onImport:i}){const[r,o]=k.useState("text"),[c,d]=k.useState(""),[f,m]=k.useState(!1),u=async()=>{if(!c)return X.error("Cole o texto do cardpio!");m(!0);try{const x=await ju(c);i(x),X.success(`${x.categories.length} categorias identificadas!`),s()}catch{X.error("Falha ao processar. Verifique o texto.")}finally{m(!1)}};return e.jsx(Be,{children:a&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",children:e.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[#121212] w-full max-w-2xl rounded-3xl border border-white/10 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-purple-900/20 to-blue-900/20",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-black italic flex items-center gap-2",children:[e.jsx(at,{className:"text-purple-400"})," Importador Mgico"]}),e.jsx("p",{className:"text-xs text-white/40",children:"Cole o texto do seu cardpio (PDF, Excel ou WhatsApp)"})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-full",children:e.jsx(Lt,{})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("button",{onClick:()=>o("text"),className:`flex-1 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${r==="text"?"bg-white/10 text-white":"text-white/40 hover:bg-white/5"}`,children:[e.jsx(Qr,{size:16})," Colar Texto"]}),e.jsxs("button",{onClick:()=>o("file"),className:`flex-1 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${r==="file"?"bg-white/10 text-white":"text-white/40 hover:bg-white/5"}`,children:[e.jsx(Sr,{size:16})," Upload Arquivo (CSV)"]})]}),r==="text"?e.jsx("textarea",{value:c,onChange:x=>d(x.target.value),placeholder:"Ex: X-Burger R$ 30,00, Coca-Cola R$ 5,00...",className:"w-full h-64 bg-black/50 border border-white/10 rounded-xl p-4 text-sm text-white focus:border-purple-500 outline-none resize-none font-mono"}):e.jsxs("div",{className:"h-64 border-2 border-dashed border-white/10 rounded-xl flex flex-col items-center justify-center text-white/30",children:[e.jsx(Sr,{size:32,className:"mb-2"}),e.jsx("p",{children:"Arraste seu arquivo CSV ou Excel aqui"}),e.jsx("p",{className:"text-[10px] mt-2",children:"(Funcionalidade em breve - use Colar Texto por enquanto)"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:s,className:"px-6 py-3 rounded-xl font-bold text-white/60 hover:text-white",children:"Cancelar"}),e.jsxs("button",{onClick:u,disabled:f||!c,className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl font-black text-white shadow-lg hover:shadow-purple-500/20 transition-all disabled:opacity-50 flex items-center gap-2",children:[f?e.jsx(ve,{className:"animate-spin"}):e.jsx(at,{size:18}),"PROCESSAR COM IA"]})]})]}),e.jsx("div",{className:"p-4 bg-purple-500/10 border-t border-white/5 text-center",children:e.jsxs("p",{className:"text-xs text-purple-300 font-bold flex items-center justify-center gap-2",children:[e.jsx(Wr,{size:14})," Dica: Voc pode copiar o cardpio inteiro do iFood e colar aqui!"]})})]})})})}const Ia=()=>crypto.randomUUID(),Bc=a=>({ownerId:a,slug:"",name:"",description:"",logoUrl:null,phone:"",themeColor:"#FF6B00",categories:[]});function nv({menu:a}){const s=a.categories.flatMap(i=>i.items).filter(i=>i.isHighlight);return e.jsxs("div",{className:"w-[320px] h-[640px] bg-[#0a0a0a] rounded-[40px] border-4 border-white/10 overflow-hidden shadow-2xl relative",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-black rounded-b-2xl z-10"}),e.jsxs("div",{className:"h-full overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"h-40 flex flex-col items-center justify-center relative",style:{background:`linear-gradient(135deg, ${a.themeColor}40, ${a.themeColor}10)`},children:[a.logoUrl?e.jsx("img",{src:a.logoUrl,alt:"",className:"w-16 h-16 rounded-2xl object-cover"}):e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/10 flex items-center justify-center",children:e.jsx(ot,{className:"w-8 h-8 text-white/40"})}),e.jsx("h1",{className:"text-lg font-black mt-3 text-white text-center px-4",children:a.name||"Nome do Restaurante"}),e.jsx("p",{className:"text-[10px] text-white/50 mt-1",children:a.description||"Descrio curta aqui"})]}),s.length>0&&e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-white/30 mb-2",children:"Destaques"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:s.slice(0,3).map(i=>e.jsxs("div",{className:"flex-shrink-0 w-24 h-24 rounded-2xl overflow-hidden relative",children:[i.imageUrl?e.jsx("img",{src:i.imageUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-white/5 flex items-center justify-center",children:e.jsx(en,{className:"w-8 h-8 text-white/20"})}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:e.jsx("span",{className:"text-[9px] font-bold text-white line-clamp-1",children:i.title})})]},i.id))})]}),e.jsx("div",{className:"p-4 pt-0 space-y-4",children:a.categories.map(i=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-wider text-white/60 mb-2",children:i.title}),e.jsx("div",{className:"space-y-2",children:i.items.map(r=>e.jsxs("div",{className:"flex gap-3 p-2 bg-white/5 rounded-xl",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden flex-shrink-0",children:r.imageUrl?e.jsx("img",{src:r.imageUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-white/10 flex items-center justify-center",children:e.jsx(en,{className:"w-6 h-6 text-white/20"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-[11px] font-bold text-white line-clamp-1",children:r.title}),e.jsx("p",{className:"text-[9px] text-white/40 line-clamp-2",children:r.description})]}),e.jsxs("div",{className:"text-[11px] font-black text-primary",children:["R$ ",r.price.toFixed(2).replace(".",",")]})]},r.id))})]},i.id))}),a.categories.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-white/20",children:[e.jsx(ot,{className:"w-12 h-12 mb-2"}),e.jsx("span",{className:"text-xs",children:"Adicione categorias"})]})]})]})}function rv(){const{user:a}=Ze(),s=Ys(z=>z.generatedImage),[i,r]=k.useState(null),[o,c]=k.useState(null),[d,f]=k.useState(!0),[m,u]=k.useState(!1),[x,h]=k.useState(!1),[g,b]=k.useState(!1),[w,j]=k.useState(!1),[C,A]=k.useState(!1),[E,_]=k.useState(null),[I,S]=k.useState(!1),[R,$]=k.useState(null),W=(z,V)=>{$({catId:z,itemId:V}),S(!0)},ae=z=>{R&&(ne(R.catId,R.itemId,{imageUrl:z}),$(null),X.success("Imagem aplicada com sucesso! "))};k.useEffect(()=>{async function z(){if(a?.uid)try{const V=await Z0(a.uid);V?(r({ownerId:V.ownerId,slug:V.slug,name:V.name,description:V.description,logoUrl:V.logoUrl,phone:V.phone,themeColor:V.themeColor,categories:V.categories}),c(V.id)):r(Bc(a.uid))}catch(V){console.error("Erro ao carregar menu:",V),X.error("Erro ao carregar menu"),r(Bc(a?.uid||""))}finally{f(!1)}}z()},[a?.uid]);const M=k.useCallback(async()=>{if(!(!i||!a?.uid)){u(!0);try{if(o)await W0(o,i);else{const z=await G0(i);c(z.id)}X.success("Cardpio salvo!",{duration:1500})}catch(z){console.error("Erro ao salvar:",z),X.error("Erro ao salvar cardpio")}finally{u(!1)}}},[i,o,a?.uid]),U=(z,V)=>{r(Z=>Z?{...Z,[z]:V}:null)},D=z=>{U("name",z),(!i?.slug||i.slug===vr(i.name))&&U("slug",vr(z))},q=()=>{const z={id:Ia(),title:"Nova Categoria",items:[]};r(V=>V?{...V,categories:[...V.categories,z]}:null)},J=(z,V)=>{r(Z=>Z?{...Z,categories:Z.categories.map(Y=>Y.id===z?{...Y,title:V}:Y)}:null)},se=z=>{r(V=>V?{...V,categories:V.categories.filter(Z=>Z.id!==z)}:null)},te=z=>{r(V=>{if(!V)return null;const Z=z.categories.map(Y=>({id:crypto.randomUUID(),title:Y.title,items:Y.items.map(ce=>({id:crypto.randomUUID(),title:ce.title,description:ce.description||"",price:Number(ce.price)||0,imageUrl:null,isHighlight:!1}))}));return{...V,categories:[...V.categories,...Z]}})},ue=z=>{const V={id:Ia(),title:"Novo Item",description:"",price:0,imageUrl:null,isHighlight:!1};r(Z=>Z?{...Z,categories:Z.categories.map(Y=>Y.id===z?{...Y,items:[...Y.items,V]}:Y)}:null),_({catId:z,itemId:V.id})},ne=(z,V,Z)=>{r(Y=>Y?{...Y,categories:Y.categories.map(ce=>ce.id===z?{...ce,items:ce.items.map(he=>he.id===V?{...he,...Z}:he)}:ce)}:null)},Ce=(z,V)=>{r(Z=>Z?{...Z,categories:Z.categories.map(Y=>Y.id===z?{...Y,items:Y.items.filter(ce=>ce.id!==V)}:Y)}:null)},P=()=>{if(!s){X.error("Gere uma imagem no Studio primeiro!");return}i?.categories.length===0&&q();const z=i?.categories[0]?.id;if(!z)return;const V={id:Ia(),title:"Novo Prato do Studio",description:"Descrio do prato...",price:29.9,imageUrl:s,isHighlight:!1};r(Z=>Z?{...Z,categories:Z.categories.map(Y=>Y.id===z?{...Y,items:[...Y.items,V]}:Y)}:null),X.success("Imagem importada do Studio!")},N=async(z,V)=>{const Z=i?.categories.find(Y=>Y.id===z)?.items.find(Y=>Y.id===V);if(!Z?.description){X.error("Adicione uma descrio primeiro");return}b(!0);try{const Y=await yu(Z.description,"gourmet");ne(z,V,{description:Y}),X.success("Descrio aprimorada! ")}catch(Y){X.error(Y.message||"Erro ao aprimorar descrio")}finally{b(!1)}},F=async(z,V,Z)=>{if(!Z||Z.length<3)return;const Y=i?.categories.find(he=>he.id===z)?.items.find(he=>he.id===V);if(!Y)return;(!Y.description||Y.description.length<10)&&X.promise(async()=>{const he=await Mx();ne(z,V,{description:he});const be=await J0(he||Z,50);if(be?.suggestedPrice)return ne(z,V,{description:he,price:be.suggestedPrice,costPrice:be.costEstimate}),`Sugesto: R$ ${be.suggestedPrice.toFixed(2)}`},{loading:"IA Criando prato...",success:he=>`${he||"Prato criado com IA!"}`,error:"Erro na IA"})},O=async()=>{if(!i)return;const z=i.categories.flatMap(Z=>Z.items);if(z.length<2){X.error("Adicione mais itens para organizar");return}const V=z.map(Z=>Z.title);j(!0);try{const Z=await _u(V),Y=Z.categories.map(ce=>({id:Ia(),title:ce.name,items:ce.items.map(he=>z.find(we=>we.title===he)||null).filter(he=>he!==null).map(he=>({...he,isHighlight:Z.suggestedHighlights.includes(he.title)}))}));r(ce=>ce?{...ce,categories:Y}:null),X.success(`Cardpio organizado! ${Z.suggestedHighlights.length} destaques sugeridos `)}catch(Z){X.error(Z.message||"Erro ao organizar cardpio")}finally{j(!1)}},B=i?.slug?`https://emprata.ai/menu/${i.slug}`:"";return d?e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:e.jsx(ve,{className:"w-8 h-8 text-primary animate-spin"})}):i?e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:[e.jsxs("header",{className:"h-16 md:h-20 border-b border-white/5 flex items-center justify-between px-4 md:px-8 bg-[#0a0a0a]/80 backdrop-blur-xl sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ve,{to:"/dashboard",className:"text-white/40 hover:text-white transition-colors",children:e.jsx(Tr,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-black italic tracking-tight flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5 text-primary"}),"Living Menu"]}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-white/30",children:"Cardpio Digital"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("button",{onClick:P,disabled:!s,className:`flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${s?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:[e.jsx(pi,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Importar do Studio"})]}),e.jsx("button",{onClick:()=>h(!0),disabled:!i.slug,className:"p-2 bg-white/5 hover:bg-white/10 rounded-xl transition-colors disabled:opacity-50",children:e.jsx(mn,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:M,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-primary hover:bg-orange-600 rounded-xl font-bold text-sm transition-all",children:[m?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):e.jsx(ct,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Salvar"})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-4rem)] md:h-[calc(100vh-5rem)]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-6",children:[e.jsxs("section",{className:"bg-white/5 rounded-3xl p-6 border border-white/5",children:[e.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white/40 mb-4",children:"Configurao"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"Nome do Restaurante"}),e.jsx("input",{type:"text",value:i.name,onChange:z=>D(z.target.value),placeholder:"Ex: Pizzaria do Zico",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/20 focus:border-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"URL do Cardpio"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white/30 text-sm",children:"/menu/"}),e.jsx("input",{type:"text",value:i.slug,onChange:z=>U("slug",vr(z.target.value)),placeholder:"pizzaria-do-zico",className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/20 focus:border-primary focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx(od,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30"}),e.jsx("input",{type:"text",value:i.phone,onChange:z=>U("phone",z.target.value),placeholder:"5511999999999",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 pl-10 text-white placeholder-white/20 focus:border-primary focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"Cor Principal"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:i.themeColor,onChange:z=>U("themeColor",z.target.value),className:"w-12 h-12 rounded-xl border-2 border-white/10 cursor-pointer"}),e.jsx("input",{type:"text",value:i.themeColor,onChange:z=>U("themeColor",z.target.value),className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white uppercase focus:border-primary focus:outline-none"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-white/30 mb-1 block",children:"Descrio Curta"}),e.jsx("textarea",{value:i.description,onChange:z=>U("description",z.target.value),placeholder:"Desde 1990 servindo as melhores pizzas...",rows:2,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/20 focus:border-primary focus:outline-none resize-none"})]})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-white/40",children:"Categorias & Itens"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:O,disabled:w||i.categories.flatMap(z=>z.items).length<2,className:"flex items-center gap-2 px-3 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 rounded-xl text-xs font-bold uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[w?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):e.jsx(Ar,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Organizar com IA"})]}),e.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-3 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold uppercase tracking-wider transition-all",children:[e.jsx($t,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Categoria"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Be,{children:i.categories.map(z=>e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white/5 rounded-2xl border border-white/5 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-white/5",children:[e.jsx(qh,{className:"w-4 h-4 text-white/20 cursor-grab"}),e.jsx("input",{type:"text",value:z.title,onChange:V=>J(z.id,V.target.value),className:"flex-1 bg-transparent text-sm font-bold text-white focus:outline-none"}),e.jsx("button",{onClick:()=>ue(z.id),className:"p-1.5 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx($t,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>se(z.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx($i,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"divide-y divide-white/5",children:[z.items.map(V=>e.jsxs("div",{className:"p-4 flex items-start gap-4",children:[e.jsxs("div",{onClick:()=>W(z.id,V.id),className:"w-16 h-16 rounded-xl overflow-hidden bg-white/5 flex-shrink-0 relative cursor-pointer group",children:[V.imageUrl?e.jsx("img",{src:V.imageUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center group-hover:bg-white/10 transition-colors",children:e.jsx(tn,{className:"w-6 h-6 text-white/20"})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:e.jsx(Ar,{className:"w-4 h-4 text-white"})}),V.isHighlight&&e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500 rounded-full p-0.5",children:e.jsx(at,{className:"w-3 h-3 text-black"})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsx("input",{type:"text",value:V.title,onChange:Z=>ne(z.id,V.id,{title:Z.target.value}),onBlur:Z=>F(z.id,V.id,Z.target.value),className:"w-full bg-transparent text-sm font-bold text-white focus:outline-none",placeholder:"Nome do prato (ex: X-Bacon)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("textarea",{value:V.description,onChange:Z=>ne(z.id,V.id,{description:Z.target.value}),className:"flex-1 bg-white/5 rounded-lg px-3 py-2 text-xs text-white/60 focus:outline-none resize-none",placeholder:"Descrio...",rows:2}),e.jsx("button",{onClick:()=>N(z.id,V.id),disabled:g||!V.description,className:"p-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 rounded-lg transition-colors disabled:opacity-50",title:"Aprimorar com IA",children:g?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):e.jsx(at,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-white/40 text-xs",children:"Venda R$"}),e.jsx("input",{type:"number",step:"0.01",value:V.price||"",onChange:Z=>ne(z.id,V.id,{price:parseFloat(Z.target.value)||0}),className:"w-20 bg-white/5 rounded-lg px-2 py-1 text-xs text-white focus:outline-none",placeholder:"0,00"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-red-400/60 text-xs",children:"Custo R$"}),e.jsx("input",{type:"number",step:"0.01",value:V.costPrice||"",onChange:Z=>ne(z.id,V.id,{costPrice:parseFloat(Z.target.value)||0}),className:"w-20 bg-red-500/10 border border-red-500/20 rounded-lg px-2 py-1 text-xs text-red-300 focus:outline-none",placeholder:"0,00"})]}),V.price>0&&V.costPrice>0&&e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${(V.price-V.costPrice)/V.price*100>=30?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:[((V.price-V.costPrice)/V.price*100).toFixed(0),"% margem"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:V.isHighlight,onChange:Z=>ne(z.id,V.id,{isHighlight:Z.target.checked}),className:"w-4 h-4 rounded bg-white/5 border-white/10"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-yellow-500",children:"Destaque"})]})]})]}),e.jsx("button",{onClick:()=>Ce(z.id,V.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx($i,{className:"w-4 h-4"})})]},V.id)),z.items.length===0&&e.jsx("div",{className:"p-4 text-center text-white/20 text-xs",children:"Clique em + para adicionar itens"})]})]},z.id))}),i.categories.length===0&&e.jsxs("div",{className:"text-center py-12 text-white/20",children:[e.jsx(ot,{className:"w-12 h-12 mx-auto mb-3"}),e.jsx("p",{className:"text-sm",children:"Adicione sua primeira categoria"})]})]})]})]}),e.jsxs("div",{className:"hidden lg:flex w-[400px] border-l border-white/5 flex-col items-center justify-center p-8 bg-black/20",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-white/30 mb-4",children:"Preview"}),e.jsx(nv,{menu:i}),i.slug&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-3 py-2 bg-purple-500/10 hover:bg-purple-500/20 text-purple-400 rounded-xl text-xs font-bold uppercase tracking-wider border border-purple-500/30 transition-colors",children:[e.jsx(at,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Importar Mgico"})]}),i.slug&&e.jsxs(Ve,{to:`/menu/${i.slug}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 mt-4 text-xs text-white/40 hover:text-primary transition-colors",children:[e.jsx(sn,{className:"w-4 h-4"}),"Ver pgina pblica"]})]})]})]}),e.jsx(iv,{isOpen:I,onClose:()=>S(!1),onImageReady:ae}),e.jsx(Be,{children:x&&e.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4",onClick:()=>h(!1),children:e.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[#1a1a1a] rounded-3xl p-8 border border-white/10 max-w-md w-full text-center",onClick:z=>z.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-black mb-2",children:"QR Code do Cardpio"}),e.jsx("p",{className:"text-white/40 text-sm mb-6",children:"Escaneie para acessar o cardpio"}),e.jsx("div",{className:"bg-white p-4 rounded-2xl inline-block mb-6",children:e.jsx($0,{value:B,size:200})}),e.jsx("p",{className:"text-xs text-white/40 mb-4 break-all",children:B}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>navigator.clipboard.writeText(B).then(()=>X.success("Link copiado!")),className:"flex-1 py-3 bg-white/10 hover:bg-white/20 rounded-xl font-bold text-sm transition-all",children:"Copiar Link"}),e.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 bg-primary hover:bg-orange-600 rounded-xl font-bold text-sm transition-all",children:"Fechar"})]})]})})}),e.jsx(av,{isOpen:C,onClose:()=>A(!1),onImport:te})]}):null}var ku=k.forwardRef(({transition:a,...s},i)=>{let r={position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:a?`clip-path ${a}`:void 0,userSelect:"none",willChange:"clip-path, transition",KhtmlUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"};return e.jsx("div",{...s,style:r,"data-rcs":"clip-item",ref:i})});ku.displayName="ContainerClip";var Cu=k.forwardRef(({children:a,disabled:s,portrait:i,position:r,transition:o},c)=>{let d={position:"absolute",top:0,width:i?"100%":void 0,height:i?void 0:"100%",background:"none",border:0,padding:0,pointerEvents:"all",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:0,transform:i?"translate3d(0, -50% ,0)":"translate3d(-50%, 0, 0)",transition:o?`${i?"top":"left"} ${o}`:void 0};return e.jsx("button",{ref:c,"aria-label":"Drag to move or focus and use arrow keys","aria-orientation":i?"vertical":"horizontal","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r,"data-rcs":"handle-container",disabled:s,role:"slider",style:d,children:a})});Cu.displayName="ThisHandleContainer";var zc=({flip:a})=>e.jsx("div",{className:"__rcs-handle-arrow",style:{width:0,height:0,borderTop:"8px solid transparent",borderRight:"10px solid",borderBottom:"8px solid transparent",transform:a?"rotate(180deg)":void 0}}),ov=({className:a="__rcs-handle-root",disabled:s,buttonStyle:i,linesStyle:r,portrait:o,style:c,...d})=>{let f={display:"flex",flexDirection:o?"row":"column",placeItems:"center",height:"100%",cursor:s?"not-allowed":o?"ns-resize":"ew-resize",pointerEvents:"none",color:"#fff",...c},m={flexGrow:1,height:o?2:"100%",width:o?"100%":2,backgroundColor:"currentColor",pointerEvents:"auto",boxShadow:"0 0 4px rgba(0,0,0,.5)",...r},u={display:"grid",gridAutoFlow:"column",gap:8,placeContent:"center",flexShrink:0,width:56,height:56,borderRadius:"50%",borderStyle:"solid",borderWidth:2,pointerEvents:"auto",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",backgroundColor:"rgba(0, 0, 0, 0.125)",boxShadow:"0 0 4px rgba(0,0,0,.35)",transform:o?"rotate(90deg)":void 0,...i};return e.jsxs("div",{...d,className:a,style:f,children:[e.jsx("div",{className:"__rcs-handle-line",style:m}),e.jsxs("div",{className:"__rcs-handle-button",style:u,children:[e.jsx(zc,{}),e.jsx(zc,{flip:!0})]}),e.jsx("div",{className:"__rcs-handle-line",style:m})]})},Eu=(a=>(a.ARROW_LEFT="ArrowLeft",a.ARROW_RIGHT="ArrowRight",a.ARROW_UP="ArrowUp",a.ARROW_DOWN="ArrowDown",a))(Eu||{}),lv=({boxSizing:a="border-box",objectFit:s="cover",objectPosition:i="center center",...r}={})=>({display:"block",width:"100%",height:"100%",maxWidth:"100%",boxSizing:a,objectFit:s,objectPosition:i,...r}),cv=a=>{let s=k.useRef(a);return k.useEffect(()=>{s.current=a}),s.current},yr=(a,s,i,r)=>{let o=k.useRef();k.useEffect(()=>{o.current=s},[s]),k.useEffect(()=>{if(!(i&&i.addEventListener))return;let c=d=>o.current&&o.current(d);return i.addEventListener(a,c,r),()=>{i.removeEventListener(a,c,r)}},[a,i,r])},dv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?k.useLayoutEffect:k.useEffect,uv=(a,s)=>{let i=k.useRef(),r=k.useCallback(()=>{a.current&&i.current&&i.current.observe(a.current)},[a]);dv(()=>(i.current=new ResizeObserver(([o])=>s(o.contentRect)),r(),()=>{i.current&&i.current.disconnect()}),[s,r])},Ma={capture:!1,passive:!0},_r={capture:!0,passive:!1},hv=a=>{a.preventDefault(),a.currentTarget.focus()},Su=k.forwardRef(({boundsPadding:a=0,browsingContext:s=globalThis,changePositionOnHover:i=!1,disabled:r=!1,handle:o,itemOne:c,itemTwo:d,keyboardIncrement:f="5%",onlyHandleDraggable:m=!1,onPositionChange:u,portrait:x=!1,position:h=50,style:g,transition:b,...w},j)=>{let C=k.useRef(null),A=k.useRef(null),E=k.useRef(null),_=k.useRef(h),[I,S]=k.useState(!1),[R,$]=k.useState(!0),W=k.useRef(!1),[ae,M]=k.useState(),U=cv(h),D=k.useCallback(function({x:N,y:F,isOffset:O}){let B=C.current,z=E.current,V=A.current,{width:Z,height:Y,left:ce,top:he}=B.getBoundingClientRect();if(Z===0||Y===0)return;let be=x?O?F-he-s.scrollY:F:O?N-ce-s.scrollX:N,we=Math.min(Math.max(be/(x?Y:Z)*100,0),100),Oe=x?Y/(B.offsetHeight||1):Z/(B.offsetWidth||1),ye=a*Oe/(x?Y:Z)*100,Fe=Math.min(Math.max(we,ye*Oe),100-ye*Oe);_.current=we,z.setAttribute("aria-valuenow",`${Math.round(_.current)}`),z.style.top=x?`${Fe}%`:"0",z.style.left=x?"0":`${Fe}%`,V.style.clipPath=x?`inset(${Fe}% 0 0 0)`:`inset(0 0 0 ${Fe}%)`,u&&u(_.current)},[a,u,x,s]);k.useEffect(()=>{let{width:N,height:F}=C.current.getBoundingClientRect(),O=h===U?_.current:h;D({x:N/100*O,y:F/100*O})},[a,h,x,U,D]);let q=k.useCallback(N=>{N.preventDefault(),!(r||N.button!==0)&&(D({isOffset:!0,x:N.pageX,y:N.pageY}),S(!0),$(!0))},[r,D]),J=k.useCallback(function(N){D({isOffset:!0,x:N.pageX,y:N.pageY}),$(!1)},[D]),se=k.useCallback(()=>{S(!1),$(!0)},[]),te=k.useCallback(({width:N,height:F})=>{let{width:O,height:B}=C.current.getBoundingClientRect();D({x:N/100*_.current*O/N,y:F/100*_.current*B/F})},[D]),ue=k.useCallback(N=>{if(!Object.values(Eu).includes(N.key))return;N.preventDefault(),$(!0);let{top:F,left:O}=E.current.getBoundingClientRect(),{width:B,height:z}=C.current.getBoundingClientRect(),V=typeof f=="string"?parseFloat(f):f/B*100,Z=x?N.key==="ArrowLeft"||N.key==="ArrowDown":N.key==="ArrowRight"||N.key==="ArrowUp",Y=Math.min(Math.max(Z?_.current+V:_.current-V,0),100);D({x:x?O:B*Y/100,y:x?z*Y/100:F})},[f,x,D]);k.useEffect(()=>{M(m?E.current:C.current)},[m]),k.useEffect(()=>{let N=C.current,F=()=>{I||se()};return i&&(N.addEventListener("pointermove",J,Ma),N.addEventListener("pointerleave",F,Ma)),()=>{N.removeEventListener("pointermove",J),N.removeEventListener("pointerleave",F)}},[i,J,se,I]),k.useEffect(()=>(I&&!W.current&&(s.addEventListener("pointermove",J,Ma),s.addEventListener("pointerup",se,Ma),W.current=!0),()=>{W.current&&(s.removeEventListener("pointermove",J),s.removeEventListener("pointerup",se),W.current=!1)}),[J,se,I,s]),k.useImperativeHandle(j,()=>({rootContainer:C.current,handleContainer:E.current,setPosition(N){let{width:F,height:O}=C.current.getBoundingClientRect();D({x:F/100*N,y:O/100*N})}}),[D]),uv(C,te),yr("keydown",ue,E.current,_r),yr("click",hv,E.current,_r),yr("pointerdown",q,ae,_r);let ne=o||e.jsx(ov,{disabled:r,portrait:x}),Ce=R?b:void 0,P={position:"relative",display:"flex",overflow:"hidden",cursor:I?x?"ns-resize":"ew-resize":void 0,touchAction:"none",userSelect:"none",KhtmlUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",...g};return e.jsxs("div",{...w,ref:C,style:P,"data-rcs":"root",children:[c,e.jsx(ku,{ref:A,transition:Ce,children:d}),e.jsx(Cu,{disabled:r,portrait:x,position:Math.round(_.current),ref:E,transition:Ce,children:ne})]})});Su.displayName="ReactCompareSlider";var Hr=k.forwardRef(({style:a,...s},i)=>{let r=lv(a);return e.jsx("img",{ref:i,...s,style:r,"data-rcs":"image"})});Hr.displayName="ReactCompareSliderImage";var vo={};(function a(s,i,r,o){var c=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",f=(function(){if(!s.OffscreenCanvas)return!1;try{var P=new OffscreenCanvas(1,1),N=P.getContext("2d");N.fillRect(0,0,1,1);var F=P.transferToImageBitmap();N.createPattern(F,"no-repeat")}catch{return!1}return!0})();function m(){}function u(P){var N=i.exports.Promise,F=N!==void 0?N:s.Promise;return typeof F=="function"?new F(P):(P(m,m),null)}var x=(function(P,N){return{transform:function(F){if(P)return F;if(N.has(F))return N.get(F);var O=new OffscreenCanvas(F.width,F.height),B=O.getContext("2d");return B.drawImage(F,0,0),N.set(F,O),O},clear:function(){N.clear()}}})(f,new Map),h=(function(){var P=Math.floor(16.666666666666668),N,F,O={},B=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(N=function(z){var V=Math.random();return O[V]=requestAnimationFrame(function Z(Y){B===Y||B+P-1<Y?(B=Y,delete O[V],z()):O[V]=requestAnimationFrame(Z)}),V},F=function(z){O[z]&&cancelAnimationFrame(O[z])}):(N=function(z){return setTimeout(z,P)},F=function(z){return clearTimeout(z)}),{frame:N,cancel:F}})(),g=(function(){var P,N,F={};function O(B){function z(V,Z){B.postMessage({options:V||{},callback:Z})}B.init=function(Z){var Y=Z.transferControlToOffscreen();B.postMessage({canvas:Y},[Y])},B.fire=function(Z,Y,ce){if(N)return z(Z,null),N;var he=Math.random().toString(36).slice(2);return N=u(function(be){function we(Oe){Oe.data.callback===he&&(delete F[he],B.removeEventListener("message",we),N=null,x.clear(),ce(),be())}B.addEventListener("message",we),z(Z,he),F[he]=we.bind(null,{data:{callback:he}})}),N},B.reset=function(){B.postMessage({reset:!0});for(var Z in F)F[Z](),delete F[Z]}}return function(){if(P)return P;if(!r&&c){var B=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([B])))}catch(z){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",z),null}O(P)}return P}})(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function w(P,N){return N?N(P):P}function j(P){return P!=null}function C(P,N,F){return w(P&&j(P[N])?P[N]:b[N],F)}function A(P){return P<0?0:Math.floor(P)}function E(P,N){return Math.floor(Math.random()*(N-P))+P}function _(P){return parseInt(P,16)}function I(P){return P.map(S)}function S(P){var N=String(P).replace(/[^0-9a-f]/gi,"");return N.length<6&&(N=N[0]+N[0]+N[1]+N[1]+N[2]+N[2]),{r:_(N.substring(0,2)),g:_(N.substring(2,4)),b:_(N.substring(4,6))}}function R(P){var N=C(P,"origin",Object);return N.x=C(N,"x",Number),N.y=C(N,"y",Number),N}function $(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function W(P){var N=P.getBoundingClientRect();P.width=N.width,P.height=N.height}function ae(P){var N=document.createElement("canvas");return N.style.position="fixed",N.style.top="0px",N.style.left="0px",N.style.pointerEvents="none",N.style.zIndex=P,N}function M(P,N,F,O,B,z,V,Z,Y){P.save(),P.translate(N,F),P.rotate(z),P.scale(O,B),P.arc(0,0,1,V,Z,Y),P.restore()}function U(P){var N=P.angle*(Math.PI/180),F=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-N+(.5*F-Math.random()*F),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function D(P,N){N.x+=Math.cos(N.angle2D)*N.velocity+N.drift,N.y+=Math.sin(N.angle2D)*N.velocity+N.gravity,N.velocity*=N.decay,N.flat?(N.wobble=0,N.wobbleX=N.x+10*N.scalar,N.wobbleY=N.y+10*N.scalar,N.tiltSin=0,N.tiltCos=0,N.random=1):(N.wobble+=N.wobbleSpeed,N.wobbleX=N.x+10*N.scalar*Math.cos(N.wobble),N.wobbleY=N.y+10*N.scalar*Math.sin(N.wobble),N.tiltAngle+=.1,N.tiltSin=Math.sin(N.tiltAngle),N.tiltCos=Math.cos(N.tiltAngle),N.random=Math.random()+2);var F=N.tick++/N.totalTicks,O=N.x+N.random*N.tiltCos,B=N.y+N.random*N.tiltSin,z=N.wobbleX+N.random*N.tiltCos,V=N.wobbleY+N.random*N.tiltSin;if(P.fillStyle="rgba("+N.color.r+", "+N.color.g+", "+N.color.b+", "+(1-F)+")",P.beginPath(),d&&N.shape.type==="path"&&typeof N.shape.path=="string"&&Array.isArray(N.shape.matrix))P.fill(ue(N.shape.path,N.shape.matrix,N.x,N.y,Math.abs(z-O)*.1,Math.abs(V-B)*.1,Math.PI/10*N.wobble));else if(N.shape.type==="bitmap"){var Z=Math.PI/10*N.wobble,Y=Math.abs(z-O)*.1,ce=Math.abs(V-B)*.1,he=N.shape.bitmap.width*N.scalar,be=N.shape.bitmap.height*N.scalar,we=new DOMMatrix([Math.cos(Z)*Y,Math.sin(Z)*Y,-Math.sin(Z)*ce,Math.cos(Z)*ce,N.x,N.y]);we.multiplySelf(new DOMMatrix(N.shape.matrix));var Oe=P.createPattern(x.transform(N.shape.bitmap),"no-repeat");Oe.setTransform(we),P.globalAlpha=1-F,P.fillStyle=Oe,P.fillRect(N.x-he/2,N.y-be/2,he,be),P.globalAlpha=1}else if(N.shape==="circle")P.ellipse?P.ellipse(N.x,N.y,Math.abs(z-O)*N.ovalScalar,Math.abs(V-B)*N.ovalScalar,Math.PI/10*N.wobble,0,2*Math.PI):M(P,N.x,N.y,Math.abs(z-O)*N.ovalScalar,Math.abs(V-B)*N.ovalScalar,Math.PI/10*N.wobble,0,2*Math.PI);else if(N.shape==="star")for(var ye=Math.PI/2*3,Fe=4*N.scalar,et=8*N.scalar,qe=N.x,$e=N.y,Ye=5,ie=Math.PI/Ye;Ye--;)qe=N.x+Math.cos(ye)*et,$e=N.y+Math.sin(ye)*et,P.lineTo(qe,$e),ye+=ie,qe=N.x+Math.cos(ye)*Fe,$e=N.y+Math.sin(ye)*Fe,P.lineTo(qe,$e),ye+=ie;else P.moveTo(Math.floor(N.x),Math.floor(N.y)),P.lineTo(Math.floor(N.wobbleX),Math.floor(B)),P.lineTo(Math.floor(z),Math.floor(V)),P.lineTo(Math.floor(O),Math.floor(N.wobbleY));return P.closePath(),P.fill(),N.tick<N.totalTicks}function q(P,N,F,O,B){var z=N.slice(),V=P.getContext("2d"),Z,Y,ce=u(function(he){function be(){Z=Y=null,V.clearRect(0,0,O.width,O.height),x.clear(),B(),he()}function we(){r&&!(O.width===o.width&&O.height===o.height)&&(O.width=P.width=o.width,O.height=P.height=o.height),!O.width&&!O.height&&(F(P),O.width=P.width,O.height=P.height),V.clearRect(0,0,O.width,O.height),z=z.filter(function(Oe){return D(V,Oe)}),z.length?Z=h.frame(we):be()}Z=h.frame(we),Y=be});return{addFettis:function(he){return z=z.concat(he),ce},canvas:P,promise:ce,reset:function(){Z&&h.cancel(Z),Y&&Y()}}}function J(P,N){var F=!P,O=!!C(N||{},"resize"),B=!1,z=C(N,"disableForReducedMotion",Boolean),V=c&&!!C(N||{},"useWorker"),Z=V?g():null,Y=F?$:W,ce=P&&Z?!!P.__confetti_initialized:!1,he=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,be;function we(ye,Fe,et){for(var qe=C(ye,"particleCount",A),$e=C(ye,"angle",Number),Ye=C(ye,"spread",Number),ie=C(ye,"startVelocity",Number),pe=C(ye,"decay",Number),xe=C(ye,"gravity",Number),Ee=C(ye,"drift",Number),Re=C(ye,"colors",I),_t=C(ye,"ticks",Number),Qe=C(ye,"shapes"),St=C(ye,"scalar"),ss=!!C(ye,"flat"),ps=R(ye),At=qe,is=[],Wt=P.width*ps.x,Qs=P.height*ps.y;At--;)is.push(U({x:Wt,y:Qs,angle:$e,spread:Ye,startVelocity:ie,color:Re[At%Re.length],shape:Qe[E(0,Qe.length)],ticks:_t,decay:pe,gravity:xe,drift:Ee,scalar:St,flat:ss}));return be?be.addFettis(is):(be=q(P,is,Y,Fe,et),be.promise)}function Oe(ye){var Fe=z||C(ye,"disableForReducedMotion",Boolean),et=C(ye,"zIndex",Number);if(Fe&&he)return u(function(ie){ie()});F&&be?P=be.canvas:F&&!P&&(P=ae(et),document.body.appendChild(P)),O&&!ce&&Y(P);var qe={width:P.width,height:P.height};Z&&!ce&&Z.init(P),ce=!0,Z&&(P.__confetti_initialized=!0);function $e(){if(Z){var ie={getBoundingClientRect:function(){if(!F)return P.getBoundingClientRect()}};Y(ie),Z.postMessage({resize:{width:ie.width,height:ie.height}});return}qe.width=qe.height=null}function Ye(){be=null,O&&(B=!1,s.removeEventListener("resize",$e)),F&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,ce=!1)}return O&&!B&&(B=!0,s.addEventListener("resize",$e,!1)),Z?Z.fire(ye,qe,Ye):we(ye,qe,Ye)}return Oe.reset=function(){Z&&Z.reset(),be&&be.reset()},Oe}var se;function te(){return se||(se=J(null,{useWorker:!0,resize:!0})),se}function ue(P,N,F,O,B,z,V){var Z=new Path2D(P),Y=new Path2D;Y.addPath(Z,new DOMMatrix(N));var ce=new Path2D;return ce.addPath(Y,new DOMMatrix([Math.cos(V)*B,Math.sin(V)*B,-Math.sin(V)*z,Math.cos(V)*z,F,O])),ce}function ne(P){if(!d)throw new Error("path confetti are not supported in this browser");var N,F;typeof P=="string"?N=P:(N=P.path,F=P.matrix);var O=new Path2D(N),B=document.createElement("canvas"),z=B.getContext("2d");if(!F){for(var V=1e3,Z=V,Y=V,ce=0,he=0,be,we,Oe=0;Oe<V;Oe+=2)for(var ye=0;ye<V;ye+=2)z.isPointInPath(O,Oe,ye,"nonzero")&&(Z=Math.min(Z,Oe),Y=Math.min(Y,ye),ce=Math.max(ce,Oe),he=Math.max(he,ye));be=ce-Z,we=he-Y;var Fe=10,et=Math.min(Fe/be,Fe/we);F=[et,0,0,et,-Math.round(be/2+Z)*et,-Math.round(we/2+Y)*et]}return{type:"path",path:N,matrix:F}}function Ce(P){var N,F=1,O="#000000",B='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?N=P:(N=P.text,F="scalar"in P?P.scalar:F,B="fontFamily"in P?P.fontFamily:B,O="color"in P?P.color:O);var z=10*F,V=""+z+"px "+B,Z=new OffscreenCanvas(z,z),Y=Z.getContext("2d");Y.font=V;var ce=Y.measureText(N),he=Math.ceil(ce.actualBoundingBoxRight+ce.actualBoundingBoxLeft),be=Math.ceil(ce.actualBoundingBoxAscent+ce.actualBoundingBoxDescent),we=2,Oe=ce.actualBoundingBoxLeft+we,ye=ce.actualBoundingBoxAscent+we;he+=we+we,be+=we+we,Z=new OffscreenCanvas(he,be),Y=Z.getContext("2d"),Y.font=V,Y.fillStyle=O,Y.fillText(N,Oe,ye);var Fe=1/F;return{type:"bitmap",bitmap:Z.transferToImageBitmap(),matrix:[Fe,0,0,Fe,-he*Fe/2,-be*Fe/2]}}i.exports=function(){return te().apply(this,arguments)},i.exports.reset=function(){te().reset()},i.exports.create=J,i.exports.shapeFromPath=ne,i.exports.shapeFromText=Ce})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),vo,!1);const mv=vo.exports;vo.exports.create;function pv({isOpen:a,onClose:s}){const i=Ys(o=>o.userId);gt();const r=o=>{let c;o==="starter"?c="https://pay.kirvano.com/30cef9d1-c08e-49ed-b361-2862f182485f":c="https://pay.kirvano.com/b26facd0-9585-4b17-8b68-d58aaf659939";const d=i?`${c}?external_id=${i}`:c;window.open(d,"_blank")};return e.jsx(Be,{children:a&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6",children:[e.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"absolute inset-0 bg-black/90 backdrop-blur-md"}),e.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-6xl bg-[#0a0a0a] border border-white/10 rounded-[3rem] overflow-hidden shadow-[0_0_100px_rgba(255,94,0,0.3)] max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"absolute top-0 inset-x-0 h-60 bg-gradient-to-b from-primary/20 via-primary/5 to-transparent pointer-events-none"}),e.jsx("button",{onClick:s,className:"absolute top-6 right-6 p-3 hover:bg-white/5 rounded-full text-white/40 hover:text-white transition-colors z-10",children:e.jsx(Lt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"p-8 md:p-12 pt-20 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 bg-primary rounded-3xl flex items-center justify-center mb-6 shadow-2xl shadow-primary/40 rotate-12 mx-auto",children:e.jsx(Bt,{className:"w-10 h-10 text-white fill-current"})}),e.jsxs("h2",{className:"text-4xl md:text-6xl font-black italic tracking-tighter uppercase mb-4",children:["Escolha Seu ",e.jsx("span",{className:"text-primary",children:"Arsenal"})]}),e.jsx("p",{className:"text-white/50 font-medium text-lg max-w-2xl mx-auto",children:"De teste gratuito a domnio total do delivery. Voc escolhe o ritmo."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-white/30",children:"Teste Grtis"}),e.jsx("h3",{className:"text-2xl font-black mt-2 mb-1 italic uppercase",children:"Degustao"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-5xl font-black tracking-tight mb-1 italic",children:"R$ 0"}),e.jsx("p",{className:"text-xs font-bold text-white/40",children:"Sem carto  Sem compromisso"})]}),e.jsxs("ul",{className:"space-y-2 mb-8 flex-grow text-sm font-medium text-white/50",children:[e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Rs,{className:"w-4 h-4 text-white/20 shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("span",{className:"text-white font-bold",children:"1 Crdito"})," para testar"]})]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Rs,{className:"w-4 h-4 text-white/20 shrink-0 mt-0.5"}),"Baixa Resoluo (720p)"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Rs,{className:"w-4 h-4 text-white/20 shrink-0 mt-0.5"}),"Com Marca d'gua"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Rs,{className:"w-4 h-4 text-white/20 shrink-0 mt-0.5"}),"1 Estilo disponvel"]})]}),e.jsx(Ve,{to:"/app",onClick:s,className:"mt-auto",children:e.jsx("button",{className:"w-full py-4 rounded-2xl border-2 border-white/10 font-black hover:bg-white/5 transition-all uppercase tracking-widest text-xs",children:"Testar Agora"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-2 border-blue-500/30 rounded-3xl p-8 flex flex-col relative",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-4 py-1 rounded-full font-black text-[10px] tracking-widest uppercase",children:"Ideal Cardpios Pequenos"}),e.jsxs("div",{className:"mb-6 mt-2",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-blue-400",children:"Pagamento nico"}),e.jsx("h3",{className:"text-2xl font-black mt-2 mb-1 italic uppercase",children:"Pack Delivery"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:"text-5xl font-black tracking-tight italic",children:"R$ 97"}),e.jsx("span",{className:"text-lg font-bold text-white/40",children:"/ms"})]}),e.jsx("p",{className:"text-sm font-bold text-blue-400",children:"15 Crditos Mensais"}),e.jsx("p",{className:"text-xs font-black text-white/30 mt-1",children:"(Acumulativos)  R$ 6,40/foto"})]}),e.jsxs("ul",{className:"space-y-2 mb-8 flex-grow text-sm font-medium",children:[e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),e.jsx("span",{className:"text-white font-bold",children:"15 Crditos"})]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),"Full HD (1080p)"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),"Sem Marca d'gua"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),"Todos os Estilos Pro"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(at,{className:"w-4 h-4 text-blue-400 fill-current shrink-0 mt-0.5"}),"Suporte via Email"]})]}),e.jsx("button",{onClick:()=>r("starter"),className:"w-full py-5 rounded-2xl bg-blue-500 hover:bg-blue-600 font-black text-white shadow-xl shadow-blue-500/30 uppercase tracking-tighter text-base transition-all hover:scale-[1.02] active:scale-95 mt-auto",children:"Comprar Pack"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary/20 to-orange-600/10 border-2 border-primary rounded-3xl p-8 flex flex-col relative overflow-hidden transform scale-105",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-primary text-white px-6 py-2 rounded-bl-3xl font-black text-[10px] tracking-widest uppercase italic",children:"MAIS VENDIDO"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-primary/5 to-transparent pointer-events-none"}),e.jsxs("div",{className:"mb-6 mt-6 relative z-10",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-primary",children:"Emprata Neural Engine"}),e.jsx("h3",{className:"text-2xl font-black mt-2 mb-1 italic uppercase",children:"Franquia / Pro"})]}),e.jsxs("div",{className:"mb-6 relative z-10",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:"text-5xl font-black tracking-tight italic",children:"R$ 197"}),e.jsx("span",{className:"text-lg font-bold text-white/40",children:"/ms"})]}),e.jsx("p",{className:"text-sm font-bold text-primary",children:"50 Crditos Mensais + Vibes PRO"}),e.jsx("p",{className:"text-xs font-black text-white/30 mt-1",children:"(Acumulativos)  R$ 3,90/foto "})]}),e.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-3 mb-6 relative z-10",children:e.jsx("p",{className:"text-xs font-black text-primary uppercase tracking-wide text-center",children:" Recomendado para Dark Kitchens"})}),e.jsxs("ul",{className:"space-y-2 mb-8 flex-grow text-sm font-medium relative z-10",children:[e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Vt,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),e.jsx("span",{className:"text-white font-bold",children:"50 Crditos Premium"})]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Vt,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"4K Ultra HD"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Vt,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"Sem Marca d'gua"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Vt,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"Estilos Exclusivos"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Vt,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"Suporte WhatsApp"]}),e.jsxs("li",{className:"flex gap-2 items-start",children:[e.jsx(Vt,{className:"w-4 h-4 text-primary fill-current shrink-0 mt-0.5"}),"Processamento Rpido"]})]}),e.jsxs("button",{onClick:()=>r("pro"),className:"w-full py-5 rounded-2xl bg-primary hover:bg-orange-600 font-black text-white shadow-xl shadow-primary/40 uppercase tracking-tighter text-base transition-all hover:scale-[1.02] active:scale-95 mt-auto relative z-10",children:[e.jsx(un,{className:"w-5 h-5 inline-block mr-2 fill-current"}),"Quero Lucro Mximo"]})]})]}),e.jsx("p",{className:"text-center text-xs font-black uppercase tracking-widest text-white/20 mt-8",children:"Pagamento 100% Seguro  Processado pela Kirvano"})]})]})]})})}function fv(){const[a,s]=k.useState(!1),[i,r]=k.useState(null);return{downloadImage:async(c,d)=>{try{s(!0),r(null);const f=document.createElement("canvas");f.width=1080,f.height=1080;const m=f.getContext("2d");if(!m)throw new Error("Canvas context not available");const u=await xv(c);gv(m,u,f.width,f.height),d==="FREE"&&vv(m,f.width,f.height),await bv(f,"emprata_resultado.jpg")}catch(f){throw console.error("Download error:",f),r("Erro ao baixar imagem. Tente novamente."),f}finally{s(!1)}},isDownloading:a,error:i}}function xv(a){return new Promise((s,i)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>s(r),r.onerror=()=>i(new Error("Failed to load image")),r.src=a})}function gv(a,s,i,r){const o=s.width/s.height,c=i/r;let d=0,f=0,m=s.width,u=s.height;o>c?(m=s.height*c,d=(s.width-m)/2):(u=s.width/c,f=(s.height-u)/2),a.drawImage(s,d,f,m,u,0,0,i,r)}function vv(a,s,i){a.save(),a.translate(s/2,i/2),a.rotate(-Math.PI/4),a.font="bold 80px sans-serif",a.fillStyle="rgba(255, 255, 255, 0.3)",a.textAlign="center",a.textBaseline="middle",a.fillText("EMPRATA.AI - FREE",0,0),a.restore(),a.save();const r=40,o=30;a.font=`bold ${r}px sans-serif`,a.fillStyle="rgba(255, 94, 0, 0.6)",a.strokeStyle="rgba(0, 0, 0, 0.5)",a.lineWidth=3,a.textAlign="right",a.textBaseline="bottom";const c="Emprata.ai";a.strokeText(c,s-o,i-o),a.fillText(c,s-o,i-o),a.restore()}function bv(a,s){return new Promise((i,r)=>{a.toBlob(o=>{if(!o){r(new Error("Failed to create blob"));return}const c=URL.createObjectURL(o),d=document.createElement("a");d.href=c,d.download=s,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),i()},"image/jpeg",.95)})}const wv=[{id:"rustico",name:"Mesa Rstica",image:"https://images.unsplash.com/photo-1547592166-23ac45744acd?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"rustic wooden table, natural lighting, artisanal presentation",description:"Madeira natural, iluminao suave, estilo caseiro"},{id:"gourmet",name:"Mrmore Clean",image:"https://images.unsplash.com/photo-1615799998603-7c6270a45196?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"white marble surface, minimalist, clean aesthetic, soft shadows",description:"Mrmore branco, minimalista, sombras suaves"},{id:"dark",name:"Moody Dark",image:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"dark moody atmosphere, dramatic lighting, black background",description:"Atmosfera escura, iluminao dramtica"},{id:"domingo",name:"Sol de Manh",image:"https://images.unsplash.com/photo-1473093226795-af9932fe5856?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"bright morning sunlight, warm tones, fresh and airy",description:"Luz solar matinal, tons quentes, fresco"},{id:"marble",name:"Onyx Luxo",image:"https://images.unsplash.com/photo-1518013431117-eb1465fa5752?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"black marble, luxury presentation, gold accents",description:"Mrmore preto, apresentao luxuosa"},{id:"neon",name:"Neon Cyber",image:"https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=200&h=200&fit=crop&q=80",isPro:!1,promptKeyword:"neon lights, cyberpunk aesthetic, vibrant colors, futuristic",description:"Luzes neon, esttica cyberpunk, futurista"},{id:"chefs-table",name:"Chef's Table",image:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"fine dining, dramatic spotlight, dark background, professional plating, michelin star presentation",description:"Iluminao dramtica, foco pontual, alta gastronomia"},{id:"editorial",name:"Editorial Magazine",image:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"solid color background, hard shadows, pop art style, magazine editorial, bold composition",description:"Fundo colorido slido, sombras duras, estilo revista"},{id:"morning-brunch",name:"Morning Brunch",image:"https://images.unsplash.com/photo-1533777324565-a040eb52facd?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"intense natural light, plant shadows, airy atmosphere, fresh breakfast setting, window light",description:"Luz natural intensa, sombras de plantas, arejado"},{id:"dark-kitchen",name:"Dark Kitchen",image:"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"slate stone surface, steam rising, industrial style, professional kitchen atmosphere",description:"Pedra ardsia, vapor, estilo industrial"},{id:"golden-hour",name:"Golden Hour",image:"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"sunset lighting, warm golden tones, soft glow, magic hour photography",description:"Luz do pr do sol, tons dourados, brilho suave"},{id:"macro-detail",name:"Macro Detail",image:"https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=200&h=200&fit=crop&q=80",isPro:!0,promptKeyword:"extreme close-up, texture focus, bokeh background, macro photography, shallow depth of field",description:"Foco extremo na textura, fundo desfocado (bokeh)"}],yv=[{id:"top",label:"Flat Lay",subLabel:"90",icon:$h},{id:"diagonal",label:"Diner's Eye",subLabel:"45",icon:Gh},{id:"front",label:"The Hero",subLabel:"0",icon:en},{id:"macro",label:"Macro",subLabel:"Close",icon:Wh}];function _v(){const a=Ys(),{user:s}=Ze(),{downloadImage:i,isDownloading:r,error:o}=fv(),[c,d]=k.useState(!1),[f,m]=k.useState(!1),[u,x]=k.useState(null),[h,g]=k.useState(""),[b,w]=k.useState(!1),[j,C]=k.useState(!1),[A,E]=k.useState(!1),_=k.useRef(null),I=async M=>new Promise((U,D)=>{const q=new Image,J=document.createElement("canvas"),se=J.getContext("2d");if(!se){D(new Error("Canvas context not available"));return}q.onload=()=>{console.log(" Cortando imagem para 1080x1080...");const te=Math.min(q.width,q.height),ue=(q.width-te)/2,ne=(q.height-te)/2;J.width=1080,J.height=1080,se.drawImage(q,ue,ne,te,te,0,0,1080,1080),J.toBlob(Ce=>{if(Ce){const P=new File([Ce],M.name,{type:"image/jpeg",lastModified:Date.now()});console.log(" Imagem cortada:",P.size,"bytes"),U(P)}else D(new Error("Failed to create blob from canvas"))},"image/jpeg",.95)},q.onerror=()=>D(new Error("Failed to load image for cropping")),q.src=URL.createObjectURL(M)});k.useEffect(()=>{if(a.generatedImage){C(!0),w(!1);const M=new Image;M.onload=()=>{console.log(" Imagem carregada com sucesso"),w(!0),C(!1)},M.onerror=()=>{console.error(" Erro ao carregar imagem"),x("Erro ao carregar a imagem gerada."),C(!1),a.setGeneratedImage(null)},M.src=a.generatedImage}else w(!1),C(!1)},[a.generatedImage]),k.useEffect(()=>{o&&x(o)},[o]);const S=async M=>{const U=M.target.files?.[0];if(U)try{E(!0),x(null);const D=await I(U),q=URL.createObjectURL(D);a.setOriginalImage(q,D),E(!1)}catch(D){console.error("Erro ao processar imagem:",D),x("Erro ao processar a imagem."),E(!1)}},R=(M,U)=>{const D=a.plan.toLowerCase();if(U&&D==="free"){d(!0);return}a.setVibe(M)},$=async()=>{if(!(!a.originalImage||!a.originalFile||a.isGenerating)){if(a.plan==="FREE"&&a.credits<=0){d(!0);return}a.setIsGenerating(!0),x(null);try{g("Identificando textura..."),await new Promise(U=>setTimeout(U,800)),g("Ajustando iluminao..."),await new Promise(U=>setTimeout(U,800)),g("Empratando...");const M=await Nu({file:a.originalFile,vibe:a.selectedVibe,angle:a.selectedPerspective,lightIntensity:a.lightIntensity});M.success&&M.imageUrl?(console.log(" URL recebida:",M.imageUrl),a.setGeneratedImage(M.imageUrl),a.useCredit(),setTimeout(()=>{mv({particleCount:200,spread:100,origin:{y:.6},colors:["#ff5e00","#FFC107","#FFFFFF"],ticks:300})},500)):x(M.error||"A Engine Neural falhou.")}catch(M){console.error(M),x("Erro de conexo.")}finally{a.setIsGenerating(!1),g("")}}},W=async()=>{if(a.generatedImage){if(!s){m(!0);return}try{await i(a.generatedImage,a.plan)}catch(M){console.error("Download failed:",M)}}},ae=()=>e.jsxs("div",{className:"space-y-6 md:space-y-12 pb-safe",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30",children:"Vibe da Foto"}),e.jsx(at,{className:"w-4 h-4 text-primary"})]}),e.jsx("div",{className:"flex md:grid md:grid-cols-2 gap-3 overflow-x-auto md:overflow-x-visible no-scrollbar pb-2 px-4 md:px-0 scroll-px-4",children:wv.map(M=>{const U=M.isPro&&a.plan.toLowerCase()==="free";return e.jsx("button",{onClick:()=>R(M.id,M.isPro),className:`flex-shrink-0 w-24 h-24 md:w-auto md:aspect-square rounded-2xl md:rounded-[2rem] overflow-hidden border-2 transition-all duration-300 group ${a.selectedVibe===M.id?"border-primary ring-2 ring-primary/20 scale-105":"border-white/5"}`,children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:M.image,alt:M.name,className:`w-full h-full object-cover transition-transform duration-700 ${a.selectedVibe===M.id?"scale-110":"group-hover:scale-105"}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-2 md:p-5",children:e.jsx("span",{className:"text-[9px] md:text-xs font-black uppercase tracking-tight italic",children:M.name})}),U&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 md:w-8 md:h-8 bg-black/60 backdrop-blur-md rounded-full flex items-center justify-center border border-white/10",children:e.jsx(Dt,{className:"w-3 h-3 md:w-4 md:h-4 text-amber-500 fill-current"})})]})},M.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30 mb-4",children:"ngulo"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 md:gap-3",children:yv.map(M=>e.jsxs("button",{onClick:()=>a.setPerspective(M.id),className:`flex flex-col items-center gap-1 md:gap-2 p-2 md:p-4 rounded-2xl md:rounded-3xl border-2 transition-all ${a.selectedPerspective===M.id?"bg-primary border-primary text-white shadow-xl shadow-primary/20":"bg-white/5 border-white/5 text-white/40"}`,children:[e.jsx(M.icon,{className:"w-5 h-5 md:w-6 md:h-6"}),e.jsx("span",{className:"text-[8px] md:text-[9px] font-black uppercase tracking-tight",children:M.label}),e.jsx("span",{className:"text-[7px] md:text-[8px] font-bold text-white/60",children:M.subLabel})]},M.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30",children:"Luz"}),e.jsxs("span",{className:"text-sm font-black text-primary italic",children:[a.lightIntensity,"%"]})]}),e.jsxs("div",{className:"relative h-10 md:h-12 flex items-center",children:[e.jsx("div",{className:"absolute inset-x-0 h-2 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-orange-900 via-primary to-amber-200",style:{width:`${a.lightIntensity}%`}})}),e.jsx("input",{type:"range",min:"0",max:"100",value:a.lightIntensity,disabled:a.plan==="FREE",onChange:M=>a.setLightIntensity(parseInt(M.target.value)),className:`absolute inset-x-0 appearance-none bg-transparent cursor-pointer z-10 h-10 md:h-12 ${a.plan==="FREE"?"cursor-not-allowed opacity-50":""}`})]}),a.plan==="FREE"&&e.jsxs("div",{onClick:()=>d(!0),className:"flex items-center gap-2 mt-3 text-[9px] md:text-[10px] font-bold text-amber-500 uppercase cursor-pointer",children:[e.jsx(Dt,{className:"w-3 h-3"})," PRO"]})]}),e.jsx(Q.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:$,disabled:!a.originalImage||a.isGenerating||a.plan==="FREE"&&a.credits<=0,className:`w-full py-6 md:py-8 rounded-3xl md:rounded-[2.5rem] font-black text-lg md:text-2xl uppercase italic tracking-ultra-tight flex items-center justify-center gap-3 md:gap-4 transition-all shadow-2xl shimmer ${a.originalImage&&!a.isGenerating?"bg-primary text-white shadow-orange-intense":"bg-white/5 text-white/20 cursor-not-allowed"}`,children:a.isGenerating?e.jsx(Xr,{className:"w-6 h-6 md:w-8 md:h-8 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-6 h-6 md:w-8 md:h-8 fill-current"}),"GERAR MGICA"]})})]});return e.jsxs("div",{className:"min-h-[100dvh] w-screen bg-[#0a0a0a] text-white flex flex-col md:flex-row font-sans overflow-hidden",children:[e.jsx(pv,{isOpen:c,onClose:()=>d(!1)}),e.jsx(Id,{isOpen:f,onClose:()=>m(!1)}),e.jsxs("header",{className:"md:hidden absolute top-0 left-0 right-0 z-50 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent backdrop-blur-sm",children:[e.jsx(Ve,{to:"/dashboard",className:"text-white/60 hover:text-white transition-colors",children:e.jsx(Tr,{className:"w-7 h-7"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-black/60 backdrop-blur-xl px-3 py-1.5 rounded-full border border-white/10",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a.credits>0?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-white/80",children:a.plan==="PRO"?"":a.credits})]}),a.originalImage&&e.jsx("button",{onClick:()=>a.resetEditor(),className:"p-2 bg-white/5 hover:bg-white/10 rounded-full border border-white/10 transition-colors",title:"Nova Foto",children:e.jsx(fl,{className:"w-4 h-4 text-white/60"})}),a.generatedImage&&b&&e.jsx("button",{onClick:W,disabled:r,className:"p-2 bg-primary rounded-full disabled:opacity-50",children:r?e.jsx(ve,{className:"w-4 h-4 text-white animate-spin"}):e.jsx(pi,{className:"w-4 h-4 text-white"})})]})]}),e.jsxs("header",{className:"hidden md:flex h-20 w-full border-b border-white/5 items-center justify-between px-8 bg-[#0a0a0a]/80 backdrop-blur-3xl z-40 absolute top-0 left-0 right-0",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(Ve,{to:"/dashboard",className:"text-white/40 hover:text-white transition-colors",children:e.jsx(Tr,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h1",{className:"text-xl font-black italic tracking-ultra-tight leading-none",children:["Emprata",e.jsx("span",{className:"text-primary",children:".ai"})," Studio"]}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/30",children:"v10.0 Admin Ready"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Td,{}),a.originalImage&&e.jsxs("button",{onClick:()=>a.resetEditor(),className:"flex items-center gap-2 px-5 py-3 rounded-2xl font-black text-xs uppercase tracking-widest border border-white/10 text-white/60 hover:text-white hover:border-white/20 hover:bg-white/5 transition-all",children:[e.jsx(fl,{className:"w-4 h-4"}),"Nova Foto"]}),e.jsx("button",{onClick:W,disabled:!a.generatedImage||!b||r,className:`px-8 py-3 rounded-2xl font-black text-xs uppercase tracking-widest shadow-lg transition-all ${a.generatedImage&&b&&!r?"bg-primary text-white shadow-orange-glow hover:scale-105 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"}`,children:r?"Exportando...":"Exportar"})]})]}),e.jsx(Be,{children:u&&e.jsxs(Q.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-20 md:top-24 left-1/2 -translate-x-1/2 z-50 bg-red-500/90 backdrop-blur-xl px-4 md:px-6 py-3 md:py-4 rounded-2xl border border-red-400/50 shadow-2xl flex items-center gap-3 md:gap-4 max-w-[90%] md:max-w-none",children:[e.jsx(ld,{className:"w-4 h-4 md:w-5 md:h-5 text-white flex-shrink-0"}),e.jsx("p",{className:"text-xs md:text-sm font-bold text-white uppercase tracking-tight",children:u}),e.jsx("button",{onClick:()=>x(null),className:"p-1 hover:bg-white/10 rounded-full transition-colors flex-shrink-0",children:e.jsx(Lt,{className:"w-3 h-3 md:w-4 md:h-4 text-white"})})]})}),e.jsx("aside",{className:"hidden md:flex w-[400px] h-full border-r border-white/5 flex-col bg-[#0a0a0a] z-10 overflow-y-auto no-scrollbar mt-20",children:e.jsx("div",{className:"p-8",children:e.jsx(ae,{})})}),e.jsxs("section",{className:`flex-1 relative min-h-0 flex items-center justify-center bg-[#0a0a0a] overflow-hidden \r
                          h-[55%] md:h-full w-full md:flex-1 md:mt-20`,children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"60px 60px"}}),e.jsx(Be,{mode:"wait",children:a.originalImage?e.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"relative w-full h-full flex items-center justify-center p-4 md:p-12",children:e.jsxs("div",{className:"relative w-full h-full max-w-5xl max-h-5xl flex items-center justify-center",children:[e.jsx("div",{className:"relative shadow-[0_50px_100px_-30px_rgba(0,0,0,1)] border-4 md:border-[12px] border-white/5 rounded-2xl md:rounded-3xl overflow-hidden bg-black w-full h-full max-w-full max-h-full aspect-square",children:a.generatedImage&&b?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx(Su,{itemOne:e.jsxs("div",{className:"relative h-full flex items-center justify-center bg-black",children:[e.jsx(Hr,{src:a.originalImage,alt:"Original",style:{width:"100%",height:"100%",objectFit:"contain"}}),e.jsx("div",{className:"absolute top-4 left-4 bg-black/60 backdrop-blur-xl px-3 py-1.5 rounded-full border border-white/10 text-[9px] md:text-[10px] font-black uppercase tracking-widest text-white/40 italic",children:"Original"})]}),itemTwo:e.jsxs("div",{className:"relative h-full flex items-center justify-center bg-black",children:[e.jsx(Hr,{src:a.generatedImage,alt:"Generated",style:{width:"100%",height:"100%",objectFit:"contain"}}),e.jsx("div",{className:"absolute top-4 right-4 bg-primary/80 backdrop-blur-xl px-3 py-1.5 rounded-full border border-white/10 text-[9px] md:text-[10px] font-black uppercase tracking-widest text-white italic shadow-lg",children:"Neural"})]}),className:"w-full h-full"}),a.plan==="FREE"&&e.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center z-10",children:e.jsx("div",{className:"rotate-45 text-white/5 text-6xl md:text-[10rem] font-black tracking-ultra-tight select-none whitespace-nowrap",children:"Emprata.ai"})})]}):j?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4 md:gap-6 bg-black",children:[e.jsx(ve,{className:"w-12 h-12 md:w-16 md:h-16 text-primary animate-spin"}),e.jsx("span",{className:"text-sm md:text-lg font-black italic uppercase tracking-widest text-primary/80",children:"Carregando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:a.originalImage,className:`w-full h-full object-contain transition-all duration-700 ${a.isGenerating?"blur-2xl opacity-40 scale-110":""}`,alt:"Preview"}),a.isGenerating&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4 md:gap-6 z-20",children:[e.jsxs("div",{className:"relative w-16 h-16 md:w-24 md:h-24",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/5 border-t-primary animate-spin"}),e.jsx("div",{className:"absolute inset-2 md:inset-4 rounded-full border-4 border-white/5 border-b-primary animate-spin-reverse"})]}),e.jsx("span",{className:"text-base md:text-2xl font-black italic uppercase tracking-widest animate-pulse text-primary drop-shadow-[0_0_15px_rgba(255,94,0,0.5)] px-4 text-center",children:h||"Processando..."})]})]})}),a.isGenerating&&e.jsx("div",{className:"scanner-line"})]})},"editor"):e.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},onClick:()=>!A&&_.current?.click(),className:`group flex flex-col items-center ${A?"cursor-wait":"cursor-pointer"}`,children:[e.jsxs("div",{className:"w-32 h-32 md:w-56 md:h-56 bg-white/5 border-2 border-dashed border-white/20 rounded-3xl md:rounded-[4rem] flex items-center justify-center text-white/20 group-hover:border-primary group-hover:text-primary transition-all duration-500 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/0 group-hover:bg-primary/5 transition-all duration-500 rounded-3xl md:rounded-[4rem]"}),A?e.jsx(ve,{className:"w-12 h-12 md:w-20 md:h-20 animate-spin text-primary"}):e.jsx(dn,{className:"w-12 h-12 md:w-20 md:h-20"}),e.jsx("input",{ref:_,type:"file",onChange:S,className:"hidden",accept:"image/*",disabled:A})]}),e.jsxs("div",{className:"mt-6 md:mt-10 text-center px-4",children:[e.jsx("h2",{className:"text-xl md:text-3xl font-black uppercase italic tracking-ultra-tight mb-1 md:mb-2",children:A?"Processando...":"Sirva seu Rango"}),e.jsx("p",{className:"text-white/30 font-bold uppercase tracking-widest text-[10px] md:text-xs",children:A?"Cortando para 1080x1080":"Toque para buscar"})]})]},"empty")})]}),e.jsx("div",{className:"md:hidden w-full h-[45%] bg-[#1a1a1a] rounded-t-[30px] shadow-2xl overflow-y-auto px-6 py-6 z-20 border-t border-white/10",children:e.jsx(ae,{})})]})}function jv(){const[a,s]=k.useState([]),[i,r]=k.useState(!1),[o,c]=k.useState(!1),[d,f]=k.useState({name:"",phone:"",role:"DRIVER",pin:"",vehicle:"",plate:""});k.useEffect(()=>{const b=He.currentUser;if(!b)return;const w=We(ze(le,"staff"),Ie("restaurantId","==",b.uid)),j=Et(w,C=>{s(C.docs.map(A=>({id:A.id,...A.data()})))});return()=>j()},[]);const m=()=>{let b=!1,w="";for(;!b;)w=Math.floor(1e5+Math.random()*9e5).toString(),a.find(C=>C.pin===w)||(b=!0);return w},u=()=>{f(b=>({...b,pin:m()}))};k.useEffect(()=>{i&&!d.pin&&u()},[i]);const x=async()=>{if(!d.name||!d.phone)return X.error("Preencha os dados obrigatrios");c(!0);try{await pn(ze(le,"staff"),{...d,restaurantId:He.currentUser?.uid,active:!0,createdAt:xt()}),X.success("Crach criado! PIN: "+d.pin),r(!1),f({name:"",phone:"",role:"DRIVER",pin:"",vehicle:"",plate:""})}catch{X.error("Erro ao salvar")}finally{c(!1)}},h=async b=>{confirm("Revogar acesso?")&&await vd(Te(le,"staff",b))},g=async b=>{const w=m();confirm(`Atualizar o PIN de ${b.name} para 6 dgitos? Novo ser: ${w}`)&&(await ut(Te(le,"staff",b.id),{pin:w}),X.success("PIN Atualizado!"))};return e.jsxs("div",{className:"space-y-8 p-6 text-white min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black italic flex items-center gap-2",children:[e.jsx(_s,{className:"text-primary"})," Staff & Acessos"]}),e.jsx("p",{className:"text-white/40",children:"Gerenciamento de crachs digitais."})]}),e.jsxs("button",{onClick:()=>r(!0),className:"bg-white text-black px-6 py-3 rounded-xl font-black flex items-center gap-2 hover:scale-105 transition-transform",children:[e.jsx($t,{size:20})," NOVO MEMBRO"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.length===0&&e.jsxs("div",{className:"col-span-full text-center py-20 bg-[#121212] rounded-3xl border border-white/5 border-dashed",children:[e.jsx(qt,{size:48,className:"mx-auto text-white/20 mb-4"}),e.jsx("p",{className:"text-white/40 font-bold",children:"Sua equipe est vazia."}),e.jsx("p",{className:"text-xs text-white/20",children:'Clique em "Novo Membro" para comear.'})]}),a.map(b=>e.jsxs(Q.div,{layout:!0,className:"bg-[#121212] border border-white/10 rounded-2xl p-6 relative group hover:border-white/20 transition-all",children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>h(b.id),className:"text-red-500 hover:bg-red-500/10 p-2 rounded",children:e.jsx($i,{size:16})})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-2xl shadow-lg border border-white/5 ${b.role==="DRIVER"?"bg-green-500/20 text-green-400":b.role==="WAITER"?"bg-blue-500/20 text-blue-400":b.role==="KITCHEN"?"bg-orange-500/20 text-orange-400":"bg-purple-500/20 text-purple-400"}`,children:[b.role==="DRIVER"&&e.jsx(es,{}),b.role==="WAITER"&&e.jsx(cs,{}),b.role==="KITCHEN"&&e.jsx(ot,{}),b.role==="MANAGER"&&e.jsx(_s,{})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg leading-tight",children:b.name}),e.jsx("span",{className:"text-xs font-mono text-white/40 uppercase tracking-widest",children:b.role})]})]}),e.jsx("div",{className:"bg-black/40 rounded-xl p-4 border border-white/5 mb-2 relative overflow-hidden",children:e.jsxs("div",{className:"flex justify-between items-end relative z-10",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-[9px] uppercase font-bold text-white/30 mb-1 flex items-center gap-1",children:[e.jsx(Zh,{size:10})," PIN de Acesso"]}),e.jsx("p",{className:`text-2xl font-mono font-black tracking-[0.2em] select-all ${b.pin.length<6?"text-red-400":"text-white"}`,children:b.pin})]}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(b.pin),X.success("PIN copiado!")},className:"text-white/20 hover:text-white",children:e.jsx(hn,{size:18})})]})}),b.pin.length<6&&e.jsxs("button",{onClick:()=>g(b),className:"w-full mt-2 py-2 bg-red-500/10 text-red-400 text-xs font-bold rounded-lg border border-red-500/20 flex items-center justify-center gap-2 hover:bg-red-500/20",children:[e.jsx(ks,{size:12})," Atualizar para 6 Dgitos"]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-white/5 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/30",children:[e.jsx(Ds,{size:12}),e.jsxs("span",{className:"font-mono",children:["ID: ",b.id.slice(0,6).toUpperCase()]})]}),b.role==="DRIVER"&&b.plate&&e.jsx("span",{className:"text-xs font-bold text-white/40 bg-white/5 px-2 py-1 rounded",children:b.plate.toUpperCase()})]})]},b.id))]}),e.jsx(Be,{children:i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md",children:e.jsxs(Q.div,{initial:{scale:.9},animate:{scale:1},className:"bg-[#121212] w-full max-w-md rounded-3xl border border-white/10 p-8 shadow-2xl",children:[e.jsx("h2",{className:"text-2xl font-black mb-6",children:"Novo Acesso"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["DRIVER","WAITER","KITCHEN","MANAGER"].map(b=>e.jsx("button",{onClick:()=>f({...d,role:b}),className:`py-3 rounded-xl text-xs font-bold border transition-all ${d.role===b?"bg-white text-black border-white":"border-white/10 text-white/40 hover:bg-white/5"}`,children:b==="DRIVER"?"ENTREGADOR":b==="WAITER"?"GAROM":b==="KITCHEN"?"COZINHA":"GERENTE"},b))}),e.jsx("input",{placeholder:"Nome Completo",value:d.name,onChange:b=>f({...d,name:b.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-4 text-white focus:border-primary outline-none"}),e.jsx("input",{placeholder:"WhatsApp (Ex: 11999999999)",value:d.phone,onChange:b=>f({...d,phone:b.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-4 text-white focus:border-primary outline-none"}),d.role==="DRIVER"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{placeholder:"Veculo",value:d.vehicle,onChange:b=>f({...d,vehicle:b.target.value}),className:"bg-black/50 border border-white/10 rounded-xl p-4 text-white text-sm focus:border-primary outline-none"}),e.jsx("input",{placeholder:"Placa",value:d.plate,onChange:b=>f({...d,plate:b.target.value}),className:"bg-black/50 border border-white/10 rounded-xl p-4 text-white text-sm uppercase focus:border-primary outline-none"})]}),e.jsxs("div",{className:"bg-primary/10 border border-primary/20 p-4 rounded-xl flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-primary font-bold uppercase",children:"PIN Gerado (6 Dgitos)"}),e.jsx("p",{className:"text-3xl font-black font-mono text-white tracking-widest",children:d.pin})]}),e.jsx("button",{onClick:u,className:"p-2 bg-white/5 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(Xr,{size:16})})]}),e.jsx("button",{onClick:x,disabled:o,className:"w-full py-4 bg-primary text-black font-black rounded-xl hover:scale-[1.02] transition-transform disabled:opacity-50",children:o?e.jsx(ve,{className:"animate-spin mx-auto"}):"CRIAR CRACH"}),e.jsx("button",{onClick:()=>r(!1),className:"w-full py-2 text-xs text-white/40 font-bold hover:text-white transition-colors",children:"Cancelar"})]})]})})})]})}function Nv(){return e.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-4 md:p-8 pt-24",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 md:p-8 animate-pulse",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 md:w-28 md:h-28 rounded-full bg-white/10"}),e.jsxs("div",{className:"flex-1 text-center md:text-left space-y-3",children:[e.jsx("div",{className:"h-8 bg-white/10 rounded-lg w-48 mx-auto md:mx-0"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-64 mx-auto md:mx-0"})]}),e.jsx("div",{className:"h-12 w-32 bg-white/10 rounded-2xl"})]})}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[1,2,3].map(a=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-24 mb-4"}),e.jsx("div",{className:"h-8 bg-white/10 rounded w-16 mb-2"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-20"})]},a))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1 h-14 bg-white/10 rounded-2xl animate-pulse"}),e.jsx("div",{className:"flex-1 h-14 bg-white/10 rounded-2xl animate-pulse"})]})]})})}function kv(){const a=gt(),{user:s,userData:i,loading:r,signOut:o}=Ze(),{credits:c,plan:d}=Ys(),[f,m]=k.useState(""),[u,x]=k.useState(!1),[h,g]=k.useState(!1),[b,w]=k.useState(null),j=12,A=(()=>{const $=new Date,W=new Date($);W.setDate(W.getDate()+30);const ae=M=>new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(M);return{start:ae($),renewal:ae(W)}})(),E=d?.toLowerCase()||"free",_=E==="pro"||E==="starter";if(k.useEffect(()=>{i?.name?m(i.name):s?.displayName&&m(s.displayName)},[i,s]),r)return e.jsx(Nv,{});if(!s)return e.jsx(Gi,{to:"/",replace:!0});const I=async()=>{if(!(!s||!f.trim()))try{g(!0);const $=Te(le,"users",s.uid);await ut($,{name:f.trim()}),w(" Nome atualizado!"),x(!1),setTimeout(()=>w(null),3e3)}catch($){console.error("Error updating name:",$),w(" Erro ao atualizar")}finally{g(!1)}},S=async()=>{await o(),a("/")},R=()=>{window.open("https://kirvano.com/portal","_blank")};return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-4 md:p-8 pt-24",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 border-b border-white/5 bg-zinc-950/80 backdrop-blur-xl z-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8 py-4 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>a("/app"),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors group",children:[e.jsx(Zs,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"font-bold",children:"Voltar ao Studio"})]}),e.jsxs("h1",{className:"text-xl font-black italic",children:["Emprata",e.jsx("span",{className:"text-primary",children:".ai"})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white/5 border border-white/10 rounded-3xl p-6 md:p-8 backdrop-blur-xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-24 h-24 md:w-28 md:h-28 rounded-full bg-gradient-to-br ${_?"from-primary to-orange-600":"from-gray-500 to-gray-600"} flex items-center justify-center text-4xl font-black ring-4 ${_?"ring-primary/30":"ring-white/10"}`,children:s?.photoURL?e.jsx("img",{src:s.photoURL,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{children:f?.charAt(0)?.toUpperCase()||"U"})}),e.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:scale-110 transition-transform ring-2 ring-zinc-950",children:e.jsx(dn,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start",children:[e.jsx("input",{type:"text",value:f,onChange:$=>{m($.target.value),x(!0)},className:"text-2xl md:text-3xl font-black bg-transparent border-b-2 border-transparent hover:border-white/20 focus:border-primary focus:outline-none transition-colors max-w-[200px] md:max-w-[300px]",placeholder:"Seu Nome"}),u&&e.jsx("button",{onClick:I,disabled:h,className:"p-2 bg-primary rounded-lg hover:bg-orange-600 transition-colors",children:h?e.jsx(ve,{className:"w-4 h-4 animate-spin"}):e.jsx(Jr,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-white/60 justify-center md:justify-start",children:[e.jsx(Ba,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:s?.email})]}),b&&e.jsx(Q.p,{initial:{opacity:0},animate:{opacity:1},className:`text-sm font-bold ${b.includes("")?"text-green-400":"text-red-400"}`,children:b})]}),e.jsxs("div",{className:`px-6 py-3 rounded-2xl ${_?"bg-gradient-to-r from-primary to-orange-600":"bg-white/10"} text-white font-black text-sm uppercase flex items-center gap-2 shadow-lg`,children:[e.jsx(Vt,{className:`w-5 h-5 ${_?"fill-current":""}`}),_?"ASSINANTE PRO":"MEMBRO GRATUITO"]})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"bg-gradient-to-br from-primary/20 to-orange-600/20 border-2 border-primary/30 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Bt,{className:"w-5 h-5 text-primary fill-current"}),e.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider",children:"Crditos"})]}),e.jsx("p",{className:"text-4xl font-black text-white mb-1",children:c}),e.jsx("p",{className:"text-xs text-white/40 font-bold",children:"Disponveis"})]}),e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(cd,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider",children:"Ciclo Atual"})]}),e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"Renovao:"}),e.jsx("span",{className:"font-bold text-sm text-primary",children:A.renewal})]})}),e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[e.jsx(qs,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-green-400 font-bold text-xs",children:"Ativo"})]})]}),e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(tn,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider",children:"Imagens"})]}),e.jsx("p",{className:"text-4xl font-black text-white mb-1",children:j}),e.jsx("p",{className:"text-xs text-white/40 font-bold",children:"Geradas este ms"})]})]}),e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:R,className:"flex-1 bg-primary hover:bg-orange-600 text-white font-black py-4 px-6 rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg shadow-primary/20",children:[e.jsx(sn,{className:"w-5 h-5"}),"Gerenciar Assinatura"]}),e.jsxs("button",{onClick:S,className:"flex-1 bg-white/5 hover:bg-red-500/20 border border-white/10 hover:border-red-500/50 text-white font-bold py-4 px-6 rounded-2xl flex items-center justify-center gap-2 transition-all",children:[e.jsx(Xi,{className:"w-5 h-5"}),"Sair da Conta"]})]})]})]})}const Fc=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a);function Cv(){const[a,s]=k.useState(!0),[i,r]=k.useState("wallet");return k.useEffect(()=>{setTimeout(()=>s(!1),500)},[]),a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:e.jsx(ve,{className:"animate-spin text-primary w-8 h-8"})}):e.jsx("div",{className:"min-h-screen bg-black text-white p-4 md:p-8 pb-32",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black italic tracking-tighter",children:["Minha ",e.jsx("span",{className:"text-primary",children:"Carteira"})]}),e.jsx("p",{className:"text-white/40 text-sm",children:"Acompanhe seu saldo e realize saques."})]}),e.jsxs("div",{className:"flex bg-[#121212] p-1 rounded-xl border border-white/10",children:[e.jsxs("button",{onClick:()=>r("wallet"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="wallet"?"bg-white/10 text-white":"text-white/40"}`,children:[e.jsx(dd,{className:"w-4 h-4"})," Saldo"]}),e.jsxs("button",{onClick:()=>r("extract"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="extract"?"bg-white/10 text-white":"text-white/40"}`,children:[e.jsx(Qr,{className:"w-4 h-4"})," Extrato"]})]})]}),e.jsx(Be,{mode:"wait",children:i==="wallet"?e.jsx(Ev,{}):e.jsx(Sv,{})})]})})}function Ev(){const[a,s]=k.useState({available:0,withdrawFee:5,hasWithdrawAccount:!1,isLocked:!1,hoursUntilUnlock:0,pixKey:""}),[i,r]=k.useState(!1),[o,c]=k.useState(!1),[d,f]=k.useState(""),[m,u]=k.useState(!1),[x,h]=k.useState(""),[g,b]=k.useState("CPF"),[w,j]=k.useState(!1),C=async()=>{try{const I=await vi(bi,"financeGetBalance")();s(I.data),I.data.hasWithdrawAccount&&h(I.data.pixKey)}catch(_){console.error(_)}};k.useEffect(()=>{C()},[]);const A=async _=>{_.preventDefault(),j(!0);try{await vi(bi,"saveWithdrawAccount")({pixKey:x,pixKeyType:g}),X.success("Conta de saque salva!"),c(!1),C()}catch(I){const S=I;X.error(S.message||"Erro ao salvar")}finally{j(!1)}},E=async _=>{_.preventDefault(),u(!0);const I=parseFloat(d.replace(/[^0-9,]/g,"").replace(",","."));try{await vi(bi,"financeWithdraw")({amount:I}),X.success("Saque enviado com sucesso!"),r(!1),f(""),C()}catch(S){const R=S;X.error(R.message||"Erro no saque")}finally{u(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a1a] to-black border border-white/10 rounded-3xl p-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-32 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-primary/10 transition-colors"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-bold text-white/40 uppercase tracking-widest mb-1",children:"Saldo Disponvel"}),e.jsx("h2",{className:"text-4xl font-black text-white mb-6",children:Fc(a.available)}),e.jsx("button",{onClick:()=>a.hasWithdrawAccount?r(!0):c(!0),disabled:a.isLocked,className:"w-full py-3 bg-primary hover:bg-orange-600 rounded-xl font-bold uppercase transition-colors disabled:opacity-50",children:a.isLocked?`Bloqueado (${a.hoursUntilUnlock}h)`:"Sacar Pix"})]})]}),e.jsxs("div",{className:"bg-[#121212] border border-white/10 rounded-3xl p-8 flex flex-col justify-center",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white/40 uppercase tracking-widest mb-1",children:"Conta de Destino"}),a.hasWithdrawAccount?e.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-bold",children:[e.jsx(Rs,{className:"w-4 h-4"})," Ativa"]}):e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 font-bold",children:[e.jsx(ks,{className:"w-4 h-4"})," Pendente"]})]}),e.jsx("button",{onClick:()=>c(!0),className:"text-xs font-bold text-white/40 hover:text-white underline",children:"Alterar"})]}),a.hasWithdrawAccount?e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Chave Pix"}),e.jsx("p",{className:"font-mono text-lg font-bold truncate",children:a.pixKey})]}):e.jsx("p",{className:"text-sm text-white/50",children:"Configure sua chave Pix para receber os saques."})]})]}),e.jsx(Be,{children:o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",children:e.jsxs(Q.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-[#121212] border border-white/10 w-full max-w-md rounded-3xl p-8 relative",children:[e.jsx("button",{onClick:()=>c(!1),className:"absolute top-4 right-4 text-white/30 hover:text-white text-xl",children:""}),e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Configurar Chave Pix"}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["CPF","CNPJ","EMAIL","PHONE","EVP"].map(_=>e.jsx("button",{type:"button",onClick:()=>b(_),className:`text-xs py-2 rounded border transition-colors ${g===_?"bg-primary border-primary text-white":"border-white/10 text-white/40 hover:text-white"}`,children:_},_))}),e.jsx("input",{required:!0,value:x,onChange:_=>h(_.target.value),className:"w-full bg-black border border-white/10 rounded-xl p-3 text-white placeholder:text-white/30 outline-none focus:border-primary",placeholder:"Sua chave..."}),e.jsx("button",{disabled:w,className:"w-full py-3 bg-primary hover:bg-orange-600 rounded-xl font-bold uppercase transition-colors disabled:opacity-50",children:w?e.jsx(ve,{className:"animate-spin mx-auto w-5 h-5"}):"Salvar"})]})]})})}),e.jsx(Be,{children:i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",children:e.jsxs(Q.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-[#121212] border border-white/10 w-full max-w-md rounded-3xl p-8 relative",children:[e.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-white/30 hover:text-white text-xl",children:""}),e.jsx("h3",{className:"text-xl font-bold mb-1",children:"Quanto quer sacar?"}),e.jsxs("p",{className:"text-white/40 text-sm mb-6",children:["Disponvel: ",Fc(a.available-a.withdrawFee)]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsx(Os,{mask:"R$ num",blocks:{num:{mask:Number,scale:2,thousandsSeparator:".",padFractionalZeros:!0,radix:","}},value:d,onAccept:_=>f(_),className:"w-full bg-black border border-white/10 rounded-xl p-4 text-3xl font-bold text-white outline-none focus:border-primary",placeholder:"R$ 0,00"}),e.jsxs("div",{className:"bg-yellow-500/10 p-3 rounded-xl text-xs text-yellow-200/70",children:["Taxa de saque: R$ ",a.withdrawFee.toFixed(2)]}),e.jsx("button",{disabled:m,className:"w-full py-3 bg-primary hover:bg-orange-600 rounded-xl font-bold uppercase transition-colors disabled:opacity-50",children:m?e.jsx(ve,{className:"animate-spin mx-auto w-5 h-5"}):"Confirmar"})]})]})})})]})}function Sv(){const[a,s]=k.useState([]),[i,r]=k.useState(!0);return k.useEffect(()=>{vi(bi,"financeGetStatement")().then(c=>{const d=c.data;s(d.data||[])}).finally(()=>r(!1))},[]),i?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(ve,{className:"animate-spin text-primary w-8 h-8"})}):e.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-[#121212] border border-white/10 rounded-3xl overflow-hidden mt-4",children:a.length===0?e.jsx("div",{className:"p-10 text-center text-white/30",children:"Sem movimentaes."}):a.map(o=>e.jsxs("div",{className:"p-4 border-b border-white/5 flex justify-between items-center hover:bg-white/5 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:o.description}),e.jsx("p",{className:"text-xs text-white/40",children:o.date})]}),e.jsxs("span",{className:`font-mono font-bold ${o.type==="WITHDRAW"?"text-red-400":"text-green-400"}`,children:[o.type==="WITHDRAW"?"-":"+",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o.value)]})]},o.id))})}async function Av(a){const s=We(ze(le,"orders"),Ie("restaurantId","==",a),Ks("createdAt","desc"),so(500)),i=await Gt(s),r={},o={};let c=0;i.docs.forEach(h=>{const g=h.data(),b=g.customer?.uid||g.customer?.phone||"anonymous";r[b]||(r[b]={id:b,name:g.customer?.name||"Cliente",totalSpent:0,orderCount:0,favoriteItems:[],lastOrderDate:g.createdAt,riskLevel:"LOW",tags:[]});const w=g.total||0;r[b].totalSpent+=w,r[b].orderCount+=1,c+=w,g.items?.forEach(j=>{const C=j.name||j.title||"Item";r[b].favoriteItems.push(C),o[C]=(o[C]||0)+(j.quantity||1)})});const d=Object.values(r).map(h=>{const g={};h.favoriteItems.forEach(A=>{g[A]=(g[A]||0)+1});const b=Object.entries(g).sort((A,E)=>E[1]-A[1])[0]?.[0]||"Variado";let w=0;try{const A=h.lastOrderDate?.toDate?.()||new Date(h.lastOrderDate);w=(new Date().getTime()-A.getTime())/(1e3*3600*24)}catch{w=0}let j="LOW";w>30?j="HIGH":w>14&&(j="MEDIUM");const C=[];return h.totalSpent>500&&C.push(" VIP"),h.orderCount===1&&C.push(" Novo"),h.orderCount>=10&&C.push(" Frequente"),(b.toLowerCase().includes("vegan")||b.toLowerCase().includes("salad"))&&C.push(" Saudvel"),{...h,favoriteItems:[b],riskLevel:j,tags:C}}),f={totalCustomers:d.length,activeCustomers:d.filter(h=>h.riskLevel==="LOW").length,atRiskCustomers:d.filter(h=>h.riskLevel==="HIGH").length,vipCustomers:d.filter(h=>h.totalSpent>500).length,avgTicket:d.length>0?c/i.docs.length:0,totalRevenue:c},m=Object.entries(o).sort((h,g)=>g[1]-h[1]).slice(0,5),u=`
    Analise estes dados do meu restaurante de delivery:
    
    DADOS:
    - Top 5 Produtos Mais Vendidos: ${JSON.stringify(m)}
    - Total Clientes: ${f.totalCustomers}
    - Clientes Ativos (ltimos 14 dias): ${f.activeCustomers}
    - Clientes em Risco (mais de 30 dias sem pedir): ${f.atRiskCustomers}
    - Clientes VIP (gastaram +R$500): ${f.vipCustomers}
    - Ticket Mdio: R$ ${f.avgTicket.toFixed(2)}
    - Faturamento Total: R$ ${f.totalRevenue.toFixed(2)}

    Gere um resumo estratgico para o dono do restaurante:
    1. Um insight sobre o estado atual do negcio (max 2 linhas)
    2. Uma ao concreta para melhorar vendas ou recuperar clientes

    Retorne APENAS um JSON vlido (sem markdown):
    { "insight": "texto aqui", "actionItem": "ao aqui" }
  `;let x={insight:"Processando dados de vendas...",actionItem:"Aguarde a anlise completa."};try{const b=(await uo.generateContent(u)).response.text().replace(/```json/g,"").replace(/```/g,"").trim();x=JSON.parse(b)}catch(h){console.error("AI insight error:",h),f.atRiskCustomers>f.activeCustomers*.3?x={insight:`${f.atRiskCustomers} clientes esto h mais de 30 dias sem pedir. Isso representa um risco de perda de receita.`,actionItem:"Envie uma mensagem com desconto exclusivo para reconquistar esses clientes ausentes."}:f.vipCustomers>0&&(x={insight:`Voc tem ${f.vipCustomers} clientes VIP que representam alta receita. Mantenha-os engajados!`,actionItem:"Crie um programa de fidelidade ou oferea vantagens exclusivas para seus top clientes."})}return{profiles:d,aiInsight:x,topProducts:m,stats:f}}function Tv({label:a="EmprataBrain",state:s="idle",compact:i=!1}){const o={idle:{color:"bg-green-500",textColor:"text-green-400",label:"Ativo"},learning:{color:"bg-purple-500",textColor:"text-purple-400",label:"Aprendendo"},working:{color:"bg-blue-500",textColor:"text-blue-400",label:"Processando"},error:{color:"bg-red-500",textColor:"text-red-400",label:"Erro"}}[s];return i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Vs,{size:14,className:`relative z-10 ${o.textColor}`}),e.jsx(Q.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:`absolute inset-0 rounded-full blur-sm ${o.color}`})]}),e.jsx("span",{className:`text-[10px] font-bold uppercase ${o.textColor}`,children:o.label})]}):e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 backdrop-blur-md border border-white/10 px-4 py-2 rounded-full w-fit shadow-[0_0_15px_rgba(0,0,0,0.2)]",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Vs,{size:18,className:`relative z-10 ${o.textColor}`}),e.jsx(Q.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:`absolute inset-0 rounded-full blur-md ${o.color}`})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white/60",children:a}),s==="learning"&&e.jsx(Q.span,{initial:{opacity:0},animate:{opacity:1},className:"text-[9px] text-purple-300 font-bold",children:"Calibrando algoritmos..."}),s==="working"&&e.jsx(Q.span,{initial:{opacity:0},animate:{opacity:1},className:"text-[9px] text-blue-300 font-bold",children:"Analisando dados..."})]})]})}function Pv(){const{user:a}=Ze(),[s,i]=k.useState(null),[r,o]=k.useState(!0),[c,d]=k.useState(""),[f,m]=k.useState(null);k.useEffect(()=>{a?.uid&&(o(!0),Av(a.uid).then(h=>{i(h)}).catch(h=>{console.error("BI Error:",h)}).finally(()=>{o(!1)}))},[a?.uid]);const u=s?.profiles||[],x=u.filter(h=>h.name.toLowerCase().includes(c.toLowerCase())).filter(h=>!f||h.tags.some(g=>g.includes(f))).sort((h,g)=>g.totalSpent-h.totalSpent);return e.jsxs("div",{className:"space-y-8 pb-20",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-[#1a1a1a] to-black border border-white/10 p-8 shadow-2xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-500/10 blur-[120px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-black italic tracking-tighter text-white mb-2",children:["Business ",e.jsx("span",{className:"text-purple-400",children:"Intelligence"})]}),e.jsx("p",{className:"text-white/40 text-sm md:text-base max-w-xl",children:r?"Analisando histrico de pedidos...":`EmprataBrain analisou ${u.length} perfis de consumo.`})]}),e.jsx(Tv,{state:r?"learning":"idle",label:"Neural Engine"})]}),s?.stats&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-6",children:[e.jsx(Ra,{icon:e.jsx(qt,{size:18}),label:"Total Clientes",value:s.stats.totalCustomers.toString(),color:"text-white"}),e.jsx(Ra,{icon:e.jsx(Kh,{size:18}),label:"Ativos",value:s.stats.activeCustomers.toString(),color:"text-green-400"}),e.jsx(Ra,{icon:e.jsx(Yh,{size:18}),label:"Em Risco",value:s.stats.atRiskCustomers.toString(),color:"text-red-400"}),e.jsx(Ra,{icon:e.jsx(Vt,{size:18}),label:"VIPs",value:s.stats.vipCustomers.toString(),color:"text-yellow-400"})]}),!r&&s?.aiInsight&&e.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-6 mt-6 flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xs font-black uppercase text-purple-400 mb-2 flex items-center gap-2",children:[e.jsx(at,{size:14})," Insight Estratgico"]}),e.jsxs("p",{className:"text-white/90 font-medium leading-relaxed",children:['"',s.aiInsight.insight,'"']})]}),e.jsx("div",{className:"h-px w-full md:w-px md:h-auto bg-white/10"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xs font-black uppercase text-green-400 mb-2 flex items-center gap-2",children:[e.jsx(Ji,{size:14})," Ao Recomendada"]}),e.jsxs("p",{className:"text-white/90 font-medium leading-relaxed",children:['"',s.aiInsight.actionItem,'"']})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center sticky top-20 z-30 bg-[#0a0a0a]/80 backdrop-blur-xl py-2 px-1",children:[e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx(ts,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30 group-focus-within:text-primary transition-colors",size:18}),e.jsx("input",{value:c,onChange:h=>d(h.target.value),placeholder:"Buscar por nome do cliente...",className:"w-full bg-[#121212] border border-white/10 rounded-2xl py-3 pl-12 pr-4 text-white focus:border-primary outline-none transition-all shadow-lg"})]}),e.jsx("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[{label:" VIPs",tag:"VIP"},{label:" Risco",tag:null,filter:"risk"},{label:" Novos",tag:"Novo"},{label:" Frequentes",tag:"Frequente"}].map(h=>e.jsx("button",{onClick:()=>m(f===h.tag?null:h.tag),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${f===h.tag?"bg-white text-black":"bg-[#121212] border border-white/10 hover:bg-white/5"}`,children:h.label},h.label))})]}),e.jsxs("div",{className:"bg-[#121212] border border-white/5 rounded-3xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 p-5 border-b border-white/5 bg-white/[0.02] text-xs font-black uppercase tracking-widest text-white/40",children:[e.jsx("div",{className:"col-span-4",children:"Cliente"}),e.jsx("div",{className:"col-span-2 text-right",children:"Gasto Total"}),e.jsx("div",{className:"col-span-2 text-center",children:"Pedidos"}),e.jsx("div",{className:"col-span-2",children:"Favorito"}),e.jsx("div",{className:"col-span-2 text-right",children:"Status"})]}),e.jsx("div",{className:"divide-y divide-white/5",children:r?e.jsxs("div",{className:"p-20 flex flex-col items-center justify-center gap-4",children:[e.jsx(ve,{className:"animate-spin text-purple-400",size:40}),e.jsx("p",{className:"text-white/40 text-sm",children:"Processando DNA dos clientes..."})]}):x.length===0?e.jsxs("div",{className:"p-20 text-center",children:[e.jsx(qt,{size:48,className:"mx-auto text-white/10 mb-4"}),e.jsx("p",{className:"text-white/40",children:"Nenhum cliente encontrado"})]}):x.map(h=>e.jsxs(Q.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"group hover:bg-white/[0.02] transition-colors",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 p-5 items-center",children:[e.jsxs("div",{className:"col-span-4 flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${h.totalSpent>500?"bg-gradient-to-br from-yellow-400 to-orange-500 text-black":"bg-white/10 text-white"}`,children:h.totalSpent>500?e.jsx(Vt,{size:16}):h.name[0]?.toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:h.name}),e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:h.tags.map(g=>e.jsx("span",{className:"text-[9px] bg-white/5 px-1.5 py-0.5 rounded text-white/50",children:g},g))})]})]}),e.jsx("div",{className:"col-span-2 text-right font-mono text-white/80",children:Rt(h.totalSpent)}),e.jsx("div",{className:"col-span-2 text-center",children:e.jsxs("span",{className:"bg-white/5 px-3 py-1 rounded-lg text-xs font-bold",children:[h.orderCount,"x"]})}),e.jsx("div",{className:"col-span-2 text-xs text-white/60 truncate",children:h.favoriteItems[0]}),e.jsx("div",{className:"col-span-2 flex justify-end",children:e.jsx(Uc,{risk:h.riskLevel})})]}),e.jsxs("div",{className:"md:hidden p-5 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-lg font-bold ${h.totalSpent>500?"bg-gradient-to-br from-yellow-400 to-orange-500 text-black":"bg-white/5 text-white"}`,children:h.totalSpent>500?e.jsx(Vt,{size:20}):h.name[0]?.toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:h.name}),e.jsxs("p",{className:"text-xs text-white/40",children:[h.orderCount," pedido",h.orderCount!==1?"s":""]})]})]}),e.jsx(Uc,{risk:h.riskLevel})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 bg-black/20 p-3 rounded-xl border border-white/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-white/30 uppercase font-bold",children:"LTV (Gasto)"}),e.jsx("p",{className:"text-lg font-mono font-bold text-primary",children:Rt(h.totalSpent)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-white/30 uppercase font-bold",children:"Favorito"}),e.jsx("p",{className:"text-sm font-bold text-white truncate",children:h.favoriteItems[0]})]})]}),h.tags.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:h.tags.map(g=>e.jsx("span",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-white/60",children:g},g))})]})]},h.id))})]})]})}function Ra({icon:a,label:s,value:i,color:r}){return e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/5",children:[e.jsxs("div",{className:`flex items-center gap-2 mb-1 ${r}`,children:[a,e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider opacity-60",children:s})]}),e.jsx("p",{className:`text-2xl font-black ${r}`,children:i})]})}function Uc({risk:a}){return a==="HIGH"?e.jsxs("span",{className:"flex items-center gap-1 bg-red-500/10 text-red-400 px-3 py-1 rounded-full text-[10px] font-black uppercase border border-red-500/20",children:[e.jsx(ks,{size:10})," Risco"]}):a==="MEDIUM"?e.jsx("span",{className:"bg-yellow-500/10 text-yellow-400 px-3 py-1 rounded-full text-[10px] font-black uppercase border border-yellow-500/20",children:"Ausente"}):e.jsx("span",{className:"bg-green-500/10 text-green-400 px-3 py-1 rounded-full text-[10px] font-black uppercase border border-green-500/20",children:"Ativo"})}function Iv(){const{user:a}=Ze(),{currentPlan:s}=Gd(),i=gt(),[r,o]=k.useState(null),c=async d=>{if(!a){X.error("Faa login para continuar");return}if(d===s){X.info("Voc j est neste plano");return}o(d);try{typeof window<"u"&&window.gtag&&window.gtag("event","begin_checkout",{currency:"BRL",value:d==="GROWTH"?149.9:299.9,items:[{item_name:`Emprata ${d}`,price:d==="GROWTH"?149.9:299.9}]});const u=(await Ot(Te(le,"users",a.uid))).data()?.finance?.asaasAccountId||null,h=await(await fetch("/api/create-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:u,value:d==="GROWTH"?149.9:299.9,billingType:"PIX",description:`Assinatura Emprata ${d}`})})).json();if(h.error)throw new Error(h.error);if(h.invoiceUrl){window.location.href=h.invoiceUrl;return}await ut(Te(le,"users",a.uid),{subscription:{plan:d,status:"active",updatedAt:new Date}}),X.success(` Parabns! Voc agora  ${yi[d].label}!`),setTimeout(()=>i("/dashboard"),1500)}catch(f){console.error("[Subscription] Error:",f),X.error("Erro ao processar assinatura. Tente novamente.")}finally{o(null)}};return e.jsxs("div",{className:"min-h-screen bg-[#050505] text-white py-12 px-6",children:[e.jsx("button",{onClick:()=>i("/dashboard"),className:"fixed top-6 left-6 bg-white/5 hover:bg-white/10 p-3 rounded-full transition-colors z-50",children:e.jsx(Zs,{size:20})}),e.jsx("div",{className:"text-center max-w-2xl mx-auto mb-16 pt-8",children:e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx(Vt,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),e.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter mb-4",children:["Escolha seu ",e.jsx("span",{className:"text-primary",children:"Poder"})]}),e.jsx("p",{className:"text-white/50 text-lg",children:"Desbloqueie o verdadeiro potencial do seu delivery com ferramentas exclusivas."})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto grid md:grid-cols-3 gap-6 items-stretch",children:[e.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1},className:`bg-[#121212] p-8 rounded-3xl border transition-all ${s==="STARTER"?"border-gray-500/50 opacity-70":"border-white/5 hover:border-white/20"}`,children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-400",children:"Starter"}),e.jsx("p",{className:"text-4xl font-black mb-1",children:"Grtis"}),e.jsx("p",{className:"text-xs text-white/40 mb-6",children:"para sempre"}),e.jsxs("ul",{className:"space-y-3 mb-8 text-sm",children:[e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-gray-400 shrink-0"}),e.jsx("span",{children:"Cardpio Digital"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-gray-400 shrink-0"}),e.jsx("span",{children:"Gestor de Pedidos"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-gray-400 shrink-0"}),e.jsx("span",{children:"Cozinha (KDS)"})]}),e.jsxs("li",{className:"flex gap-2 items-center text-white/30",children:[e.jsx(Lt,{size:16,className:"shrink-0"}),e.jsx("span",{children:"App do Motorista"})]}),e.jsxs("li",{className:"flex gap-2 items-center text-white/30",children:[e.jsx(Lt,{size:16,className:"shrink-0"}),e.jsx("span",{children:"Inteligncia Artificial"})]})]}),e.jsx("button",{disabled:!0,className:"w-full py-4 border border-white/10 rounded-xl font-bold text-white/30 cursor-not-allowed",children:s==="STARTER"?"Plano Atual":"Downgrade"})]}),e.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},className:`bg-[#121212] p-8 rounded-3xl border relative transform hover:scale-[1.02] transition-all ${s==="GROWTH"?"border-green-500 shadow-xl shadow-green-500/10":"border-green-500/30 hover:border-green-500/60"}`,children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-green-500 text-black px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest",children:"Mais Popular"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-green-400",children:"Growth"}),e.jsxs("p",{className:"text-4xl font-black mb-1",children:["R$ 149",e.jsx("span",{className:"text-lg text-white/40",children:",90"})]}),e.jsx("p",{className:"text-xs text-white/40 mb-6",children:"por ms"}),e.jsxs("ul",{className:"space-y-3 mb-8 text-sm",children:[e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-green-400 shrink-0"}),e.jsx("span",{children:"Tudo do Starter"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-green-400 shrink-0"}),e.jsx("span",{children:"App do Motorista (GPS)"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-green-400 shrink-0"}),e.jsx("span",{children:"Terminal PDV"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-green-400 shrink-0"}),e.jsx("span",{children:"Modo Chuva"})]}),e.jsxs("li",{className:"flex gap-2 items-center text-white/30",children:[e.jsx(Lt,{size:16,className:"shrink-0"}),e.jsx("span",{children:"Inteligncia Artificial"})]})]}),e.jsx("button",{onClick:()=>c("GROWTH"),disabled:r!==null||s==="GROWTH",className:"w-full py-4 bg-green-500 hover:bg-green-400 disabled:opacity-50 disabled:cursor-not-allowed text-black rounded-xl font-black shadow-lg shadow-green-500/20 transition-all flex items-center justify-center gap-2",children:r==="GROWTH"?e.jsx(ve,{className:"w-5 h-5 animate-spin"}):s==="GROWTH"?"Plano Atual":"ASSINAR GROWTH"})]}),e.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3},className:`bg-gradient-to-b from-[#1a1a1a] to-black p-8 rounded-3xl border relative overflow-hidden transform hover:scale-[1.02] transition-all ${s==="BLACK"?"border-purple-500 shadow-xl shadow-purple-500/20":"border-purple-500/30 hover:border-purple-500/60"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-purple-500/5 blur-[80px] pointer-events-none"}),e.jsxs("h3",{className:"text-xl font-bold mb-2 text-purple-400 flex items-center gap-2 relative z-10",children:["Emprata Black ",e.jsx(Bt,{size:16,className:"fill-purple-400"})]}),e.jsxs("p",{className:"text-4xl font-black mb-1 relative z-10",children:["R$ 299",e.jsx("span",{className:"text-lg text-white/40",children:",90"})]}),e.jsx("p",{className:"text-xs text-white/40 mb-6 relative z-10",children:"por ms"}),e.jsxs("ul",{className:"space-y-3 mb-8 text-sm relative z-10",children:[e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-purple-400 shrink-0"}),e.jsx("span",{children:"Tudo do Growth"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-purple-400 shrink-0"}),e.jsx("span",{children:"EmprataBrain (IA)"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-purple-400 shrink-0"}),e.jsx("span",{children:"Previso de Demanda"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-purple-400 shrink-0"}),e.jsx("span",{children:"Consultoria de Lucro"})]}),e.jsxs("li",{className:"flex gap-2 items-center",children:[e.jsx(ct,{size:16,className:"text-purple-400 shrink-0"}),e.jsx("span",{children:"Suporte VIP"})]})]}),e.jsx("button",{onClick:()=>c("BLACK"),disabled:r!==null||s==="BLACK",className:"w-full py-4 bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-black rounded-xl font-black shadow-xl relative z-10 transition-all flex items-center justify-center gap-2",children:r==="BLACK"?e.jsx(ve,{className:"w-5 h-5 animate-spin"}):s==="BLACK"?"Plano Atual":e.jsxs(e.Fragment,{children:[e.jsx(Bt,{size:16,className:"fill-black"})," ASSINAR BLACK"]})})]})]}),e.jsx("div",{className:"max-w-2xl mx-auto text-center mt-16",children:e.jsx("p",{className:"text-white/30 text-sm",children:" Pagamento seguro  Cancele quando quiser  Suporte em portugus"})})]})}function Mv(){const[a,s]=k.useState(!1),[i,r]=k.useState(!1),[o,c]=k.useState(!1),[d,f]=k.useState({isActive:!1,slug:"",displayName:"",description:"",bannerUrl:"",logoUrl:"",cuisineType:"",rating:5,deliveryFee:5,minTime:30,maxTime:45,isOpen:!0,tags:[],address:{street:"",number:"",neighborhood:"",city:"",state:"",zipCode:""}});k.useEffect(()=>{He.currentUser&&Ot(Te(le,"users",He.currentUser.uid)).then(g=>{g.exists()&&g.data().marketplace?f(g.data().marketplace):g.exists()&&f(b=>({...b,displayName:g.data().restaurantName||g.data().name||He.currentUser?.displayName||"Minha Loja"}))})},[]);const m=async()=>{r(!0),setTimeout(()=>{f(g=>({...g,description:`Experimente o melhor de ${g.cuisineType||"nossa cozinha"}! Ingredientes selecionados, preparo artesanal e entrega rpida para voc.`,tags:["Saboroso","Entrega Rpida","Favorito da Galera"]})),r(!1),X.success("IA: Descrio otimizada para vendas!")},1500)},u=async()=>{const g=d.address;if(!g?.street||!g?.city){X.error("Preencha rua e cidade primeiro");return}c(!0);const b=`${g.street}${g.number?` ${g.number}`:""}, ${g.neighborhood||""}, ${g.city}, ${g.state||"Brasil"}`;try{const j=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(b)}&limit=1`,{headers:{"User-Agent":"EmprataAI/1.0"}})).json();if(j&&j.length>0){const C=parseFloat(j[0].lat),A=parseFloat(j[0].lon);f(E=>({...E,location:{lat:C,lng:A}})),X.success(" Localizao encontrada!")}else X.error("Endereo no encontrado no mapa. Verifique os dados.")}catch(w){console.error(w),X.error("Erro ao buscar coordenadas")}finally{c(!1)}},x=()=>{c(!0),navigator.geolocation.getCurrentPosition(g=>{f(b=>({...b,location:{lat:g.coords.latitude,lng:g.coords.longitude}})),X.success(" Usando sua localizao atual!"),c(!1)},g=>{X.error("No foi possvel obter sua localizao"),c(!1)},{enableHighAccuracy:!0})},h=async()=>{if(He.currentUser){s(!0);try{await ut(Te(le,"users",He.currentUser.uid),{marketplace:d}),X.success("Loja atualizada no Marketplace!")}catch{X.error("Erro ao salvar")}finally{s(!1)}}};return e.jsxs("div",{className:"bg-[#121212] rounded-3xl border border-white/10 p-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black italic flex items-center gap-2",children:[e.jsx(Fs,{className:"text-primary"})," Vitrine da Loja"]}),e.jsx("p",{className:"text-white/40 text-sm",children:"Configure como voc aparece no App do Cliente"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:m,disabled:i,className:"px-4 py-2 bg-purple-500/20 text-purple-400 border border-purple-500/50 rounded-xl text-xs font-bold uppercase flex items-center gap-2 hover:bg-purple-500/30 transition-all",children:[e.jsx(at,{size:14})," ",i?"Criando...":"Mgica IA"]}),e.jsx("button",{onClick:()=>f(g=>({...g,isActive:!g.isActive})),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase border transition-all ${d.isActive?"bg-green-500/20 text-green-400 border-green-500":"bg-red-500/20 text-red-400 border-red-500"}`,children:d.isActive?" Loja Online":" Loja Oculta"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"border border-white/10 rounded-[2rem] p-4 bg-black max-w-sm mx-auto shadow-2xl relative",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-[#121212] rounded-b-xl z-20"}),e.jsxs("div",{className:"h-full overflow-hidden rounded-2xl bg-[#1a1a1a] relative",children:[e.jsxs("div",{className:"h-40 bg-gray-800 relative",children:[d.bannerUrl&&e.jsx("img",{src:d.bannerUrl,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-[-20px] left-4 w-16 h-16 rounded-full border-4 border-[#1a1a1a] bg-black overflow-hidden shadow-lg",children:d.logoUrl&&e.jsx("img",{src:d.logoUrl,className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"pt-8 px-4 pb-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-black text-xl text-white",children:d.displayName||"Nome da Loja"}),e.jsxs("div",{className:"flex gap-1 text-[10px] font-bold text-yellow-400 bg-yellow-400/10 px-2 py-1 rounded-lg",children:[" ",d.rating||5]})]}),e.jsxs("p",{className:"text-xs text-white/40 mt-1",children:[d.cuisineType,"  ",d.minTime,"-",d.maxTime," min"]}),e.jsx("p",{className:"text-xs text-white/70 mt-3 leading-relaxed",children:d.description||"Descrio da loja..."}),d.location&&e.jsxs("div",{className:"mt-3 flex items-center gap-1 text-[10px] text-green-400",children:[e.jsx(qs,{size:10}),"GPS Configurado"]}),e.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:d.tags?.map(g=>e.jsx("span",{className:"text-[10px] bg-white/5 px-2 py-1 rounded text-white/60",children:g},g))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Nome da Loja"}),e.jsx("input",{value:d.displayName,onChange:g=>f({...d,displayName:g.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",placeholder:"Ex: Burger King"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Categoria"}),e.jsx("input",{value:d.cuisineType,onChange:g=>f({...d,cuisineType:g.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none",placeholder:"Ex: Hamburgueria"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"URLs das Imagens"}),e.jsx("input",{value:d.bannerUrl,onChange:g=>f({...d,bannerUrl:g.target.value}),placeholder:"URL do Banner (Capa)",className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white text-xs mb-2 focus:border-primary outline-none"}),e.jsx("input",{value:d.logoUrl,onChange:g=>f({...d,logoUrl:g.target.value}),placeholder:"URL do Logo",className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white text-xs focus:border-primary outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Descrio (Use a Mgica IA!)"}),e.jsx("textarea",{value:d.description,onChange:g=>f({...d,description:g.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-primary outline-none h-24 resize-none",placeholder:"Conte um pouco sobre sua loja..."})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(js,{size:16,className:"text-primary"}),e.jsx("span",{className:"text-sm font-bold",children:"Endereo da Loja"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("input",{value:d.address?.street||"",onChange:g=>f({...d,address:{...d.address,street:g.target.value}}),placeholder:"Rua",className:"col-span-2 bg-black/50 border border-white/10 rounded-xl p-2 text-white text-xs"}),e.jsx("input",{value:d.address?.number||"",onChange:g=>f({...d,address:{...d.address,number:g.target.value}}),placeholder:"N",className:"bg-black/50 border border-white/10 rounded-xl p-2 text-white text-xs"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{value:d.address?.neighborhood||"",onChange:g=>f({...d,address:{...d.address,neighborhood:g.target.value}}),placeholder:"Bairro",className:"bg-black/50 border border-white/10 rounded-xl p-2 text-white text-xs"}),e.jsx("input",{value:d.address?.city||"",onChange:g=>f({...d,address:{...d.address,city:g.target.value}}),placeholder:"Cidade",className:"bg-black/50 border border-white/10 rounded-xl p-2 text-white text-xs"})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white/40",children:"Coordenadas GPS"}),e.jsx("p",{className:"font-mono text-xs text-primary",children:d.location?`${d.location.lat.toFixed(6)}, ${d.location.lng.toFixed(6)}`:"No configurado"})]}),d.location&&e.jsx(qs,{size:16,className:"text-green-400"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:u,disabled:o,className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-xs font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:[o?e.jsx(ve,{size:14,className:"animate-spin"}):e.jsx(js,{size:14}),"Buscar pelo Endereo"]}),e.jsxs("button",{onClick:x,disabled:o,className:"px-3 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-xs font-bold flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ea,{size:14}),"Usar GPS Atual"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Taxa Entrega"}),e.jsx("input",{type:"number",value:d.deliveryFee,onChange:g=>f({...d,deliveryFee:Number(g.target.value)}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Tempo Mn"}),e.jsx("input",{type:"number",value:d.minTime,onChange:g=>f({...d,minTime:Number(g.target.value)}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 ml-1",children:"Tempo Mx"}),e.jsx("input",{type:"number",value:d.maxTime,onChange:g=>f({...d,maxTime:Number(g.target.value)}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white"})]})]}),e.jsx("button",{onClick:h,disabled:a,className:"w-full py-4 bg-primary hover:brightness-110 text-black font-black rounded-xl flex items-center justify-center gap-2 mt-4 transition-all disabled:opacity-50",children:a?e.jsx(ve,{className:"animate-spin",size:18}):e.jsxs(e.Fragment,{children:[e.jsx(Jr,{size:18})," SALVAR VITRINE"]})})]})]})]})}async function Rv(a){try{const s=a.replace(/\D/g,"");if(s.length!==8)return null;const r=await(await fetch(`https://viacep.com.br/ws/${s}/json/`)).json();return r.erro?null:{street:r.logradouro,neighborhood:r.bairro,city:r.localidade,state:r.uf,postalCode:s}}catch{return null}}function Lv({savedAddresses:a=[],selectedAddress:s,onSelect:i,onSaveNew:r}){const[o,c]=k.useState(!1),[d,f]=k.useState(!1),[m,u]=k.useState(!1),[x,h]=k.useState(!1),[g,b]=k.useState(!1),w=()=>!(!j.street||!j.neighborhood||!j.city||!j.number||j.number.length<1),[j,C]=k.useState({label:"casa",street:"",number:"",complement:"",neighborhood:"",city:"",state:"",postalCode:"",reference:""}),A=()=>{if(!navigator.geolocation){X.error("Geolocalizao no suportada");return}u(!0),navigator.geolocation.getCurrentPosition(async S=>{const{latitude:R,longitude:$}=S.coords;try{const ae=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${R}&lon=${$}&format=json&addressdetails=1`,{headers:{"Accept-Language":"pt-BR"}})).json();if(ae.address){const M=ae.address;C({...j,street:M.road||M.pedestrian||"",neighborhood:M.suburb||M.neighbourhood||"",city:M.city||M.town||M.village||"",state:M.state||"",postalCode:M.postcode?.replace(/\D/g,"")||"",coords:{lat:R,lng:$}}),f(!0),X.success("Localizao detectada!")}}catch{X.error("Erro ao buscar endereo")}u(!1)},()=>{X.error("Permisso de localizao negada"),u(!1)},{enableHighAccuracy:!0,timeout:1e4})},E=async S=>{if(C({...j,postalCode:S}),S.replace(/\D/g,"").length===8){h(!0);const R=await Rv(S);R?(C($=>({...$,...R})),X.success("CEP encontrado!")):X.error("CEP no encontrado"),h(!1)}},_=async()=>{if(!w()){X.error("Endereo incompleto. Verifique rua e nmero.");return}b(!0),await new Promise(R=>setTimeout(R,800)),b(!1);const S={id:`addr_${Date.now()}`,label:j.label||"outro",street:j.street||"",number:j.number||"",complement:j.complement,neighborhood:j.neighborhood||"",city:j.city||"",state:j.state||"",postalCode:j.postalCode||"",reference:j.reference,coords:j.coords};r?.(S),i(S),f(!1),c(!1),X.success("Endereo validado e salvo!")},I={casa:e.jsx(nd,{className:"w-4 h-4"}),trabalho:e.jsx(Qh,{className:"w-4 h-4"}),outro:e.jsx(js,{className:"w-4 h-4"})};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center gap-3 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 hover:bg-white/10 transition-colors",children:[e.jsx(js,{className:"w-5 h-5 text-primary shrink-0"}),e.jsx("div",{className:"flex-1 text-left",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm font-bold text-white truncate",children:[s.street,", ",s.number]}),e.jsxs("p",{className:"text-xs text-white/40 truncate",children:[s.neighborhood,"  ",s.city]})]}):e.jsx("p",{className:"text-sm font-medium text-white/50",children:"Selecione um endereo"})}),e.jsx(qr,{className:"w-5 h-5 text-white/40"})]}),e.jsx(Be,{children:o&&e.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>c(!1),children:e.jsxs(Q.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},onClick:S=>S.stopPropagation(),className:"w-full max-w-lg bg-[#121212] border border-white/10 rounded-3xl overflow-hidden max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/5",children:[e.jsx("h3",{className:"font-black text-lg",children:d?"Novo Endereo":"Onde voc est?"}),e.jsx("button",{onClick:()=>{d?f(!1):c(!1)},className:"p-2 hover:bg-white/5 rounded-full",children:e.jsx(Lt,{className:"w-5 h-5"})})]}),d?e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:["casa","trabalho","outro"].map(S=>e.jsxs("button",{onClick:()=>C({...j,label:S}),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-xl border text-sm font-bold transition-all ${j.label===S?"bg-primary/20 border-primary text-primary":"border-white/10 text-white/50 hover:bg-white/5"}`,children:[I[S],e.jsx("span",{className:"capitalize",children:S})]},S))}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"CEP"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:j.postalCode,onChange:S=>E(S.target.value),placeholder:"00000-000",maxLength:9,className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"}),x&&e.jsx(ve,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary animate-spin"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"Rua"}),e.jsx("input",{type:"text",value:j.street,onChange:S=>C({...j,street:S.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"N"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:j.number,onChange:S=>C({...j,number:S.target.value}),className:`w-full bg-black/50 border rounded-xl px-4 py-3 text-white focus:outline-none transition-colors ${j.number?"border-white/10 focus:border-primary":"border-red-500/50"}`}),!j.number&&e.jsx(ks,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-red-500"})]}),!j.number&&e.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Obrigatrio"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"Complemento"}),e.jsx("input",{type:"text",value:j.complement,onChange:S=>C({...j,complement:S.target.value}),placeholder:"Apto, Bloco...",className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"Bairro"}),e.jsx("input",{type:"text",value:j.neighborhood,onChange:S=>C({...j,neighborhood:S.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-1 block",children:"Ponto de Referncia"}),e.jsx("input",{type:"text",value:j.reference,onChange:S=>C({...j,reference:S.target.value}),placeholder:"Prximo ao mercado...",className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary focus:outline-none"})]}),e.jsx("button",{onClick:_,disabled:g,className:"w-full py-4 bg-primary hover:bg-orange-600 rounded-2xl font-black uppercase tracking-wider text-sm transition-colors flex items-center justify-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"animate-spin w-4 h-4"})," Validando..."]}):"Confirmar Endereo"})]}):e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("button",{onClick:A,disabled:m,className:"w-full flex items-center gap-3 p-4 bg-primary/10 border border-primary/30 rounded-2xl hover:bg-primary/20 transition-colors disabled:opacity-50",children:[m?e.jsx(ve,{className:"w-5 h-5 text-primary animate-spin"}):e.jsx(ea,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-bold text-primary",children:m?"Buscando localizao...":"Usar minha localizao"})]}),a.map(S=>e.jsxs("button",{onClick:()=>{i(S),c(!1)},className:`w-full flex items-center gap-3 p-4 rounded-2xl border transition-colors ${s?.id===S.id?"bg-white/10 border-primary":"border-white/10 hover:bg-white/5"}`,children:[I[S.label],e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("p",{className:"text-sm font-bold text-white",children:[S.street,", ",S.number]}),e.jsxs("p",{className:"text-xs text-white/40",children:[S.neighborhood,"  ",S.city]})]}),s?.id===S.id&&e.jsx(ct,{className:"w-5 h-5 text-primary"})]},S.id)),e.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-white/10 rounded-2xl text-white/50 hover:text-white hover:border-white/20 transition-colors",children:[e.jsx($t,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold",children:"Adicionar novo endereo"})]})]})]})})})]})}function Ov(){const{user:a}=Ze(),s=a?.uid.slice(0,6).toUpperCase()||"EMPRATA",i=`https://emprata.ai/r/${s}`,r=()=>{navigator.clipboard.writeText(s),X.success("Cdigo copiado! Mande para um amigo.")},o=async()=>{const c={title:" Pea comida e ganhe R$ 10,00!",text:`Use meu cdigo ${s} no EmprataAI e ganhe R$ 10,00 no primeiro pedido!`,url:i};if(navigator.share)try{await navigator.share(c),X.success("Link compartilhado!")}catch{}else navigator.clipboard.writeText(`${c.text}
${c.url}`),X.success("Link copiado para a rea de transferncia!")};return a?e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/80 to-blue-900/80 p-6 rounded-2xl relative overflow-hidden border border-white/10 mt-6 backdrop-blur-sm",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-400",children:[e.jsx(rd,{className:"animate-bounce",size:20}),e.jsx("h3",{className:"font-black uppercase text-sm tracking-wider",children:"Coma de Graa"})]}),e.jsxs("p",{className:"text-white text-sm font-bold mb-4 w-3/4 leading-relaxed",children:["Convide um amigo. Ele ganha ",e.jsx("span",{className:"text-green-400",children:"R$ 10,00"})," e voc ganha ",e.jsx("span",{className:"text-green-400",children:"R$ 10,00"})," no prximo pedido."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"bg-black/40 border border-white/20 rounded-xl px-4 py-3 font-mono text-xl tracking-widest text-white flex-1 text-center select-all",children:s}),e.jsx("button",{onClick:r,className:"bg-white/10 text-white font-bold px-4 rounded-xl hover:bg-white/20 transition-colors border border-white/10",title:"Copiar cdigo",children:e.jsx(hn,{size:20})}),e.jsx("button",{onClick:o,className:"bg-green-600 text-white font-bold px-4 rounded-xl hover:bg-green-700 transition-colors",title:"Compartilhar",children:e.jsx(Kr,{size:20})})]}),e.jsx("p",{className:"text-[10px] text-white/30 mt-3 text-center",children:"Quanto mais amigos voc indicar, mais prmios voc ganha! "})]}),e.jsx("div",{className:"absolute -right-6 -bottom-6 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute -left-10 -top-10 w-40 h-40 bg-purple-500/10 rounded-full blur-3xl"})]}):null}function La(a){return a*(Math.PI/180)}function Dv(a,s,i,r){const c=La(i-a),d=La(r-s),f=Math.sin(c/2)*Math.sin(c/2)+Math.cos(La(a))*Math.cos(La(i))*Math.sin(d/2)*Math.sin(d/2);return 6371*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}function Bv(a){return a<1?`${Math.round(a*1e3)}m`:`${a.toFixed(1)}km`}const zv=({store:a,id:s,distance:i})=>e.jsx(Ve,{to:`/menu/${s}`,children:e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},className:`bg-[#1a1a1a] rounded-2xl overflow-hidden border border-white/5 hover:border-primary/50 transition-all group ${a.isOpen?"":"opacity-60 grayscale"}`,children:[e.jsxs("div",{className:"h-32 relative overflow-hidden bg-gray-800",children:[a.bannerUrl?e.jsx("img",{src:a.bannerUrl,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/10 text-4xl font-black",children:a.displayName?.[0]||"?"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1a1a1a] to-transparent"}),e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-[10px] font-black uppercase ${a.isOpen?"bg-green-500 text-black":"bg-red-500 text-white"}`,children:a.isOpen?"Aberto":"Fechado"}),i!==void 0&&i<9999&&e.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-lg text-[10px] font-black bg-black/80 text-white flex items-center gap-1",children:[e.jsx(ea,{size:10}),Bv(i)]})]}),e.jsxs("div",{className:"p-4 relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-[#1a1a1a] bg-black absolute -top-6 left-4 overflow-hidden",children:a.logoUrl?e.jsx("img",{src:a.logoUrl,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-white/10"})}),e.jsxs("div",{className:"mt-4 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg leading-none mb-1",children:a.displayName}),e.jsxs("p",{className:"text-white/40 text-xs",children:[a.cuisineType,"  ",a.minTime,"-",a.maxTime," min"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-yellow-400 font-bold text-sm flex items-center gap-1",children:[e.jsx(un,{size:10,fill:"currentColor"})," ",a.rating||"New"]})})]}),e.jsx("div",{className:"flex gap-2 mt-3 overflow-hidden text-xs",children:e.jsxs("span",{className:`px-2 py-0.5 rounded font-bold flex items-center gap-1 ${a.deliveryFee===0?"bg-green-500/20 text-green-400":"bg-white/5 text-white/60"}`,children:[e.jsx(es,{size:10}),a.deliveryFee===0?"Grtis":`R$ ${a.deliveryFee?.toFixed(2)||"0.00"}`]})})]})]})});function Vc(){const[a,s]=k.useState([]),[i,r]=k.useState(!0),[o,c]=k.useState(""),[d,f]=k.useState(!1),[m,u]=k.useState(null),[x,h]=k.useState(null),[g,b]=k.useState(!0),[w,j]=k.useState(!1);k.useEffect(()=>{b(!0),navigator.geolocation.getCurrentPosition(A=>{h({lat:A.coords.latitude,lng:A.coords.longitude}),b(!1)},A=>{console.log("GPS permission denied or unavailable"),j(!0),b(!1)},{enableHighAccuracy:!0,timeout:1e4})},[]),k.useEffect(()=>{g||(async()=>{try{const E=We(ze(le,"users"),Ie("marketplace.isActive","==",!0));let I=(await Gt(E)).docs.map(S=>({id:S.id,data:S.data().marketplace}));x&&(I=I.map(S=>{const R=S.data.location,$=R?Dv(x.lat,x.lng,R.lat,R.lng):9999;return{...S,distance:$}})),I.sort((S,R)=>R.data.isOpen!==S.data.isOpen?R.data.isOpen?1:-1:S.distance!==void 0&&R.distance!==void 0?S.distance-R.distance:0),s(I)}catch(E){console.error("Error loading stores",E)}finally{r(!1)}})()},[x,g]);const C=a.filter(A=>A.data.displayName?.toLowerCase().includes(o.toLowerCase())||A.data.cuisineType?.toLowerCase().includes(o.toLowerCase()));return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white pb-24",children:[e.jsxs("div",{className:"sticky top-0 z-30 bg-[#0a0a0a]/90 backdrop-blur-md border-b border-white/5 px-4 py-3",children:[e.jsxs("button",{onClick:()=>f(!d),className:"flex items-center gap-2 text-white mb-3 w-full hover:bg-white/5 p-2 rounded-xl transition-colors",children:[e.jsx("div",{className:"bg-primary/20 p-2 rounded-full text-primary",children:e.jsx(js,{size:16})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-[10px] text-white/40 font-bold uppercase",children:"Entregar em"}),e.jsxs("p",{className:"text-sm font-bold flex items-center gap-1",children:[m?`${m.street}, ${m.number}`:x?"Usando sua localizao":"Selecionar Endereo",e.jsx(qr,{size:14,className:"text-white/40"})]})]}),x&&!m&&e.jsxs("div",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-lg text-[10px] font-bold flex items-center gap-1",children:[e.jsx(ea,{size:10})," GPS"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30 w-4 h-4"}),e.jsx("input",{value:o,onChange:A=>c(A.target.value),placeholder:"Prato, mercado ou loja...",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm focus:border-primary outline-none text-white placeholder-white/20"})]}),e.jsx("button",{className:"bg-[#1a1a1a] p-2.5 rounded-xl border border-white/10 text-white/60 hover:text-primary hover:border-primary transition-colors",children:e.jsx(Xh,{size:20})})]})]}),e.jsx(Be,{children:d&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end md:items-center justify-center p-4",children:e.jsxs(Q.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"bg-[#121212] w-full max-w-md rounded-3xl p-6 border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Onde voc est?"}),e.jsx("button",{onClick:()=>f(!1),className:"text-white/40",children:"Fechar"})]}),e.jsx(Lv,{onSelect:A=>{u(A),A.coords&&h({lat:A.coords.lat,lng:A.coords.lng}),f(!1)}})]})})}),e.jsxs("div",{className:"p-4 space-y-8",children:[!o&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-blue-900/40 border border-white/10 rounded-2xl p-4 flex items-center justify-between relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h2",{className:"font-black text-lg text-white mb-1 flex items-center gap-2",children:[e.jsx(at,{className:"text-yellow-400",size:18})," Taste Match"]}),e.jsx("p",{className:"text-xs text-white/60 max-w-[200px]",children:x?"Lojas ordenadas pela menor distncia!":"Ative o GPS para ver lojas prximas"})]}),e.jsx("div",{className:"text-6xl absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:""})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[x?"Lojas Prximas":"Lojas Disponveis",e.jsx("span",{className:"text-xs bg-white/10 px-2 py-0.5 rounded text-white/40",children:C.length})]}),i||g?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-3",children:[e.jsx(ve,{className:"w-8 h-8 text-primary animate-spin"}),e.jsx("p",{className:"text-white/40 text-sm",children:g?"Buscando sua localizao...":"Carregando lojas..."})]}):C.length===0?e.jsx("div",{className:"text-center py-10 text-white/30",children:e.jsxs("p",{children:["Nenhuma loja encontrada ",o&&`para "${o}"`]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:C.map(A=>e.jsx(zv,{store:A.data,id:A.id,distance:A.distance},A.id))})]}),e.jsx(Ov,{})]})]})}function Fv(a){const s=a.replace(/[^\d]+/g,"");if(s.length!==11||s.match(/(\d)\1{10}/))return!1;const i=s.split("").map(Number),r=o=>i.slice(0,o-12).reduce((c,d,f)=>c+d*(o-f),0)*10%11%10;return r(10)===i[9]&&r(11)===i[10]}const Uv=a=>a.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),Vv=a=>a.replace(/\D/g,"").replace(/^(\d{2})(\d)/g,"($1) $2").replace(/(\d)(\d{4})$/,"$1-$2"),Hv=a=>{const s=a.replace(/\D/g,"");return s.length>=10&&s.length<=11};var Va={exports:{}};function qv(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ha={exports:{}};const $v={},Gv=Object.freeze(Object.defineProperty({__proto__:null,default:$v},Symbol.toStringTag,{value:"Module"})),Wv=gm(Gv);var Zv=Ha.exports,Hc;function Cs(){return Hc||(Hc=1,(function(a,s){(function(i,r){a.exports=r()})(Zv,function(){var i=i||(function(r,o){var c;if(typeof window<"u"&&window.crypto&&(c=window.crypto),typeof self<"u"&&self.crypto&&(c=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(c=globalThis.crypto),!c&&typeof window<"u"&&window.msCrypto&&(c=window.msCrypto),!c&&typeof Qn<"u"&&Qn.crypto&&(c=Qn.crypto),!c&&typeof qv=="function")try{c=Wv}catch{}var d=function(){if(c){if(typeof c.getRandomValues=="function")try{return c.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof c.randomBytes=="function")try{return c.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||(function(){function E(){}return function(_){var I;return E.prototype=_,I=new E,E.prototype=null,I}})(),m={},u=m.lib={},x=u.Base=(function(){return{extend:function(E){var _=f(this);return E&&_.mixIn(E),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var _ in E)E.hasOwnProperty(_)&&(this[_]=E[_]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),h=u.WordArray=x.extend({init:function(E,_){E=this.words=E||[],_!=o?this.sigBytes=_:this.sigBytes=E.length*4},toString:function(E){return(E||b).stringify(this)},concat:function(E){var _=this.words,I=E.words,S=this.sigBytes,R=E.sigBytes;if(this.clamp(),S%4)for(var $=0;$<R;$++){var W=I[$>>>2]>>>24-$%4*8&255;_[S+$>>>2]|=W<<24-(S+$)%4*8}else for(var ae=0;ae<R;ae+=4)_[S+ae>>>2]=I[ae>>>2];return this.sigBytes+=R,this},clamp:function(){var E=this.words,_=this.sigBytes;E[_>>>2]&=4294967295<<32-_%4*8,E.length=r.ceil(_/4)},clone:function(){var E=x.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var _=[],I=0;I<E;I+=4)_.push(d());return new h.init(_,E)}}),g=m.enc={},b=g.Hex={stringify:function(E){for(var _=E.words,I=E.sigBytes,S=[],R=0;R<I;R++){var $=_[R>>>2]>>>24-R%4*8&255;S.push(($>>>4).toString(16)),S.push(($&15).toString(16))}return S.join("")},parse:function(E){for(var _=E.length,I=[],S=0;S<_;S+=2)I[S>>>3]|=parseInt(E.substr(S,2),16)<<24-S%8*4;return new h.init(I,_/2)}},w=g.Latin1={stringify:function(E){for(var _=E.words,I=E.sigBytes,S=[],R=0;R<I;R++){var $=_[R>>>2]>>>24-R%4*8&255;S.push(String.fromCharCode($))}return S.join("")},parse:function(E){for(var _=E.length,I=[],S=0;S<_;S++)I[S>>>2]|=(E.charCodeAt(S)&255)<<24-S%4*8;return new h.init(I,_)}},j=g.Utf8={stringify:function(E){try{return decodeURIComponent(escape(w.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return w.parse(unescape(encodeURIComponent(E)))}},C=u.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=j.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var _,I=this._data,S=I.words,R=I.sigBytes,$=this.blockSize,W=$*4,ae=R/W;E?ae=r.ceil(ae):ae=r.max((ae|0)-this._minBufferSize,0);var M=ae*$,U=r.min(M*4,R);if(M){for(var D=0;D<M;D+=$)this._doProcessBlock(S,D);_=S.splice(0,M),I.sigBytes-=U}return new h.init(_,U)},clone:function(){var E=x.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});u.Hasher=C.extend({cfg:x.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(E){return function(_,I){return new E.init(I).finalize(_)}},_createHmacHelper:function(E){return function(_,I){return new A.HMAC.init(E,I).finalize(_)}}});var A=m.algo={};return m})(Math);return i})})(Ha)),Ha.exports}var qa={exports:{}},Kv=qa.exports,qc;function Yv(){return qc||(qc=1,(function(a,s){(function(i,r){a.exports=r(Cs())})(Kv,function(i){return(function(){var r=i,o=r.lib,c=o.WordArray,d=r.enc;d.Base64={stringify:function(m){var u=m.words,x=m.sigBytes,h=this._map;m.clamp();for(var g=[],b=0;b<x;b+=3)for(var w=u[b>>>2]>>>24-b%4*8&255,j=u[b+1>>>2]>>>24-(b+1)%4*8&255,C=u[b+2>>>2]>>>24-(b+2)%4*8&255,A=w<<16|j<<8|C,E=0;E<4&&b+E*.75<x;E++)g.push(h.charAt(A>>>6*(3-E)&63));var _=h.charAt(64);if(_)for(;g.length%4;)g.push(_);return g.join("")},parse:function(m){var u=m.length,x=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var g=0;g<x.length;g++)h[x.charCodeAt(g)]=g}var b=x.charAt(64);if(b){var w=m.indexOf(b);w!==-1&&(u=w)}return f(m,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function f(m,u,x){for(var h=[],g=0,b=0;b<u;b++)if(b%4){var w=x[m.charCodeAt(b-1)]<<b%4*2,j=x[m.charCodeAt(b)]>>>6-b%4*2,C=w|j;h[g>>>2]|=C<<24-g%4*8,g++}return c.create(h,g)}})(),i.enc.Base64})})(qa)),qa.exports}var $a={exports:{}},Qv=$a.exports,$c;function Xv(){return $c||($c=1,(function(a,s){(function(i,r){a.exports=r(Cs())})(Qv,function(i){return(function(r){var o=i,c=o.lib,d=c.WordArray,f=c.Hasher,m=o.algo,u=[];(function(){for(var j=0;j<64;j++)u[j]=r.abs(r.sin(j+1))*4294967296|0})();var x=m.MD5=f.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(j,C){for(var A=0;A<16;A++){var E=C+A,_=j[E];j[E]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var I=this._hash.words,S=j[C+0],R=j[C+1],$=j[C+2],W=j[C+3],ae=j[C+4],M=j[C+5],U=j[C+6],D=j[C+7],q=j[C+8],J=j[C+9],se=j[C+10],te=j[C+11],ue=j[C+12],ne=j[C+13],Ce=j[C+14],P=j[C+15],N=I[0],F=I[1],O=I[2],B=I[3];N=h(N,F,O,B,S,7,u[0]),B=h(B,N,F,O,R,12,u[1]),O=h(O,B,N,F,$,17,u[2]),F=h(F,O,B,N,W,22,u[3]),N=h(N,F,O,B,ae,7,u[4]),B=h(B,N,F,O,M,12,u[5]),O=h(O,B,N,F,U,17,u[6]),F=h(F,O,B,N,D,22,u[7]),N=h(N,F,O,B,q,7,u[8]),B=h(B,N,F,O,J,12,u[9]),O=h(O,B,N,F,se,17,u[10]),F=h(F,O,B,N,te,22,u[11]),N=h(N,F,O,B,ue,7,u[12]),B=h(B,N,F,O,ne,12,u[13]),O=h(O,B,N,F,Ce,17,u[14]),F=h(F,O,B,N,P,22,u[15]),N=g(N,F,O,B,R,5,u[16]),B=g(B,N,F,O,U,9,u[17]),O=g(O,B,N,F,te,14,u[18]),F=g(F,O,B,N,S,20,u[19]),N=g(N,F,O,B,M,5,u[20]),B=g(B,N,F,O,se,9,u[21]),O=g(O,B,N,F,P,14,u[22]),F=g(F,O,B,N,ae,20,u[23]),N=g(N,F,O,B,J,5,u[24]),B=g(B,N,F,O,Ce,9,u[25]),O=g(O,B,N,F,W,14,u[26]),F=g(F,O,B,N,q,20,u[27]),N=g(N,F,O,B,ne,5,u[28]),B=g(B,N,F,O,$,9,u[29]),O=g(O,B,N,F,D,14,u[30]),F=g(F,O,B,N,ue,20,u[31]),N=b(N,F,O,B,M,4,u[32]),B=b(B,N,F,O,q,11,u[33]),O=b(O,B,N,F,te,16,u[34]),F=b(F,O,B,N,Ce,23,u[35]),N=b(N,F,O,B,R,4,u[36]),B=b(B,N,F,O,ae,11,u[37]),O=b(O,B,N,F,D,16,u[38]),F=b(F,O,B,N,se,23,u[39]),N=b(N,F,O,B,ne,4,u[40]),B=b(B,N,F,O,S,11,u[41]),O=b(O,B,N,F,W,16,u[42]),F=b(F,O,B,N,U,23,u[43]),N=b(N,F,O,B,J,4,u[44]),B=b(B,N,F,O,ue,11,u[45]),O=b(O,B,N,F,P,16,u[46]),F=b(F,O,B,N,$,23,u[47]),N=w(N,F,O,B,S,6,u[48]),B=w(B,N,F,O,D,10,u[49]),O=w(O,B,N,F,Ce,15,u[50]),F=w(F,O,B,N,M,21,u[51]),N=w(N,F,O,B,ue,6,u[52]),B=w(B,N,F,O,W,10,u[53]),O=w(O,B,N,F,se,15,u[54]),F=w(F,O,B,N,R,21,u[55]),N=w(N,F,O,B,q,6,u[56]),B=w(B,N,F,O,P,10,u[57]),O=w(O,B,N,F,U,15,u[58]),F=w(F,O,B,N,ne,21,u[59]),N=w(N,F,O,B,ae,6,u[60]),B=w(B,N,F,O,te,10,u[61]),O=w(O,B,N,F,$,15,u[62]),F=w(F,O,B,N,J,21,u[63]),I[0]=I[0]+N|0,I[1]=I[1]+F|0,I[2]=I[2]+O|0,I[3]=I[3]+B|0},_doFinalize:function(){var j=this._data,C=j.words,A=this._nDataBytes*8,E=j.sigBytes*8;C[E>>>5]|=128<<24-E%32;var _=r.floor(A/4294967296),I=A;C[(E+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,C[(E+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,j.sigBytes=(C.length+1)*4,this._process();for(var S=this._hash,R=S.words,$=0;$<4;$++){var W=R[$];R[$]=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360}return S},clone:function(){var j=f.clone.call(this);return j._hash=this._hash.clone(),j}});function h(j,C,A,E,_,I,S){var R=j+(C&A|~C&E)+_+S;return(R<<I|R>>>32-I)+C}function g(j,C,A,E,_,I,S){var R=j+(C&E|A&~E)+_+S;return(R<<I|R>>>32-I)+C}function b(j,C,A,E,_,I,S){var R=j+(C^A^E)+_+S;return(R<<I|R>>>32-I)+C}function w(j,C,A,E,_,I,S){var R=j+(A^(C|~E))+_+S;return(R<<I|R>>>32-I)+C}o.MD5=f._createHelper(x),o.HmacMD5=f._createHmacHelper(x)})(Math),i.MD5})})($a)),$a.exports}var Ga={exports:{}},Wa={exports:{}},Jv=Wa.exports,Gc;function eb(){return Gc||(Gc=1,(function(a,s){(function(i,r){a.exports=r(Cs())})(Jv,function(i){return(function(){var r=i,o=r.lib,c=o.WordArray,d=o.Hasher,f=r.algo,m=[],u=f.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,h){for(var g=this._hash.words,b=g[0],w=g[1],j=g[2],C=g[3],A=g[4],E=0;E<80;E++){if(E<16)m[E]=x[h+E]|0;else{var _=m[E-3]^m[E-8]^m[E-14]^m[E-16];m[E]=_<<1|_>>>31}var I=(b<<5|b>>>27)+A+m[E];E<20?I+=(w&j|~w&C)+1518500249:E<40?I+=(w^j^C)+1859775393:E<60?I+=(w&j|w&C|j&C)-1894007588:I+=(w^j^C)-899497514,A=C,C=j,j=w<<30|w>>>2,w=b,b=I}g[0]=g[0]+b|0,g[1]=g[1]+w|0,g[2]=g[2]+j|0,g[3]=g[3]+C|0,g[4]=g[4]+A|0},_doFinalize:function(){var x=this._data,h=x.words,g=this._nDataBytes*8,b=x.sigBytes*8;return h[b>>>5]|=128<<24-b%32,h[(b+64>>>9<<4)+14]=Math.floor(g/4294967296),h[(b+64>>>9<<4)+15]=g,x.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var x=d.clone.call(this);return x._hash=this._hash.clone(),x}});r.SHA1=d._createHelper(u),r.HmacSHA1=d._createHmacHelper(u)})(),i.SHA1})})(Wa)),Wa.exports}var Za={exports:{}},tb=Za.exports,Wc;function sb(){return Wc||(Wc=1,(function(a,s){(function(i,r){a.exports=r(Cs())})(tb,function(i){(function(){var r=i,o=r.lib,c=o.Base,d=r.enc,f=d.Utf8,m=r.algo;m.HMAC=c.extend({init:function(u,x){u=this._hasher=new u.init,typeof x=="string"&&(x=f.parse(x));var h=u.blockSize,g=h*4;x.sigBytes>g&&(x=u.finalize(x)),x.clamp();for(var b=this._oKey=x.clone(),w=this._iKey=x.clone(),j=b.words,C=w.words,A=0;A<h;A++)j[A]^=1549556828,C[A]^=909522486;b.sigBytes=w.sigBytes=g,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var x=this._hasher,h=x.finalize(u);x.reset();var g=x.finalize(this._oKey.clone().concat(h));return g}})})()})})(Za)),Za.exports}var ib=Ga.exports,Zc;function Au(){return Zc||(Zc=1,(function(a,s){(function(i,r,o){a.exports=r(Cs(),eb(),sb())})(ib,function(i){return(function(){var r=i,o=r.lib,c=o.Base,d=o.WordArray,f=r.algo,m=f.MD5,u=f.EvpKDF=c.extend({cfg:c.extend({keySize:128/32,hasher:m,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,h){for(var g,b=this.cfg,w=b.hasher.create(),j=d.create(),C=j.words,A=b.keySize,E=b.iterations;C.length<A;){g&&w.update(g),g=w.update(x).finalize(h),w.reset();for(var _=1;_<E;_++)g=w.finalize(g),w.reset();j.concat(g)}return j.sigBytes=A*4,j}});r.EvpKDF=function(x,h,g){return u.create(g).compute(x,h)}})(),i.EvpKDF})})(Ga)),Ga.exports}var Ka={exports:{}},ab=Ka.exports,Kc;function nb(){return Kc||(Kc=1,(function(a,s){(function(i,r,o){a.exports=r(Cs(),Au())})(ab,function(i){i.lib.Cipher||(function(r){var o=i,c=o.lib,d=c.Base,f=c.WordArray,m=c.BufferedBlockAlgorithm,u=o.enc;u.Utf8;var x=u.Base64,h=o.algo,g=h.EvpKDF,b=c.Cipher=m.extend({cfg:d.extend(),createEncryptor:function(M,U){return this.create(this._ENC_XFORM_MODE,M,U)},createDecryptor:function(M,U){return this.create(this._DEC_XFORM_MODE,M,U)},init:function(M,U,D){this.cfg=this.cfg.extend(D),this._xformMode=M,this._key=U,this.reset()},reset:function(){m.reset.call(this),this._doReset()},process:function(M){return this._append(M),this._process()},finalize:function(M){M&&this._append(M);var U=this._doFinalize();return U},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function M(U){return typeof U=="string"?ae:R}return function(U){return{encrypt:function(D,q,J){return M(q).encrypt(U,D,q,J)},decrypt:function(D,q,J){return M(q).decrypt(U,D,q,J)}}}})()});c.StreamCipher=b.extend({_doFinalize:function(){var M=this._process(!0);return M},blockSize:1});var w=o.mode={},j=c.BlockCipherMode=d.extend({createEncryptor:function(M,U){return this.Encryptor.create(M,U)},createDecryptor:function(M,U){return this.Decryptor.create(M,U)},init:function(M,U){this._cipher=M,this._iv=U}}),C=w.CBC=(function(){var M=j.extend();M.Encryptor=M.extend({processBlock:function(D,q){var J=this._cipher,se=J.blockSize;U.call(this,D,q,se),J.encryptBlock(D,q),this._prevBlock=D.slice(q,q+se)}}),M.Decryptor=M.extend({processBlock:function(D,q){var J=this._cipher,se=J.blockSize,te=D.slice(q,q+se);J.decryptBlock(D,q),U.call(this,D,q,se),this._prevBlock=te}});function U(D,q,J){var se,te=this._iv;te?(se=te,this._iv=r):se=this._prevBlock;for(var ue=0;ue<J;ue++)D[q+ue]^=se[ue]}return M})(),A=o.pad={},E=A.Pkcs7={pad:function(M,U){for(var D=U*4,q=D-M.sigBytes%D,J=q<<24|q<<16|q<<8|q,se=[],te=0;te<q;te+=4)se.push(J);var ue=f.create(se,q);M.concat(ue)},unpad:function(M){var U=M.words[M.sigBytes-1>>>2]&255;M.sigBytes-=U}};c.BlockCipher=b.extend({cfg:b.cfg.extend({mode:C,padding:E}),reset:function(){var M;b.reset.call(this);var U=this.cfg,D=U.iv,q=U.mode;this._xformMode==this._ENC_XFORM_MODE?M=q.createEncryptor:(M=q.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==M?this._mode.init(this,D&&D.words):(this._mode=M.call(q,this,D&&D.words),this._mode.__creator=M)},_doProcessBlock:function(M,U){this._mode.processBlock(M,U)},_doFinalize:function(){var M,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),M=this._process(!0)):(M=this._process(!0),U.unpad(M)),M},blockSize:128/32});var _=c.CipherParams=d.extend({init:function(M){this.mixIn(M)},toString:function(M){return(M||this.formatter).stringify(this)}}),I=o.format={},S=I.OpenSSL={stringify:function(M){var U,D=M.ciphertext,q=M.salt;return q?U=f.create([1398893684,1701076831]).concat(q).concat(D):U=D,U.toString(x)},parse:function(M){var U,D=x.parse(M),q=D.words;return q[0]==1398893684&&q[1]==1701076831&&(U=f.create(q.slice(2,4)),q.splice(0,4),D.sigBytes-=16),_.create({ciphertext:D,salt:U})}},R=c.SerializableCipher=d.extend({cfg:d.extend({format:S}),encrypt:function(M,U,D,q){q=this.cfg.extend(q);var J=M.createEncryptor(D,q),se=J.finalize(U),te=J.cfg;return _.create({ciphertext:se,key:D,iv:te.iv,algorithm:M,mode:te.mode,padding:te.padding,blockSize:M.blockSize,formatter:q.format})},decrypt:function(M,U,D,q){q=this.cfg.extend(q),U=this._parse(U,q.format);var J=M.createDecryptor(D,q).finalize(U.ciphertext);return J},_parse:function(M,U){return typeof M=="string"?U.parse(M,this):M}}),$=o.kdf={},W=$.OpenSSL={execute:function(M,U,D,q,J){if(q||(q=f.random(64/8)),J)var se=g.create({keySize:U+D,hasher:J}).compute(M,q);else var se=g.create({keySize:U+D}).compute(M,q);var te=f.create(se.words.slice(U),D*4);return se.sigBytes=U*4,_.create({key:se,iv:te,salt:q})}},ae=c.PasswordBasedCipher=R.extend({cfg:R.cfg.extend({kdf:W}),encrypt:function(M,U,D,q){q=this.cfg.extend(q);var J=q.kdf.execute(D,M.keySize,M.ivSize,q.salt,q.hasher);q.iv=J.iv;var se=R.encrypt.call(this,M,U,J.key,q);return se.mixIn(J),se},decrypt:function(M,U,D,q){q=this.cfg.extend(q),U=this._parse(U,q.format);var J=q.kdf.execute(D,M.keySize,M.ivSize,U.salt,q.hasher);q.iv=J.iv;var se=R.decrypt.call(this,M,U,J.key,q);return se}})})()})})(Ka)),Ka.exports}var rb=Va.exports,Yc;function ob(){return Yc||(Yc=1,(function(a,s){(function(i,r,o){a.exports=r(Cs(),Yv(),Xv(),Au(),nb())})(rb,function(i){return(function(){var r=i,o=r.lib,c=o.BlockCipher,d=r.algo,f=[],m=[],u=[],x=[],h=[],g=[],b=[],w=[],j=[],C=[];(function(){for(var _=[],I=0;I<256;I++)I<128?_[I]=I<<1:_[I]=I<<1^283;for(var S=0,R=0,I=0;I<256;I++){var $=R^R<<1^R<<2^R<<3^R<<4;$=$>>>8^$&255^99,f[S]=$,m[$]=S;var W=_[S],ae=_[W],M=_[ae],U=_[$]*257^$*16843008;u[S]=U<<24|U>>>8,x[S]=U<<16|U>>>16,h[S]=U<<8|U>>>24,g[S]=U;var U=M*16843009^ae*65537^W*257^S*16843008;b[$]=U<<24|U>>>8,w[$]=U<<16|U>>>16,j[$]=U<<8|U>>>24,C[$]=U,S?(S=W^_[_[_[M^W]]],R^=_[_[R]]):S=R=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],E=d.AES=c.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,S=I.words,R=I.sigBytes/4,$=this._nRounds=R+6,W=($+1)*4,ae=this._keySchedule=[],M=0;M<W;M++)M<R?ae[M]=S[M]:(_=ae[M-1],M%R?R>6&&M%R==4&&(_=f[_>>>24]<<24|f[_>>>16&255]<<16|f[_>>>8&255]<<8|f[_&255]):(_=_<<8|_>>>24,_=f[_>>>24]<<24|f[_>>>16&255]<<16|f[_>>>8&255]<<8|f[_&255],_^=A[M/R|0]<<24),ae[M]=ae[M-R]^_);for(var U=this._invKeySchedule=[],D=0;D<W;D++){var M=W-D;if(D%4)var _=ae[M];else var _=ae[M-4];D<4||M<=4?U[D]=_:U[D]=b[f[_>>>24]]^w[f[_>>>16&255]]^j[f[_>>>8&255]]^C[f[_&255]]}}},encryptBlock:function(_,I){this._doCryptBlock(_,I,this._keySchedule,u,x,h,g,f)},decryptBlock:function(_,I){var S=_[I+1];_[I+1]=_[I+3],_[I+3]=S,this._doCryptBlock(_,I,this._invKeySchedule,b,w,j,C,m);var S=_[I+1];_[I+1]=_[I+3],_[I+3]=S},_doCryptBlock:function(_,I,S,R,$,W,ae,M){for(var U=this._nRounds,D=_[I]^S[0],q=_[I+1]^S[1],J=_[I+2]^S[2],se=_[I+3]^S[3],te=4,ue=1;ue<U;ue++){var ne=R[D>>>24]^$[q>>>16&255]^W[J>>>8&255]^ae[se&255]^S[te++],Ce=R[q>>>24]^$[J>>>16&255]^W[se>>>8&255]^ae[D&255]^S[te++],P=R[J>>>24]^$[se>>>16&255]^W[D>>>8&255]^ae[q&255]^S[te++],N=R[se>>>24]^$[D>>>16&255]^W[q>>>8&255]^ae[J&255]^S[te++];D=ne,q=Ce,J=P,se=N}var ne=(M[D>>>24]<<24|M[q>>>16&255]<<16|M[J>>>8&255]<<8|M[se&255])^S[te++],Ce=(M[q>>>24]<<24|M[J>>>16&255]<<16|M[se>>>8&255]<<8|M[D&255])^S[te++],P=(M[J>>>24]<<24|M[se>>>16&255]<<16|M[D>>>8&255]<<8|M[q&255])^S[te++],N=(M[se>>>24]<<24|M[D>>>16&255]<<16|M[q>>>8&255]<<8|M[J&255])^S[te++];_[I]=ne,_[I+1]=Ce,_[I+2]=P,_[I+3]=N},keySize:256/32});r.AES=c._createHelper(E)})(),i.AES})})(Va)),Va.exports}var lb=ob();const Qc=ms(lb);var Ya={exports:{}},cb=Ya.exports,Xc;function db(){return Xc||(Xc=1,(function(a,s){(function(i,r){a.exports=r(Cs())})(cb,function(i){return i.enc.Utf8})})(Ya)),Ya.exports}var ub=db();const hb=ms(ub),Jc="emprata_dev_key_change_me_now_32c",mi={encrypt:a=>{if(!a)return"";try{return Qc.encrypt(a,Jc).toString()}catch(s){return console.error("[CryptoService] Encrypt error:",s),""}},decrypt:a=>{if(!a)return"";try{return Qc.decrypt(a,Jc).toString(hb)}catch(s){return console.error("[CryptoService] Decrypt error:",s),""}},maskSensitive:(a,s=4)=>{if(!a||a.length<=s)return a;const i=a.slice(-s);return"*".repeat(a.length-s)+i},isEncrypted:a=>a?a.startsWith("U2FsdGVkX1"):!1};function ed(){const{user:a,signOut:s}=Ze(),i=gt(),[r,o]=k.useState([]),[c,d]=k.useState([]),[f,m]=k.useState(!0),[u,x]=k.useState({}),[h,g]=k.useState({cpf:""}),[b,w]=k.useState(!1),[j,C]=k.useState(!1);k.useEffect(()=>{if(!a){i("/auth");return}(async()=>{try{const R=(await Ot(Te(le,"users",a.uid))).data()||{displayName:a.displayName,phone:""};R.phone&&mi.isEncrypted(R.phone)&&(R.phone=mi.decrypt(R.phone)),x(R);const $=await Ot(Te(le,`users/${a.uid}/private_data`,"sensitive"));if($.exists()){const W=$.data();W.cpf&&mi.isEncrypted(W.cpf)&&(W.cpf=mi.decrypt(W.cpf)),g(W)}}catch(S){console.error("[ConsumerProfile] Erro ao carregar perfil:",S)}})();const _=We(ze(le,"orders"),Ie("customer.uid","==",a.uid),Ks("createdAt","desc")),I=Et(_,S=>{const R=[],$=[];S.docs.forEach(W=>{const ae={id:W.id,...W.data()};["PENDING","PREPARING","READY","DISPATCHED"].includes(ae.status?.toUpperCase())?R.push(ae):$.push(ae)}),o(R),d($),m(!1)});return()=>I()},[a,i]);const A=async()=>{if(He.currentUser){if(h.cpf&&!Fv(h.cpf))return X.error("CPF Invlido. Verifique os nmeros digitados.");if(u.phone&&!Hv(u.phone))return X.error("Telefone Invlido. Use formato (XX) XXXXX-XXXX");w(!0);try{const E=u.phone?mi.encrypt(u.phone):"",_=h.cpf?mi.encrypt(h.cpf):"";await zs(Te(le,"users",He.currentUser.uid),{displayName:u.displayName,phone:E,updatedAt:new Date},{merge:!0}),await zs(Te(le,`users/${He.currentUser.uid}/private_data`,"sensitive"),{cpf:_,updatedAt:new Date},{merge:!0}),X.success(" Dados criptografados e salvos com segurana militar!"),C(!1)}catch(E){console.error("[ConsumerProfile] Erro ao salvar:",E),X.error("Erro ao salvar. Verifique sua conexo.")}finally{w(!1)}}};return a?f?e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center",children:e.jsx(ve,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white pb-24",children:[e.jsxs("div",{className:"bg-[#121212] p-6 pt-12 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary to-orange-600 flex items-center justify-center text-black font-black text-2xl",children:a.displayName?.[0]||e.jsx(cs,{})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:u.displayName||a.displayName||"Cliente"}),e.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-xs font-bold bg-green-500/10 px-2 py-1 rounded-full w-fit mt-1",children:[e.jsx(_s,{size:12})," Conta Verificada"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/5 p-3 rounded-xl text-left",children:[e.jsx("p",{className:"text-white/40 text-xs uppercase font-bold",children:"E-mail"}),e.jsx("p",{className:"text-sm truncate",children:a.email})]}),e.jsxs("button",{onClick:s,className:"bg-red-500/10 p-3 rounded-xl text-left hover:bg-red-500/20 text-red-400 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase font-bold opacity-70",children:"Sair"}),e.jsx("p",{className:"font-bold text-sm",children:"Logout"})]}),e.jsx(Xi,{size:16})]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm font-bold text-white/40 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(cs,{size:16,className:"text-primary"})," Meu Perfil Blindado"]}),e.jsx("button",{onClick:()=>C(!j),className:"text-xs text-primary font-bold",children:j?"Cancelar":"Editar"})]}),j?e.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/40 font-bold block mb-1",children:"Nome Pblico"}),e.jsx("input",{value:u.displayName||"",onChange:E=>x({...u,displayName:E.target.value}),className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl p-3 text-white focus:border-primary/50 outline-none transition-colors",placeholder:"Seu nome"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-white/40 font-bold block mb-1",children:"Celular (Validado)"}),e.jsx("input",{value:u.phone||"",onChange:E=>x({...u,phone:Vv(E.target.value)}),className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl p-3 text-white focus:border-primary/50 outline-none transition-colors",placeholder:"(00) 00000-0000",maxLength:15})]}),e.jsxs("div",{className:"bg-green-900/10 border border-green-500/20 p-4 rounded-xl mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-green-400",children:[e.jsx(_s,{size:18}),e.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:"rea Segura (Criptografada)"})]}),e.jsx("label",{className:"text-xs text-white/40 font-bold block mb-1",children:"CPF"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:h.cpf||"",onChange:E=>g({...h,cpf:Uv(E.target.value)}),className:"w-full bg-black border border-green-500/30 rounded-xl p-3 pl-10 text-white font-mono tracking-widest focus:border-green-500/60 outline-none transition-colors",placeholder:"000.000.000-00",maxLength:14}),e.jsx(Dt,{className:"absolute left-3 top-3.5 text-white/20",size:16})]}),e.jsx("p",{className:"text-[10px] text-white/30 mt-2",children:"Seu CPF  armazenado em uma coleo separada com regras de segurana estritas. Nem outros usurios nem lojas podem v-lo."})]}),e.jsx("button",{onClick:A,disabled:b,className:"w-full py-4 bg-primary text-black font-black rounded-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary/90 transition-colors",children:b?e.jsx(ve,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Jr,{size:18}),"SALVAR DADOS"]})})]}):e.jsxs("div",{className:"bg-[#121212] border border-white/5 p-4 rounded-xl space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/40 text-sm",children:"Nome:"}),e.jsx("span",{className:"font-medium",children:u.displayName||"No informado"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/40 text-sm",children:"Telefone:"}),e.jsx("span",{className:"font-medium",children:u.phone||"No informado"})]}),h.cpf&&e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/5",children:[e.jsxs("span",{className:"text-green-400/60 text-sm flex items-center gap-1",children:[e.jsx(Dt,{size:12})," CPF:"]}),e.jsxs("span",{className:"font-mono text-green-400",children:["***.***.***-",h.cpf.slice(-2)]})]})]})]}),e.jsx("div",{className:"px-6",children:e.jsxs("button",{onClick:()=>{localStorage.setItem("activeRole","OWNER"),window.location.href="/dashboard"},className:"w-full bg-gradient-to-r from-gray-800 to-black border border-white/20 p-4 rounded-2xl flex items-center justify-between group hover:border-primary/50 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/10 p-2 rounded-lg group-hover:bg-primary group-hover:text-black transition-colors",children:e.jsx(cs,{size:24})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sm",children:"Gerenciar Restaurante"}),e.jsx("p",{className:"text-xs text-white/40",children:"Acessar painel administrativo"})]})]}),e.jsx(kr,{size:16,className:"text-white/40 group-hover:text-white"})]})}),e.jsxs("div",{className:"p-6 space-y-8",children:[r.length>0&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-sm font-bold text-white/40 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Hs,{size:16,className:"text-primary"})," Em Andamento"]}),e.jsx("div",{className:"space-y-4",children:r.map(E=>e.jsxs(Ve,{to:`/track/${E.id}`,className:"block bg-gradient-to-r from-[#1a1a1a] to-[#121212] border border-primary/30 p-5 rounded-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-primary text-black text-[10px] font-black px-3 py-1 rounded-bl-xl uppercase",children:"Rastrear Agora"}),e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:E.restaurant?.name||"Emprata Delivery"}),e.jsxs("p",{className:"text-xs text-white/60",children:["Pedido #",E.id.slice(-4).toUpperCase()]})]})}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),mb(E.status)]})]},E.id))})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-sm font-bold text-white/40 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Jh,{size:16})," Histrico de Pedidos"]}),c.length===0&&r.length===0?e.jsxs("div",{className:"text-center py-12 bg-white/5 rounded-2xl",children:[e.jsx(Bs,{size:48,className:"mx-auto mb-4 text-white/20"}),e.jsx("p",{className:"text-white/40",children:"Nenhum pedido ainda"}),e.jsx("p",{className:"text-xs text-white/20 mt-1",children:"Faa seu primeiro pedido!"})]}):e.jsx("div",{className:"space-y-3",children:c.map(E=>e.jsxs("div",{className:"bg-[#121212] border border-white/5 p-4 rounded-xl flex justify-between items-center opacity-70 hover:opacity-100 transition-opacity",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/5 p-2 rounded-lg",children:e.jsx(Bs,{size:20,className:"text-white/40"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:E.restaurant?.name||"Pedido Finalizado"}),e.jsx("p",{className:"text-xs text-white/40",children:E.createdAt?.toDate?new Date(E.createdAt.toDate()).toLocaleDateString("pt-BR"):"Data indisponvel"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-sm",children:Rt(E.total||E.financials?.total||0)}),e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded ${E.status?.toUpperCase()==="CANCELLED"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:E.status?.toUpperCase()==="CANCELLED"?"Cancelado":"Concludo"})]})]},E.id))})]})]})]}):null}function mb(a){return{PENDING:"Aguardando Confirmao",PREPARING:"Em Preparo na Cozinha",READY:"Pronto para Entrega",DISPATCHED:"Saiu para Entrega (Acompanhe)",DELIVERED:"Entregue"}[a?.toUpperCase()]||a}const pb=new yn.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/684/684908.png",iconSize:[40,40]}),fb=new yn.Icon({iconUrl:"https://cdn-icons-png.flaticon.com/512/3063/3063823.png",iconSize:[45,45]});function xb({center:a}){return y0().setView(a),null}const td=[{key:"PENDING",label:"Pedido Recebido",icon:Bs},{key:"PREPARING",label:"Em Preparo",icon:ot},{key:"READY",label:"Pronto para Entrega",icon:qs},{key:"DISPATCHED",label:"Saindo para Entrega",icon:es}];function gb(){const{orderId:a}=fd(),[s,i]=k.useState(null),[r,o]=k.useState(null);if(k.useEffect(()=>{if(!a)return;const m=Et(Te(le,"orders",a),u=>{if(u.exists()){const x=u.data();i({id:u.id,...x}),x.delivery?.driverLocation&&o(x.delivery.driverLocation)}});return()=>m()},[a]),!s)return e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(es,{className:"w-12 h-12 mx-auto mb-4 animate-bounce text-primary"}),e.jsx("p",{className:"text-white/60",children:"Carregando rastreamento..."})]})});const c=s.deliveryAddress?.coordinates?[s.deliveryAddress.coordinates.lat,s.deliveryAddress.coordinates.lng]:[-23.5505,-46.6333],d=r?[r.lat,r.lng]:null,f=td.findIndex(m=>m.key===s.status?.toUpperCase());return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col",children:[e.jsxs("div",{className:"h-[50vh] w-full relative z-0",children:[e.jsxs(iu,{center:c,zoom:15,style:{height:"100%",width:"100%"},children:[e.jsx(au,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(zr,{position:c,icon:pb,children:e.jsx(Fr,{children:"Voc est aqui"})}),d&&e.jsxs(e.Fragment,{children:[e.jsx(zr,{position:d,icon:fb,children:e.jsx(Fr,{children:"Seu pedido"})}),e.jsx(xb,{center:d})]})]}),!d&&s.status?.toUpperCase()==="DISPATCHED"&&e.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/80 text-white p-3 rounded-xl text-center z-[1000] border border-white/10",children:" Aguardando sinal de GPS do motoboy..."})]}),e.jsxs("div",{className:"flex-1 bg-[#121212] rounded-t-3xl -mt-6 relative z-10 p-6",children:[e.jsx("div",{className:"w-12 h-1 bg-white/10 rounded-full mx-auto mb-6"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white",children:s.status?.toUpperCase()==="DISPATCHED"?"A Caminho!":s.status?.toUpperCase()==="READY"?"Pronto!":"Preparando..."}),e.jsxs("p",{className:"text-white/40 text-sm flex items-center gap-1",children:[e.jsx(Hs,{size:14})," Previso: 15-25 min"]})]}),e.jsx("div",{className:"w-14 h-14 bg-green-500/20 rounded-full flex items-center justify-center text-3xl",children:s.status?.toUpperCase()==="DISPATCHED"?"":s.status?.toUpperCase()==="READY"?"":""})]}),e.jsx("div",{className:"space-y-4 mb-6",children:td.map((m,u)=>{const x=m.icon,h=u<=f;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${h?"bg-green-500 border-green-500 text-black":"border-white/20 text-white/30"}`,children:e.jsx(x,{size:18})}),e.jsx("span",{className:`font-medium ${h?"text-white":"text-white/30"}`,children:m.label})]},m.key)})}),s.deliveryPin&&e.jsxs("div",{className:"mt-6 p-4 bg-white/5 rounded-2xl text-center border border-white/10",children:[e.jsx("p",{className:"text-xs text-white/40 uppercase mb-1",children:"Cdigo de Entrega"}),e.jsx("p",{className:"text-3xl font-black text-white tracking-widest",children:s.deliveryPin})]})]})]})}function vb(){const[a,s]=k.useState(null),[i,r]=k.useState(!1),[o,c]=k.useState(!1),[d,f]=k.useState(null),[m,u]=k.useState(0),[x,h]=k.useState(""),[g,b]=k.useState(!1);k.useEffect(()=>{const C=localStorage.getItem("emprata_staff_token");if(C)try{s(JSON.parse(C))}catch{console.error("Invalid staff token")}},[]),k.useEffect(()=>{if(!a?.id)return;(async()=>{try{const A=Te(le,"drivers",a.id),E=await Ot(A);E.exists()&&E.data().currentStatus!=="offline"&&r(!0)}catch{console.log("Initial status check failed")}})()},[a]);const w=async()=>{if(!a?.id){X.error("Sesso invlida. Faa login novamente.");return}c(!0);try{if(i)await ut(Te(le,"drivers",a.id),{currentStatus:"offline",lastUpdate:xt()}),r(!1),X("Voc est OFFLINE."),c(!1);else{if(!navigator.geolocation)throw new Error("GPS no suportado neste dispositivo.");navigator.geolocation.getCurrentPosition(async C=>{const{latitude:A,longitude:E}=C.coords;await zs(Te(le,"drivers",a.id),{name:a.name||"Motorista",restaurantId:a.restaurantId,location:{lat:A,lng:E},currentStatus:"available",lastUpdate:xt()},{merge:!0}),r(!0),X.success("Voc est ONLINE! Aguardando chamados."),c(!1)},C=>{console.error(C),X.error("Erro de GPS. Permita a localizao e tente novamente."),c(!1)},{enableHighAccuracy:!0,timeout:1e4})}}catch(C){console.error(C),X.error("Erro de conexo."),c(!1)}};k.useEffect(()=>{if(!i||!a?.id)return;const C=navigator.geolocation.watchPosition(A=>{ut(Te(le,"drivers",a.id),{location:{lat:A.coords.latitude,lng:A.coords.longitude},lastUpdate:xt()}).catch(()=>{})},A=>console.log("GPS Error",A),{enableHighAccuracy:!0,maximumAge:1e4});return()=>navigator.geolocation.clearWatch(C)},[i,a]),k.useEffect(()=>{if(!a?.id)return;const C=We(ze(le,"orders"),Ie("driverId","==",a.id),Ie("status","in",["dispatched","DISPATCHED","out_for_delivery"])),A=Et(C,E=>{if(E.empty)f(null);else{const _=E.docs[0].data();f({id:E.docs[0].id,..._})}});return()=>A()},[a]);const j=async()=>{if(!(!d||!a?.id)){if(d.deliveryPin&&x!==d.deliveryPin){X.error("PIN Incorreto!"),h("");return}c(!0);try{await ut(Te(le,"orders",d.id),{status:"DELIVERED",deliveredAt:xt()}),await ut(Te(le,"drivers",a.id),{currentStatus:"available"}),u(C=>C+(d.deliveryFee||5)),X.success("Entrega finalizada!"),b(!1),h("")}catch{X.error("Erro ao finalizar.")}finally{c(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-black text-white font-sans flex flex-col relative overflow-hidden selection:bg-green-500 selection:text-black",children:[e.jsxs("div",{className:`p-6 flex justify-between items-center transition-all duration-500 z-20 ${i?"bg-[#121212] border-b border-white/5":"bg-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all ${i?"bg-green-500 text-black shadow-green-500/20":"bg-white/10 text-white/20"}`,children:e.jsx(es,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg leading-none",children:a?.name?.split(" ")[0]||"Motorista"}),e.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest mt-1 ${i?"text-green-500":"text-white/30"}`,children:i?" Online":" Offline"})]})]}),i&&e.jsxs("div",{className:"bg-[#1a1a1a] border border-white/10 px-4 py-2 rounded-xl text-right",children:[e.jsx("p",{className:"text-[9px] text-white/40 uppercase font-bold",children:"Saldo"}),e.jsxs("p",{className:"text-xl font-mono font-black text-green-400",children:["R$ ",m.toFixed(2)]})]})]}),e.jsx("div",{className:"flex-1 p-6 relative z-10 flex flex-col justify-center",children:i?d?e.jsxs(Q.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},className:"bg-[#121212] rounded-[2.5rem] border border-white/10 overflow-hidden shadow-2xl relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-white/5",children:e.jsx(Q.div,{initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2,repeat:1/0},className:"h-full bg-blue-500 shadow-[0_0_10px_#3b82f6]"})}),e.jsx("div",{className:"bg-white/5 p-8 border-b border-white/5",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-wider",children:"Em Rota"})}),e.jsx("h2",{className:"text-3xl font-black text-white",children:d.customer?.name||"Cliente"})]}),d.customer?.phone&&e.jsx("a",{href:`tel:${d.customer.phone}`,className:"w-12 h-12 bg-green-500 text-black rounded-2xl flex items-center justify-center hover:scale-110 transition-transform shadow-lg shadow-green-500/20",children:e.jsx(od,{size:24})})]})}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-6 relative",children:[e.jsx("div",{className:"absolute left-[11px] top-3 bottom-8 w-0.5 bg-white/10"}),e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#121212] border-2 border-white/20 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-white/40 font-bold uppercase tracking-wider mb-1",children:"Coleta"}),e.jsx("p",{className:"font-bold text-white",children:"Restaurante"})]})]}),e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)] shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-green-500 font-bold uppercase tracking-wider mb-1",children:"Entrega"}),e.jsx("p",{className:"text-xl font-bold leading-tight",children:d.customer?.address||d.deliveryAddress?.street||"Endereo"}),d.deliveryAddress?.neighborhood&&e.jsx("p",{className:"text-sm text-white/50",children:d.deliveryAddress.neighborhood})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(d.customer?.address||d.deliveryAddress?.street||"")}`,target:"_blank",className:"py-4 bg-[#1a1a1a] rounded-2xl font-bold flex items-center justify-center gap-2 border border-white/10 hover:bg-white/5 active:scale-95 transition-all text-sm",children:[e.jsx(ea,{size:18,className:"text-blue-400"})," Navegar"]}),e.jsxs("button",{onClick:()=>b(!0),className:"py-4 bg-white text-black rounded-2xl font-black flex items-center justify-center gap-2 hover:scale-[1.02] active:scale-95 transition-all text-sm shadow-xl",children:[e.jsx(qs,{size:18})," FINALIZAR"]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center opacity-40",children:[e.jsx("div",{className:"w-32 h-32 rounded-full border border-dashed border-white/20 flex items-center justify-center mb-6 animate-[spin_10s_linear_infinite]",children:e.jsx(es,{size:32,className:"text-white"})}),e.jsx("h3",{className:"text-lg font-bold",children:"Procurando corridas..."}),e.jsx("p",{className:"text-xs mt-2 text-white/50",children:"Mantenha o app aberto."})]}):e.jsxs("div",{className:"text-center space-y-8",children:[e.jsxs("div",{className:"relative mx-auto w-56 h-56 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-green-500/10 rounded-full animate-ping opacity-20"}),e.jsx("div",{className:"absolute inset-4 bg-green-500/5 rounded-full animate-pulse opacity-40"}),e.jsx("button",{onClick:w,disabled:o,className:"relative w-48 h-48 bg-[#121212] rounded-full border-4 border-white/5 flex flex-col items-center justify-center hover:scale-105 active:scale-95 hover:border-green-500 transition-all shadow-2xl group z-10",children:o?e.jsx(ve,{size:48,className:"text-green-500 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ud,{size:48,className:"text-white/20 group-hover:text-green-500 transition-colors mb-2"}),e.jsx("span",{className:"text-xs font-black uppercase text-white/40 group-hover:text-white tracking-widest",children:"INICIAR"})]})})]}),e.jsx("p",{className:"text-white/30 max-w-[200px] mx-auto text-xs font-medium",children:"Toque para se conectar ao sistema de despacho EmprataAI."})]})}),i&&!d&&e.jsx("div",{className:"p-6",children:e.jsx("button",{onClick:w,className:"w-full py-4 rounded-2xl border border-red-500/20 text-red-500/60 font-bold text-xs uppercase tracking-widest hover:bg-red-500/10 hover:text-red-500 transition-all",children:"Encerrar Turno"})}),e.jsx(Be,{children:g&&e.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-xl flex items-end md:items-center justify-center p-4",children:e.jsxs(Q.div,{initial:{y:100},animate:{y:0},className:"bg-[#121212] w-full max-w-sm rounded-[2.5rem] border border-white/10 p-8 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6 border border-white/10",children:e.jsx(Dt,{className:"text-white",size:28})}),e.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Confirmao"}),e.jsxs("p",{className:"text-sm text-white/50 mb-8",children:["Pea o cdigo de ",e.jsx("strong",{children:"4 dgitos"})," para o cliente."]}),e.jsx("div",{className:"flex justify-center gap-3 mb-8",children:[0,1,2,3].map(C=>e.jsx("div",{className:`w-12 h-14 rounded-xl border flex items-center justify-center text-2xl font-black transition-all ${C<x.length?"bg-white text-black border-white scale-110":"bg-[#0a0a0a] border-white/10 text-white/20"}`,children:x[C]||""},C))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[[1,2,3,4,5,6,7,8,9].map(C=>e.jsx("button",{onClick:()=>x.length<4&&h(A=>A+C),className:"py-4 bg-[#1a1a1a] rounded-xl font-bold text-xl hover:bg-white/10 active:scale-95 transition-all",children:C},C)),e.jsx("div",{}),e.jsx("button",{onClick:()=>x.length<4&&h(C=>C+"0"),className:"py-4 bg-[#1a1a1a] rounded-xl font-bold text-xl hover:bg-white/10 active:scale-95 transition-all",children:"0"}),e.jsx("button",{onClick:()=>h(C=>C.slice(0,-1)),className:"py-4 bg-red-500/10 text-red-400 rounded-xl flex items-center justify-center active:scale-95 transition-all",children:e.jsx(Lt,{size:20})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:j,disabled:x.length<4||o,className:"w-full py-4 bg-white text-black font-black rounded-xl text-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:o?e.jsx(ve,{className:"animate-spin mx-auto"}):"VALIDAR ENTREGA"}),e.jsx("button",{onClick:()=>{b(!1),h("")},className:"w-full py-3 text-xs font-bold text-white/40 hover:text-white",children:"CANCELAR"})]})]})})})]})}const jn="staff";async function bb(a,s){const i=We(ze(le,jn),Ie("restaurantId","==",a),Ie("code","==",s),Ie("active","==",!0)),r=await Gt(i);return r.empty?null:r.docs[0].data()}async function wb(a){const s=Te(le,jn,a),i=await Ot(s);return i.exists()?i.data():null}async function Qa(a,s){await ut(Te(le,jn,a),{isOnline:s,lastActiveAt:ds.now(),updatedAt:ds.now()})}async function yb(a,s){const i=await wb(a);if(!i)return;const r=i.performance.totalOrders+1,o=i.performance.totalSales+s,c=o/r;await ut(Te(le,jn,a),{"performance.totalOrders":r,"performance.totalSales":o,"performance.averageTicket":c,"performance.todayOrders":i.performance.todayOrders+1,"performance.todaySales":i.performance.todaySales+s,lastActiveAt:ds.now(),updatedAt:ds.now()})}function Xa(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}function _b({onSelect:a,occupiedTables:s}){const i=Array.from({length:30},(r,o)=>o+1);return e.jsx("div",{className:"grid grid-cols-5 gap-3 p-4",children:i.map(r=>e.jsx("button",{onClick:()=>a(r),className:`
            aspect-square rounded-2xl font-black text-2xl flex items-center justify-center
            transition-all active:scale-95
            ${s.includes(r)?"bg-primary/20 text-primary border-2 border-primary":"bg-white/5 text-white/60 hover:bg-white/10 border border-white/10"}
          `,children:r},r))})}function jb({item:a,quantity:s,onAdd:i,onRemove:r}){return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-white truncate",children:a.title}),e.jsx("p",{className:"text-sm text-primary font-bold",children:Xa(a.price)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center active:scale-95",children:e.jsx(Yr,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-black text-lg",children:s})]}),e.jsx("button",{onClick:i,className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center active:scale-95",children:e.jsx($t,{className:"w-4 h-4"})})]})]})}function Nb(){const a=gt(),[s,i]=k.useState(null),[r,o]=k.useState(!0),[c,d]=k.useState("tables"),[f,m]=k.useState(null),[u,x]=k.useState(""),[h,g]=k.useState([]),[b,w]=k.useState([]),[j,C]=k.useState([]),[A,E]=k.useState(!1);k.useEffect(()=>{const D=sessionStorage.getItem("waiterSession");if(D){const q=JSON.parse(D);i(q),Qa(q.waiterId,!0)}else a("/waiter-login");return o(!1),()=>{if(D){const q=JSON.parse(D);Qa(q.waiterId,!1)}}},[a]),k.useEffect(()=>{async function D(){if(s)try{const q=We(ze(le,"menus"),Ie("ownerId","==",s.ownerId)),J=await Gt(q);if(!J.empty){const te=J.docs[0].data().categories?.flatMap(ue=>ue.items)||[];g(te)}}catch(q){console.error("Error loading menu:",q)}}D()},[s]);const _=D=>{m(D),d("menu"),j.includes(D)||C(q=>[...q,D])},I=D=>{w(q=>{if(q.find(te=>te.menuItemId===D.id))return q.map(te=>te.menuItemId===D.id?{...te,quantity:te.quantity+1}:te);const se={id:D.id,menuItemId:D.id,name:D.title,price:Number(D.price),quantity:1,cartId:crypto.randomUUID(),notes:"",imageUrl:D.imageUrl||""};return[...q,se]}),X.success(`${D.title} adicionado!`)},S=D=>{w(q=>{const J=q.find(se=>se.menuItemId===D);return J&&J.quantity>1?q.map(se=>se.menuItemId===D?{...se,quantity:se.quantity-1}:se):q.filter(se=>se.menuItemId!==D)})},R=D=>b.find(q=>q.menuItemId===D)?.quantity||0,$=b.reduce((D,q)=>D+q.price*q.quantity,0),W=b.reduce((D,q)=>D+q.quantity,0),ae=async()=>{if(!(!s||!f||b.length===0)){E(!0);try{const D=b.map(J=>({id:crypto.randomUUID(),menuItemId:J.menuItemId,name:J.name,quantity:J.quantity,unitPrice:J.price,totalPrice:J.price*J.quantity,imageUrl:J.imageUrl,status:"pending"})),q={restaurantId:s.restaurantId,ownerId:s.ownerId,customer:{name:`Mesa ${f}`,cpf:"",table:f.toString()},items:D,subtotal:$,deliveryFee:0,total:$,status:"pending",orderNumber:Math.floor(Math.random()*999)+1,isPaid:!1,waiterId:s.waiterId,waiterName:s.waiterName,tableNumber:f,isOrderBumpAccepted:!1,deliveryType:"dine_in",createdAt:ds.now(),updatedAt:ds.now()};await pn(ze(le,"orders"),q),await yb(s.waiterId,$),X.success("Pedido enviado para a cozinha! "),w([]),d("tables"),m(null)}catch(D){X.error(D.message||"Erro ao enviar pedido")}finally{E(!1)}}},M=()=>{s&&Qa(s.waiterId,!1),sessionStorage.removeItem("waiterSession"),a("/")},U=h.filter(D=>D.title.toLowerCase().includes(u.toLowerCase()));return r?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx(ve,{className:"w-8 h-8 text-primary animate-spin"})}):s?e.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[e.jsxs("header",{className:"h-16 border-b border-white/10 flex items-center justify-between px-4 bg-black sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center",children:e.jsx(ot,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm",children:s.waiterName}),e.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-wider",children:"Modo Garom"})]})]}),f&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary/20 rounded-full",children:[e.jsx(qt,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"font-black text-primary",children:["Mesa ",f]})]}),e.jsx("button",{onClick:M,className:"p-2 text-white/40 hover:text-red-400 transition-colors",children:e.jsx(Xi,{className:"w-5 h-5"})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto pb-24",children:e.jsxs(Be,{mode:"wait",children:[c==="tables"&&e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("div",{className:"p-4",children:e.jsx("h2",{className:"text-lg font-black uppercase tracking-tight mb-4",children:"Selecione a Mesa"})}),e.jsx(_b,{onSelect:_,occupiedTables:j})]},"tables"),c==="menu"&&e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/30"}),e.jsx("input",{type:"text",value:u,onChange:D=>x(D.target.value),placeholder:"Buscar prato...",className:"w-full bg-white/5 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white placeholder-white/30 focus:border-primary focus:outline-none",autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[U.map(D=>e.jsx(jb,{item:D,quantity:R(D.id),onAdd:()=>I(D),onRemove:()=>S(D.id)},D.id)),U.length===0&&e.jsxs("div",{className:"text-center py-12 text-white/30",children:[e.jsx(ot,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"Nenhum item encontrado"})]})]})]},"menu"),c==="cart"&&e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-4",children:[e.jsx("h2",{className:"text-lg font-black uppercase tracking-tight",children:"Resumo do Pedido"}),b.length===0?e.jsxs("div",{className:"text-center py-12 text-white/30",children:[e.jsx(Ja,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"Carrinho vazio"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:b.map(D=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold",children:[D.quantity,"x ",D.name]}),e.jsxs("p",{className:"text-sm text-white/40",children:[Xa(D.price)," cada"]})]}),e.jsx("p",{className:"font-black text-primary",children:Xa(D.price*D.quantity)})]},D.menuItemId))}),e.jsxs("div",{className:"p-4 bg-primary/20 rounded-2xl flex items-center justify-between",children:[e.jsx("span",{className:"font-black uppercase",children:"Total"}),e.jsx("span",{className:"text-2xl font-black text-primary",children:Xa($)})]}),e.jsx("button",{onClick:ae,disabled:A,className:"w-full py-4 bg-green-500 hover:bg-green-600 rounded-2xl font-black text-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:A?e.jsx(ve,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(hd,{className:"w-5 h-5"}),"Disparar para Cozinha"]})})]})]},"cart"),c==="my-tables"&&e.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 space-y-4",children:[e.jsx("h2",{className:"text-lg font-black uppercase tracking-tight",children:"Minhas Mesas"}),j.length===0?e.jsxs("div",{className:"text-center py-12 text-white/30",children:[e.jsx(qt,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"Nenhuma mesa atendida ainda"})]}):e.jsx("div",{className:"grid grid-cols-3 gap-3",children:j.map(D=>e.jsx("button",{onClick:()=>_(D),className:"aspect-square rounded-2xl bg-primary/20 text-primary font-black text-3xl flex items-center justify-center border-2 border-primary active:scale-95",children:D},D))})]},"my-tables")]})}),e.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 h-20 bg-black/95 backdrop-blur-xl border-t border-white/10 flex items-center justify-around px-4 z-50",children:[e.jsxs("button",{onClick:()=>d("tables"),className:`flex flex-col items-center gap-1 ${c==="tables"?"text-primary":"text-white/40"}`,children:[e.jsx(em,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Mesas"})]}),e.jsxs("button",{onClick:()=>d("my-tables"),className:`flex flex-col items-center gap-1 ${c==="my-tables"?"text-primary":"text-white/40"}`,children:[e.jsx(qt,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Minhas"})]}),e.jsxs("button",{onClick:()=>d("cart"),className:"relative -mt-6 w-16 h-16 bg-primary rounded-full flex items-center justify-center shadow-lg shadow-primary/30",children:[e.jsx(Ja,{className:"w-7 h-7"}),W>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full text-xs font-black flex items-center justify-center",children:W})]}),e.jsxs("button",{onClick:()=>c==="menu"?d("tables"):m(null),className:`flex flex-col items-center gap-1 ${c==="menu"?"text-primary":"text-white/40"}`,children:[e.jsx(tm,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Pedidos"})]}),e.jsxs("button",{onClick:()=>X.info("Em breve: Fechar conta"),className:"flex flex-col items-center gap-1 text-white/40",children:[e.jsx(Us,{className:"w-6 h-6"}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Conta"})]})]})]}):null}function kb(){const a=gt(),[s,i]=k.useState(""),[r,o]=k.useState(""),[c,d]=k.useState(!1),[f,m]=k.useState(""),u=async()=>{if(!s.trim()||!r.trim()){m("Preencha o cdigo do restaurante e seu PIN");return}d(!0),m("");try{const h=await bb(s.trim(),r);if(!h){m("Cdigo ou PIN invlido"),d(!1);return}const g={waiterId:h.id,waiterName:h.name,restaurantId:h.restaurantId,ownerId:h.ownerId,loginAt:new Date,currentTables:[]};sessionStorage.setItem("waiterSession",JSON.stringify(g)),await Qa(h.id,!0),X.success(`Bem-vindo, ${h.name}!`),a("/waiter-mode")}catch(h){m(h.message||"Erro ao fazer login")}finally{d(!1)}},x=h=>{const g=h.replace(/\D/g,"").slice(0,6);o(g),m("")};return e.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[e.jsx("header",{className:"p-6",children:e.jsxs(Ve,{to:"/",className:"flex items-center gap-2 text-white/40 hover:text-white transition-colors",children:[e.jsx(Zs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold",children:"Voltar"})]})}),e.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-6",children:e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ot,{className:"w-10 h-10 text-primary"})}),e.jsx("h1",{className:"text-3xl font-black italic tracking-tight",children:"Modo Garom"}),e.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Digite seu cdigo de acesso"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-white/40 block mb-2",children:"Cdigo do Restaurante"}),e.jsx("input",{type:"text",value:s,onChange:h=>{i(h.target.value),m("")},placeholder:"ID do restaurante",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-white text-center font-mono placeholder-white/20 focus:border-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-white/40 block mb-2",children:"Seu PIN"}),e.jsx("input",{type:"text",inputMode:"numeric",value:r,onChange:h=>x(h.target.value),placeholder:"   ",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-4 text-white text-center text-3xl font-black tracking-[0.5em] placeholder-white/20 focus:border-primary focus:outline-none",maxLength:6})]}),f&&e.jsxs(Q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 bg-red-500/20 border border-red-500/30 rounded-xl text-red-400 text-sm",children:[e.jsx(ks,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:f})]}),e.jsx("button",{onClick:u,disabled:c||!r||!s,className:"w-full py-4 bg-primary hover:bg-orange-600 rounded-xl font-black text-lg uppercase tracking-wider transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:c?e.jsx(ve,{className:"w-5 h-5 animate-spin"}):"Entrar"})]}),e.jsx("p",{className:"text-center text-xs text-white/30",children:"Pea o cdigo do restaurante e seu PIN pessoal ao gerente."})]})})]})}function Cb(){const[a,s]=k.useState(""),[i,r]=k.useState(!1),o=gt(),c=k.useRef(null);k.useEffect(()=>{c.current?.focus()},[]);const d=async()=>{if(a.length<6)return X.error("Digite os 6 dgitos do seu PIN.");r(!0);try{const m=We(ze(le,"staff"),Ie("pin","==",a),Ie("active","==",!0)),u=await Gt(m);if(u.empty){X.error("PIN incorreto ou no encontrado."),s(""),r(!1);return}const x=u.docs[0].data();localStorage.setItem("emprata_staff_token",JSON.stringify({id:u.docs[0].id,role:x.role,name:x.name,restaurantId:x.restaurantId})),X.success(`Bem-vindo, ${x.name.split(" ")[0]}!`),x.role==="DRIVER"?o("/driver"):x.role==="WAITER"?o("/waiter"):x.role==="KITCHEN"?o("/kitchen-mode"):o("/dashboard")}catch{X.error("Erro de conexo.")}finally{r(!1)}},f=m=>{a.length<6&&s(u=>u+m)};return e.jsxs("div",{className:"min-h-screen bg-[#050505] flex flex-col items-center justify-center p-6 relative overflow-hidden text-white font-sans",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"}),e.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-[#121212] rounded-3xl border border-white/10 flex items-center justify-center mb-4 mx-auto shadow-[0_0_30px_rgba(255,255,255,0.05)]",children:e.jsx(_s,{className:"text-primary w-10 h-10"})}),e.jsxs("h1",{className:"text-2xl font-black italic tracking-tighter",children:["Acesso ",e.jsx("span",{className:"text-primary",children:"Staff"})]}),e.jsx("p",{className:"text-xs text-white/40 font-bold uppercase tracking-widest mt-2",children:"rea Restrita"})]}),e.jsx("div",{className:"mb-8 flex gap-3",children:[...Array(6)].map((m,u)=>e.jsx("div",{className:`w-10 h-14 rounded-xl border flex items-center justify-center text-2xl font-black transition-all ${u<a.length?"bg-primary text-black border-primary scale-110 shadow-lg":"bg-white/5 border-white/10 text-white/10"}`,children:u<a.length?"":""},u))}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full px-4 mb-8",children:[[1,2,3,4,5,6,7,8,9].map(m=>e.jsx("button",{onClick:()=>f(m.toString()),className:"h-20 bg-[#121212] rounded-2xl border border-white/5 text-2xl font-bold hover:bg-white/10 active:scale-95 transition-all",children:m},m)),e.jsx("div",{className:"h-20"})," ",e.jsx("button",{onClick:()=>f("0"),className:"h-20 bg-[#121212] rounded-2xl border border-white/5 text-2xl font-bold hover:bg-white/10 active:scale-95 transition-all",children:"0"}),e.jsx("button",{onClick:()=>s(m=>m.slice(0,-1)),className:"h-20 bg-red-500/10 rounded-2xl border border-red-500/20 text-red-400 flex items-center justify-center hover:bg-red-500/20 active:scale-95 transition-all",children:e.jsx(sm,{size:24})})]}),e.jsx("button",{onClick:d,disabled:i||a.length<6,className:"w-full py-5 bg-white text-black font-black text-lg rounded-2xl shadow-xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:scale-100 active:scale-95 transition-all",children:i?e.jsx(ve,{className:"animate-spin"}):e.jsxs(e.Fragment,{children:["ACESSAR ",e.jsx(Ns,{size:20})]})})]})]})}function Eb(){return e.jsxs("div",{className:"min-h-screen bg-[#050505] text-white font-sans p-6 md:p-12",children:[e.jsxs("div",{className:"max-w-5xl mx-auto flex flex-col md:flex-row justify-between items-center mb-16 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-black italic tracking-tighter",children:["Emprata",e.jsx("span",{className:"text-primary",children:".ai"})," ",e.jsx("span",{className:"text-white/40",children:"Workforce"})]}),e.jsx("p",{className:"text-white/60 mt-2 text-lg",children:"Central de Download e Acesso para Colaboradores."})]}),e.jsxs(Ve,{to:"/staff-login",className:"bg-white text-black px-8 py-4 rounded-xl font-black flex items-center gap-2 hover:scale-105 transition-transform",children:[e.jsx(_s,{size:20})," LOGIN WEB"]})]}),e.jsxs("div",{className:"max-w-5xl mx-auto grid md:grid-cols-2 gap-8",children:[e.jsxs(Q.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},className:"bg-[#121212] border border-white/10 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-green-500/50 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-green-500/10 blur-[100px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-2xl flex items-center justify-center text-black mb-6 shadow-[0_0_20px_rgba(34,197,94,0.4)]",children:e.jsx(es,{size:32})}),e.jsx("h2",{className:"text-3xl font-black mb-2",children:"Driver App"}),e.jsx("p",{className:"text-white/50 mb-8 h-12",children:"Para entregadores. GPS em tempo real, rota inteligente e carteira digital."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("a",{href:"#",className:"flex-1 bg-white text-black py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[e.jsx(pi,{size:18})," Android"]}),e.jsxs("a",{href:"#",className:"flex-1 bg-[#1a1a1a] border border-white/10 py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-white/5 transition-colors",children:[e.jsx(pi,{size:18})," iOS"]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-4 bg-black/40 p-4 rounded-xl border border-white/5",children:[e.jsx("div",{className:"bg-white p-2 rounded-lg",children:e.jsx(xl,{size:32,className:"text-black"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-white/40",children:"Acesso Web (PWA)"}),e.jsx("p",{className:"text-sm font-bold text-green-400",children:"emprata.ai/driver"})]}),e.jsx(Ve,{to:"/driver",className:"p-3 bg-green-500/10 rounded-xl text-green-400 hover:bg-green-500/20",children:e.jsx(sn,{size:18})})]})]})]}),e.jsxs(Q.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},className:"bg-[#121212] border border-white/10 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-blue-500/50 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 blur-[100px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center text-black mb-6 shadow-[0_0_20px_rgba(59,130,246,0.4)]",children:e.jsx(ot,{size:32})}),e.jsx("h2",{className:"text-3xl font-black mb-2",children:"Waiter Pad"}),e.jsx("p",{className:"text-white/50 mb-8 h-12",children:"Para salo. Mapa de mesas, envio para cozinha e fechamento de conta."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("a",{href:"#",className:"flex-1 bg-white text-black py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[e.jsx(pi,{size:18})," Android"]}),e.jsxs("a",{href:"#",className:"flex-1 bg-[#1a1a1a] border border-white/10 py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-white/5 transition-colors",children:[e.jsx(pi,{size:18})," iOS"]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-4 bg-black/40 p-4 rounded-xl border border-white/5",children:[e.jsx("div",{className:"bg-white p-2 rounded-lg",children:e.jsx(xl,{size:32,className:"text-black"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-white/40",children:"Acesso Web (PWA)"}),e.jsx("p",{className:"text-sm font-bold text-blue-400",children:"emprata.ai/waiter"})]}),e.jsx(Ve,{to:"/waiter",className:"p-3 bg-blue-500/10 rounded-xl text-blue-400 hover:bg-blue-500/20",children:e.jsx(sn,{size:18})})]})]})]})]}),e.jsx("div",{className:"max-w-5xl mx-auto mt-8",children:e.jsxs(Q.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-[#121212] border border-white/10 rounded-[2rem] p-6 flex flex-col md:flex-row items-center gap-6 hover:border-orange-500/50 transition-colors",children:[e.jsx("div",{className:"w-14 h-14 bg-orange-500/20 rounded-2xl flex items-center justify-center text-orange-400 shrink-0",children:e.jsx(_i,{size:28})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-xl font-black mb-1",children:"Kitchen Display (KDS)"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Painel de pedidos para a cozinha. Use em tablet fixo na rea de produo."})]}),e.jsxs(Ve,{to:"/kitchen-mode",className:"bg-orange-500 text-black px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:brightness-110 transition-all shrink-0",children:["Abrir KDS ",e.jsx(Ns,{size:18})]})]})}),e.jsx("p",{className:"text-center text-white/20 mt-16 text-sm",children:" 2024 EmprataAI Enterprise Solutions. Distribuio restrita para colaboradores."})]})}function Sb(){const{user:a}=Ze(),[s,i]=k.useState({salesToday:0,ordersToday:0,avgTicket:0,growth:0,salesYesterday:0}),[r,o]=k.useState([]),[c,d]=k.useState(!0),[f,m]=k.useState(null);return k.useEffect(()=>{if(!a){d(!1);return}console.log(" [useRealtimeOwner] Subscribing to orders for:",a.uid);const u=new Date;Gs(u);const x=i0(u),h=Gs(x),g=We(ze(le,"orders"),Ie("restaurantId","==",a.uid),Ie("createdAt",">=",ds.fromDate(h)),Ks("createdAt","desc")),b=Et(g,w=>{let j=0,C=0,A=0;w.docs.forEach(R=>{const $=R.data();let W;if($.createdAt?.toDate?W=$.createdAt.toDate():$.createdAt instanceof Date?W=$.createdAt:W=new Date,["DELIVERED","delivered","PAID","paid"].includes($.status)||$.isPaid===!0){const M=Number($.total)||0;vc(W,u)?(j+=M,C+=1):vc(W,x)&&(A+=M)}});const E=A>0?(j-A)/A*100:j>0?100:0,_=C>0?j/C:0,I={salesToday:j,ordersToday:C,avgTicket:_,growth:E,salesYesterday:A};i(I);const S=[];j>500&&j<1e3?S.push({id:"goal-500",type:"SUCCESS",title:"Meta de R$ 500 atingida! ",desc:`Voc j vendeu ${Oa(j)} hoje. Continue assim!`}):j>=1e3&&S.push({id:"goal-1000",type:"SUCCESS",title:"Dia Excelente! ",desc:`Faturamento de ${Oa(j)} - acima da meta de R$ 1.000!`}),E>=20?S.push({id:"growth-positive",type:"OPPORTUNITY",title:"Crescimento Expressivo",desc:`Vendas +${E.toFixed(0)}% em relao a ontem. Algo est funcionando!`}):E<=-20&&A>0&&S.push({id:"growth-negative",type:"URGENT",title:"Queda nas Vendas",desc:`Vendas ${E.toFixed(0)}% abaixo de ontem. Considere uma promoo.`}),_>0&&_<30?S.push({id:"low-ticket",type:"INFO",title:"Ticket Mdio Baixo",desc:`Mdia de ${Oa(_)} por pedido. Considere combos ou sugestes.`}):_>=80&&S.push({id:"high-ticket",type:"SUCCESS",title:"Ticket Mdio Alto",desc:`Excelente! Mdia de ${Oa(_)} por pedido.`}),C===0&&new Date().getHours()>=11&&S.push({id:"no-sales",type:"URGENT",title:"Sem Vendas Hoje",desc:"Ainda no houve pedidos confirmados hoje. Verifique se o cardpio est ativo."}),o(S),d(!1),m(null),console.log(" [useRealtimeOwner] Stats updated:",I)},w=>{console.error(" [useRealtimeOwner] Error:",w),m(w.message),d(!1)});return()=>{console.log(" [useRealtimeOwner] Unsubscribing..."),b()}},[a]),{stats:s,insights:r,loading:c,error:f,hasData:s.ordersToday>0||s.salesYesterday>0}}function Oa(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}async function Ab(a){try{const s=await Ot(Te(le,"brain_synapses",a));if(!s.exists())return" Ainda estou aprendendo... Continue vendendo para eu criar padres!";const i=s.data(),r=new Date,o=r.getHours(),c=`${sd(r.getDay())}-${o+1}`,d=`${sd(r.getDay())}-${o}`,f=i.hourlyPatterns?.[c]||0,m=i.hourlyPatterns?.[d]||0,u=Tb(i.correlations||{},5),x=`
Voc  um consultor de negcios especialista em restaurantes. Analise estes dados REAIS:

 DADOS DO RESTAURANTE:
- Total de pedidos registrados: ${i.totalOrders||0}
- Pedidos histricos NESTA hora (${d}): ${m}
- Pedidos histricos na PRXIMA hora (${c}): ${f}
- Top correlaes de produtos: ${JSON.stringify(u)}

 SUA MISSO:
Surpreenda o dono com UM insight prtico e acionvel de no mximo 2 frases.

Exemplos do tipo de insight esperado:
- " Alerta: Historicamente, a demanda TRIPLICA na prxima hora. Prepare a equipe agora!"
- " Dica: Quem pede Hambrguer costuma pedir Milkshake. Oferea combo com desconto!"
- " Padro detectado: Sexta s 20h  seu pico. Hoje  sexta, prepare-se!"
- " Oportunidade: X-Bacon tem alta correlao com Batata. Crie um combo agora!"

Responda APENAS com o insight, sem explicaes adicionais.`;return(await uo.generateContent(x)).response.text().trim()||" Analisando padres de venda..."}catch(s){return console.error("[DeepLearning] Insight error:",s)," Otimizando sinapses comerciais..."}}function sd(a){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a]}function Tb(a,s){const i=[];for(const r of Object.keys(a))for(const o of Object.keys(a[r]||{}))i.push({pair:`${r}  ${o}`,count:a[r][o]});return i.sort((r,o)=>o.count-r.count).slice(0,s).map(r=>`${r.pair} (${r.count}x)`)}function Pb({insight:a,index:s}){const i={URGENT:{icon:ks,color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/20"},OPPORTUNITY:{icon:Bt,color:"text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/20"},INFO:{icon:ld,color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20"},SUCCESS:{icon:Rs,color:"text-green-400",bg:"bg-green-500/10",border:"border-green-500/20"}},r=i[a.type]||i.INFO,o=r.icon;return e.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.1},className:`p-5 rounded-2xl border flex gap-4 ${r.bg} ${r.border}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 bg-black/20 ${r.color}`,children:e.jsx(o,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-white",children:a.title}),e.jsx("p",{className:"text-sm text-white/60 leading-tight mt-1",children:a.desc})]}),a.action&&e.jsx("button",{onClick:a.action,className:"self-center bg-white/5 p-2 rounded-full text-white/40 hover:text-white hover:bg-white/10 transition-colors",children:e.jsx(Ns,{size:16})})]})}function Ib(){const{stats:a,insights:s,loading:i,error:r,hasData:o}=Sb(),{user:c}=Ze(),[d,f]=k.useState(""),[m,u]=k.useState(!0);k.useEffect(()=>{c?.uid&&(u(!0),Ab(c.uid).then(f).finally(()=>u(!1)))},[c?.uid]);const x=()=>{X.success(" Modo Chuva ativado! Taxa de entrega +R$3")},h=()=>{X.success(" Prazo estendido em +15min para novos pedidos")};return i?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx(ve,{className:"w-8 h-8 animate-spin text-white/20"})}):r?e.jsxs("div",{className:"p-6 bg-red-500/10 border border-red-500/20 rounded-2xl text-center",children:[e.jsx(ks,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"text-red-400 font-bold",children:"Erro ao carregar dados"}),e.jsx("p",{className:"text-sm text-white/40 mt-1",children:r})]}):e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/80 to-black p-6 rounded-[2rem] border border-purple-500/30 relative overflow-hidden shadow-2xl",children:[e.jsx("div",{className:"absolute -right-10 -top-10 text-purple-500/10",children:e.jsx(im,{size:150})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("span",{className:"bg-purple-500/20 text-purple-300 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border border-purple-500/20 flex items-center gap-2",children:[e.jsx(at,{size:10})," Emprata Brain 2.0"]})}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white leading-relaxed min-h-[60px]",children:m?e.jsxs("span",{className:"flex items-center gap-2 text-white/60",children:[e.jsx(ve,{className:"w-5 h-5 animate-spin"}),"Analisando sinapses comerciais..."]}):`"${d}"`}),e.jsx("p",{className:"text-white/40 text-xs mt-4 font-medium",children:"*Aprendizado baseado nos seus dados histricos reais."})]})]}),e.jsxs("div",{className:"bg-[#1a1a1a] rounded-[2rem] p-6 border border-white/5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-primary/5 blur-[60px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-white/40 text-xs font-bold uppercase tracking-widest",children:"Vendas Hoje"}),e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-[10px] text-green-400 font-bold uppercase",children:"Live"})]}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("h2",{className:"text-5xl font-black text-white",children:Rt(a.salesToday)}),a.salesYesterday>0&&e.jsxs("span",{className:`text-sm font-bold mb-2 flex items-center ${a.growth>=0?"text-green-400":"text-red-400"}`,children:[a.growth>=0?e.jsx(Ji,{size:14,className:"mr-1"}):e.jsx(am,{size:14,className:"mr-1"}),a.growth>=0?"+":"",a.growth.toFixed(0),"%"]})]}),e.jsxs("div",{className:"mt-4 flex gap-4 text-xs font-bold text-white/50",children:[e.jsxs("span",{children:[" ",a.ordersToday," Pedidos"]}),e.jsxs("span",{children:[" ",Rt(a.avgTicket)," Mdio"]}),a.salesYesterday>0&&e.jsxs("span",{className:"text-white/30",children:[" Ontem: ",Rt(a.salesYesterday)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-white/40 uppercase mb-4 ml-2 flex items-center gap-2",children:[e.jsx(nm,{size:14}),"Insights da Operao"]}),s.length===0?e.jsxs("div",{className:"p-6 border border-white/5 rounded-2xl text-center bg-[#121212]",children:[e.jsx(Rs,{size:32,className:"mx-auto mb-2 text-green-400/50"}),e.jsx("p",{className:"text-white/40 text-sm font-medium",children:"Tudo funcionando bem"}),e.jsx("p",{className:"text-white/20 text-xs mt-1",children:"Nenhum alerta operacional no momento"})]}):e.jsx("div",{className:"space-y-3",children:s.map((g,b)=>e.jsx(Pb,{insight:g,index:b},g.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white/40 uppercase mb-4 ml-2",children:"Controle Operacional"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:x,className:"bg-[#121212] border border-white/10 p-4 rounded-2xl flex flex-col items-center gap-2 hover:border-blue-500/50 transition-colors group active:scale-95",children:[e.jsx(rm,{size:24,className:"text-blue-400 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-xs font-bold",children:"Modo Chuva"})]}),e.jsxs("button",{onClick:h,className:"bg-[#121212] border border-white/10 p-4 rounded-2xl flex flex-col items-center gap-2 hover:border-orange-500/50 transition-colors group active:scale-95",children:[e.jsx(Hs,{size:24,className:"text-orange-400 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-xs font-bold",children:"+15min Prazo"})]})]})]}),!o&&!i&&e.jsxs("div",{className:"p-6 bg-white/5 border border-white/10 rounded-2xl text-center",children:[e.jsx(qt,{size:32,className:"mx-auto mb-2 text-white/20"}),e.jsx("p",{className:"text-white/60 font-bold",children:"Nenhum pedido ainda"}),e.jsx("p",{className:"text-white/30 text-sm mt-1",children:"Os dados aparecero aqui assim que voc receber pedidos confirmados"})]})]})}function Mb(){const{user:a}=Ze(),[s,i]=k.useState([]),[r,o]=k.useState(!0),[c,d]=k.useState("");k.useEffect(()=>{if(!a)return;const h=We(ze(le,"products"),Ie("restaurantId","==",a.uid)),g=Et(h,b=>{i(b.docs.map(w=>({id:w.id,...w.data()}))),o(!1)},b=>{console.error("[OwnerMenu] Error fetching products:",b),o(!1)});return()=>g()},[a]);const f=async(h,g)=>{try{await ut(Te(le,"products",h),{available:!g}),X.success(g?" Produto Pausado":" Produto Ativado")}catch(b){console.error("[OwnerMenu] Error updating product:",b),X.error("Erro ao atualizar")}},m=async h=>{if(confirm("Tem certeza que deseja remover este item?"))try{await vd(Te(le,"products",h)),X.success(" Item removido")}catch(g){console.error("[OwnerMenu] Error deleting product:",g),X.error("Erro ao remover")}},u=async()=>{const h=`https://emprata.ai/menu/${a?.uid}`,g={title:"Pea no meu Delivery Oficial ",text:"Fugimos das taxas altas! Pea por aqui e ganhe entrega grtis no primeiro pedido.",url:h};if(navigator.share)try{await navigator.share(g),X.success("Link compartilhado! ")}catch{}else navigator.clipboard.writeText(h),X.success("Link copiado para a rea de transferncia!")},x=s.filter(h=>h.name.toLowerCase().includes(c.toLowerCase()));return r?e.jsx("div",{className:"flex justify-center items-center p-10",children:e.jsx(ve,{className:"animate-spin text-primary",size:32})}):e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("button",{onClick:u,className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white font-black py-4 rounded-xl flex items-center justify-center gap-3 shadow-lg shadow-green-500/30 hover:from-green-500 hover:to-green-600 transition-all active:scale-[0.98]",children:[e.jsx(Kr,{size:20}),"DIVULGAR NO WHATSAPP"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-black text-white",children:"Gerenciar Cardpio"}),e.jsxs("button",{onClick:()=>window.location.href="/menu-builder",className:"bg-primary text-black px-4 py-2 rounded-xl font-bold flex items-center gap-2 hover:bg-primary/90 transition-colors",children:[e.jsx($t,{size:18})," Novo"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/40",size:18}),e.jsx("input",{value:c,onChange:h=>d(h.target.value),placeholder:"Buscar produto...",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white focus:border-primary outline-none transition-colors"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 bg-[#121212] rounded-xl p-3 border border-white/5",children:[e.jsx("p",{className:"text-white/40 text-xs",children:"Total Itens"}),e.jsx("p",{className:"text-xl font-bold text-white",children:s.length})]}),e.jsxs("div",{className:"flex-1 bg-[#121212] rounded-xl p-3 border border-white/5",children:[e.jsx("p",{className:"text-white/40 text-xs",children:"Disponveis"}),e.jsx("p",{className:"text-xl font-bold text-green-400",children:s.filter(h=>h.available).length})]}),e.jsxs("div",{className:"flex-1 bg-[#121212] rounded-xl p-3 border border-white/5",children:[e.jsx("p",{className:"text-white/40 text-xs",children:"Esgotados"}),e.jsx("p",{className:"text-xl font-bold text-red-400",children:s.filter(h=>!h.available).length})]})]}),e.jsx("div",{className:"space-y-3",children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-white/40",children:[e.jsx(tn,{size:32,className:"mx-auto mb-2"}),e.jsx("p",{children:s.length===0?"Nenhum produto cadastrado.":"Nenhum produto encontrado."}),s.length===0&&e.jsx("button",{onClick:()=>window.location.href="/menu-builder",className:"mt-4 text-primary underline",children:"Adicionar primeiro produto"})]}):x.map((h,g)=>e.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.05},className:`bg-[#121212] p-4 rounded-xl border flex justify-between items-center ${h.available?"border-white/10":"border-red-500/20 bg-red-900/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[h.imageUrl?e.jsx("img",{src:h.imageUrl,alt:h.name,className:"w-12 h-12 rounded-lg object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-lg flex items-center justify-center",children:e.jsx(tn,{size:16,className:"text-white/20"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-bold ${h.available?"text-white":"text-white/50 line-through"}`,children:h.name}),e.jsxs("p",{className:"text-sm text-white/50",children:["R$ ",parseFloat(String(h.price)).toFixed(2).replace(".",",")]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(h.id,h.available),className:`p-2 rounded-lg border transition-colors ${h.available?"border-green-500/20 text-green-500 hover:bg-green-500/10":"border-red-500/20 text-red-500 hover:bg-red-500/10"}`,children:h.available?e.jsx(om,{size:18}):e.jsx(lm,{size:18})}),e.jsx("button",{onClick:()=>m(h.id),className:"p-2 rounded-lg border border-white/5 text-white/40 hover:text-red-400 hover:border-red-500/20 transition-colors",children:e.jsx($i,{size:18})})]})]},h.id))})]})}function Rb(){const{user:a}=Ze(),[s,i]=k.useState("month"),[r,o]=k.useState(!0),[c,d]=k.useState({revenue:0,orders:0,avgTicket:0}),[f,m]=k.useState([]);k.useEffect(()=>{if(!a)return;(async()=>{o(!0);try{const h=new Date;let g;switch(s){case"today":g=new Date(h.getFullYear(),h.getMonth(),h.getDate());break;case"week":g=new Date(h.getTime()-10080*60*1e3);break;default:g=new Date(h.getFullYear(),h.getMonth(),1)}const b=We(ze(le,"orders"),Ie("restaurantId","==",a.uid),Ie("status","in",["DELIVERED","PAID","delivered","paid","COMPLETED","completed"]),Ie("createdAt",">=",ds.fromDate(g))),w=await Gt(b);let j=0;const C=[];w.forEach(_=>{const I=_.data(),S=Number(I.total)||0;if(j+=S,C.length<5){const R=I.createdAt?.toDate?.()||new Date,$=Math.floor((h.getTime()-R.getTime())/(1e3*60));let W=`${$}min`;$>=60&&(W=`${Math.floor($/60)}h`),$>=1440&&(W=`${Math.floor($/1440)}d`),C.push({id:_.id,type:"income",desc:`Pedido #${_.id.slice(-4).toUpperCase()}`,amount:S,time:W})}});const A=w.size,E=A>0?j/A:0;d({revenue:j,orders:A,avgTicket:E}),m(C)}catch(h){console.error("[OwnerFinance] Error loading data:",h)}finally{o(!1)}})()},[a,s]);const u=()=>{X.success(" Saque solicitado! Processando...")};return r?e.jsx("div",{className:"flex justify-center items-center p-10",children:e.jsx(ve,{className:"animate-spin text-primary",size:32})}):e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6",children:[e.jsx("div",{className:"flex gap-2 p-1 bg-[#121212] rounded-xl border border-white/5",children:["today","week","month"].map(x=>e.jsx("button",{onClick:()=>i(x),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${s===x?"bg-primary text-black":"text-white/40 hover:text-white"}`,children:x==="today"?"Hoje":x==="week"?"Semana":"Ms"},x))}),e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-[#1a1a1a] rounded-[2rem] p-6 border border-green-500/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 blur-[60px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dd,{size:20,className:"text-green-400"}),e.jsx("span",{className:"text-green-400 text-sm font-bold",children:"Faturamento"})]}),e.jsxs("span",{className:"text-sm font-bold flex items-center gap-1 text-green-400",children:[e.jsx(Ji,{size:14}),"Dados Reais"]})]}),e.jsxs("h2",{className:"text-4xl font-black text-white mb-4",children:["R$ ",c.revenue.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/40 text-xs",children:"Pedidos"}),e.jsx("p",{className:"text-lg font-bold text-white",children:c.orders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/40 text-xs",children:"Ticket Mdio"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:["R$ ",c.avgTicket.toFixed(2).replace(".",",")]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:u,className:"bg-[#121212] border border-green-500/20 p-4 rounded-2xl flex items-center gap-3 hover:border-green-500/50 transition-colors group active:scale-95",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/10 rounded-xl flex items-center justify-center",children:e.jsx(Zr,{size:20,className:"text-green-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs text-white/40",children:"Disponvel"}),e.jsx("p",{className:"text-sm font-bold text-white",children:"Solicitar Saque"})]})]}),e.jsxs("button",{className:"bg-[#121212] border border-white/10 p-4 rounded-2xl flex items-center gap-3 hover:border-primary/50 transition-colors group active:scale-95",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center",children:e.jsx(cm,{size:20,className:"text-primary"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs text-white/40",children:"Relatrio"}),e.jsx("p",{className:"text-sm font-bold text-white",children:"Ver Detalhes"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white/40 uppercase mb-4 ml-2",children:"ltimas Movimentaes"}),e.jsx("div",{className:"space-y-2",children:f.length===0?e.jsxs("div",{className:"text-center py-8 text-white/40",children:[e.jsx(Ds,{size:32,className:"mx-auto mb-2"}),e.jsx("p",{children:"Nenhuma transao no perodo."})]}):f.map((x,h)=>e.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.05},className:"bg-[#121212] p-4 rounded-xl border border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${x.type==="income"?"bg-green-500/10":"bg-red-500/10"}`,children:x.type==="income"?e.jsx(dm,{size:16,className:"text-green-400"}):e.jsx(Ds,{size:16,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:x.desc}),e.jsxs("p",{className:"text-xs text-white/40 flex items-center gap-1",children:[e.jsx(cd,{size:10})," ",x.time," atrs"]})]})]}),e.jsxs("span",{className:`font-mono font-bold ${x.amount>0?"text-green-400":"text-red-400"}`,children:[x.amount>0?"+":"","R$ ",Math.abs(x.amount).toFixed(2).replace(".",",")]})]},x.id))})]})]})}function Lb(){const[a,s]=k.useState([{id:"1",role:"assistant",content:"Ol! Sou o EmprataBrain, seu consultor de negcios com IA. Como posso ajudar hoje? ",timestamp:new Date}]),[i,r]=k.useState(""),[o,c]=k.useState(!1),d=[{icon:Ji,label:"Anlise de Vendas",prompt:"Como foram minhas vendas hoje comparadas a ontem?"},{icon:qt,label:"Clientes VIP",prompt:"Quais so meus 5 melhores clientes do ms?"},{icon:Bs,label:"Estoque Crtico",prompt:"Quais itens esto com estoque baixo?"},{icon:um,label:"Sugestes",prompt:"Que promoo voc sugere para aumentar vendas hoje?"}],f=async m=>{const u=m||i;if(!u.trim())return;const x={id:Date.now().toString(),role:"user",content:u,timestamp:new Date};s(h=>[...h,x]),r(""),c(!0),setTimeout(()=>{const h={vendas:" Suas vendas hoje esto 12% acima de ontem! Voc j faturou R$ 1.450 com 24 pedidos. O item mais vendido  o X-Bacon Especial.",clientes:` Seus Top 5 VIPs do ms:
1. Joo Silva - R$ 890 (12 pedidos)
2. Maria Santos - R$ 650 (8 pedidos)
3. Carlos Oliveira - R$ 520 (6 pedidos)
4. Ana Costa - R$ 480 (7 pedidos)
5. Pedro Lima - R$ 420 (5 pedidos)`,estoque:` Ateno! Detectei 3 itens crticos:
 Coca-Cola Lata: ~2h de estoque
 Queijo Cheddar: 15 pores restantes
 Po de Hambrguer: pedido sugerido para amanh`,promoo:` Baseado no seu histrico, sugiro:

"Happy Hour Relmpago" (14h-16h)
 X-Salada + Refri = R$ 24,90 (de R$ 32)

Isto geralmente aumenta vendas em 40% nesse horrio!`};let g=" Entendi sua pergunta! Para uma anlise mais detalhada, integre seus dados de vendas e estoque. Por enquanto, posso ajudar com anlises bsicas de vendas, clientes e sugestes.";const b=u.toLowerCase();b.includes("vend")||b.includes("fatur")?g=h.vendas:b.includes("cliente")||b.includes("vip")?g=h.clientes:b.includes("estoque")||b.includes("baixo")?g=h.estoque:(b.includes("promoo")||b.includes("sugest"))&&(g=h.promoo);const w={id:(Date.now()+1).toString(),role:"assistant",content:g,timestamp:new Date};s(j=>[...j,w]),c(!1)},1500)};return e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex flex-col h-[calc(100vh-200px)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-600 to-purple-900 flex items-center justify-center",children:e.jsx(Vs,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold text-white flex items-center gap-2",children:["EmprataBrain",e.jsx(at,{size:14,className:"text-purple-400"})]}),e.jsx("p",{className:"text-xs text-white/40",children:"Seu consultor de negcios com IA"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide",children:d.map((m,u)=>e.jsxs("button",{onClick:()=>f(m.prompt),className:"flex items-center gap-2 bg-[#1a1a1a] border border-white/10 rounded-full px-4 py-2 shrink-0 hover:border-purple-500/50 transition-colors",children:[e.jsx(m.icon,{size:14,className:"text-purple-400"}),e.jsx("span",{className:"text-xs font-medium text-white/80",children:m.label})]},u))}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4",children:[a.map(m=>e.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${m.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[85%] rounded-2xl p-4 ${m.role==="user"?"bg-primary text-black rounded-br-sm":"bg-[#1a1a1a] border border-white/5 text-white rounded-bl-sm"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:m.content})})},m.id)),o&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-[#1a1a1a] border border-white/5 rounded-2xl rounded-bl-sm p-4",children:e.jsx(ve,{size:20,className:"text-purple-400 animate-spin"})})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"w-12 h-12 bg-[#1a1a1a] border border-white/10 rounded-xl flex items-center justify-center text-white/40 hover:text-white hover:border-purple-500/50 transition-colors",children:e.jsx(hm,{size:20})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{value:i,onChange:m=>r(m.target.value),onKeyDown:m=>m.key==="Enter"&&f(),placeholder:"Pergunte algo ao EmprataBrain...",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl py-3 px-4 pr-12 text-white placeholder:text-white/30 focus:border-purple-500/50 outline-none transition-colors"}),e.jsx("button",{onClick:()=>f(),disabled:!i.trim()||o,className:"absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-purple-500 transition-colors",children:e.jsx(hd,{size:16})})]})]})]})}function Ob(){const[a,s]=k.useState("HOME"),{user:i}=Ze(),[r,o]=k.useState(null);k.useEffect(()=>{if(!i)return;const d=Et(Te(le,"users",i.uid),f=>{o(f.data()?.marketplace||{})});return()=>d()},[i]);const c=async()=>{if(!i)return;const d=!r?.isOpen;await ut(Te(le,"users",i.uid),{"marketplace.isOpen":d}),X(d?" Loja ABERTA":" Loja FECHADA")};return e.jsxs("div",{className:"min-h-screen bg-[#050505] text-white font-sans flex flex-col pb-24",children:[e.jsxs("header",{className:"px-6 pt-12 pb-4 bg-gradient-to-b from-black/80 to-transparent sticky top-0 z-50 backdrop-blur-sm flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-black italic tracking-tighter",children:["Emprata",e.jsx("span",{className:"text-primary",children:".Admin"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${r?.isOpen?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-xs font-bold text-white/60 uppercase",children:r?.isOpen?"Operao Online":"Loja Fechada"})]})]}),e.jsx("button",{onClick:c,className:`p-3 rounded-full border transition-all ${r?.isOpen?"bg-red-500/10 border-red-500/50 text-red-500":"bg-green-500/10 border-green-500/50 text-green-500"}`,children:e.jsx(ud,{size:20})})]}),e.jsx("main",{className:"flex-1 px-4 relative",children:e.jsxs(Be,{mode:"wait",children:[a==="HOME"&&e.jsx(Ib,{},"home"),a==="MENU"&&e.jsx(Mb,{},"menu"),a==="FINANCE"&&e.jsx(Rb,{},"finance"),a==="BRAIN"&&e.jsx(Lb,{},"brain")]})}),e.jsxs("nav",{className:"fixed bottom-6 left-6 right-6 h-20 bg-[#121212]/90 backdrop-blur-xl border border-white/10 rounded-[2rem] shadow-[0_10px_40px_rgba(0,0,0,0.5)] flex justify-around items-center z-50 px-2",children:[e.jsx(Da,{active:a==="HOME",onClick:()=>s("HOME"),icon:Fs,label:"Loja"}),e.jsx(Da,{active:a==="MENU",onClick:()=>s("MENU"),icon:id,label:"Cardpio"}),e.jsx("button",{onClick:()=>s("BRAIN"),className:`relative -top-6 w-16 h-16 rounded-full flex items-center justify-center border-4 border-[#050505] shadow-lg transition-all ${a==="BRAIN"?"bg-purple-600 scale-110":"bg-[#1a1a1a]"}`,children:e.jsx(Vs,{size:28,className:a==="BRAIN"?"text-white":"text-purple-400"})}),e.jsx(Da,{active:a==="FINANCE",onClick:()=>s("FINANCE"),icon:Us,label:"Caixa"}),e.jsx(Da,{active:!1,onClick:()=>X("Notificaes em breve"),icon:$r,label:"Avisos"})]})]})}function Da({active:a,onClick:s,icon:i,label:r}){return e.jsxs("button",{onClick:s,className:`flex flex-col items-center gap-1 transition-all ${a?"text-white scale-110":"text-white/30"}`,children:[e.jsx(i,{size:24,strokeWidth:a?2.5:2}),e.jsx("span",{className:"text-[9px] font-bold",children:r})]})}function Db(){const[a,s]=k.useState([]),[i,r]=k.useState([]),[o,c]=k.useState(""),[d,f]=k.useState(""),[m,u]=k.useState(!0),[x,h]=k.useState(!1),[g,b]=k.useState(null);k.useEffect(()=>{if(!He.currentUser)return;const S=We(ze(le,"products"),Ie("restaurantId","==",He.currentUser.uid)),R=Et(S,$=>{const W=$.docs.map(ae=>({id:ae.id,...ae.data()}));s(W),u(!1)});return()=>R()},[]);const w=[...new Set(a.map(S=>S.category||"Geral"))],j=a.filter(S=>{const R=S.name.toLowerCase().includes(o.toLowerCase()),$=!g||(S.category||"Geral")===g;return R&&$}),C=k.useCallback(S=>{if(S.trackStock&&S.stock!==void 0&&(i.find(W=>W.id===S.id)?.quantity||0)>=S.stock){X.error(`Estoque mximo: ${S.stock}`);return}r(R=>R.find(W=>W.id===S.id)?R.map(W=>W.id===S.id?{...W,quantity:W.quantity+1}:W):[...R,{...S,quantity:1}]),new Audio("/sounds/beep.mp3").play().catch(()=>{})},[i]),A=(S,R)=>{r($=>$.map(W=>{if(W.id!==S)return W;const ae=W.quantity+R;return ae<=0?W:W.trackStock&&W.stock!==void 0&&ae>W.stock?(X.error(`Estoque mximo: ${W.stock}`),W):{...W,quantity:ae}}).filter(W=>W.quantity>0))},E=S=>{r(R=>R.filter($=>$.id!==S))},_=i.reduce((S,R)=>S+R.price*R.quantity,0),I=async S=>{if(i.length===0){X.error("Carrinho vazio");return}h(!0);try{const R={restaurantId:He.currentUser?.uid,source:"POS",customer:{name:d||"Cliente Balco",uid:"walk-in"},items:i.map($=>({id:$.id,name:$.name,price:$.price,quantity:$.quantity})),total:_,status:"PREPARING",paymentMethod:S,paymentStatus:"paid",isPaid:!0,createdAt:xt(),deliveryPin:Math.floor(1e3+Math.random()*9e3).toString()};await pn(ze(le,"orders"),R),X.success(" Pedido enviado para cozinha!",{description:`Total: ${Rt(_)}`}),r([]),f("")}catch(R){console.error("[POS] Order error:",R),X.error("Erro ao criar pedido")}finally{h(!1)}};return k.useEffect(()=>{const S=R=>{R.key==="F2"&&document.getElementById("pos-search")?.focus(),R.key==="F4"&&i.length>0&&I("CARD"),R.key==="F5"&&i.length>0&&I("CASH")};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[i]),m?e.jsx("div",{className:"h-screen bg-[#121212] flex items-center justify-center",children:e.jsx(ve,{className:"w-10 h-10 text-primary animate-spin"})}):e.jsxs("div",{className:"flex h-screen bg-[#121212] text-white overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col border-r border-white/10",children:[e.jsxs("div",{className:"p-4 bg-[#1a1a1a] border-b border-white/10",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/40",size:20}),e.jsx("input",{id:"pos-search",autoFocus:!0,value:o,onChange:S=>c(S.target.value),placeholder:"Buscar produto (F2)...",className:"w-full bg-[#0a0a0a] p-4 pl-12 rounded-xl text-lg font-bold border border-white/10 focus:border-primary outline-none transition-colors"})]}),e.jsxs("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1",children:[e.jsx("button",{onClick:()=>b(null),className:`px-4 py-2 rounded-full text-xs font-bold uppercase whitespace-nowrap transition-colors ${g?"bg-white/5 text-white/60 hover:bg-white/10":"bg-primary text-black"}`,children:"Todos"}),w.map(S=>e.jsx("button",{onClick:()=>b(S),className:`px-4 py-2 rounded-full text-xs font-bold uppercase whitespace-nowrap transition-colors ${g===S?"bg-primary text-black":"bg-white/5 text-white/60 hover:bg-white/10"}`,children:S},S))]})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[e.jsx("div",{className:"grid grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3",children:j.map(S=>{const R=S.trackStock&&S.stock!==void 0&&S.stock<5,$=S.trackStock&&S.stock===0;return e.jsxs(Q.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>!$&&C(S),disabled:$,className:`bg-[#1a1a1a] p-4 rounded-xl border transition-all text-left group relative overflow-hidden ${$?"border-red-500/30 opacity-50 cursor-not-allowed":"border-white/5 hover:border-primary/50"}`,children:[S.imageUrl&&e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("img",{src:S.imageUrl,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"font-bold truncate text-sm",children:S.name}),e.jsx("p",{className:"text-primary font-mono font-bold mt-2 text-lg",children:Rt(S.price)}),S.trackStock&&e.jsxs("div",{className:`flex items-center gap-1 mt-2 text-[10px] font-bold ${$?"text-red-400":R?"text-yellow-400":"text-white/30"}`,children:[e.jsx(Bs,{size:10}),$?"ESGOTADO":`${S.stock} em estoque`]})]}),e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-black p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($t,{size:14})})]},S.id)})}),j.length===0&&e.jsxs("div",{className:"text-center py-20 text-white/30",children:[e.jsx(Bs,{size:48,className:"mx-auto mb-4 opacity-30"}),e.jsx("p",{children:"Nenhum produto encontrado"})]})]})]}),e.jsxs("div",{className:"w-[420px] bg-[#0a0a0a] flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-white/10 bg-[#1a1a1a]",children:e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30",size:18}),e.jsx("input",{value:d,onChange:S=>f(S.target.value),placeholder:"Nome do Cliente (Opcional)",className:"w-full bg-black/50 p-3 pl-10 rounded-lg border border-white/10 text-white outline-none focus:border-primary/50 transition-colors"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[e.jsx(Be,{mode:"popLayout",children:i.map(S=>e.jsxs(Q.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},className:"flex justify-between items-center bg-white/5 p-3 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex-1 min-w-0 mr-3",children:[e.jsx("p",{className:"font-bold text-sm truncate",children:S.name}),e.jsxs("p",{className:"text-xs text-white/40",children:[Rt(S.price)," cada"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>A(S.id,-1),className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center hover:bg-white/20 transition-colors",children:e.jsx(Yr,{size:14})}),e.jsx("span",{className:"font-mono font-bold w-8 text-center",children:S.quantity}),e.jsx("button",{onClick:()=>A(S.id,1),className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center hover:bg-white/20 transition-colors",children:e.jsx($t,{size:14})}),e.jsx("button",{onClick:()=>E(S.id),className:"w-8 h-8 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg flex items-center justify-center transition-colors",children:e.jsx($i,{size:14})})]})]},S.id))}),i.length===0&&e.jsxs("div",{className:"text-center py-16 text-white/20",children:[e.jsx(Bs,{size:40,className:"mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-sm",children:"Carrinho vazio"}),e.jsx("p",{className:"text-xs mt-1",children:"Clique nos produtos para adicionar"})]})]}),e.jsxs("div",{className:"p-4 bg-[#1a1a1a] border-t border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/40 text-xs font-bold uppercase",children:"Total"}),e.jsxs("p",{className:"text-xs text-white/30",children:[i.length," ",i.length===1?"item":"itens"]})]}),e.jsx("span",{className:"text-4xl font-black text-green-400",children:Rt(_)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>I("CARD"),disabled:x||i.length===0,className:"bg-blue-600 hover:bg-blue-500 disabled:opacity-30 disabled:cursor-not-allowed py-4 rounded-xl font-bold flex flex-col items-center justify-center gap-1 transition-colors",children:[e.jsx(Ds,{size:20}),e.jsx("span",{className:"text-xs",children:"Carto"}),e.jsx("span",{className:"text-[8px] text-white/50",children:"F4"})]}),e.jsxs("button",{onClick:()=>I("CASH"),disabled:x||i.length===0,className:"bg-green-600 hover:bg-green-500 disabled:opacity-30 disabled:cursor-not-allowed py-4 rounded-xl font-bold flex flex-col items-center justify-center gap-1 transition-colors",children:[e.jsx(Zr,{size:20}),e.jsx("span",{className:"text-xs",children:"Dinheiro"}),e.jsx("span",{className:"text-[8px] text-white/50",children:"F5"})]}),e.jsxs("button",{onClick:()=>I("PIX"),disabled:x||i.length===0,className:"bg-purple-600 hover:bg-purple-500 disabled:opacity-30 disabled:cursor-not-allowed py-4 rounded-xl font-bold flex flex-col items-center justify-center gap-1 transition-colors",children:[e.jsx(_i,{size:20}),e.jsx("span",{className:"text-xs",children:"PIX"})]})]}),x&&e.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsx(ve,{className:"w-10 h-10 animate-spin text-primary"})})]})]})]})}function jr({children:a}){const{user:s,loading:i}=Ze();return i?e.jsxs("div",{className:"fixed inset-0 h-screen w-screen bg-[#0a0a0a] flex items-center justify-center z-50",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h1",{className:"text-4xl font-black italic tracking-tight",children:["Emprata",e.jsx("span",{className:"text-primary",children:".ai"})]})}),e.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-white/10 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-2 bg-primary/20 rounded-full blur-md animate-pulse"})]}),e.jsx("p",{className:"text-white/50 font-bold text-sm uppercase tracking-widest",children:"Carregando Emprata AI..."}),e.jsx("p",{className:"text-white/20 font-medium text-xs mt-4",children:"Conectando ao servidor"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-primary/5 via-transparent to-transparent pointer-events-none"})]}):s?e.jsx(e.Fragment,{children:a}):(console.log(" [ProtectedRoute] No user, redirecting to /auth"),e.jsx(Gi,{to:"/auth",replace:!0}))}function Nr({feature:a,children:s,redirectTo:i="/subscription"}){const{checkAccess:r,isLoading:o}=fn(),c=eo(),d=k.useRef(!1),f=r(a);return k.useEffect(()=>{if(!f&&!o&&!d.current){const m=Wi(a);X.error("Acesso Negado",{description:`Este recurso requer o plano ${yi[m].label}`,duration:5e3}),d.current=!0}},[f,o,a]),k.useEffect(()=>{d.current=!1},[c.pathname]),o?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0a]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):f?s:e.jsx(Gi,{to:i,state:{from:c},replace:!0})}function Bb(){const{user:a,loading:s}=Ze(),i=localStorage.getItem("emprata_mode");return s?null:a?i==="OWNER"?e.jsx(Gi,{to:"/dashboard",replace:!0}):e.jsx(Gi,{to:"/delivery",replace:!0}):e.jsx(Cf,{})}function zb(){return e.jsxs(vm,{children:[e.jsx(df,{position:"top-center",richColors:!0,toastOptions:{style:{background:"#18181b",border:"1px solid rgba(255,255,255,0.1)",color:"#fff"}}}),e.jsxs(bm,{children:[e.jsx(Me,{path:"/",element:e.jsx(Bb,{})}),e.jsx(Me,{path:"/auth",element:e.jsx(Tf,{})}),e.jsx(Me,{path:"/menu/:slug",element:e.jsx(fc,{})}),e.jsx(Me,{path:"/menu/:slug/table/:tableNum",element:e.jsx(fc,{})}),e.jsx(Me,{path:"/privacy",element:e.jsx($x,{})}),e.jsx(Me,{path:"/terms",element:e.jsx(Gx,{})}),e.jsx(Me,{path:"/track/:orderId",element:e.jsx(gb,{})}),e.jsx(Me,{path:"/kitchen-mode",element:e.jsx(kc,{})}),e.jsx(Me,{path:"/driver",element:e.jsx(vb,{})}),e.jsx(Me,{path:"/waiter",element:e.jsx(Nb,{})}),e.jsx(Me,{path:"/waiter-login",element:e.jsx(kb,{})}),e.jsx(Me,{path:"/staff-login",element:e.jsx(Cb,{})}),e.jsx(Me,{path:"/apps",element:e.jsx(Eb,{})}),e.jsx(Me,{path:"/owner",element:e.jsx(jr,{children:e.jsx(Ob,{})})}),e.jsx(Me,{path:"/pos",element:e.jsx(jr,{children:e.jsx(Db,{})})}),e.jsxs(Me,{element:e.jsx(jr,{children:e.jsx(jf,{})}),children:[e.jsx(Me,{path:"/dashboard",element:e.jsx(r0,{})}),e.jsx(Me,{path:"/menu-builder",element:e.jsx(rv,{})}),e.jsx(Me,{path:"/kitchen-display",element:e.jsx(kc,{})}),e.jsx(Me,{path:"/staff",element:e.jsx(jv,{})}),e.jsx(Me,{path:"/store-settings",element:e.jsx(Mv,{})}),e.jsx(Me,{path:"/profile",element:e.jsx(kv,{})}),e.jsx(Me,{path:"/studio",element:e.jsx(_v,{})}),e.jsx(Me,{path:"/subscription",element:e.jsx(Iv,{})}),e.jsx(Me,{path:"/dispatch",element:e.jsx(Nr,{feature:"driver_app_access",children:e.jsx(C0,{})})}),e.jsx(Me,{path:"/intelligence",element:e.jsx(Nr,{feature:"ai_insights",children:e.jsx(Pv,{})})}),e.jsx(Me,{path:"/finance",element:e.jsx(Nr,{feature:"financial_overview",children:e.jsx(Cv,{})})})]}),e.jsxs(Me,{element:e.jsx(Nf,{}),children:[e.jsx(Me,{path:"/delivery",element:e.jsx(Vc,{})}),e.jsx(Me,{path:"/search",element:e.jsx(Vc,{})}),e.jsx(Me,{path:"/me",element:e.jsx(ed,{})}),e.jsx(Me,{path:"/me/orders",element:e.jsx(ed,{})})]}),e.jsx(Me,{path:"*",element:e.jsx(Wx,{})})]})]})}function Fb(){const[a,s]=k.useState(!0),[i,r]=k.useState(!1);k.useEffect(()=>{s(navigator.onLine),r(!navigator.onLine);const c=()=>{s(!0),setTimeout(()=>r(!1),3e3)},d=()=>{s(!1),r(!0)};return window.addEventListener("online",c),window.addEventListener("offline",d),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}},[]);const o=()=>{window.location.reload()};return e.jsx(Be,{children:i&&e.jsx(Q.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:`fixed top-0 left-0 right-0 z-[100] px-4 py-3 ${a?"bg-green-500":"bg-red-500"}`,children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:a?e.jsxs(e.Fragment,{children:[e.jsx(Q.div,{initial:{scale:0},animate:{scale:1},className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center",children:""}),e.jsx("span",{className:"font-bold text-sm",children:"Conexo restaurada! "})]}):e.jsxs(e.Fragment,{children:[e.jsx(mm,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-sm block",children:"Voc est Offline"}),e.jsx("span",{className:"text-xs text-white/80",children:"Modo de Contingncia Ativado. Algumas funes podem no funcionar."})]})]})}),!a&&e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold transition-colors",children:[e.jsx(Xr,{className:"w-4 h-4"}),"Tentar Novamente"]})]})})})}Um.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(kd,{children:e.jsxs(mf,{children:[e.jsx(Fb,{}),e.jsx(zb,{})]})})}));
